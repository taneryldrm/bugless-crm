var zV=Object.defineProperty;var VV=(t,e,n)=>e in t?zV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ko=(t,e,n)=>VV(t,typeof e!="symbol"?e+"":e,n);function mR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Gp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var gR={exports:{}},cy={},bR={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp=Symbol.for("react.element"),WV=Symbol.for("react.portal"),qV=Symbol.for("react.fragment"),GV=Symbol.for("react.strict_mode"),YV=Symbol.for("react.profiler"),KV=Symbol.for("react.provider"),JV=Symbol.for("react.context"),QV=Symbol.for("react.forward_ref"),XV=Symbol.for("react.suspense"),ZV=Symbol.for("react.memo"),eW=Symbol.for("react.lazy"),kA=Symbol.iterator;function tW(t){return t===null||typeof t!="object"?null:(t=kA&&t[kA]||t["@@iterator"],typeof t=="function"?t:null)}var xR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yR=Object.assign,vR={};function Qd(t,e,n){this.props=t,this.context=e,this.refs=vR,this.updater=n||xR}Qd.prototype.isReactComponent={};Qd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wR(){}wR.prototype=Qd.prototype;function qC(t,e,n){this.props=t,this.context=e,this.refs=vR,this.updater=n||xR}var GC=qC.prototype=new wR;GC.constructor=qC;yR(GC,Qd.prototype);GC.isPureReactComponent=!0;var EA=Array.isArray,kR=Object.prototype.hasOwnProperty,YC={current:null},ER={key:!0,ref:!0,__self:!0,__source:!0};function CR(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)kR.call(e,r)&&!ER.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Yp,type:t,key:i,ref:o,props:s,_owner:YC.current}}function nW(t,e){return{$$typeof:Yp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function KC(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yp}function rW(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var CA=/\/+/g;function dv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rW(""+t.key):e.toString(36)}function Z0(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yp:case WV:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+dv(o,0):r,EA(s)?(n="",t!=null&&(n=t.replace(CA,"$&/")+"/"),Z0(s,e,n,"",function(c){return c})):s!=null&&(KC(s)&&(s=nW(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(CA,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",EA(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+dv(i,a);o+=Z0(i,e,n,l,s)}else if(l=tW(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+dv(i,a++),o+=Z0(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dm(t,e,n){if(t==null)return t;var r=[],s=0;return Z0(t,r,"","",function(i){return e.call(n,i,s++)}),r}function sW(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yr={current:null},eg={transition:null},iW={ReactCurrentDispatcher:yr,ReactCurrentBatchConfig:eg,ReactCurrentOwner:YC};function SR(){throw Error("act(...) is not supported in production builds of React.")}Ye.Children={map:Dm,forEach:function(t,e,n){Dm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dm(t,function(){e++}),e},toArray:function(t){return Dm(t,function(e){return e})||[]},only:function(t){if(!KC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ye.Component=Qd;Ye.Fragment=qV;Ye.Profiler=YV;Ye.PureComponent=qC;Ye.StrictMode=GV;Ye.Suspense=XV;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iW;Ye.act=SR;Ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=YC.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)kR.call(e,l)&&!ER.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Yp,type:t.type,key:s,ref:i,props:r,_owner:o}};Ye.createContext=function(t){return t={$$typeof:JV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KV,_context:t},t.Consumer=t};Ye.createElement=CR;Ye.createFactory=function(t){var e=CR.bind(null,t);return e.type=t,e};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(t){return{$$typeof:QV,render:t}};Ye.isValidElement=KC;Ye.lazy=function(t){return{$$typeof:eW,_payload:{_status:-1,_result:t},_init:sW}};Ye.memo=function(t,e){return{$$typeof:ZV,type:t,compare:e===void 0?null:e}};Ye.startTransition=function(t){var e=eg.transition;eg.transition={};try{t()}finally{eg.transition=e}};Ye.unstable_act=SR;Ye.useCallback=function(t,e){return yr.current.useCallback(t,e)};Ye.useContext=function(t){return yr.current.useContext(t)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(t){return yr.current.useDeferredValue(t)};Ye.useEffect=function(t,e){return yr.current.useEffect(t,e)};Ye.useId=function(){return yr.current.useId()};Ye.useImperativeHandle=function(t,e,n){return yr.current.useImperativeHandle(t,e,n)};Ye.useInsertionEffect=function(t,e){return yr.current.useInsertionEffect(t,e)};Ye.useLayoutEffect=function(t,e){return yr.current.useLayoutEffect(t,e)};Ye.useMemo=function(t,e){return yr.current.useMemo(t,e)};Ye.useReducer=function(t,e,n){return yr.current.useReducer(t,e,n)};Ye.useRef=function(t){return yr.current.useRef(t)};Ye.useState=function(t){return yr.current.useState(t)};Ye.useSyncExternalStore=function(t,e,n){return yr.current.useSyncExternalStore(t,e,n)};Ye.useTransition=function(){return yr.current.useTransition()};Ye.version="18.3.1";bR.exports=Ye;var y=bR.exports;const lt=qp(y),Kp=mR({__proto__:null,default:lt},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oW=y,aW=Symbol.for("react.element"),lW=Symbol.for("react.fragment"),cW=Object.prototype.hasOwnProperty,uW=oW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dW={key:!0,ref:!0,__self:!0,__source:!0};function TR(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cW.call(e,r)&&!dW.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:aW,type:t,key:i,ref:o,props:s,_owner:uW.current}}cy.Fragment=lW;cy.jsx=TR;cy.jsxs=TR;gR.exports=cy;var u=gR.exports,Hk={},NR={exports:{}},ms={},_R={exports:{}},AR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,z){var j=A.length;A.push(z);e:for(;0<j;){var U=j-1>>>1,H=A[U];if(0<s(H,z))A[U]=z,A[j]=H,j=U;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var z=A[0],j=A.pop();if(j!==z){A[0]=j;e:for(var U=0,H=A.length,I=H>>>1;U<I;){var q=2*(U+1)-1,G=A[q],Z=q+1,te=A[Z];if(0>s(G,j))Z<H&&0>s(te,G)?(A[U]=te,A[Z]=j,U=Z):(A[U]=G,A[q]=j,U=q);else if(Z<H&&0>s(te,j))A[U]=te,A[Z]=j,U=Z;else break e}}return z}function s(A,z){var j=A.sortIndex-z.sortIndex;return j!==0?j:A.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=A)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function S(A){if(g=!1,w(A),!m)if(n(l)!==null)m=!0,$(E);else{var z=n(c);z!==null&&V(S,z.startTime-A)}}function E(A,z){m=!1,g&&(g=!1,b(_),_=-1),p=!0;var j=f;try{for(w(z),h=n(l);h!==null&&(!(h.expirationTime>z)||A&&!R());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var H=U(h.expirationTime<=z);z=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&r(l),w(z)}else r(l);h=n(l)}if(h!==null)var I=!0;else{var q=n(c);q!==null&&V(S,q.startTime-z),I=!1}return I}finally{h=null,f=j,p=!1}}var C=!1,T=null,_=-1,O=5,N=-1;function R(){return!(t.unstable_now()-N<O)}function M(){if(T!==null){var A=t.unstable_now();N=A;var z=!0;try{z=T(!0,A)}finally{z?W():(C=!1,T=null)}}else C=!1}var W;if(typeof v=="function")W=function(){v(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,B=D.port2;D.port1.onmessage=M,W=function(){B.postMessage(null)}}else W=function(){x(M,0)};function $(A){T=A,C||(C=!0,W())}function V(A,z){_=x(function(){A(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,$(E))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var j=f;f=z;try{return A()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,z){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var j=f;f=A;try{return z()}finally{f=j}},t.unstable_scheduleCallback=function(A,z,j){var U=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?U+j:U):j=U,A){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=j+H,A={id:d++,callback:z,priorityLevel:A,startTime:j,expirationTime:H,sortIndex:-1},j>U?(A.sortIndex=j,e(c,A),n(l)===null&&A===n(c)&&(g?(b(_),_=-1):g=!0,V(S,j-U))):(A.sortIndex=H,e(l,A),m||p||(m=!0,$(E))),A},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(A){var z=f;return function(){var j=f;f=z;try{return A.apply(this,arguments)}finally{f=j}}}})(AR);_R.exports=AR;var hW=_R.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fW=y,cs=hW;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jR=new Set,Uf={};function Wc(t,e){yd(t,e),yd(t+"Capture",e)}function yd(t,e){for(Uf[t]=e,t=0;t<e.length;t++)jR.add(e[t])}var Ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uk=Object.prototype.hasOwnProperty,pW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,SA={},TA={};function mW(t){return Uk.call(TA,t)?!0:Uk.call(SA,t)?!1:pW.test(t)?TA[t]=!0:(SA[t]=!0,!1)}function gW(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bW(t,e,n,r){if(e===null||typeof e>"u"||gW(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fn[t]=new vr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fn[e]=new vr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fn[t]=new vr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fn[t]=new vr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fn[t]=new vr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fn[t]=new vr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fn[t]=new vr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fn[t]=new vr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fn[t]=new vr(t,5,!1,t.toLowerCase(),null,!1,!1)});var JC=/[\-:]([a-z])/g;function QC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(JC,QC);Fn[e]=new vr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(JC,QC);Fn[e]=new vr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(JC,QC);Fn[e]=new vr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fn[t]=new vr(t,1,!1,t.toLowerCase(),null,!1,!1)});Fn.xlinkHref=new vr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fn[t]=new vr(t,1,!1,t.toLowerCase(),null,!0,!0)});function XC(t,e,n,r){var s=Fn.hasOwnProperty(e)?Fn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bW(e,n,s,r)&&(n=null),r||s===null?mW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var na=fW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lm=Symbol.for("react.element"),Ru=Symbol.for("react.portal"),Pu=Symbol.for("react.fragment"),ZC=Symbol.for("react.strict_mode"),zk=Symbol.for("react.profiler"),OR=Symbol.for("react.provider"),IR=Symbol.for("react.context"),eS=Symbol.for("react.forward_ref"),Vk=Symbol.for("react.suspense"),Wk=Symbol.for("react.suspense_list"),tS=Symbol.for("react.memo"),ka=Symbol.for("react.lazy"),MR=Symbol.for("react.offscreen"),NA=Symbol.iterator;function Nh(t){return t===null||typeof t!="object"?null:(t=NA&&t[NA]||t["@@iterator"],typeof t=="function"?t:null)}var Vt=Object.assign,hv;function Qh(t){if(hv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hv=e&&e[1]||""}return`
`+hv+t}var fv=!1;function pv(t,e){if(!t||fv)return"";fv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{fv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qh(t):""}function xW(t){switch(t.tag){case 5:return Qh(t.type);case 16:return Qh("Lazy");case 13:return Qh("Suspense");case 19:return Qh("SuspenseList");case 0:case 2:case 15:return t=pv(t.type,!1),t;case 11:return t=pv(t.type.render,!1),t;case 1:return t=pv(t.type,!0),t;default:return""}}function qk(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pu:return"Fragment";case Ru:return"Portal";case zk:return"Profiler";case ZC:return"StrictMode";case Vk:return"Suspense";case Wk:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case IR:return(t.displayName||"Context")+".Consumer";case OR:return(t._context.displayName||"Context")+".Provider";case eS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tS:return e=t.displayName||null,e!==null?e:qk(t.type)||"Memo";case ka:e=t._payload,t=t._init;try{return qk(t(e))}catch{}}return null}function yW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qk(e);case 8:return e===ZC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vW(t){var e=RR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bm(t){t._valueTracker||(t._valueTracker=vW(t))}function PR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=RR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gk(t,e){var n=e.checked;return Vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _A(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DR(t,e){e=e.checked,e!=null&&XC(t,"checked",e,!1)}function Yk(t,e){DR(t,e);var n=sl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kk(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kk(t,e.type,sl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function AA(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kk(t,e,n){(e!=="number"||Hg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xh=Array.isArray;function Ku(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sl(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Jk(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jA(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(Xh(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sl(n)}}function LR(t,e){var n=sl(e.value),r=sl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function OA(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function BR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qk(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?BR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $m,$R=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($m=$m||document.createElement("div"),$m.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$m.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var df={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wW=["Webkit","ms","Moz","O"];Object.keys(df).forEach(function(t){wW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),df[e]=df[t]})});function FR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||df.hasOwnProperty(t)&&df[t]?(""+e).trim():e+"px"}function HR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=FR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var kW=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xk(t,e){if(e){if(kW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function Zk(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eE=null;function nS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tE=null,Ju=null,Qu=null;function IA(t){if(t=Xp(t)){if(typeof tE!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=py(e),tE(t.stateNode,t.type,e))}}function UR(t){Ju?Qu?Qu.push(t):Qu=[t]:Ju=t}function zR(){if(Ju){var t=Ju,e=Qu;if(Qu=Ju=null,IA(t),e)for(t=0;t<e.length;t++)IA(e[t])}}function VR(t,e){return t(e)}function WR(){}var mv=!1;function qR(t,e,n){if(mv)return t(e,n);mv=!0;try{return VR(t,e,n)}finally{mv=!1,(Ju!==null||Qu!==null)&&(WR(),zR())}}function Vf(t,e){var n=t.stateNode;if(n===null)return null;var r=py(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var nE=!1;if(Ko)try{var _h={};Object.defineProperty(_h,"passive",{get:function(){nE=!0}}),window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{nE=!1}function EW(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var hf=!1,Ug=null,zg=!1,rE=null,CW={onError:function(t){hf=!0,Ug=t}};function SW(t,e,n,r,s,i,o,a,l){hf=!1,Ug=null,EW.apply(CW,arguments)}function TW(t,e,n,r,s,i,o,a,l){if(SW.apply(this,arguments),hf){if(hf){var c=Ug;hf=!1,Ug=null}else throw Error(ce(198));zg||(zg=!0,rE=c)}}function qc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function GR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function MA(t){if(qc(t)!==t)throw Error(ce(188))}function NW(t){var e=t.alternate;if(!e){if(e=qc(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return MA(s),t;if(i===r)return MA(s),e;i=i.sibling}throw Error(ce(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function YR(t){return t=NW(t),t!==null?KR(t):null}function KR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=KR(t);if(e!==null)return e;t=t.sibling}return null}var JR=cs.unstable_scheduleCallback,RA=cs.unstable_cancelCallback,_W=cs.unstable_shouldYield,AW=cs.unstable_requestPaint,Qt=cs.unstable_now,jW=cs.unstable_getCurrentPriorityLevel,rS=cs.unstable_ImmediatePriority,QR=cs.unstable_UserBlockingPriority,Vg=cs.unstable_NormalPriority,OW=cs.unstable_LowPriority,XR=cs.unstable_IdlePriority,uy=null,Yi=null;function IW(t){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(uy,t,void 0,(t.current.flags&128)===128)}catch{}}var li=Math.clz32?Math.clz32:PW,MW=Math.log,RW=Math.LN2;function PW(t){return t>>>=0,t===0?32:31-(MW(t)/RW|0)|0}var Fm=64,Hm=4194304;function Zh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Zh(a):(i&=o,i!==0&&(r=Zh(i)))}else o=n&~s,o!==0?r=Zh(o):i!==0&&(r=Zh(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-li(e),s=1<<n,r|=t[n],e&=~s;return r}function DW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LW(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-li(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=DW(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function sE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZR(){var t=Fm;return Fm<<=1,!(Fm&4194240)&&(Fm=64),t}function gv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-li(e),t[e]=n}function BW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-li(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-li(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ft=0;function eP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tP,iS,nP,rP,sP,iE=!1,Um=[],Wa=null,qa=null,Ga=null,Wf=new Map,qf=new Map,Na=[],$W="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PA(t,e){switch(t){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":qa=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Wf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qf.delete(e.pointerId)}}function Ah(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xp(e),e!==null&&iS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function FW(t,e,n,r,s){switch(e){case"focusin":return Wa=Ah(Wa,t,e,n,r,s),!0;case"dragenter":return qa=Ah(qa,t,e,n,r,s),!0;case"mouseover":return Ga=Ah(Ga,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wf.set(i,Ah(Wf.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qf.set(i,Ah(qf.get(i)||null,t,e,n,r,s)),!0}return!1}function iP(t){var e=ec(t.target);if(e!==null){var n=qc(e);if(n!==null){if(e=n.tag,e===13){if(e=GR(n),e!==null){t.blockedOn=e,sP(t.priority,function(){nP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);eE=r,n.target.dispatchEvent(r),eE=null}else return e=Xp(n),e!==null&&iS(e),t.blockedOn=n,!1;e.shift()}return!0}function DA(t,e,n){tg(t)&&n.delete(e)}function HW(){iE=!1,Wa!==null&&tg(Wa)&&(Wa=null),qa!==null&&tg(qa)&&(qa=null),Ga!==null&&tg(Ga)&&(Ga=null),Wf.forEach(DA),qf.forEach(DA)}function jh(t,e){t.blockedOn===e&&(t.blockedOn=null,iE||(iE=!0,cs.unstable_scheduleCallback(cs.unstable_NormalPriority,HW)))}function Gf(t){function e(s){return jh(s,t)}if(0<Um.length){jh(Um[0],t);for(var n=1;n<Um.length;n++){var r=Um[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wa!==null&&jh(Wa,t),qa!==null&&jh(qa,t),Ga!==null&&jh(Ga,t),Wf.forEach(e),qf.forEach(e),n=0;n<Na.length;n++)r=Na[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Na.length&&(n=Na[0],n.blockedOn===null);)iP(n),n.blockedOn===null&&Na.shift()}var Xu=na.ReactCurrentBatchConfig,qg=!0;function UW(t,e,n,r){var s=ft,i=Xu.transition;Xu.transition=null;try{ft=1,oS(t,e,n,r)}finally{ft=s,Xu.transition=i}}function zW(t,e,n,r){var s=ft,i=Xu.transition;Xu.transition=null;try{ft=4,oS(t,e,n,r)}finally{ft=s,Xu.transition=i}}function oS(t,e,n,r){if(qg){var s=oE(t,e,n,r);if(s===null)Tv(t,e,r,Gg,n),PA(t,r);else if(FW(s,t,e,n,r))r.stopPropagation();else if(PA(t,r),e&4&&-1<$W.indexOf(t)){for(;s!==null;){var i=Xp(s);if(i!==null&&tP(i),i=oE(t,e,n,r),i===null&&Tv(t,e,r,Gg,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Tv(t,e,r,null,n)}}var Gg=null;function oE(t,e,n,r){if(Gg=null,t=nS(r),t=ec(t),t!==null)if(e=qc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=GR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gg=t,null}function oP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jW()){case rS:return 1;case QR:return 4;case Vg:case OW:return 16;case XR:return 536870912;default:return 16}default:return 16}}var Pa=null,aS=null,ng=null;function aP(){if(ng)return ng;var t,e=aS,n=e.length,r,s="value"in Pa?Pa.value:Pa.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ng=s.slice(t,1<r?1-r:void 0)}function rg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zm(){return!0}function LA(){return!1}function gs(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zm:LA,this.isPropagationStopped=LA,this}return Vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zm)},persist:function(){},isPersistent:zm}),e}var Xd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lS=gs(Xd),Qp=Vt({},Xd,{view:0,detail:0}),VW=gs(Qp),bv,xv,Oh,dy=Vt({},Qp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oh&&(Oh&&t.type==="mousemove"?(bv=t.screenX-Oh.screenX,xv=t.screenY-Oh.screenY):xv=bv=0,Oh=t),bv)},movementY:function(t){return"movementY"in t?t.movementY:xv}}),BA=gs(dy),WW=Vt({},dy,{dataTransfer:0}),qW=gs(WW),GW=Vt({},Qp,{relatedTarget:0}),yv=gs(GW),YW=Vt({},Xd,{animationName:0,elapsedTime:0,pseudoElement:0}),KW=gs(YW),JW=Vt({},Xd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QW=gs(JW),XW=Vt({},Xd,{data:0}),$A=gs(XW),ZW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tq[t])?!!e[t]:!1}function cS(){return nq}var rq=Vt({},Qp,{key:function(t){if(t.key){var e=ZW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cS,charCode:function(t){return t.type==="keypress"?rg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sq=gs(rq),iq=Vt({},dy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FA=gs(iq),oq=Vt({},Qp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cS}),aq=gs(oq),lq=Vt({},Xd,{propertyName:0,elapsedTime:0,pseudoElement:0}),cq=gs(lq),uq=Vt({},dy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dq=gs(uq),hq=[9,13,27,32],uS=Ko&&"CompositionEvent"in window,ff=null;Ko&&"documentMode"in document&&(ff=document.documentMode);var fq=Ko&&"TextEvent"in window&&!ff,lP=Ko&&(!uS||ff&&8<ff&&11>=ff),HA=" ",UA=!1;function cP(t,e){switch(t){case"keyup":return hq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Du=!1;function pq(t,e){switch(t){case"compositionend":return uP(e);case"keypress":return e.which!==32?null:(UA=!0,HA);case"textInput":return t=e.data,t===HA&&UA?null:t;default:return null}}function mq(t,e){if(Du)return t==="compositionend"||!uS&&cP(t,e)?(t=aP(),ng=aS=Pa=null,Du=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lP&&e.locale!=="ko"?null:e.data;default:return null}}var gq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gq[t.type]:e==="textarea"}function dP(t,e,n,r){UR(r),e=Yg(e,"onChange"),0<e.length&&(n=new lS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var pf=null,Yf=null;function bq(t){kP(t,0)}function hy(t){var e=$u(t);if(PR(e))return t}function xq(t,e){if(t==="change")return e}var hP=!1;if(Ko){var vv;if(Ko){var wv="oninput"in document;if(!wv){var VA=document.createElement("div");VA.setAttribute("oninput","return;"),wv=typeof VA.oninput=="function"}vv=wv}else vv=!1;hP=vv&&(!document.documentMode||9<document.documentMode)}function WA(){pf&&(pf.detachEvent("onpropertychange",fP),Yf=pf=null)}function fP(t){if(t.propertyName==="value"&&hy(Yf)){var e=[];dP(e,Yf,t,nS(t)),qR(bq,e)}}function yq(t,e,n){t==="focusin"?(WA(),pf=e,Yf=n,pf.attachEvent("onpropertychange",fP)):t==="focusout"&&WA()}function vq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hy(Yf)}function wq(t,e){if(t==="click")return hy(e)}function kq(t,e){if(t==="input"||t==="change")return hy(e)}function Eq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fi=typeof Object.is=="function"?Object.is:Eq;function Kf(t,e){if(fi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Uk.call(e,s)||!fi(t[s],e[s]))return!1}return!0}function qA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function GA(t,e){var n=qA(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qA(n)}}function pP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mP(){for(var t=window,e=Hg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hg(t.document)}return e}function dS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Cq(t){var e=mP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pP(n.ownerDocument.documentElement,n)){if(r!==null&&dS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=GA(n,i);var o=GA(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sq=Ko&&"documentMode"in document&&11>=document.documentMode,Lu=null,aE=null,mf=null,lE=!1;function YA(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lE||Lu==null||Lu!==Hg(r)||(r=Lu,"selectionStart"in r&&dS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mf&&Kf(mf,r)||(mf=r,r=Yg(aE,"onSelect"),0<r.length&&(e=new lS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Lu)))}function Vm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bu={animationend:Vm("Animation","AnimationEnd"),animationiteration:Vm("Animation","AnimationIteration"),animationstart:Vm("Animation","AnimationStart"),transitionend:Vm("Transition","TransitionEnd")},kv={},gP={};Ko&&(gP=document.createElement("div").style,"AnimationEvent"in window||(delete Bu.animationend.animation,delete Bu.animationiteration.animation,delete Bu.animationstart.animation),"TransitionEvent"in window||delete Bu.transitionend.transition);function fy(t){if(kv[t])return kv[t];if(!Bu[t])return t;var e=Bu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gP)return kv[t]=e[n];return t}var bP=fy("animationend"),xP=fy("animationiteration"),yP=fy("animationstart"),vP=fy("transitionend"),wP=new Map,KA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(t,e){wP.set(t,e),Wc(e,[t])}for(var Ev=0;Ev<KA.length;Ev++){var Cv=KA[Ev],Tq=Cv.toLowerCase(),Nq=Cv[0].toUpperCase()+Cv.slice(1);yl(Tq,"on"+Nq)}yl(bP,"onAnimationEnd");yl(xP,"onAnimationIteration");yl(yP,"onAnimationStart");yl("dblclick","onDoubleClick");yl("focusin","onFocus");yl("focusout","onBlur");yl(vP,"onTransitionEnd");yd("onMouseEnter",["mouseout","mouseover"]);yd("onMouseLeave",["mouseout","mouseover"]);yd("onPointerEnter",["pointerout","pointerover"]);yd("onPointerLeave",["pointerout","pointerover"]);Wc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ef="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_q=new Set("cancel close invalid load scroll toggle".split(" ").concat(ef));function JA(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,TW(r,e,void 0,t),t.currentTarget=null}function kP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;JA(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;JA(s,a,c),i=l}}}if(zg)throw t=rE,zg=!1,rE=null,t}function Ot(t,e){var n=e[fE];n===void 0&&(n=e[fE]=new Set);var r=t+"__bubble";n.has(r)||(EP(e,t,2,!1),n.add(r))}function Sv(t,e,n){var r=0;e&&(r|=4),EP(n,t,r,e)}var Wm="_reactListening"+Math.random().toString(36).slice(2);function Jf(t){if(!t[Wm]){t[Wm]=!0,jR.forEach(function(n){n!=="selectionchange"&&(_q.has(n)||Sv(n,!1,t),Sv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wm]||(e[Wm]=!0,Sv("selectionchange",!1,e))}}function EP(t,e,n,r){switch(oP(e)){case 1:var s=UW;break;case 4:s=zW;break;default:s=oS}n=s.bind(null,e,n,t),s=void 0,!nE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Tv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ec(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}qR(function(){var c=i,d=nS(n),h=[];e:{var f=wP.get(t);if(f!==void 0){var p=lS,m=t;switch(t){case"keypress":if(rg(n)===0)break e;case"keydown":case"keyup":p=sq;break;case"focusin":m="focus",p=yv;break;case"focusout":m="blur",p=yv;break;case"beforeblur":case"afterblur":p=yv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=BA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=qW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=aq;break;case bP:case xP:case yP:p=KW;break;case vP:p=cq;break;case"scroll":p=VW;break;case"wheel":p=dq;break;case"copy":case"cut":case"paste":p=QW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=FA}var g=(e&4)!==0,x=!g&&t==="scroll",b=g?f!==null?f+"Capture":null:f;g=[];for(var v=c,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=Vf(v,b),S!=null&&g.push(Qf(v,S,w)))),x)break;v=v.return}0<g.length&&(f=new p(f,m,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==eE&&(m=n.relatedTarget||n.fromElement)&&(ec(m)||m[Jo]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?ec(m):null,m!==null&&(x=qc(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=BA,S="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=FA,S="onPointerLeave",b="onPointerEnter",v="pointer"),x=p==null?f:$u(p),w=m==null?f:$u(m),f=new g(S,v+"leave",p,n,d),f.target=x,f.relatedTarget=w,S=null,ec(d)===c&&(g=new g(b,v+"enter",m,n,d),g.target=w,g.relatedTarget=x,S=g),x=S,p&&m)t:{for(g=p,b=m,v=0,w=g;w;w=iu(w))v++;for(w=0,S=b;S;S=iu(S))w++;for(;0<v-w;)g=iu(g),v--;for(;0<w-v;)b=iu(b),w--;for(;v--;){if(g===b||b!==null&&g===b.alternate)break t;g=iu(g),b=iu(b)}g=null}else g=null;p!==null&&QA(h,f,p,g,!1),m!==null&&x!==null&&QA(h,x,m,g,!0)}}e:{if(f=c?$u(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var E=xq;else if(zA(f))if(hP)E=kq;else{E=vq;var C=yq}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=wq);if(E&&(E=E(t,c))){dP(h,E,n,d);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Kk(f,"number",f.value)}switch(C=c?$u(c):window,t){case"focusin":(zA(C)||C.contentEditable==="true")&&(Lu=C,aE=c,mf=null);break;case"focusout":mf=aE=Lu=null;break;case"mousedown":lE=!0;break;case"contextmenu":case"mouseup":case"dragend":lE=!1,YA(h,n,d);break;case"selectionchange":if(Sq)break;case"keydown":case"keyup":YA(h,n,d)}var T;if(uS)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Du?cP(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(lP&&n.locale!=="ko"&&(Du||_!=="onCompositionStart"?_==="onCompositionEnd"&&Du&&(T=aP()):(Pa=d,aS="value"in Pa?Pa.value:Pa.textContent,Du=!0)),C=Yg(c,_),0<C.length&&(_=new $A(_,t,null,n,d),h.push({event:_,listeners:C}),T?_.data=T:(T=uP(n),T!==null&&(_.data=T)))),(T=fq?pq(t,n):mq(t,n))&&(c=Yg(c,"onBeforeInput"),0<c.length&&(d=new $A("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=T))}kP(h,e)})}function Qf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yg(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Vf(t,n),i!=null&&r.unshift(Qf(t,i,s)),i=Vf(t,e),i!=null&&r.push(Qf(t,i,s))),t=t.return}return r}function iu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function QA(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Vf(n,i),l!=null&&o.unshift(Qf(n,l,a))):s||(l=Vf(n,i),l!=null&&o.push(Qf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Aq=/\r\n?/g,jq=/\u0000|\uFFFD/g;function XA(t){return(typeof t=="string"?t:""+t).replace(Aq,`
`).replace(jq,"")}function qm(t,e,n){if(e=XA(e),XA(t)!==e&&n)throw Error(ce(425))}function Kg(){}var cE=null,uE=null;function dE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hE=typeof setTimeout=="function"?setTimeout:void 0,Oq=typeof clearTimeout=="function"?clearTimeout:void 0,ZA=typeof Promise=="function"?Promise:void 0,Iq=typeof queueMicrotask=="function"?queueMicrotask:typeof ZA<"u"?function(t){return ZA.resolve(null).then(t).catch(Mq)}:hE;function Mq(t){setTimeout(function(){throw t})}function Nv(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Gf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Gf(e)}function Ya(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function e3(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zd=Math.random().toString(36).slice(2),zi="__reactFiber$"+Zd,Xf="__reactProps$"+Zd,Jo="__reactContainer$"+Zd,fE="__reactEvents$"+Zd,Rq="__reactListeners$"+Zd,Pq="__reactHandles$"+Zd;function ec(t){var e=t[zi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jo]||n[zi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=e3(t);t!==null;){if(n=t[zi])return n;t=e3(t)}return e}t=n,n=t.parentNode}return null}function Xp(t){return t=t[zi]||t[Jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $u(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function py(t){return t[Xf]||null}var pE=[],Fu=-1;function vl(t){return{current:t}}function Rt(t){0>Fu||(t.current=pE[Fu],pE[Fu]=null,Fu--)}function St(t,e){Fu++,pE[Fu]=t.current,t.current=e}var il={},er=vl(il),Lr=vl(!1),vc=il;function vd(t,e){var n=t.type.contextTypes;if(!n)return il;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Br(t){return t=t.childContextTypes,t!=null}function Jg(){Rt(Lr),Rt(er)}function t3(t,e,n){if(er.current!==il)throw Error(ce(168));St(er,e),St(Lr,n)}function CP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ce(108,yW(t)||"Unknown",s));return Vt({},n,r)}function Qg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||il,vc=er.current,St(er,t),St(Lr,Lr.current),!0}function n3(t,e,n){var r=t.stateNode;if(!r)throw Error(ce(169));n?(t=CP(t,e,vc),r.__reactInternalMemoizedMergedChildContext=t,Rt(Lr),Rt(er),St(er,t)):Rt(Lr),St(Lr,n)}var Mo=null,my=!1,_v=!1;function SP(t){Mo===null?Mo=[t]:Mo.push(t)}function Dq(t){my=!0,SP(t)}function wl(){if(!_v&&Mo!==null){_v=!0;var t=0,e=ft;try{var n=Mo;for(ft=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mo=null,my=!1}catch(s){throw Mo!==null&&(Mo=Mo.slice(t+1)),JR(rS,wl),s}finally{ft=e,_v=!1}}return null}var Hu=[],Uu=0,Xg=null,Zg=0,Cs=[],Ss=0,wc=null,Po=1,Do="";function Vl(t,e){Hu[Uu++]=Zg,Hu[Uu++]=Xg,Xg=t,Zg=e}function TP(t,e,n){Cs[Ss++]=Po,Cs[Ss++]=Do,Cs[Ss++]=wc,wc=t;var r=Po;t=Do;var s=32-li(r)-1;r&=~(1<<s),n+=1;var i=32-li(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Po=1<<32-li(e)+s|n<<s|r,Do=i+t}else Po=1<<i|n<<s|r,Do=t}function hS(t){t.return!==null&&(Vl(t,1),TP(t,1,0))}function fS(t){for(;t===Xg;)Xg=Hu[--Uu],Hu[Uu]=null,Zg=Hu[--Uu],Hu[Uu]=null;for(;t===wc;)wc=Cs[--Ss],Cs[Ss]=null,Do=Cs[--Ss],Cs[Ss]=null,Po=Cs[--Ss],Cs[Ss]=null}var is=null,ss=null,$t=!1,ei=null;function NP(t,e){var n=Is(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function r3(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,is=t,ss=Ya(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,is=t,ss=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wc!==null?{id:Po,overflow:Do}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Is(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,is=t,ss=null,!0):!1;default:return!1}}function mE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gE(t){if($t){var e=ss;if(e){var n=e;if(!r3(t,e)){if(mE(t))throw Error(ce(418));e=Ya(n.nextSibling);var r=is;e&&r3(t,e)?NP(r,n):(t.flags=t.flags&-4097|2,$t=!1,is=t)}}else{if(mE(t))throw Error(ce(418));t.flags=t.flags&-4097|2,$t=!1,is=t}}}function s3(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;is=t}function Gm(t){if(t!==is)return!1;if(!$t)return s3(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dE(t.type,t.memoizedProps)),e&&(e=ss)){if(mE(t))throw _P(),Error(ce(418));for(;e;)NP(t,e),e=Ya(e.nextSibling)}if(s3(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ss=Ya(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ss=null}}else ss=is?Ya(t.stateNode.nextSibling):null;return!0}function _P(){for(var t=ss;t;)t=Ya(t.nextSibling)}function wd(){ss=is=null,$t=!1}function pS(t){ei===null?ei=[t]:ei.push(t)}var Lq=na.ReactCurrentBatchConfig;function Ih(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function Ym(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function i3(t){var e=t._init;return e(t._payload)}function AP(t){function e(b,v){if(t){var w=b.deletions;w===null?(b.deletions=[v],b.flags|=16):w.push(v)}}function n(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function r(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function s(b,v){return b=Xa(b,v),b.index=0,b.sibling=null,b}function i(b,v,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<v?(b.flags|=2,v):w):(b.flags|=2,v)):(b.flags|=1048576,v)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,v,w,S){return v===null||v.tag!==6?(v=Pv(w,b.mode,S),v.return=b,v):(v=s(v,w),v.return=b,v)}function l(b,v,w,S){var E=w.type;return E===Pu?d(b,v,w.props.children,S,w.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ka&&i3(E)===v.type)?(S=s(v,w.props),S.ref=Ih(b,v,w),S.return=b,S):(S=ug(w.type,w.key,w.props,null,b.mode,S),S.ref=Ih(b,v,w),S.return=b,S)}function c(b,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Dv(w,b.mode,S),v.return=b,v):(v=s(v,w.children||[]),v.return=b,v)}function d(b,v,w,S,E){return v===null||v.tag!==7?(v=uc(w,b.mode,S,E),v.return=b,v):(v=s(v,w),v.return=b,v)}function h(b,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Pv(""+v,b.mode,w),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lm:return w=ug(v.type,v.key,v.props,null,b.mode,w),w.ref=Ih(b,null,v),w.return=b,w;case Ru:return v=Dv(v,b.mode,w),v.return=b,v;case ka:var S=v._init;return h(b,S(v._payload),w)}if(Xh(v)||Nh(v))return v=uc(v,b.mode,w,null),v.return=b,v;Ym(b,v)}return null}function f(b,v,w,S){var E=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:a(b,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lm:return w.key===E?l(b,v,w,S):null;case Ru:return w.key===E?c(b,v,w,S):null;case ka:return E=w._init,f(b,v,E(w._payload),S)}if(Xh(w)||Nh(w))return E!==null?null:d(b,v,w,S,null);Ym(b,w)}return null}function p(b,v,w,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,a(v,b,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Lm:return b=b.get(S.key===null?w:S.key)||null,l(v,b,S,E);case Ru:return b=b.get(S.key===null?w:S.key)||null,c(v,b,S,E);case ka:var C=S._init;return p(b,v,w,C(S._payload),E)}if(Xh(S)||Nh(S))return b=b.get(w)||null,d(v,b,S,E,null);Ym(v,S)}return null}function m(b,v,w,S){for(var E=null,C=null,T=v,_=v=0,O=null;T!==null&&_<w.length;_++){T.index>_?(O=T,T=null):O=T.sibling;var N=f(b,T,w[_],S);if(N===null){T===null&&(T=O);break}t&&T&&N.alternate===null&&e(b,T),v=i(N,v,_),C===null?E=N:C.sibling=N,C=N,T=O}if(_===w.length)return n(b,T),$t&&Vl(b,_),E;if(T===null){for(;_<w.length;_++)T=h(b,w[_],S),T!==null&&(v=i(T,v,_),C===null?E=T:C.sibling=T,C=T);return $t&&Vl(b,_),E}for(T=r(b,T);_<w.length;_++)O=p(T,b,_,w[_],S),O!==null&&(t&&O.alternate!==null&&T.delete(O.key===null?_:O.key),v=i(O,v,_),C===null?E=O:C.sibling=O,C=O);return t&&T.forEach(function(R){return e(b,R)}),$t&&Vl(b,_),E}function g(b,v,w,S){var E=Nh(w);if(typeof E!="function")throw Error(ce(150));if(w=E.call(w),w==null)throw Error(ce(151));for(var C=E=null,T=v,_=v=0,O=null,N=w.next();T!==null&&!N.done;_++,N=w.next()){T.index>_?(O=T,T=null):O=T.sibling;var R=f(b,T,N.value,S);if(R===null){T===null&&(T=O);break}t&&T&&R.alternate===null&&e(b,T),v=i(R,v,_),C===null?E=R:C.sibling=R,C=R,T=O}if(N.done)return n(b,T),$t&&Vl(b,_),E;if(T===null){for(;!N.done;_++,N=w.next())N=h(b,N.value,S),N!==null&&(v=i(N,v,_),C===null?E=N:C.sibling=N,C=N);return $t&&Vl(b,_),E}for(T=r(b,T);!N.done;_++,N=w.next())N=p(T,b,_,N.value,S),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?_:N.key),v=i(N,v,_),C===null?E=N:C.sibling=N,C=N);return t&&T.forEach(function(M){return e(b,M)}),$t&&Vl(b,_),E}function x(b,v,w,S){if(typeof w=="object"&&w!==null&&w.type===Pu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Lm:e:{for(var E=w.key,C=v;C!==null;){if(C.key===E){if(E=w.type,E===Pu){if(C.tag===7){n(b,C.sibling),v=s(C,w.props.children),v.return=b,b=v;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ka&&i3(E)===C.type){n(b,C.sibling),v=s(C,w.props),v.ref=Ih(b,C,w),v.return=b,b=v;break e}n(b,C);break}else e(b,C);C=C.sibling}w.type===Pu?(v=uc(w.props.children,b.mode,S,w.key),v.return=b,b=v):(S=ug(w.type,w.key,w.props,null,b.mode,S),S.ref=Ih(b,v,w),S.return=b,b=S)}return o(b);case Ru:e:{for(C=w.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(b,v.sibling),v=s(v,w.children||[]),v.return=b,b=v;break e}else{n(b,v);break}else e(b,v);v=v.sibling}v=Dv(w,b.mode,S),v.return=b,b=v}return o(b);case ka:return C=w._init,x(b,v,C(w._payload),S)}if(Xh(w))return m(b,v,w,S);if(Nh(w))return g(b,v,w,S);Ym(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(b,v.sibling),v=s(v,w),v.return=b,b=v):(n(b,v),v=Pv(w,b.mode,S),v.return=b,b=v),o(b)):n(b,v)}return x}var kd=AP(!0),jP=AP(!1),eb=vl(null),tb=null,zu=null,mS=null;function gS(){mS=zu=tb=null}function bS(t){var e=eb.current;Rt(eb),t._currentValue=e}function bE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zu(t,e){tb=t,mS=zu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rr=!0),t.firstContext=null)}function Hs(t){var e=t._currentValue;if(mS!==t)if(t={context:t,memoizedValue:e,next:null},zu===null){if(tb===null)throw Error(ce(308));zu=t,tb.dependencies={lanes:0,firstContext:t}}else zu=zu.next=t;return e}var tc=null;function xS(t){tc===null?tc=[t]:tc.push(t)}function OP(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xS(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qo(t,r)}function Qo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ea=!1;function yS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ka(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,rt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qo(t,n)}return s=r.interleaved,s===null?(e.next=e,xS(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qo(t,n)}function sg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sS(t,n)}}function o3(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nb(t,e,n,r){var s=t.updateQueue;Ea=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Vt({},h,f);break e;case 2:Ea=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ec|=o,t.lanes=o,t.memoizedState=h}}function a3(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ce(191,s));s.call(r)}}}var Zp={},Ki=vl(Zp),Zf=vl(Zp),ep=vl(Zp);function nc(t){if(t===Zp)throw Error(ce(174));return t}function vS(t,e){switch(St(ep,e),St(Zf,t),St(Ki,Zp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qk(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qk(e,t)}Rt(Ki),St(Ki,e)}function Ed(){Rt(Ki),Rt(Zf),Rt(ep)}function MP(t){nc(ep.current);var e=nc(Ki.current),n=Qk(e,t.type);e!==n&&(St(Zf,t),St(Ki,n))}function wS(t){Zf.current===t&&(Rt(Ki),Rt(Zf))}var Ft=vl(0);function rb(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Av=[];function kS(){for(var t=0;t<Av.length;t++)Av[t]._workInProgressVersionPrimary=null;Av.length=0}var ig=na.ReactCurrentDispatcher,jv=na.ReactCurrentBatchConfig,kc=0,zt=null,pn=null,vn=null,sb=!1,gf=!1,tp=0,Bq=0;function Wn(){throw Error(ce(321))}function ES(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fi(t[n],e[n]))return!1;return!0}function CS(t,e,n,r,s,i){if(kc=i,zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ig.current=t===null||t.memoizedState===null?Uq:zq,t=n(r,s),gf){i=0;do{if(gf=!1,tp=0,25<=i)throw Error(ce(301));i+=1,vn=pn=null,e.updateQueue=null,ig.current=Vq,t=n(r,s)}while(gf)}if(ig.current=ib,e=pn!==null&&pn.next!==null,kc=0,vn=pn=zt=null,sb=!1,e)throw Error(ce(300));return t}function SS(){var t=tp!==0;return tp=0,t}function Pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?zt.memoizedState=vn=t:vn=vn.next=t,vn}function Us(){if(pn===null){var t=zt.alternate;t=t!==null?t.memoizedState:null}else t=pn.next;var e=vn===null?zt.memoizedState:vn.next;if(e!==null)vn=e,pn=t;else{if(t===null)throw Error(ce(310));pn=t,t={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},vn===null?zt.memoizedState=vn=t:vn=vn.next=t}return vn}function np(t,e){return typeof e=="function"?e(t):e}function Ov(t){var e=Us(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=pn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((kc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,zt.lanes|=d,Ec|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,fi(r,e.memoizedState)||(Rr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,zt.lanes|=i,Ec|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Iv(t){var e=Us(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);fi(i,e.memoizedState)||(Rr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function RP(){}function PP(t,e){var n=zt,r=Us(),s=e(),i=!fi(r.memoizedState,s);if(i&&(r.memoizedState=s,Rr=!0),r=r.queue,TS(BP.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||vn!==null&&vn.memoizedState.tag&1){if(n.flags|=2048,rp(9,LP.bind(null,n,r,s,e),void 0,null),En===null)throw Error(ce(349));kc&30||DP(n,e,s)}return s}function DP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=zt.updateQueue,e===null?(e={lastEffect:null,stores:null},zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function LP(t,e,n,r){e.value=n,e.getSnapshot=r,$P(e)&&FP(t)}function BP(t,e,n){return n(function(){$P(e)&&FP(t)})}function $P(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fi(t,n)}catch{return!0}}function FP(t){var e=Qo(t,1);e!==null&&ci(e,t,1,-1)}function l3(t){var e=Pi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:np,lastRenderedState:t},e.queue=t,t=t.dispatch=Hq.bind(null,zt,t),[e.memoizedState,t]}function rp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=zt.updateQueue,e===null?(e={lastEffect:null,stores:null},zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function HP(){return Us().memoizedState}function og(t,e,n,r){var s=Pi();zt.flags|=t,s.memoizedState=rp(1|e,n,void 0,r===void 0?null:r)}function gy(t,e,n,r){var s=Us();r=r===void 0?null:r;var i=void 0;if(pn!==null){var o=pn.memoizedState;if(i=o.destroy,r!==null&&ES(r,o.deps)){s.memoizedState=rp(e,n,i,r);return}}zt.flags|=t,s.memoizedState=rp(1|e,n,i,r)}function c3(t,e){return og(8390656,8,t,e)}function TS(t,e){return gy(2048,8,t,e)}function UP(t,e){return gy(4,2,t,e)}function zP(t,e){return gy(4,4,t,e)}function VP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WP(t,e,n){return n=n!=null?n.concat([t]):null,gy(4,4,VP.bind(null,e,t),n)}function NS(){}function qP(t,e){var n=Us();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ES(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function GP(t,e){var n=Us();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ES(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function YP(t,e,n){return kc&21?(fi(n,e)||(n=ZR(),zt.lanes|=n,Ec|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rr=!0),t.memoizedState=n)}function $q(t,e){var n=ft;ft=n!==0&&4>n?n:4,t(!0);var r=jv.transition;jv.transition={};try{t(!1),e()}finally{ft=n,jv.transition=r}}function KP(){return Us().memoizedState}function Fq(t,e,n){var r=Qa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},JP(t))QP(e,n);else if(n=OP(t,e,n,r),n!==null){var s=dr();ci(n,t,r,s),XP(n,e,r)}}function Hq(t,e,n){var r=Qa(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(JP(t))QP(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,fi(a,o)){var l=e.interleaved;l===null?(s.next=s,xS(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=OP(t,e,s,r),n!==null&&(s=dr(),ci(n,t,r,s),XP(n,e,r))}}function JP(t){var e=t.alternate;return t===zt||e!==null&&e===zt}function QP(t,e){gf=sb=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function XP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sS(t,n)}}var ib={readContext:Hs,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},Uq={readContext:Hs,useCallback:function(t,e){return Pi().memoizedState=[t,e===void 0?null:e],t},useContext:Hs,useEffect:c3,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,og(4194308,4,VP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return og(4194308,4,t,e)},useInsertionEffect:function(t,e){return og(4,2,t,e)},useMemo:function(t,e){var n=Pi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Fq.bind(null,zt,t),[r.memoizedState,t]},useRef:function(t){var e=Pi();return t={current:t},e.memoizedState=t},useState:l3,useDebugValue:NS,useDeferredValue:function(t){return Pi().memoizedState=t},useTransition:function(){var t=l3(!1),e=t[0];return t=$q.bind(null,t[1]),Pi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=zt,s=Pi();if($t){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),En===null)throw Error(ce(349));kc&30||DP(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,c3(BP.bind(null,r,i,t),[t]),r.flags|=2048,rp(9,LP.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Pi(),e=En.identifierPrefix;if($t){var n=Do,r=Po;n=(r&~(1<<32-li(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=tp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Bq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zq={readContext:Hs,useCallback:qP,useContext:Hs,useEffect:TS,useImperativeHandle:WP,useInsertionEffect:UP,useLayoutEffect:zP,useMemo:GP,useReducer:Ov,useRef:HP,useState:function(){return Ov(np)},useDebugValue:NS,useDeferredValue:function(t){var e=Us();return YP(e,pn.memoizedState,t)},useTransition:function(){var t=Ov(np)[0],e=Us().memoizedState;return[t,e]},useMutableSource:RP,useSyncExternalStore:PP,useId:KP,unstable_isNewReconciler:!1},Vq={readContext:Hs,useCallback:qP,useContext:Hs,useEffect:TS,useImperativeHandle:WP,useInsertionEffect:UP,useLayoutEffect:zP,useMemo:GP,useReducer:Iv,useRef:HP,useState:function(){return Iv(np)},useDebugValue:NS,useDeferredValue:function(t){var e=Us();return pn===null?e.memoizedState=t:YP(e,pn.memoizedState,t)},useTransition:function(){var t=Iv(np)[0],e=Us().memoizedState;return[t,e]},useMutableSource:RP,useSyncExternalStore:PP,useId:KP,unstable_isNewReconciler:!1};function Js(t,e){if(t&&t.defaultProps){e=Vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var by={isMounted:function(t){return(t=t._reactInternals)?qc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dr(),s=Qa(t),i=Fo(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ka(t,i,s),e!==null&&(ci(e,t,s,r),sg(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dr(),s=Qa(t),i=Fo(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ka(t,i,s),e!==null&&(ci(e,t,s,r),sg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dr(),r=Qa(t),s=Fo(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ka(t,s,r),e!==null&&(ci(e,t,r,n),sg(e,t,r))}};function u3(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Kf(n,r)||!Kf(s,i):!0}function ZP(t,e,n){var r=!1,s=il,i=e.contextType;return typeof i=="object"&&i!==null?i=Hs(i):(s=Br(e)?vc:er.current,r=e.contextTypes,i=(r=r!=null)?vd(t,s):il),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=by,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function d3(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&by.enqueueReplaceState(e,e.state,null)}function yE(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},yS(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Hs(i):(i=Br(e)?vc:er.current,s.context=vd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(xE(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&by.enqueueReplaceState(s,s.state,null),nb(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Cd(t,e){try{var n="",r=e;do n+=xW(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Mv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Wq=typeof WeakMap=="function"?WeakMap:Map;function e6(t,e,n){n=Fo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ab||(ab=!0,jE=r),vE(t,e)},n}function t6(t,e,n){n=Fo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){vE(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vE(t,e),typeof r!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function h3(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Wq;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iG.bind(null,t,e,n),e.then(t,t))}function f3(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function p3(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fo(-1,1),e.tag=2,Ka(n,e,1))),n.lanes|=1),t)}var qq=na.ReactCurrentOwner,Rr=!1;function cr(t,e,n,r){e.child=t===null?jP(e,null,n,r):kd(e,t.child,n,r)}function m3(t,e,n,r,s){n=n.render;var i=e.ref;return Zu(e,s),r=CS(t,e,n,r,i,s),n=SS(),t!==null&&!Rr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xo(t,e,s)):($t&&n&&hS(e),e.flags|=1,cr(t,e,r,s),e.child)}function g3(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!PS(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,n6(t,e,i,r,s)):(t=ug(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Kf,n(o,r)&&t.ref===e.ref)return Xo(t,e,s)}return e.flags|=1,t=Xa(i,r),t.ref=e.ref,t.return=e,e.child=t}function n6(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Kf(i,r)&&t.ref===e.ref)if(Rr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rr=!0);else return e.lanes=t.lanes,Xo(t,e,s)}return wE(t,e,n,r,s)}function r6(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Wu,Zr),Zr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,St(Wu,Zr),Zr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,St(Wu,Zr),Zr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,St(Wu,Zr),Zr|=r;return cr(t,e,s,n),e.child}function s6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wE(t,e,n,r,s){var i=Br(n)?vc:er.current;return i=vd(e,i),Zu(e,s),n=CS(t,e,n,r,i,s),r=SS(),t!==null&&!Rr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xo(t,e,s)):($t&&r&&hS(e),e.flags|=1,cr(t,e,n,s),e.child)}function b3(t,e,n,r,s){if(Br(n)){var i=!0;Qg(e)}else i=!1;if(Zu(e,s),e.stateNode===null)ag(t,e),ZP(e,n,r),yE(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Hs(c):(c=Br(n)?vc:er.current,c=vd(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&d3(e,o,r,c),Ea=!1;var f=e.memoizedState;o.state=f,nb(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Lr.current||Ea?(typeof d=="function"&&(xE(e,n,d,r),l=e.memoizedState),(a=Ea||u3(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,IP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Js(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Hs(l):(l=Br(n)?vc:er.current,l=vd(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&d3(e,o,r,l),Ea=!1,f=e.memoizedState,o.state=f,nb(e,r,o,s);var m=e.memoizedState;a!==h||f!==m||Lr.current||Ea?(typeof p=="function"&&(xE(e,n,p,r),m=e.memoizedState),(c=Ea||u3(e,n,c,r,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return kE(t,e,n,r,i,s)}function kE(t,e,n,r,s,i){s6(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&n3(e,n,!1),Xo(t,e,i);r=e.stateNode,qq.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=kd(e,t.child,null,i),e.child=kd(e,null,a,i)):cr(t,e,a,i),e.memoizedState=r.state,s&&n3(e,n,!0),e.child}function i6(t){var e=t.stateNode;e.pendingContext?t3(t,e.pendingContext,e.pendingContext!==e.context):e.context&&t3(t,e.context,!1),vS(t,e.containerInfo)}function x3(t,e,n,r,s){return wd(),pS(s),e.flags|=256,cr(t,e,n,r),e.child}var EE={dehydrated:null,treeContext:null,retryLane:0};function CE(t){return{baseLanes:t,cachePool:null,transitions:null}}function o6(t,e,n){var r=e.pendingProps,s=Ft.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),St(Ft,s&1),t===null)return gE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vy(o,r,0,null),t=uc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=CE(n),e.memoizedState=EE,t):_S(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Gq(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xa(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Xa(a,i):(i=uc(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?CE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=EE,r}return i=t.child,t=i.sibling,r=Xa(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _S(t,e){return e=vy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Km(t,e,n,r){return r!==null&&pS(r),kd(e,t.child,null,n),t=_S(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gq(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Mv(Error(ce(422))),Km(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=vy({mode:"visible",children:r.children},s,0,null),i=uc(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&kd(e,t.child,null,o),e.child.memoizedState=CE(o),e.memoizedState=EE,i);if(!(e.mode&1))return Km(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ce(419)),r=Mv(i,r,void 0),Km(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rr||a){if(r=En,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qo(t,s),ci(r,t,s,-1))}return RS(),r=Mv(Error(ce(421))),Km(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=oG.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ss=Ya(s.nextSibling),is=e,$t=!0,ei=null,t!==null&&(Cs[Ss++]=Po,Cs[Ss++]=Do,Cs[Ss++]=wc,Po=t.id,Do=t.overflow,wc=e),e=_S(e,r.children),e.flags|=4096,e)}function y3(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bE(t.return,e,n)}function Rv(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function a6(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(cr(t,e,r.children,n),r=Ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&y3(t,n,e);else if(t.tag===19)y3(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(St(Ft,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&rb(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rv(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&rb(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rv(e,!0,n,null,i);break;case"together":Rv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ag(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ec|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=Xa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yq(t,e,n){switch(e.tag){case 3:i6(e),wd();break;case 5:MP(e);break;case 1:Br(e.type)&&Qg(e);break;case 4:vS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;St(eb,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(St(Ft,Ft.current&1),e.flags|=128,null):n&e.child.childLanes?o6(t,e,n):(St(Ft,Ft.current&1),t=Xo(t,e,n),t!==null?t.sibling:null);St(Ft,Ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return a6(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),St(Ft,Ft.current),r)break;return null;case 22:case 23:return e.lanes=0,r6(t,e,n)}return Xo(t,e,n)}var l6,SE,c6,u6;l6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};SE=function(){};c6=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,nc(Ki.current);var i=null;switch(n){case"input":s=Gk(t,s),r=Gk(t,r),i=[];break;case"select":s=Vt({},s,{value:void 0}),r=Vt({},r,{value:void 0}),i=[];break;case"textarea":s=Jk(t,s),r=Jk(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kg)}Xk(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uf.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ot("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};u6=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mh(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Kq(t,e,n){var r=e.pendingProps;switch(fS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(e),null;case 1:return Br(e.type)&&Jg(),qn(e),null;case 3:return r=e.stateNode,Ed(),Rt(Lr),Rt(er),kS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ei!==null&&(ME(ei),ei=null))),SE(t,e),qn(e),null;case 5:wS(e);var s=nc(ep.current);if(n=e.type,t!==null&&e.stateNode!=null)c6(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return qn(e),null}if(t=nc(Ki.current),Gm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[zi]=e,r[Xf]=i,t=(e.mode&1)!==0,n){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(s=0;s<ef.length;s++)Ot(ef[s],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":_A(r,i),Ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ot("invalid",r);break;case"textarea":jA(r,i),Ot("invalid",r)}Xk(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&qm(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&qm(r.textContent,a,t),s=["children",""+a]):Uf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ot("scroll",r)}switch(n){case"input":Bm(r),AA(r,i,!0);break;case"textarea":Bm(r),OA(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Kg)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=BR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zi]=e,t[Xf]=r,l6(t,e,!1,!1),e.stateNode=t;e:{switch(o=Zk(n,r),n){case"dialog":Ot("cancel",t),Ot("close",t),s=r;break;case"iframe":case"object":case"embed":Ot("load",t),s=r;break;case"video":case"audio":for(s=0;s<ef.length;s++)Ot(ef[s],t);s=r;break;case"source":Ot("error",t),s=r;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),s=r;break;case"details":Ot("toggle",t),s=r;break;case"input":_A(t,r),s=Gk(t,r),Ot("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Vt({},r,{value:void 0}),Ot("invalid",t);break;case"textarea":jA(t,r),s=Jk(t,r),Ot("invalid",t);break;default:s=r}Xk(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?HR(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$R(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&zf(t,l):typeof l=="number"&&zf(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uf.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ot("scroll",t):l!=null&&XC(t,i,l,o))}switch(n){case"input":Bm(t),AA(t,r,!1);break;case"textarea":Bm(t),OA(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sl(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ku(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ku(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Kg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qn(e),null;case 6:if(t&&e.stateNode!=null)u6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(n=nc(ep.current),nc(Ki.current),Gm(e)){if(r=e.stateNode,n=e.memoizedProps,r[zi]=e,(i=r.nodeValue!==n)&&(t=is,t!==null))switch(t.tag){case 3:qm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qm(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zi]=e,e.stateNode=r}return qn(e),null;case 13:if(Rt(Ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&ss!==null&&e.mode&1&&!(e.flags&128))_P(),wd(),e.flags|=98560,i=!1;else if(i=Gm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ce(317));i[zi]=e}else wd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qn(e),i=!1}else ei!==null&&(ME(ei),ei=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ft.current&1?mn===0&&(mn=3):RS())),e.updateQueue!==null&&(e.flags|=4),qn(e),null);case 4:return Ed(),SE(t,e),t===null&&Jf(e.stateNode.containerInfo),qn(e),null;case 10:return bS(e.type._context),qn(e),null;case 17:return Br(e.type)&&Jg(),qn(e),null;case 19:if(Rt(Ft),i=e.memoizedState,i===null)return qn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Mh(i,!1);else{if(mn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rb(t),o!==null){for(e.flags|=128,Mh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return St(Ft,Ft.current&1|2),e.child}t=t.sibling}i.tail!==null&&Qt()>Sd&&(e.flags|=128,r=!0,Mh(i,!1),e.lanes=4194304)}else{if(!r)if(t=rb(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!$t)return qn(e),null}else 2*Qt()-i.renderingStartTime>Sd&&n!==1073741824&&(e.flags|=128,r=!0,Mh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qt(),e.sibling=null,n=Ft.current,St(Ft,r?n&1|2:n&1),e):(qn(e),null);case 22:case 23:return MS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zr&1073741824&&(qn(e),e.subtreeFlags&6&&(e.flags|=8192)):qn(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function Jq(t,e){switch(fS(e),e.tag){case 1:return Br(e.type)&&Jg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ed(),Rt(Lr),Rt(er),kS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wS(e),null;case 13:if(Rt(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));wd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Rt(Ft),null;case 4:return Ed(),null;case 10:return bS(e.type._context),null;case 22:case 23:return MS(),null;case 24:return null;default:return null}}var Jm=!1,Kn=!1,Qq=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Vu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gt(t,e,r)}else n.current=null}function TE(t,e,n){try{n()}catch(r){Gt(t,e,r)}}var v3=!1;function Xq(t,e){if(cE=qg,t=mP(),dS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(uE={focusedElem:t,selectionRange:n},qg=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,x=m.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?g:Js(e.type,g),x);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(S){Gt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return m=v3,v3=!1,m}function bf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&TE(e,n,i)}s=s.next}while(s!==r)}}function xy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function NE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function d6(t){var e=t.alternate;e!==null&&(t.alternate=null,d6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zi],delete e[Xf],delete e[fE],delete e[Rq],delete e[Pq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h6(t){return t.tag===5||t.tag===3||t.tag===4}function w3(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _E(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kg));else if(r!==4&&(t=t.child,t!==null))for(_E(t,e,n),t=t.sibling;t!==null;)_E(t,e,n),t=t.sibling}function AE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(AE(t,e,n),t=t.sibling;t!==null;)AE(t,e,n),t=t.sibling}var Mn=null,Xs=!1;function da(t,e,n){for(n=n.child;n!==null;)f6(t,e,n),n=n.sibling}function f6(t,e,n){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(uy,n)}catch{}switch(n.tag){case 5:Kn||Vu(n,e);case 6:var r=Mn,s=Xs;Mn=null,da(t,e,n),Mn=r,Xs=s,Mn!==null&&(Xs?(t=Mn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mn.removeChild(n.stateNode));break;case 18:Mn!==null&&(Xs?(t=Mn,n=n.stateNode,t.nodeType===8?Nv(t.parentNode,n):t.nodeType===1&&Nv(t,n),Gf(t)):Nv(Mn,n.stateNode));break;case 4:r=Mn,s=Xs,Mn=n.stateNode.containerInfo,Xs=!0,da(t,e,n),Mn=r,Xs=s;break;case 0:case 11:case 14:case 15:if(!Kn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&TE(n,e,o),s=s.next}while(s!==r)}da(t,e,n);break;case 1:if(!Kn&&(Vu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gt(n,e,a)}da(t,e,n);break;case 21:da(t,e,n);break;case 22:n.mode&1?(Kn=(r=Kn)||n.memoizedState!==null,da(t,e,n),Kn=r):da(t,e,n);break;default:da(t,e,n)}}function k3(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Qq),e.forEach(function(r){var s=aG.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ys(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mn=a.stateNode,Xs=!1;break e;case 3:Mn=a.stateNode.containerInfo,Xs=!0;break e;case 4:Mn=a.stateNode.containerInfo,Xs=!0;break e}a=a.return}if(Mn===null)throw Error(ce(160));f6(i,o,s),Mn=null,Xs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Gt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p6(e,t),e=e.sibling}function p6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ys(e,t),Ii(t),r&4){try{bf(3,t,t.return),xy(3,t)}catch(g){Gt(t,t.return,g)}try{bf(5,t,t.return)}catch(g){Gt(t,t.return,g)}}break;case 1:Ys(e,t),Ii(t),r&512&&n!==null&&Vu(n,n.return);break;case 5:if(Ys(e,t),Ii(t),r&512&&n!==null&&Vu(n,n.return),t.flags&32){var s=t.stateNode;try{zf(s,"")}catch(g){Gt(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&DR(s,i),Zk(a,o);var c=Zk(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?HR(s,h):d==="dangerouslySetInnerHTML"?$R(s,h):d==="children"?zf(s,h):XC(s,d,h,c)}switch(a){case"input":Yk(s,i);break;case"textarea":LR(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ku(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ku(s,!!i.multiple,i.defaultValue,!0):Ku(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xf]=i}catch(g){Gt(t,t.return,g)}}break;case 6:if(Ys(e,t),Ii(t),r&4){if(t.stateNode===null)throw Error(ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Gt(t,t.return,g)}}break;case 3:if(Ys(e,t),Ii(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gf(e.containerInfo)}catch(g){Gt(t,t.return,g)}break;case 4:Ys(e,t),Ii(t);break;case 13:Ys(e,t),Ii(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(OS=Qt())),r&4&&k3(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Kn=(c=Kn)||d,Ys(e,t),Kn=c):Ys(e,t),Ii(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ge=t,d=t.child;d!==null;){for(h=ge=d;ge!==null;){switch(f=ge,p=f.child,f.tag){case 0:case 11:case 14:case 15:bf(4,f,f.return);break;case 1:Vu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Gt(r,n,g)}}break;case 5:Vu(f,f.return);break;case 22:if(f.memoizedState!==null){C3(h);continue}}p!==null?(p.return=f,ge=p):C3(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=FR("display",o))}catch(g){Gt(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Gt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ys(e,t),Ii(t),r&4&&k3(t);break;case 21:break;default:Ys(e,t),Ii(t)}}function Ii(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h6(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(zf(s,""),r.flags&=-33);var i=w3(t);AE(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=w3(t);_E(t,a,o);break;default:throw Error(ce(161))}}catch(l){Gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Zq(t,e,n){ge=t,m6(t)}function m6(t,e,n){for(var r=(t.mode&1)!==0;ge!==null;){var s=ge,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Jm;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Kn;a=Jm;var c=Kn;if(Jm=o,(Kn=l)&&!c)for(ge=s;ge!==null;)o=ge,l=o.child,o.tag===22&&o.memoizedState!==null?S3(s):l!==null?(l.return=o,ge=l):S3(s);for(;i!==null;)ge=i,m6(i),i=i.sibling;ge=s,Jm=a,Kn=c}E3(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ge=i):E3(t)}}function E3(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kn||xy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Js(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&a3(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}a3(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Gf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Kn||e.flags&512&&NE(e)}catch(f){Gt(e,e.return,f)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function C3(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function S3(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xy(4,e)}catch(l){Gt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Gt(e,s,l)}}var i=e.return;try{NE(e)}catch(l){Gt(e,i,l)}break;case 5:var o=e.return;try{NE(e)}catch(l){Gt(e,o,l)}}}catch(l){Gt(e,e.return,l)}if(e===t){ge=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ge=a;break}ge=e.return}}var eG=Math.ceil,ob=na.ReactCurrentDispatcher,AS=na.ReactCurrentOwner,Ms=na.ReactCurrentBatchConfig,rt=0,En=null,ln=null,Bn=0,Zr=0,Wu=vl(0),mn=0,sp=null,Ec=0,yy=0,jS=0,xf=null,Ar=null,OS=0,Sd=1/0,Oo=null,ab=!1,jE=null,Ja=null,Qm=!1,Da=null,lb=0,yf=0,OE=null,lg=-1,cg=0;function dr(){return rt&6?Qt():lg!==-1?lg:lg=Qt()}function Qa(t){return t.mode&1?rt&2&&Bn!==0?Bn&-Bn:Lq.transition!==null?(cg===0&&(cg=ZR()),cg):(t=ft,t!==0||(t=window.event,t=t===void 0?16:oP(t.type)),t):1}function ci(t,e,n,r){if(50<yf)throw yf=0,OE=null,Error(ce(185));Jp(t,n,r),(!(rt&2)||t!==En)&&(t===En&&(!(rt&2)&&(yy|=n),mn===4&&_a(t,Bn)),$r(t,r),n===1&&rt===0&&!(e.mode&1)&&(Sd=Qt()+500,my&&wl()))}function $r(t,e){var n=t.callbackNode;LW(t,e);var r=Wg(t,t===En?Bn:0);if(r===0)n!==null&&RA(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&RA(n),e===1)t.tag===0?Dq(T3.bind(null,t)):SP(T3.bind(null,t)),Iq(function(){!(rt&6)&&wl()}),n=null;else{switch(eP(r)){case 1:n=rS;break;case 4:n=QR;break;case 16:n=Vg;break;case 536870912:n=XR;break;default:n=Vg}n=E6(n,g6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function g6(t,e){if(lg=-1,cg=0,rt&6)throw Error(ce(327));var n=t.callbackNode;if(ed()&&t.callbackNode!==n)return null;var r=Wg(t,t===En?Bn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cb(t,r);else{e=r;var s=rt;rt|=2;var i=x6();(En!==t||Bn!==e)&&(Oo=null,Sd=Qt()+500,cc(t,e));do try{rG();break}catch(a){b6(t,a)}while(!0);gS(),ob.current=i,rt=s,ln!==null?e=0:(En=null,Bn=0,e=mn)}if(e!==0){if(e===2&&(s=sE(t),s!==0&&(r=s,e=IE(t,s))),e===1)throw n=sp,cc(t,0),_a(t,r),$r(t,Qt()),n;if(e===6)_a(t,r);else{if(s=t.current.alternate,!(r&30)&&!tG(s)&&(e=cb(t,r),e===2&&(i=sE(t),i!==0&&(r=i,e=IE(t,i))),e===1))throw n=sp,cc(t,0),_a(t,r),$r(t,Qt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:Wl(t,Ar,Oo);break;case 3:if(_a(t,r),(r&130023424)===r&&(e=OS+500-Qt(),10<e)){if(Wg(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=hE(Wl.bind(null,t,Ar,Oo),e);break}Wl(t,Ar,Oo);break;case 4:if(_a(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-li(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Qt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eG(r/1960))-r,10<r){t.timeoutHandle=hE(Wl.bind(null,t,Ar,Oo),r);break}Wl(t,Ar,Oo);break;case 5:Wl(t,Ar,Oo);break;default:throw Error(ce(329))}}}return $r(t,Qt()),t.callbackNode===n?g6.bind(null,t):null}function IE(t,e){var n=xf;return t.current.memoizedState.isDehydrated&&(cc(t,e).flags|=256),t=cb(t,e),t!==2&&(e=Ar,Ar=n,e!==null&&ME(e)),t}function ME(t){Ar===null?Ar=t:Ar.push.apply(Ar,t)}function tG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!fi(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _a(t,e){for(e&=~jS,e&=~yy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-li(e),r=1<<n;t[n]=-1,e&=~r}}function T3(t){if(rt&6)throw Error(ce(327));ed();var e=Wg(t,0);if(!(e&1))return $r(t,Qt()),null;var n=cb(t,e);if(t.tag!==0&&n===2){var r=sE(t);r!==0&&(e=r,n=IE(t,r))}if(n===1)throw n=sp,cc(t,0),_a(t,e),$r(t,Qt()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wl(t,Ar,Oo),$r(t,Qt()),null}function IS(t,e){var n=rt;rt|=1;try{return t(e)}finally{rt=n,rt===0&&(Sd=Qt()+500,my&&wl())}}function Cc(t){Da!==null&&Da.tag===0&&!(rt&6)&&ed();var e=rt;rt|=1;var n=Ms.transition,r=ft;try{if(Ms.transition=null,ft=1,t)return t()}finally{ft=r,Ms.transition=n,rt=e,!(rt&6)&&wl()}}function MS(){Zr=Wu.current,Rt(Wu)}function cc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Oq(n)),ln!==null)for(n=ln.return;n!==null;){var r=n;switch(fS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jg();break;case 3:Ed(),Rt(Lr),Rt(er),kS();break;case 5:wS(r);break;case 4:Ed();break;case 13:Rt(Ft);break;case 19:Rt(Ft);break;case 10:bS(r.type._context);break;case 22:case 23:MS()}n=n.return}if(En=t,ln=t=Xa(t.current,null),Bn=Zr=e,mn=0,sp=null,jS=yy=Ec=0,Ar=xf=null,tc!==null){for(e=0;e<tc.length;e++)if(n=tc[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}tc=null}return t}function b6(t,e){do{var n=ln;try{if(gS(),ig.current=ib,sb){for(var r=zt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}sb=!1}if(kc=0,vn=pn=zt=null,gf=!1,tp=0,AS.current=null,n===null||n.return===null){mn=1,sp=e,ln=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Bn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=f3(o);if(p!==null){p.flags&=-257,p3(p,o,a,i,e),p.mode&1&&h3(i,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){h3(i,c,e),RS();break e}l=Error(ce(426))}}else if($t&&a.mode&1){var x=f3(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),p3(x,o,a,i,e),pS(Cd(l,a));break e}}i=l=Cd(l,a),mn!==4&&(mn=2),xf===null?xf=[i]:xf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=e6(i,l,e);o3(i,b);break e;case 1:a=l;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ja===null||!Ja.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=t6(i,a,e);o3(i,S);break e}}i=i.return}while(i!==null)}v6(n)}catch(E){e=E,ln===n&&n!==null&&(ln=n=n.return);continue}break}while(!0)}function x6(){var t=ob.current;return ob.current=ib,t===null?ib:t}function RS(){(mn===0||mn===3||mn===2)&&(mn=4),En===null||!(Ec&268435455)&&!(yy&268435455)||_a(En,Bn)}function cb(t,e){var n=rt;rt|=2;var r=x6();(En!==t||Bn!==e)&&(Oo=null,cc(t,e));do try{nG();break}catch(s){b6(t,s)}while(!0);if(gS(),rt=n,ob.current=r,ln!==null)throw Error(ce(261));return En=null,Bn=0,mn}function nG(){for(;ln!==null;)y6(ln)}function rG(){for(;ln!==null&&!_W();)y6(ln)}function y6(t){var e=k6(t.alternate,t,Zr);t.memoizedProps=t.pendingProps,e===null?v6(t):ln=e,AS.current=null}function v6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Jq(n,e),n!==null){n.flags&=32767,ln=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mn=6,ln=null;return}}else if(n=Kq(n,e,Zr),n!==null){ln=n;return}if(e=e.sibling,e!==null){ln=e;return}ln=e=t}while(e!==null);mn===0&&(mn=5)}function Wl(t,e,n){var r=ft,s=Ms.transition;try{Ms.transition=null,ft=1,sG(t,e,n,r)}finally{Ms.transition=s,ft=r}return null}function sG(t,e,n,r){do ed();while(Da!==null);if(rt&6)throw Error(ce(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(BW(t,i),t===En&&(ln=En=null,Bn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qm||(Qm=!0,E6(Vg,function(){return ed(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ms.transition,Ms.transition=null;var o=ft;ft=1;var a=rt;rt|=4,AS.current=null,Xq(t,n),p6(n,t),Cq(uE),qg=!!cE,uE=cE=null,t.current=n,Zq(n),AW(),rt=a,ft=o,Ms.transition=i}else t.current=n;if(Qm&&(Qm=!1,Da=t,lb=s),i=t.pendingLanes,i===0&&(Ja=null),IW(n.stateNode),$r(t,Qt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ab)throw ab=!1,t=jE,jE=null,t;return lb&1&&t.tag!==0&&ed(),i=t.pendingLanes,i&1?t===OE?yf++:(yf=0,OE=t):yf=0,wl(),null}function ed(){if(Da!==null){var t=eP(lb),e=Ms.transition,n=ft;try{if(Ms.transition=null,ft=16>t?16:t,Da===null)var r=!1;else{if(t=Da,Da=null,lb=0,rt&6)throw Error(ce(331));var s=rt;for(rt|=4,ge=t.current;ge!==null;){var i=ge,o=i.child;if(ge.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ge=c;ge!==null;){var d=ge;switch(d.tag){case 0:case 11:case 15:bf(8,d,i)}var h=d.child;if(h!==null)h.return=d,ge=h;else for(;ge!==null;){d=ge;var f=d.sibling,p=d.return;if(d6(d),d===c){ge=null;break}if(f!==null){f.return=p,ge=f;break}ge=p}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}ge=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ge=o;else e:for(;ge!==null;){if(i=ge,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bf(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ge=b;break e}ge=i.return}}var v=t.current;for(ge=v;ge!==null;){o=ge;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ge=w;else e:for(o=v;ge!==null;){if(a=ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xy(9,a)}}catch(E){Gt(a,a.return,E)}if(a===o){ge=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,ge=S;break e}ge=a.return}}if(rt=s,wl(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(uy,t)}catch{}r=!0}return r}finally{ft=n,Ms.transition=e}}return!1}function N3(t,e,n){e=Cd(n,e),e=e6(t,e,1),t=Ka(t,e,1),e=dr(),t!==null&&(Jp(t,1,e),$r(t,e))}function Gt(t,e,n){if(t.tag===3)N3(t,t,n);else for(;e!==null;){if(e.tag===3){N3(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ja===null||!Ja.has(r))){t=Cd(n,t),t=t6(e,t,1),e=Ka(e,t,1),t=dr(),e!==null&&(Jp(e,1,t),$r(e,t));break}}e=e.return}}function iG(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dr(),t.pingedLanes|=t.suspendedLanes&n,En===t&&(Bn&n)===n&&(mn===4||mn===3&&(Bn&130023424)===Bn&&500>Qt()-OS?cc(t,0):jS|=n),$r(t,e)}function w6(t,e){e===0&&(t.mode&1?(e=Hm,Hm<<=1,!(Hm&130023424)&&(Hm=4194304)):e=1);var n=dr();t=Qo(t,e),t!==null&&(Jp(t,e,n),$r(t,n))}function oG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),w6(t,n)}function aG(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),w6(t,n)}var k6;k6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lr.current)Rr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rr=!1,Yq(t,e,n);Rr=!!(t.flags&131072)}else Rr=!1,$t&&e.flags&1048576&&TP(e,Zg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ag(t,e),t=e.pendingProps;var s=vd(e,er.current);Zu(e,n),s=CS(null,e,r,t,s,n);var i=SS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Br(r)?(i=!0,Qg(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yS(e),s.updater=by,e.stateNode=s,s._reactInternals=e,yE(e,r,t,n),e=kE(null,e,r,!0,i,n)):(e.tag=0,$t&&i&&hS(e),cr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ag(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cG(r),t=Js(r,t),s){case 0:e=wE(null,e,r,t,n);break e;case 1:e=b3(null,e,r,t,n);break e;case 11:e=m3(null,e,r,t,n);break e;case 14:e=g3(null,e,r,Js(r.type,t),n);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Js(r,s),wE(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Js(r,s),b3(t,e,r,s,n);case 3:e:{if(i6(e),t===null)throw Error(ce(387));r=e.pendingProps,i=e.memoizedState,s=i.element,IP(t,e),nb(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Cd(Error(ce(423)),e),e=x3(t,e,r,n,s);break e}else if(r!==s){s=Cd(Error(ce(424)),e),e=x3(t,e,r,n,s);break e}else for(ss=Ya(e.stateNode.containerInfo.firstChild),is=e,$t=!0,ei=null,n=jP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wd(),r===s){e=Xo(t,e,n);break e}cr(t,e,r,n)}e=e.child}return e;case 5:return MP(e),t===null&&gE(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,dE(r,s)?o=null:i!==null&&dE(r,i)&&(e.flags|=32),s6(t,e),cr(t,e,o,n),e.child;case 6:return t===null&&gE(e),null;case 13:return o6(t,e,n);case 4:return vS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=kd(e,null,r,n):cr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Js(r,s),m3(t,e,r,s,n);case 7:return cr(t,e,e.pendingProps,n),e.child;case 8:return cr(t,e,e.pendingProps.children,n),e.child;case 12:return cr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,St(eb,r._currentValue),r._currentValue=o,i!==null)if(fi(i.value,o)){if(i.children===s.children&&!Lr.current){e=Xo(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Fo(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),bE(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bE(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Zu(e,n),s=Hs(s),r=r(s),e.flags|=1,cr(t,e,r,n),e.child;case 14:return r=e.type,s=Js(r,e.pendingProps),s=Js(r.type,s),g3(t,e,r,s,n);case 15:return n6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Js(r,s),ag(t,e),e.tag=1,Br(r)?(t=!0,Qg(e)):t=!1,Zu(e,n),ZP(e,r,s),yE(e,r,s,n),kE(null,e,r,!0,t,n);case 19:return a6(t,e,n);case 22:return r6(t,e,n)}throw Error(ce(156,e.tag))};function E6(t,e){return JR(t,e)}function lG(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(t,e,n,r){return new lG(t,e,n,r)}function PS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cG(t){if(typeof t=="function")return PS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eS)return 11;if(t===tS)return 14}return 2}function Xa(t,e){var n=t.alternate;return n===null?(n=Is(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ug(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")PS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pu:return uc(n.children,s,i,e);case ZC:o=8,s|=8;break;case zk:return t=Is(12,n,e,s|2),t.elementType=zk,t.lanes=i,t;case Vk:return t=Is(13,n,e,s),t.elementType=Vk,t.lanes=i,t;case Wk:return t=Is(19,n,e,s),t.elementType=Wk,t.lanes=i,t;case MR:return vy(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OR:o=10;break e;case IR:o=9;break e;case eS:o=11;break e;case tS:o=14;break e;case ka:o=16,r=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=Is(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function uc(t,e,n,r){return t=Is(7,t,r,e),t.lanes=n,t}function vy(t,e,n,r){return t=Is(22,t,r,e),t.elementType=MR,t.lanes=n,t.stateNode={isHidden:!1},t}function Pv(t,e,n){return t=Is(6,t,null,e),t.lanes=n,t}function Dv(t,e,n){return e=Is(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uG(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gv(0),this.expirationTimes=gv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gv(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function DS(t,e,n,r,s,i,o,a,l){return t=new uG(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Is(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yS(i),t}function dG(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ru,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function C6(t){if(!t)return il;t=t._reactInternals;e:{if(qc(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Br(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(Br(n))return CP(t,n,e)}return e}function S6(t,e,n,r,s,i,o,a,l){return t=DS(n,r,!0,t,s,i,o,a,l),t.context=C6(null),n=t.current,r=dr(),s=Qa(n),i=Fo(r,s),i.callback=e??null,Ka(n,i,s),t.current.lanes=s,Jp(t,s,r),$r(t,r),t}function wy(t,e,n,r){var s=e.current,i=dr(),o=Qa(s);return n=C6(n),e.context===null?e.context=n:e.pendingContext=n,e=Fo(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ka(s,e,o),t!==null&&(ci(t,s,o,i),sg(t,s,o)),o}function ub(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _3(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function LS(t,e){_3(t,e),(t=t.alternate)&&_3(t,e)}function hG(){return null}var T6=typeof reportError=="function"?reportError:function(t){console.error(t)};function BS(t){this._internalRoot=t}ky.prototype.render=BS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));wy(t,e,null,null)};ky.prototype.unmount=BS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cc(function(){wy(null,t,null,null)}),e[Jo]=null}};function ky(t){this._internalRoot=t}ky.prototype.unstable_scheduleHydration=function(t){if(t){var e=rP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Na.length&&e!==0&&e<Na[n].priority;n++);Na.splice(n,0,t),n===0&&iP(t)}};function $S(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ey(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function A3(){}function fG(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=ub(o);i.call(c)}}var o=S6(e,r,t,0,null,!1,!1,"",A3);return t._reactRootContainer=o,t[Jo]=o.current,Jf(t.nodeType===8?t.parentNode:t),Cc(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=ub(l);a.call(c)}}var l=DS(t,0,!1,null,null,!1,!1,"",A3);return t._reactRootContainer=l,t[Jo]=l.current,Jf(t.nodeType===8?t.parentNode:t),Cc(function(){wy(e,l,n,r)}),l}function Cy(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ub(o);a.call(l)}}wy(e,o,t,s)}else o=fG(n,e,t,s,r);return ub(o)}tP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zh(e.pendingLanes);n!==0&&(sS(e,n|1),$r(e,Qt()),!(rt&6)&&(Sd=Qt()+500,wl()))}break;case 13:Cc(function(){var r=Qo(t,1);if(r!==null){var s=dr();ci(r,t,1,s)}}),LS(t,1)}};iS=function(t){if(t.tag===13){var e=Qo(t,134217728);if(e!==null){var n=dr();ci(e,t,134217728,n)}LS(t,134217728)}};nP=function(t){if(t.tag===13){var e=Qa(t),n=Qo(t,e);if(n!==null){var r=dr();ci(n,t,e,r)}LS(t,e)}};rP=function(){return ft};sP=function(t,e){var n=ft;try{return ft=t,e()}finally{ft=n}};tE=function(t,e,n){switch(e){case"input":if(Yk(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=py(r);if(!s)throw Error(ce(90));PR(r),Yk(r,s)}}}break;case"textarea":LR(t,n);break;case"select":e=n.value,e!=null&&Ku(t,!!n.multiple,e,!1)}};VR=IS;WR=Cc;var pG={usingClientEntryPoint:!1,Events:[Xp,$u,py,UR,zR,IS]},Rh={findFiberByHostInstance:ec,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mG={bundleType:Rh.bundleType,version:Rh.version,rendererPackageName:Rh.rendererPackageName,rendererConfig:Rh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:na.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=YR(t),t===null?null:t.stateNode},findFiberByHostInstance:Rh.findFiberByHostInstance||hG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xm.isDisabled&&Xm.supportsFiber)try{uy=Xm.inject(mG),Yi=Xm}catch{}}ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pG;ms.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$S(e))throw Error(ce(200));return dG(t,e,null,n)};ms.createRoot=function(t,e){if(!$S(t))throw Error(ce(299));var n=!1,r="",s=T6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=DS(t,1,!1,null,null,n,!1,r,s),t[Jo]=e.current,Jf(t.nodeType===8?t.parentNode:t),new BS(e)};ms.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=YR(e),t=t===null?null:t.stateNode,t};ms.flushSync=function(t){return Cc(t)};ms.hydrate=function(t,e,n){if(!Ey(e))throw Error(ce(200));return Cy(null,t,e,!0,n)};ms.hydrateRoot=function(t,e,n){if(!$S(t))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=T6;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=S6(e,null,t,1,n??null,s,!1,i,o),t[Jo]=e.current,Jf(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ky(e)};ms.render=function(t,e,n){if(!Ey(e))throw Error(ce(200));return Cy(null,t,e,!1,n)};ms.unmountComponentAtNode=function(t){if(!Ey(t))throw Error(ce(40));return t._reactRootContainer?(Cc(function(){Cy(null,null,t,!1,function(){t._reactRootContainer=null,t[Jo]=null})}),!0):!1};ms.unstable_batchedUpdates=IS;ms.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ey(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return Cy(t,e,n,!1,r)};ms.version="18.3.1-next-f1338f8080-20240426";function N6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N6)}catch(t){console.error(t)}}N6(),NR.exports=ms;var eo=NR.exports;const _6=qp(eo);var j3=eo;Hk.createRoot=j3.createRoot,Hk.hydrateRoot=j3.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ip.apply(this,arguments)}var La;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(La||(La={}));const O3="popstate";function gG(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return RE("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:db(s)}return xG(e,n,null,t)}function Zt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function FS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bG(){return Math.random().toString(36).substr(2,8)}function I3(t,e){return{usr:t.state,key:t.key,idx:e}}function RE(t,e,n,r){return n===void 0&&(n=null),ip({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?eh(e):e,{state:n,key:e&&e.key||r||bG()})}function db(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function eh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xG(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=La.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ip({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=La.Pop;let x=d(),b=x==null?null:x-c;c=x,l&&l({action:a,location:g.location,delta:b})}function f(x,b){a=La.Push;let v=RE(g.location,x,b);c=d()+1;let w=I3(v,c),S=g.createHref(v);try{o.pushState(w,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(S)}i&&l&&l({action:a,location:g.location,delta:1})}function p(x,b){a=La.Replace;let v=RE(g.location,x,b);c=d();let w=I3(v,c),S=g.createHref(v);o.replaceState(w,"",S),i&&l&&l({action:a,location:g.location,delta:0})}function m(x){let b=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof x=="string"?x:db(x);return v=v.replace(/ $/,"%20"),Zt(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let g={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(O3,h),l=x,()=>{s.removeEventListener(O3,h),l=null}},createHref(x){return e(s,x)},createURL:m,encodeLocation(x){let b=m(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(x){return o.go(x)}};return g}var M3;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(M3||(M3={}));function yG(t,e,n){return n===void 0&&(n="/"),vG(t,e,n)}function vG(t,e,n,r){let s=typeof e=="string"?eh(e):e,i=HS(s.pathname||"/",n);if(i==null)return null;let o=A6(t);wG(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=MG(i);a=jG(o[l],c)}return a}function A6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Zt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Za([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Zt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),A6(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:_G(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of j6(i.path))s(i,o,l)}),e}function j6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=j6(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function wG(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:AG(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kG=/^:[\w-]+$/,EG=3,CG=2,SG=1,TG=10,NG=-2,R3=t=>t==="*";function _G(t,e){let n=t.split("/"),r=n.length;return n.some(R3)&&(r+=NG),e&&(r+=CG),n.filter(s=>!R3(s)).reduce((s,i)=>s+(kG.test(i)?EG:i===""?SG:TG),r)}function AG(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function jG(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=OG({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Za([i,h.pathname]),pathnameBase:BG(Za([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Za([i,h.pathnameBase]))}return o}function OG(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=IG(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function IG(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),FS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function MG(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return FS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function HS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const RG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PG=t=>RG.test(t);function DG(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?eh(t):t,i;if(n)if(PG(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),FS(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=P3(n.substring(1),"/"):i=P3(n,e)}else i=e;return{pathname:i,search:$G(r),hash:FG(s)}}function P3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Lv(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LG(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function US(t,e){let n=LG(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zS(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=eh(t):(s=ip({},t),Zt(!s.pathname||!s.pathname.includes("?"),Lv("?","pathname","search",s)),Zt(!s.pathname||!s.pathname.includes("#"),Lv("#","pathname","hash",s)),Zt(!s.search||!s.search.includes("#"),Lv("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=DG(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Za=t=>t.join("/").replace(/\/\/+/g,"/"),BG=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$G=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FG=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HG(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const O6=["post","put","patch","delete"];new Set(O6);const UG=["get",...O6];new Set(UG);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function op(){return op=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},op.apply(this,arguments)}const VS=y.createContext(null),zG=y.createContext(null),kl=y.createContext(null),Sy=y.createContext(null),ho=y.createContext({outlet:null,matches:[],isDataRoute:!1}),I6=y.createContext(null);function VG(t,e){let{relative:n}=e===void 0?{}:e;th()||Zt(!1);let{basename:r,navigator:s}=y.useContext(kl),{hash:i,pathname:o,search:a}=R6(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Za([r,o])),s.createHref({pathname:l,search:a,hash:i})}function th(){return y.useContext(Sy)!=null}function El(){return th()||Zt(!1),y.useContext(Sy).location}function M6(t){y.useContext(kl).static||y.useLayoutEffect(t)}function ra(){let{isDataRoute:t}=y.useContext(ho);return t?oY():WG()}function WG(){th()||Zt(!1);let t=y.useContext(VS),{basename:e,future:n,navigator:r}=y.useContext(kl),{matches:s}=y.useContext(ho),{pathname:i}=El(),o=JSON.stringify(US(s,n.v7_relativeSplatPath)),a=y.useRef(!1);return M6(()=>{a.current=!0}),y.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=zS(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Za([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}const qG=y.createContext(null);function GG(t){let e=y.useContext(ho).outlet;return e&&y.createElement(qG.Provider,{value:t},e)}function YG(){let{matches:t}=y.useContext(ho),e=t[t.length-1];return e?e.params:{}}function R6(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=y.useContext(kl),{matches:s}=y.useContext(ho),{pathname:i}=El(),o=JSON.stringify(US(s,r.v7_relativeSplatPath));return y.useMemo(()=>zS(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function KG(t,e){return JG(t,e)}function JG(t,e,n,r){th()||Zt(!1);let{navigator:s}=y.useContext(kl),{matches:i}=y.useContext(ho),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=El(),d;if(e){var h;let x=typeof e=="string"?eh(e):e;l==="/"||(h=x.pathname)!=null&&h.startsWith(l)||Zt(!1),d=x}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let x=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let m=yG(t,{pathname:p}),g=tY(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Za([l,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Za([l,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return e&&g?y.createElement(Sy.Provider,{value:{location:op({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:La.Pop}},g):g}function QG(){let t=iY(),e=HG(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,null)}const XG=y.createElement(QG,null);class ZG extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(ho.Provider,{value:this.props.routeContext},y.createElement(I6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eY(t){let{routeContext:e,match:n,children:r}=t,s=y.useContext(VS);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(ho.Provider,{value:e},r)}function tY(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Zt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,x=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||XG,l&&(c<0&&f===0?(aY("route-fallback"),m=!0,x=null):c===f&&(m=!0,x=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,f+1)),v=()=>{let w;return p?w=g:m?w=x:h.route.Component?w=y.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,y.createElement(eY,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(ZG,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var P6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(P6||{}),D6=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(D6||{});function nY(t){let e=y.useContext(VS);return e||Zt(!1),e}function rY(t){let e=y.useContext(zG);return e||Zt(!1),e}function sY(t){let e=y.useContext(ho);return e||Zt(!1),e}function L6(t){let e=sY(),n=e.matches[e.matches.length-1];return n.route.id||Zt(!1),n.route.id}function iY(){var t;let e=y.useContext(I6),n=rY(),r=L6();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function oY(){let{router:t}=nY(P6.UseNavigateStable),e=L6(D6.UseNavigateStable),n=y.useRef(!1);return M6(()=>{n.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,op({fromRouteId:e},i)))},[t,e])}const D3={};function aY(t,e,n){D3[t]||(D3[t]=!0)}function lY(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function cY(t){let{to:e,replace:n,state:r,relative:s}=t;th()||Zt(!1);let{future:i,static:o}=y.useContext(kl),{matches:a}=y.useContext(ho),{pathname:l}=El(),c=ra(),d=zS(e,US(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return y.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function uY(t){return GG(t.context)}function qt(t){Zt(!1)}function dY(t){let{basename:e="/",children:n=null,location:r,navigationType:s=La.Pop,navigator:i,static:o=!1,future:a}=t;th()&&Zt(!1);let l=e.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:l,navigator:i,static:o,future:op({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=eh(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=r,g=y.useMemo(()=>{let x=HS(d,l);return x==null?null:{location:{pathname:x,search:h,hash:f,state:p,key:m},navigationType:s}},[l,d,h,f,p,m,s]);return g==null?null:y.createElement(kl.Provider,{value:c},y.createElement(Sy.Provider,{children:n,value:g}))}function hY(t){let{children:e,location:n}=t;return KG(PE(e),n)}new Promise(()=>{});function PE(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,PE(r.props.children,i));return}r.type!==qt&&Zt(!1),!r.props.index||!r.props.children||Zt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=PE(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function DE(){return DE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DE.apply(this,arguments)}function fY(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function pY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mY(t,e){return t.button===0&&(!e||e==="_self")&&!pY(t)}function LE(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function gY(t,e){let n=LE(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const bY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xY="6";try{window.__reactRouterVersion=xY}catch{}const yY="startTransition",L3=Kp[yY];function vY(t){let{basename:e,children:n,future:r,window:s}=t,i=y.useRef();i.current==null&&(i.current=gG({window:s,v5Compat:!0}));let o=i.current,[a,l]=y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=y.useCallback(h=>{c&&L3?L3(()=>l(h)):l(h)},[l,c]);return y.useLayoutEffect(()=>o.listen(d),[o,d]),y.useEffect(()=>lY(r),[r]),y.createElement(dY,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const wY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EY=y.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=fY(e,bY),{basename:p}=y.useContext(kl),m,g=!1;if(typeof c=="string"&&kY.test(c)&&(m=c,wY))try{let w=new URL(window.location.href),S=c.startsWith("//")?new URL(w.protocol+c):new URL(c),E=HS(S.pathname,p);S.origin===w.origin&&E!=null?c=E+S.search+S.hash:g=!0}catch{}let x=VG(c,{relative:s}),b=CY(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function v(w){r&&r(w),w.defaultPrevented||b(w)}return y.createElement("a",DE({},f,{href:m||x,onClick:g||i?r:v,ref:n,target:l}))});var B3;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(B3||(B3={}));var $3;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($3||($3={}));function CY(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ra(),c=El(),d=R6(t,{relative:o});return y.useCallback(h=>{if(mY(h,n)){h.preventDefault();let f=r!==void 0?r:db(c)===db(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function SY(t){let e=y.useRef(LE(t)),n=y.useRef(!1),r=El(),s=y.useMemo(()=>gY(r.search,n.current?null:e.current),[r.search]),i=ra(),o=y.useCallback((a,l)=>{const c=LE(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var WS={},hb={},BE=function(t,e){return BE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},BE(t,e)};function B6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");BE(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _s=function(){return _s=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_s.apply(this,arguments)};function Cl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $6(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function F6(t,e){return function(n,r){e(n,r,t)}}function H6(t,e,n,r,s,i){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,d=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,f=!1,p=n.length-1;p>=0;p--){var m={};for(var g in r)m[g]=g==="access"?{}:r[g];for(var g in r.access)m.access[g]=r.access[g];m.addInitializer=function(b){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(b||null))};var x=(0,n[p])(a==="accessor"?{get:d.get,set:d.set}:d[l],m);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=o(x.get))&&(d.get=h),(h=o(x.set))&&(d.set=h),(h=o(x.init))&&s.unshift(h)}else(h=o(x))&&(a==="field"?s.unshift(h):d[l]=h)}c&&Object.defineProperty(c,r.name,d),f=!0}function U6(t,e,n){for(var r=arguments.length>2,s=0;s<e.length;s++)n=r?e[s].call(t,n):e[s].call(t);return r?n:void 0}function z6(t){return typeof t=="symbol"?t:"".concat(t)}function V6(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function W6(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function be(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function q6(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Ty=Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function G6(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ty(e,t,n)}function fb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qS(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Y6(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(qS(arguments[e]));return t}function K6(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function GS(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Td(t){return this instanceof Td?(this.v=t,this):new Td(t)}function J6(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(p){return function(m){return Promise.resolve(m).then(p,h)}}function a(p,m){r[p]&&(s[p]=function(g){return new Promise(function(x,b){i.push([p,g,x,b])>1||l(p,g)})},m&&(s[p]=m(s[p])))}function l(p,m){try{c(r[p](m))}catch(g){f(i[0][3],g)}}function c(p){p.value instanceof Td?Promise.resolve(p.value.v).then(d,h):f(i[0][2],p)}function d(p){l("next",p)}function h(p){l("throw",p)}function f(p,m){p(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Q6(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Td(t[s](o)),done:!1}:i?i(o):o}:i}}function X6(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof fb=="function"?fb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function Z6(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var TY=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},$E=function(t){return $E=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},$E(t)};function eD(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=$E(t),r=0;r<n.length;r++)n[r]!=="default"&&Ty(e,t,n[r]);return TY(e,t),e}function tD(t){return t&&t.__esModule?t:{default:t}}function nD(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function rD(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function sD(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function iD(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var NY=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function oD(t){function e(i){t.error=t.hasError?new NY(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var n,r=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function aD(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,i,o){return r?e?".jsx":".js":s&&(!i||!o)?n:s+i+"."+o.toLowerCase()+"js"}):t}const _Y={__extends:B6,__assign:_s,__rest:Cl,__decorate:$6,__param:F6,__esDecorate:H6,__runInitializers:U6,__propKey:z6,__setFunctionName:V6,__metadata:W6,__awaiter:be,__generator:q6,__createBinding:Ty,__exportStar:G6,__values:fb,__read:qS,__spread:Y6,__spreadArrays:K6,__spreadArray:GS,__await:Td,__asyncGenerator:J6,__asyncDelegator:Q6,__asyncValues:X6,__makeTemplateObject:Z6,__importStar:eD,__importDefault:tD,__classPrivateFieldGet:nD,__classPrivateFieldSet:rD,__classPrivateFieldIn:sD,__addDisposableResource:iD,__disposeResources:oD,__rewriteRelativeImportExtension:aD},AY=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:iD,get __assign(){return _s},__asyncDelegator:Q6,__asyncGenerator:J6,__asyncValues:X6,__await:Td,__awaiter:be,__classPrivateFieldGet:nD,__classPrivateFieldIn:sD,__classPrivateFieldSet:rD,__createBinding:Ty,__decorate:$6,__disposeResources:oD,__esDecorate:H6,__exportStar:G6,__extends:B6,__generator:q6,__importDefault:tD,__importStar:eD,__makeTemplateObject:Z6,__metadata:W6,__param:F6,__propKey:z6,__read:qS,__rest:Cl,__rewriteRelativeImportExtension:aD,__runInitializers:U6,__setFunctionName:V6,__spread:Y6,__spreadArray:GS,__spreadArrays:K6,__values:fb,default:_Y},Symbol.toStringTag,{value:"Module"})),jY=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Ny=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},lD=class extends Ny{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},FE=class extends Ny{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},HE=class extends Ny{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var pb;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(pb||(pb={}));class OY{constructor(e,{headers:n={},customFetch:r,region:s=pb.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=jY(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return be(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:d,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let g;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=c):typeof c=="string"?(f["Content-Type"]="text/plain",g=c):typeof FormData<"u"&&c instanceof FormData?g=c:(f["Content-Type"]="application/json",g=JSON.stringify(c)):g=c;let x=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(x=o.signal,d.addEventListener("abort",()=>o.abort())):x=o.signal);const b=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:g,signal:x}).catch(E=>{throw new lD(E)}),v=b.headers.get("x-relay-error");if(v&&v==="true")throw new FE(b);if(!b.ok)throw new HE(b);let w=((s=b.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield b.json():w==="application/octet-stream"||w==="application/pdf"?S=yield b.blob():w==="text/event-stream"?S=b:w==="multipart/form-data"?S=yield b.formData():S=yield b.text(),{data:S,error:null,response:b}}catch(a){return{data:null,error:a,response:a instanceof HE||a instanceof FE?a.context:void 0}}finally{i&&clearTimeout(i)}})}}const IY=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return pb},FunctionsClient:OY,FunctionsError:Ny,FunctionsFetchError:lD,FunctionsHttpError:HE,FunctionsRelayError:FE},Symbol.toStringTag,{value:"Module"})),cD=Gp(IY);var Jn={};const nh=Gp(AY);var Zm={},e0={},t0={},n0={},r0={},s0={},F3;function uD(){if(F3)return s0;F3=1,Object.defineProperty(s0,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return s0.default=t,s0}var H3;function dD(){if(H3)return r0;H3=1,Object.defineProperty(r0,"__esModule",{value:!0});const e=nh.__importDefault(uD());let n=class{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,d,h,f;let p=null,m=null,g=null,x=l.status,b=l.statusText;if(l.ok){if(this.method!=="HEAD"){const E=await l.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?m=E:m=JSON.parse(E))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),S=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&S&&S.length>1&&(g=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(p={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,x=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const w=await l.text();try{p=JSON.parse(w),Array.isArray(p)&&l.status===404&&(m=[],p=null,x=200,b="OK")}catch{l.status===404&&w===""?(x=204,b="No Content"):p={message:w}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,x=200,b="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:m,count:g,status:x,statusText:b}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,d,h,f,p,m;let g="";const x=l==null?void 0:l.cause;if(x){const b=(c=x==null?void 0:x.message)!==null&&c!==void 0?c:"",v=(d=x==null?void 0:x.code)!==null&&d!==void 0?d:"";g=`${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"FetchError"}: ${l==null?void 0:l.message}`,g+=`

Caused by: ${(f=x==null?void 0:x.name)!==null&&f!==void 0?f:"Error"}: ${b}`,v&&(g+=` (${v})`),x!=null&&x.stack&&(g+=`
${x.stack}`)}else g=(p=l==null?void 0:l.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(m=l==null?void 0:l.name)!==null&&m!==void 0?m:"FetchError"}: ${l==null?void 0:l.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(s,i)}returns(){return this}overrideTypes(){return this}};return r0.default=n,r0}var U3;function hD(){if(U3)return n0;U3=1,Object.defineProperty(n0,"__esModule",{value:!0});const e=nh.__importDefault(dD());let n=class extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var d;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};return n0.default=n,n0}var z3;function YS(){if(z3)return t0;z3=1,Object.defineProperty(t0,"__esModule",{value:!0});const e=nh.__importDefault(hD()),n=new RegExp("[,()]");let r=class extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}};return t0.default=r,t0}var V3;function fD(){if(V3)return e0;V3=1,Object.defineProperty(e0,"__esModule",{value:!0});const e=nh.__importDefault(YS());let n=class{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",d),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return e0.default=n,e0}var W3;function MY(){if(W3)return Zm;W3=1,Object.defineProperty(Zm,"__esModule",{value:!0});const t=nh,e=t.__importDefault(fD()),n=t.__importDefault(YS());let r=class pD{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new pD(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var d;let h;const f=new URL(`${this.url}/rpc/${i}`);let p;a||l?(h=a?"HEAD":"GET",Object.entries(o).filter(([g,x])=>x!==void 0).map(([g,x])=>[g,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([g,x])=>{f.searchParams.append(g,x)})):(h="POST",p=o);const m=new Headers(this.headers);return c&&m.set("Prefer",`count=${c}`),new n.default({method:h,url:f,headers:m,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};return Zm.default=r,Zm}Object.defineProperty(Jn,"__esModule",{value:!0});Jn.PostgrestError=Jn.PostgrestBuilder=Jn.PostgrestTransformBuilder=Jn.PostgrestFilterBuilder=Jn.PostgrestQueryBuilder=Jn.PostgrestClient=void 0;const rh=nh,mD=rh.__importDefault(MY());Jn.PostgrestClient=mD.default;const gD=rh.__importDefault(fD());Jn.PostgrestQueryBuilder=gD.default;const bD=rh.__importDefault(YS());Jn.PostgrestFilterBuilder=bD.default;const xD=rh.__importDefault(hD());Jn.PostgrestTransformBuilder=xD.default;const yD=rh.__importDefault(dD());Jn.PostgrestBuilder=yD.default;const vD=rh.__importDefault(uD());Jn.PostgrestError=vD.default;Jn.default={PostgrestClient:mD.default,PostgrestQueryBuilder:gD.default,PostgrestFilterBuilder:bD.default,PostgrestTransformBuilder:xD.default,PostgrestBuilder:yD.default,PostgrestError:vD.default};class wD{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const RY="2.87.1",PY=`realtime-js/${RY}`,kD="1.0.0",DY="2.0.0",q3=kD,UE=1e4,LY=1e3,BY=100;var Jl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Jl||(Jl={}));var rn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rn||(rn={}));var Zs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Zs||(Zs={}));var zE;(function(t){t.websocket="websocket"})(zE||(zE={}));var Ql;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ql||(Ql={}));class $Y{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,l.length),m.setUint8(g++,a.length),m.setUint8(g++,o.length),m.setUint8(g++,c.length),m.setUint8(g++,h.length),m.setUint8(g++,n),Array.from(l,b=>m.setUint8(g++,b.charCodeAt(0))),Array.from(a,b=>m.setUint8(g++,b.charCodeAt(0))),Array.from(o,b=>m.setUint8(g++,b.charCodeAt(0))),Array.from(c,b=>m.setUint8(g++,b.charCodeAt(0))),Array.from(h,b=>m.setUint8(g++,b.charCodeAt(0)));var x=new Uint8Array(p.byteLength+r.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(r),p.byteLength),x.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+s));l=l+s;const d=r.decode(e.slice(l,l+i));l=l+i;const h=r.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,m={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(m.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class ED{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var vt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(vt||(vt={}));const G3=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=FY(o,t,e,s),i),{}):{}},FY=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?CD(i,o):VE(o)},CD=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return VY(e,n)}switch(t){case vt.bool:return HY(e);case vt.float4:case vt.float8:case vt.int2:case vt.int4:case vt.int8:case vt.numeric:case vt.oid:return UY(e);case vt.json:case vt.jsonb:return zY(e);case vt.timestamp:return WY(e);case vt.abstime:case vt.date:case vt.daterange:case vt.int4range:case vt.int8range:case vt.money:case vt.reltime:case vt.text:case vt.time:case vt.timestamptz:case vt.timetz:case vt.tsrange:case vt.tstzrange:return VE(e);default:return VE(e)}},VE=t=>t,HY=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},UY=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},zY=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},VY=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>CD(e,a))}return t},WY=t=>typeof t=="string"?t.replace(" ","T"):t,SD=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Bv{constructor(e,n,r={},s=UE){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var WE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(WE||(WE={}));let TD=class dg{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dg.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=dg.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=dg.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const f=d.map(x=>x.presence_ref),p=h.map(x=>x.presence_ref),m=d.filter(x=>p.indexOf(x.presence_ref)<0),g=h.filter(x=>f.indexOf(x.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var qE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(qE||(qE={}));var td;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(td||(td={}));var Hi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Hi||(Hi={}));const qY=rn;let ND=class tf{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=rn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Bv(this,Zs.join,this.params,this.timeout),this.rejoinTimer=new ED(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zs.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new TD(this),this.broadcastEndpointURL=SD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==rn.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[td.PRESENCE]&&this.bindings[td.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Hi.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Hi.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(Hi.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,b=[];for(let v=0;v<x;v++){const w=g[v],{filter:{event:S,schema:E,table:C,filter:T}}=w,_=p&&p[v];if(_&&_.event===S&&tf.isFilterValueEqual(_.schema,E)&&tf.isFilterValueEqual(_.table,C)&&tf.isFilterValueEqual(_.filter,T))b.push(Object.assign(Object.assign({},w),{id:_.id}));else{this.unsubscribe(),this.state=rn.errored,e==null||e(Hi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Hi.SUBSCRIBED);return}}).receive("error",p=>{this.state=rn.errored,e==null||e(Hi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Hi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===rn.joined&&e===td.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Bv(this,Zs.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=rn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Bv(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>BY){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=Zs;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,g,x;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((x=(g=p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var m,g,x,b,v,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const S=p.id,E=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((g=n.ids)===null||g===void 0?void 0:g.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const S=(v=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return S==="*"||S===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:x,commit_timestamp:b,type:v,errors:w}=m;f=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:b,eventType:v,new:{},old:{},errors:w}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===rn.closed}_isJoined(){return this.state===rn.joined}_isJoining(){return this.state===rn.joining}_isLeaving(){return this.state===rn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&tf.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Zs.close,{},e)}_onError(e){this._on(Zs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=G3(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=G3(e.columns,e.old_record)),n}};const $v=()=>{},i0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},GY=[1e3,2e3,5e3,1e4],YY=1e4,KY=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let JY=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=UE,this.transport=null,this.heartbeatIntervalMs=i0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$v,this.ref=0,this.reconnectTimer=null,this.vsn=q3,this.logger=$v,this.conn=null,this.sendBuffer=[],this.serializer=new $Y,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${zE.websocket}`,this.httpEndpoint=SD(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=wD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Jl.connecting:return Ql.Connecting;case Jl.open:return Ql.Open;case Jl.closing:return Ql.Closing;default:return Ql.Closed}}isConnected(){return this.connectionState()===Ql.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ND(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(LY,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},i0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Jl.open||this.conn.readyState===Jl.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Zs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([KY],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:PY};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Zs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ED(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},i0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,c,d,h,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:UE,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:i0.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:$v,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:q3,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>GY[m-1]||YY,this.vsn){case kD:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(m,g)=>g(JSON.stringify(m)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(m,g)=>g(JSON.parse(m));break;case DY:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const QY=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:qY,get REALTIME_LISTEN_TYPES(){return td},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return qE},get REALTIME_PRESENCE_LISTEN_EVENTS(){return WE},get REALTIME_SUBSCRIBE_STATES(){return Hi},RealtimeChannel:ND,RealtimeClient:JY,RealtimePresence:TD,WebSocketFactory:wD},Symbol.toStringTag,{value:"Module"})),_D=Gp(QY);class em extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class AD extends em{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mb extends em{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const KS=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),XY=()=>Response,GE=t=>{if(Array.isArray(t))return t.map(n=>GE(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=GE(r)}),e},ZY=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},eK=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Fv=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},tK=(t,e,n)=>be(void 0,void 0,void 0,function*(){const r=yield XY();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new AD(Fv(s),i,o))}).catch(s=>{e(new mb(Fv(s),s))}):e(new mb(Fv(t),t))}),nK=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(ZY(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function tm(t,e,n,r,s,i){return be(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,nK(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>tK(l,a,r))})})}function ap(t,e,n,r){return be(this,void 0,void 0,function*(){return tm(t,"GET",e,n,r)})}function Qs(t,e,n,r,s){return be(this,void 0,void 0,function*(){return tm(t,"POST",e,r,s,n)})}function YE(t,e,n,r,s){return be(this,void 0,void 0,function*(){return tm(t,"PUT",e,r,s,n)})}function rK(t,e,n,r){return be(this,void 0,void 0,function*(){return tm(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function JS(t,e,n,r,s){return be(this,void 0,void 0,function*(){return tm(t,"DELETE",e,r,s,n)})}class sK{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return be(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Bt(e))return{data:null,error:e};throw e}})}}var jD;class iK{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[jD]="BlobDownloadBuilder",this.promise=null}asStream(){return new sK(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return be(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Bt(e))return{data:null,error:e};throw e}})}}jD=Symbol.toStringTag;const oK={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Y3={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class aK{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=KS(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return be(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Y3),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(e=="PUT"?YE:Qs)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Bt(i))return{data:null,error:i};throw i}})}upload(e,n,r){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return be(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Y3.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield YE(this.fetch,a.toString(),l,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Bt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return be(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Qs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new em("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}update(e,n,r){return be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return be(this,void 0,void 0,function*(){try{return{data:yield Qs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return be(this,void 0,void 0,function*(){try{return{data:{path:(yield Qs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return be(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Qs(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return be(this,void 0,void 0,function*(){try{const s=yield Qs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>ap(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new iK(l,this.shouldThrowOnError)}info(e){return be(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ap(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:GE(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}exists(e){return be(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield rK(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r)&&r instanceof mb){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return be(this,void 0,void 0,function*(){try{return{data:yield JS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}list(e,n,r){return be(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},oK),n),{prefix:e||""});return{data:yield Qs(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}listV2(e,n){return be(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Qs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const OD="2.87.1",ID={"X-Client-Info":`storage-js/${OD}`};class lK{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ID),n),this.fetch=KS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return be(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield ap(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}getBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield ap(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}createBucket(e){return be(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Qs(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return be(this,void 0,void 0,function*(){try{return{data:yield YE(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield Qs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield JS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var lp=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function cK(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function uK(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function dK(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=cK(t.baseUrl,r,s),l=await uK(t.auth),c=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!c.ok){const p=h?f:void 0,m=p==null?void 0:p.error;throw new lp((m==null?void 0:m.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function o0(t){return t.join("")}var hK=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:o0(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${o0(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${o0(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${o0(t.namespace)}`}),!0}catch(e){if(e instanceof lp&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof lp&&n.status===409)return;throw n}}};function ou(t){return t.join("")}var fK=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ou(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ou(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ou(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ou(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ou(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ou(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof lp&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof lp&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},pK=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=dK({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new hK(this.client,e),this.tableOps=new fK(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class MD{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ID),n),this.fetch=KS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield Qs(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}listBuckets(e){return be(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield ap(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield JS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}from(e){if(!eK(e))throw new em("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new pK({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>be(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const a=i[o];return typeof a!="function"?a:(...l)=>be(this,void 0,void 0,function*(){try{return{data:yield a.apply(i,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}})}})}}const QS={"X-Client-Info":`storage-js/${OD}`,"Content-Type":"application/json"};class XS extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Or(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class hg extends XS{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class RD extends XS{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var KE;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(KE||(KE={}));const _y=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mK=()=>Response,PD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gK=t=>Array.from(new Float32Array(t)),bK=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},K3=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xK=(t,e,n)=>be(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new hg(K3(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new hg(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new hg(a,s,o))}}else e(new RD(K3(t),t))}),yK=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(PD(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function vK(t,e,n,r,s,i){return be(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,yK(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>xK(l,a,r))})})}function ts(t,e,n,r,s){return be(this,void 0,void 0,function*(){return vK(t,"POST",e,r,s,n)})}class DD{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},QS),n),this.fetch=_y(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return be(this,void 0,void 0,function*(){try{return{data:(yield ts(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}getIndex(e,n){return be(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}})}listIndexes(e){return be(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return be(this,void 0,void 0,function*(){try{return{data:(yield ts(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}})}}class LD{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},QS),n),this.fetch=_y(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return be(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ts(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}getVectors(e){return be(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}listVectors(e){return be(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ts(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}queryVectors(e){return be(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}deleteVectors(e){return be(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ts(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}}class BD{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},QS),n),this.fetch=_y(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return be(this,void 0,void 0,function*(){try{return{data:(yield ts(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}getBucket(e){return be(this,void 0,void 0,function*(){try{return{data:yield ts(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}listBuckets(){return be(this,arguments,void 0,function*(e={}){try{return{data:yield ts(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}deleteBucket(e){return be(this,void 0,void 0,function*(){try{return{data:(yield ts(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}})}}class $D extends BD{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new FD(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return be(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return be(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return be(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return be(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class FD extends DD{constructor(e,n,r,s){super(e,n,s),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return be(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return be(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return be(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return be(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new HD(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class HD extends LD{constructor(e,n,r,s,i){super(e,n,i),this.vectorBucketName=r,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return be(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return be(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return be(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return be(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return be(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class wK extends lK{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new aK(this.url,this.headers,e,this.fetch)}get vectors(){return new $D(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new MD(this.url+"/iceberg",this.headers,this.fetch)}}const kK=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:MD,StorageApiError:AD,StorageClient:wK,StorageError:em,StorageUnknownError:mb,StorageVectorsApiError:hg,StorageVectorsClient:$D,StorageVectorsError:XS,get StorageVectorsErrorCode(){return KE},StorageVectorsUnknownError:RD,VectorBucketApi:BD,VectorBucketScope:FD,VectorDataApi:LD,VectorIndexApi:DD,VectorIndexScope:HD,isPlainObject:PD,isStorageError:Bt,isStorageVectorsError:Or,normalizeToFloat32:gK,resolveFetch:_y,resolveResponse:mK,validateVectorDimension:bK},Symbol.toStringTag,{value:"Module"})),EK=Gp(kK);var UD={},Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});Ay.version=void 0;Ay.version="2.87.1";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=Ay;let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(UD);var zD={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=s=>s?(...i)=>s(...i):(...i)=>fetch(...i);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const r=(s,i,o)=>{const a=(0,t.resolveFetch)(o),l=(0,t.resolveHeadersConstructor)();return async(c,d)=>{var h;const f=(h=await i())!==null&&h!==void 0?h:s;let p=new l(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",s),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),a(c,Object.assign(Object.assign({},d),{headers:p}))}};t.fetchWithAuth=r})(zD);var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.isBrowser=void 0;Sl.uuid=CK;Sl.ensureTrailingSlash=VD;Sl.applySettingDefaults=TK;Sl.validateSupabaseUrl=NK;function CK(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t=="x"?e:e&3|8;return n.toString(16)})}function VD(t){return t.endsWith("/")?t:t+"/"}const SK=()=>typeof window<"u";Sl.isBrowser=SK;function TK(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function NK(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(VD(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var jy={};const WD="2.87.1",Eu=30*1e3,JE=3,Hv=JE*Eu,_K="http://localhost:9999",AK="supabase.auth.token",jK={"X-Client-Info":`gotrue-js/${WD}`},QE="X-Supabase-Api-Version",qD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},OK=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,IK=10*60*1e3;let Nd=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function we(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let GD=class extends Nd{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function YD(t){return we(t)&&t.name==="AuthApiError"}let Aa=class extends Nd{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},sa=class extends Nd{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}},Sr=class extends sa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function KD(t){return we(t)&&t.name==="AuthSessionMissingError"}let ql=class extends sa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},nf=class extends sa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},rf=class extends sa{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function JD(t){return we(t)&&t.name==="AuthImplicitGrantRedirectError"}let XE=class extends sa{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},gb=class extends sa{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function fg(t){return we(t)&&t.name==="AuthRetryableFetchError"}let ZE=class extends sa{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function MK(t){return we(t)&&t.name==="AuthWeakPasswordError"}let bb=class extends sa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const xb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),J3=` 	
\r=`.split(""),RK=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<J3.length;e+=1)t[J3[e].charCodeAt(0)]=-2;for(let e=0;e<xb.length;e+=1)t[xb[e].charCodeAt(0)]=e;return t})();function Q3(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(xb[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(xb[r]),e.queuedBits-=6}}function QD(t,e,n){const r=RK[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function X3(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{LK(o,r,n)};for(let o=0;o<t.length;o+=1)QD(t.charCodeAt(o),s,i);return e.join("")}function PK(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function DK(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}PK(r,e)}}function LK(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function nd(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)QD(t.charCodeAt(s),n,r);return new Uint8Array(e)}function BK(t){const e=[];return DK(t,n=>e.push(n)),new Uint8Array(e)}function rc(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Q3(s,n,r)),Q3(null,n,r),e.join("")}function $K(t){return Math.round(Date.now()/1e3)+t}function FK(){return Symbol("auth-callback")}const In=()=>typeof window<"u"&&typeof document<"u",Ll={tested:!1,writable:!1},XD=()=>{if(!In())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ll.tested)return Ll.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ll.tested=!0,Ll.writable=!0}catch{Ll.tested=!0,Ll.writable=!1}return Ll.writable};function HK(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const ZD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),UK=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Cu=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Bl=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},jn=async(t,e)=>{await t.removeItem(e)};class Oy{constructor(){this.promise=new Oy.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Oy.promiseConstructor=Promise;function Uv(t){const e=t.split(".");if(e.length!==3)throw new bb("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!OK.test(e[r]))throw new bb("JWT not in base64url format");return{header:JSON.parse(X3(e[0])),payload:JSON.parse(X3(e[1])),signature:nd(e[2]),raw:{header:e[0],payload:e[1]}}}async function zK(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function VK(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function WK(t){return("0"+t.toString(16)).substr(-2)}function qK(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,WK).join("")}async function GK(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function YK(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await GK(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function au(t,e,n=!1){const r=qK();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Cu(t,`${e}-code-verifier`,s);const i=await YK(r);return[i,r===i?"plain":"s256"]}const KK=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JK(t){const e=t.headers.get(QE);if(!e||!e.match(KK))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function QK(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function XK(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ZK=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lu(t){if(!ZK.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zv(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function eJ(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function Z3(t){return JSON.parse(JSON.stringify(t))}const Gl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tJ=[502,503,504];async function ej(t){var e;if(!UK(t))throw new gb(Gl(t),0);if(tJ.includes(t.status))throw new gb(Gl(t),t.status);let n;try{n=await t.json()}catch(i){throw new Aa(Gl(i),i)}let r;const s=JK(t);if(s&&s.getTime()>=qD["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ZE(Gl(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Sr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ZE(Gl(n),t.status,n.weak_password.reasons);throw new GD(Gl(n),t.status||500,r)}const nJ=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function _e(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[QE]||(i[QE]=qD["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await rJ(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function rJ(t,e,n,r,s,i){const o=nJ(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new gb(Gl(l),0)}if(a.ok||await ej(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await ej(l)}}function Ks(t){var e;let n=null;oJ(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=$K(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function tj(t){const e=Ks(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ja(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function sJ(t){return{data:t,error:null}}function iJ(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Cl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function nj(t){return t}function oJ(t){return t.access_token&&t.refresh_token&&t.expires_in}const pg=["global","local","others"];let ZS=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=ZD(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=pg[0]){if(pg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pg.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ja})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Cl(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:iJ,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(we(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ja})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:nj});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);c[`${x}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(we(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){lu(e);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ja})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){lu(e);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ja})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){lu(e);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ja})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){lu(e.userId);try{const{data:n,error:r}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(we(n))return{data:null,error:n};throw n}}async _deleteFactor(e){lu(e.userId),lu(e.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:nj});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);c[`${x}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(we(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await _e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}};function rj(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Yl={debug:!!(globalThis&&XD()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let eL=class extends eT{};class aJ extends eT{}async function tL(t,e,n){Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Yl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new eL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Yl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const sj={};async function lJ(t,e,n){var r;const s=(r=sj[t])!==null&&r!==void 0?r:Promise.resolve(),i=Promise.race([s.catch(()=>null),e>=0?new Promise((o,a)=>{setTimeout(()=>{a(new aJ(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await n());return sj[t]=i.catch(async o=>{if(o&&o.isAcquireTimeout)return await s,null;throw o}),await i}function cJ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nL(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function uJ(t){return parseInt(t,16)}function dJ(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function hJ(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=nL(t.address),m=d?`${d}://${r}`:r,g=t.statement?`${t.statement}
`:"",x=`${m} wants you to sign in with your Ethereum account:
${p}

${g}`;let b=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(b+=`
Expiration Time: ${s.toISOString()}`),a&&(b+=`
Not Before: ${a.toISOString()}`),l&&(b+=`
Request ID: ${l}`),c){let v=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);v+=`
- ${w}`}b+=v}return`${x}
${b}`}class on extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class yb extends on{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function fJ({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new on({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new on({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new on({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new on({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new on({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new on({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new on({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new on({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(rL(o)){if(i.rp.id!==o)return new on({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new on({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new on({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new on({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new on({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function pJ({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new on({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new on({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(rL(r)){if(n.rpId!==r)return new on({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new on({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new on({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new on({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class mJ{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const gJ=new mJ;function bJ(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Cl(t,["challenge","user","excludeCredentials"]),i=nd(e).buffer,o=Object.assign(Object.assign({},n),{id:nd(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:nd(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function xJ(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Cl(t,["challenge","allowCredentials"]),s=nd(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:nd(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function yJ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:rc(new Uint8Array(t.response.attestationObject)),clientDataJSON:rc(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function vJ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:rc(new Uint8Array(s.authenticatorData)),clientDataJSON:rc(new Uint8Array(s.clientDataJSON)),signature:rc(new Uint8Array(s.signature)),userHandle:s.userHandle?rc(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function rL(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ij(){var t,e;return!!(In()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function wJ(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new yb("Browser returned unexpected credential type",e)}:{data:null,error:new yb("Empty credential response",e)}}catch(e){return{data:null,error:fJ({error:e,options:t})}}}async function kJ(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new yb("Browser returned unexpected credential type",e)}:{data:null,error:new yb("Empty credential response",e)}}catch(e){return{data:null,error:pJ({error:e,options:t})}}}const EJ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},CJ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function vb(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=vb(a,o):r[i]=vb(o)}else r[i]=o}return r}function SJ(t,e){return vb(EJ,t,e||{})}function TJ(t,e){return vb(CJ,t,e||{})}class NJ{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=s??gJ.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=SJ(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await wJ({publicKey:c,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=TJ(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await kJ(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return we(o)?{data:null,error:o}:{data:null,error:new Aa("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Nd("rpId is required for WebAuthn authentication")};try{if(!ij())return{data:null,error:new Aa("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return we(o)?{data:null,error:o}:{data:null,error:new Aa("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Nd("rpId is required for WebAuthn registration")};try{if(!ij())return{data:null,error:new Aa("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return we(o)?{data:null,error:o}:{data:null,error:new Aa("Unexpected error in register",o)}}}}cJ();const _J={url:_K,storageKey:AK,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jK,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function oj(t,e,n){return await n()}const cu={};let tT=class e2{get jwks(){var e,n;return(n=(e=cu[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){cu[this.storageKey]=Object.assign(Object.assign({},cu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=cu[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){cu[this.storageKey]=Object.assign(Object.assign({},cu[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},_J),e);if(this.storageKey=i.storageKey,this.instanceID=(n=e2.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,e2.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&In()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ZS({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ZD(i.fetch),this.lock=i.lock||oj,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&In()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=tL:this.lock=oj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new NJ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:XD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rj(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=rj(this.memoryStorage)),In()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${WD}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(In()&&(n=HK(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),In()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),JD(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return we(n)?this._returnResult({error:n}):this._returnResult({error:new Aa("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ks}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(we(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await au(this.storage,this.storageKey)),i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Ks})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ks})}else throw new nf("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await jn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await jn(this.storage,`${this.storageKey}-code-verifier`),we(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:tj})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:tj})}else throw new nf("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new ql;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(we(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,c,d,h,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:g,wallet:x,statement:b,options:v}=e;let w;if(In())if(typeof x=="object")w=x;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")w=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const S=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href),E=await w.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=nL(E[0]);let T=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!T){const O=await w.request({method:"eth_chainId"});T=uJ(O)}const _={domain:S.host,address:C,statement:b,uri:S.href,version:"1",chainId:T,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=hJ(_),m=await w.request({method:"personal_sign",params:[dJ(p),C]})}try{const{data:g,error:x}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ks});if(x)throw x;if(!g||!g.session||!g.user){const b=new ql;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:x})}catch(g){if(we(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var n,r,s,i,o,a,l,c,d,h,f,p;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:x,wallet:b,statement:v,options:w}=e;let S;if(In())if(typeof b=="object")S=b;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=b}const E=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),v?{statement:v}:null));let T;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")T=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)T=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)m=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),g=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${E.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(m),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:x,error:b}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:rc(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ks});if(b)throw b;if(!x||!x.session||!x.user){const v=new ql;return this._returnResult({data:{user:null,session:null},error:v})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if(we(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const n=await Bl(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ks});if(await jn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new ql;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await jn(this.storage,`${this.storageKey}-code-verifier`),we(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ks}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new ql;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(we(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await au(this.storage,this.storageKey));const{error:h}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new nf("You must provide either an email or phone number.")}catch(a){if(await jn(this.storage,`${this.storageKey}-code-verifier`),we(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ks});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(we(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await au(this.storage,this.storageKey));const c=await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:sJ});return!((i=c.data)===null||i===void 0)&&i.url&&In()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await jn(this.storage,`${this.storageKey}-code-verifier`),we(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Sr;const{error:s}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(we(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await _e(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await _e(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new nf("You must provide either an email or phone number and a type")}catch(n){if(we(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Bl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Hv:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Bl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=zv()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=eJ(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ja}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sr}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ja})})}catch(n){if(we(n))return KD(n)&&(await this._removeSession(),await jn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Sr;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await au(this.storage,this.storageKey));const{data:c,error:d}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ja});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await jn(this.storage,`${this.storageKey}-code-verifier`),we(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Sr;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Uv(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(we(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Sr;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(we(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!In())throw new rf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new rf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new XE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new XE("No code detected.");const{data:v,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new rf("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Eu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:x}=await this._getUser(i);if(x)throw x;const b={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:e.type},error:null})}catch(r){if(we(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Bl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(YD(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await jn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=FK(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await au(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await jn(this.storage,`${this.storageKey}-code-verifier`),we(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return In()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(we(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:d}=e,h=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ks}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new ql}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await jn(this.storage,`${this.storageKey}-code-verifier`),we(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await VK(async s=>(s>0&&await zK(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ks})),(s,i)=>{const o=200*Math.pow(2,s);return i&&fg(i)&&Date.now()+o-r<Eu})}catch(r){if(this._debug(n,"error",r),we(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),In()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Bl(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Bl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Cu(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:zv()}else if(s&&!s.user&&!s.user){const o=await Bl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await jn(this.storage,this.storageKey+"-user"),await Cu(this.storage,this.storageKey,s)):s.user=zv()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Hv;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Hv}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),fg(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Oy;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Sr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),we(i)){const o={data:null,error:i};return fg(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await jn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Cu(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Z3(s);await Cu(this.storage,this.storageKey,i)}else{const s=Z3(n);await Cu(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await jn(this.storage,this.storageKey),await jn(this.storage,this.storageKey+"-code-verifier"),await jn(this.storage,this.storageKey+"-user"),this.userStorage&&await jn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&In()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Eu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Eu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Eu}ms, refresh threshold is ${JE} ticks`),s<=JE&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof eT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!In()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await au(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?yJ(e.webauthn.credential_response):vJ(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:bJ(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:xJ(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Uv(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await _e(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Sr})})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Sr});const o=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&In()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(we(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Sr});const o=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&In()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(we(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await _e(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Sr})})}catch(e){if(we(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await _e(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Sr})})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+IK>s)return r;const{data:i,error:o}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Uv(r);n!=null&&n.allowExpired||QK(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=XK(s.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,BK(`${a}.${l}`)))throw new bb("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(we(r))return this._returnResult({data:null,error:r});throw r}}};tT.nextInstanceID={};const AJ=ZS,jJ=tT,OJ=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:AJ,AuthApiError:GD,AuthClient:jJ,AuthError:Nd,AuthImplicitGrantRedirectError:rf,AuthInvalidCredentialsError:nf,AuthInvalidJwtError:bb,AuthInvalidTokenResponseError:ql,AuthPKCEGrantCodeExchangeError:XE,AuthRetryableFetchError:gb,AuthSessionMissingError:Sr,AuthUnknownError:Aa,AuthWeakPasswordError:ZE,CustomAuthError:sa,GoTrueAdminApi:ZS,GoTrueClient:tT,NavigatorLockAcquireTimeoutError:eL,SIGN_OUT_SCOPES:pg,isAuthApiError:YD,isAuthError:we,isAuthImplicitGrantRedirectError:JD,isAuthRetryableFetchError:fg,isAuthSessionMissingError:KD,isAuthWeakPasswordError:MK,lockInternals:Yl,navigatorLock:tL,processLock:lJ},Symbol.toStringTag,{value:"Module"})),sL=Gp(OJ);Object.defineProperty(jy,"__esModule",{value:!0});jy.SupabaseAuthClient=void 0;const IJ=sL;class MJ extends IJ.AuthClient{constructor(e){super(e)}}jy.SupabaseAuthClient=MJ;Object.defineProperty(hb,"__esModule",{value:!0});const RJ=cD,PJ=Jn,DJ=_D,LJ=EK,a0=UD,BJ=zD,aj=Sl,$J=jy;let FJ=class{constructor(e,n,r){var s,i,o;this.supabaseUrl=e,this.supabaseKey=n;const a=(0,aj.validateSupabaseUrl)(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:a0.DEFAULT_DB_OPTIONS,realtime:a0.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},a0.DEFAULT_AUTH_OPTIONS),{storageKey:l}),global:a0.DEFAULT_GLOBAL_OPTIONS},d=(0,aj.applySettingDefaults)(r??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=(0,BJ.fetchWithAuth)(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new PJ.PostgrestClient(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new LJ.StorageClient(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new RJ.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:d},h,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $J.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new DJ.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};hb.default=FJ;(function(t){var e=su&&su.__createBinding||(Object.create?function(d,h,f,p){p===void 0&&(p=f);var m=Object.getOwnPropertyDescriptor(h,f);(!m||("get"in m?!h.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(d,p,m)}:function(d,h,f,p){p===void 0&&(p=f),d[p]=h[f]}),n=su&&su.__exportStar||function(d,h){for(var f in d)f!=="default"&&!Object.prototype.hasOwnProperty.call(h,f)&&e(h,d,f)},r=su&&su.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const s=r(hb);n(sL,t);var i=Jn;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var o=cD;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),n(_D,t);var a=hb;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return r(a).default}});const l=(d,h,f)=>new s.default(d,h,f);t.createClient=l;function c(){if(typeof window<"u"||typeof process>"u")return!1;const d=process.version;if(d==null)return!1;const h=d.match(/^v(\d+)\./);return h?parseInt(h[1],10)<=18:!1}c()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(WS);const iL=qp(WS),HJ=mR({__proto__:null,default:iL},[WS]),{PostgrestError:$Re,FunctionsHttpError:FRe,FunctionsFetchError:HRe,FunctionsRelayError:URe,FunctionsError:zRe,FunctionRegion:VRe,SupabaseClient:WRe,createClient:oL,GoTrueAdminApi:qRe,GoTrueClient:GRe,AuthAdminApi:YRe,AuthClient:KRe,navigatorLock:JRe,NavigatorLockAcquireTimeoutError:QRe,lockInternals:XRe,processLock:ZRe,SIGN_OUT_SCOPES:ePe,AuthError:tPe,AuthApiError:nPe,AuthUnknownError:rPe,CustomAuthError:sPe,AuthSessionMissingError:iPe,AuthInvalidTokenResponseError:oPe,AuthInvalidCredentialsError:aPe,AuthImplicitGrantRedirectError:lPe,AuthPKCEGrantCodeExchangeError:cPe,AuthRetryableFetchError:uPe,AuthWeakPasswordError:dPe,AuthInvalidJwtError:hPe,isAuthError:fPe,isAuthApiError:pPe,isAuthSessionMissingError:mPe,isAuthImplicitGrantRedirectError:gPe,isAuthRetryableFetchError:bPe,isAuthWeakPasswordError:xPe,RealtimePresence:yPe,RealtimeChannel:vPe,RealtimeClient:wPe,REALTIME_LISTEN_TYPES:kPe,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:EPe,REALTIME_PRESENCE_LISTEN_EVENTS:CPe,REALTIME_SUBSCRIBE_STATES:SPe,REALTIME_CHANNEL_STATES:TPe}=iL||HJ,UJ="https://qulzeoytobflgktbtogg.supabase.co",zJ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1bHplb3l0b2JmbGdrdGJ0b2dnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMDMyMTEsImV4cCI6MjA4MDc3OTIxMX0.vn0s8NzjDSDHsy7ufOenkHluWw5Vlbn9gxzliJzCOrM",X=oL(UJ,zJ),aL=y.createContext(),hn=()=>y.useContext(aL),VJ=({children:t})=>{const[e,n]=y.useState(null),[r,s]=y.useState(null),[i,o]=y.useState(null),[a,l]=y.useState(!0);y.useEffect(()=>{X.auth.getSession().then(({data:{session:p}})=>{s(p),n((p==null?void 0:p.user)??null),p!=null&&p.user?c(p.user.id,p.user.email):l(!1)});const{data:{subscription:f}}=X.auth.onAuthStateChange((p,m)=>{s(m),n((m==null?void 0:m.user)??null),m!=null&&m.user?c(m.user.id,m.user.email):(o(null),l(!1))});return()=>f.unsubscribe()},[]);const c=async(f,p)=>{var m;try{const g=p==="sumeyye@bugless.com",{data:x,error:b}=await X.from("profiles").select("role").eq("id",f).single();if(b){console.error("Error fetching profile:",b);try{console.log("Creating missing profile for user...");const{user:v}=await X.auth.getUser(),w=((m=v==null?void 0:v.user_metadata)==null?void 0:m.full_name)||(p==null?void 0:p.split("@")[0])||"Kullanc";await X.from("profiles").upsert({id:f,full_name:w,email:p,role:g?"Ynetici":"Mhendis"}),o(g?"Ynetici":"Mhendis")}catch(v){console.error("Upsert failed",v),o("Mhendis")}}else o(g?"Ynetici":(x==null?void 0:x.role)||"Mhendis")}catch(g){console.error("Profile fetch exception:",g),o(p==="sumeyye@bugless.com"?"Ynetici":"Mhendis")}finally{l(!1)}},h={session:r,user:e,role:i,loading:a,signOut:async()=>{await X.auth.signOut(),o(null),n(null),s(null)},isAdmin:i==="Ynetici"||e&&e.email==="sumeyye@bugless.com",isEngineer:i==="Mhendis"&&(!e||e.email!=="sumeyye@bugless.com")};return u.jsx(aL.Provider,{value:h,children:!a&&t})};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const n=y.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>y.createElement("svg",{ref:d,...WJ,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${qJ(t)}`,a].join(" "),...c},[...e.map(([h,f])=>y.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=he("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=he("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=he("ArrowRightCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=he("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=he("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=he("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=he("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=he("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=he("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=he("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=he("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=he("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=he("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=he("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=he("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=he("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=he("CornerDownLeft",[["polyline",{points:"9 10 4 15 9 20",key:"r3jprv"}],["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=he("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=he("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=he("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=he("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=he("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=he("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=he("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=he("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=he("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=he("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=he("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=he("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=he("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=he("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=he("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=he("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=he("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=he("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=he("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=he("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=he("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=he("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=he("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=he("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=he("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=he("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=he("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=he("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=he("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=he("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=he("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=he("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=he("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=he("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=he("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=he("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=he("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=he("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=he("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=he("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function _L(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=_L(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function fo(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=_L(t))&&(r&&(r+=" "),r+=e);return r}const lT="-",CQ=t=>{const e=TQ(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(lT);return a[0]===""&&a.length!==1&&a.shift(),AL(a,e)||SQ(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},AL=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?AL(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(lT);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},mj=/^\[(.+)\]$/,SQ=t=>{if(mj.test(t)){const e=mj.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},TQ=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return _Q(Object.entries(t.classGroups),n).forEach(([i,o])=>{n2(o,r,i,e)}),r},n2=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:gj(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(NQ(s)){n2(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{n2(o,gj(e,i),n,r)})})},gj=(t,e)=>{let n=t;return e.split(lT).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},NQ=t=>t.isThemeGetter,_Q=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,AQ=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},jL="!",jQ=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let x=0;x<a.length;x++){let b=a[x];if(c===0){if(b===s&&(r||a.slice(x,x+i)===e)){l.push(a.slice(d,x)),d=x+i;continue}if(b==="/"){h=x;continue}}b==="["?c++:b==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith(jL),m=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},OQ=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},IQ=t=>({cache:AQ(t.cacheSize),parseClassName:jQ(t),...CQ(t)}),MQ=/\s+/,RQ=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(MQ);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let m=!!p,g=r(m?f.substring(0,p):f);if(!g){if(!m){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}m=!1}const x=OQ(d).join(":"),b=h?x+jL:x,v=b+g;if(i.includes(v))continue;i.push(v);const w=s(g,m);for(let S=0;S<w.length;++S){const E=w[S];i.push(b+E)}a=c+(a.length>0?" "+a:a)}return a};function PQ(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=OL(e))&&(r&&(r+=" "),r+=n);return r}const OL=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=OL(t[r]))&&(n&&(n+=" "),n+=e);return n};function DQ(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=IQ(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=RQ(l,n);return s(l,d),d}return function(){return i(PQ.apply(null,arguments))}}const jt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},IL=/^\[(?:([a-z-]+):)?(.+)\]$/i,LQ=/^\d+\/\d+$/,BQ=new Set(["px","full","screen"]),$Q=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,HQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,UQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Eo=t=>rd(t)||BQ.has(t)||LQ.test(t),ha=t=>sh(t,"length",QQ),rd=t=>!!t&&!Number.isNaN(Number(t)),Vv=t=>sh(t,"number",rd),Ph=t=>!!t&&Number.isInteger(Number(t)),VQ=t=>t.endsWith("%")&&rd(t.slice(0,-1)),De=t=>IL.test(t),fa=t=>$Q.test(t),WQ=new Set(["length","size","percentage"]),qQ=t=>sh(t,WQ,ML),GQ=t=>sh(t,"position",ML),YQ=new Set(["image","url"]),KQ=t=>sh(t,YQ,ZQ),JQ=t=>sh(t,"",XQ),Dh=()=>!0,sh=(t,e,n)=>{const r=IL.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},QQ=t=>FQ.test(t)&&!HQ.test(t),ML=()=>!1,XQ=t=>UQ.test(t),ZQ=t=>zQ.test(t),eX=()=>{const t=jt("colors"),e=jt("spacing"),n=jt("blur"),r=jt("brightness"),s=jt("borderColor"),i=jt("borderRadius"),o=jt("borderSpacing"),a=jt("borderWidth"),l=jt("contrast"),c=jt("grayscale"),d=jt("hueRotate"),h=jt("invert"),f=jt("gap"),p=jt("gradientColorStops"),m=jt("gradientColorStopPositions"),g=jt("inset"),x=jt("margin"),b=jt("opacity"),v=jt("padding"),w=jt("saturate"),S=jt("scale"),E=jt("sepia"),C=jt("skew"),T=jt("space"),_=jt("translate"),O=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",De,e],M=()=>[De,e],W=()=>["",Eo,ha],D=()=>["auto",rd,De],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",De],j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[rd,De];return{cacheSize:500,separator:":",theme:{colors:[Dh],spacing:[Eo,ha],blur:["none","",fa,De],brightness:U(),borderColor:[t],borderRadius:["none","","full",fa,De],borderSpacing:M(),borderWidth:W(),contrast:U(),grayscale:z(),hueRotate:U(),invert:z(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[VQ,ha],inset:R(),margin:R(),opacity:U(),padding:M(),saturate:U(),scale:U(),sepia:z(),skew:U(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",De]}],container:["container"],columns:[{columns:[fa]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),De]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ph,De]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",De]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Ph,De]}],"grid-cols":[{"grid-cols":[Dh]}],"col-start-end":[{col:["auto",{span:["full",Ph,De]},De]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[Dh]}],"row-start-end":[{row:["auto",{span:[Ph,De]},De]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",De]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",De]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",De,e]}],"min-w":[{"min-w":[De,e,"min","max","fit"]}],"max-w":[{"max-w":[De,e,"none","full","min","max","fit","prose",{screen:[fa]},fa]}],h:[{h:[De,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[De,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[De,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[De,e,"auto","min","max","fit"]}],"font-size":[{text:["base",fa,ha]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vv]}],"font-family":[{font:[Dh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",De]}],"line-clamp":[{"line-clamp":["none",rd,Vv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Eo,De]}],"list-image":[{"list-image":["none",De]}],"list-style-type":[{list:["none","disc","decimal",De]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Eo,ha]}],"underline-offset":[{"underline-offset":["auto",Eo,De]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),GQ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",qQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},KQ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[Eo,De]}],"outline-w":[{outline:[Eo,ha]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Eo,ha]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",fa,JQ]}],"shadow-color":[{shadow:[Dh]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",fa,De]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",De]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",De]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",De]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ph,De]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",De]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Eo,ha,Vv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},tX=DQ(eX);function ie(...t){return tX(fo(t))}const re=lt.forwardRef(({className:t,variant:e="primary",size:n="default",isLoading:r=!1,disabled:s,children:i,...o},a)=>{const l="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-white dark:ring-offset-slate-950",c={primary:"bg-primary text-primary-foreground hover:bg-primary-hover shadow-sm",secondary:"bg-white dark:bg-slate-900 text-gray-700 dark:text-slate-200 border border-gray-300 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-800 shadow-sm",outline:"border border-primary text-primary hover:bg-blue-50 dark:hover:bg-slate-800",ghost:"hover:bg-gray-100 dark:hover:bg-slate-800 text-gray-700 dark:text-slate-300",danger:"bg-red-600 text-white hover:bg-red-700 shadow-sm",link:"text-primary underline-offset-4 hover:underline"},d={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md text-lg",icon:"h-10 w-10"},h=c[e]||c.primary,f=d[n]||d.default;return u.jsxs("button",{ref:a,className:`${l} ${h} ${f} ${t||""}`,disabled:s||r,...o,children:[r&&u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i]})});re.displayName="Button";const nX=[{icon:lQ,label:"Ana Sayfa",path:"/"},{icon:so,label:"Mteriler",path:"/clients"},{icon:oT,label:"Projeler",path:"/projects"},{icon:no,label:"Teklifler",path:"/proposals"},{icon:eQ,label:"Personel",path:"/staff"},{icon:wb,label:" Emirleri",path:"/work-orders"},{icon:io,label:"Beklenen Tahsilat",path:"/collections"},{icon:pr,label:"Harici Grevler",path:"/external-tasks"},{icon:wL,label:"Sosyal Medya",path:"/social"},{icon:hL,label:"Gelir & Gider",path:"/income-expense"},{icon:io,label:"Aylk Kasa",path:"/finance"},{icon:JJ,label:"Raporlama",path:"/reports"},{icon:to,label:"Kiisel Takvim",path:"/calendar"},{icon:kL,label:"Kullanc Ynetimi",path:"/users"},{icon:EL,label:"Toplant Notlar",path:"/meeting-notes"},{icon:gn,label:"Gemi Arama",path:"/search"},{icon:Sc,label:"Wiki (Notion)",path:"/wiki"},{icon:vL,label:"Ayarlar",path:"/settings"}];function rX(){var a,l;const t=El(),{user:e,role:n,isAdmin:r,signOut:s}=hn(),i=((a=e==null?void 0:e.user_metadata)==null?void 0:a.full_name)||((l=e==null?void 0:e.email)==null?void 0:l.split("@")[0])||"Kullanc",o=n||(r?"Ynetici":"Mhendis");return u.jsxs("div",{className:"flex flex-col h-screen w-64 bg-white dark:bg-[#0F172A] border-r border-gray-200 dark:border-[#1E293B] sticky top-0 left-0 overflow-y-auto shadow-2xl transition-colors duration-300",children:[u.jsx("div",{className:"p-6",children:u.jsxs("h1",{className:"text-2xl font-black bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-400 bg-clip-text text-transparent tracking-tight",children:["Bugless",u.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:"."})]})}),u.jsxs("div",{className:"flex-1 px-4 space-y-2",children:[u.jsxs("div",{className:"mb-8 bg-gray-50 dark:bg-white/5 backdrop-blur-sm border border-gray-200 dark:border-white/10 p-3 rounded-2xl flex items-center gap-3 hover:bg-gray-100 dark:hover:bg-white/10 transition-colors cursor-pointer group",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-indigo-500/30 group-hover:scale-105 transition-transform",children:i.substring(0,2).toUpperCase()}),u.jsxs("div",{className:"overflow-hidden",children:[u.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate max-w-[120px]",title:i,children:i}),u.jsx("p",{className:"text-[10px] uppercase tracking-wider text-indigo-600 dark:text-indigo-300 font-medium",children:o})]})]}),nX.map(c=>{const d=c.icon,h=t.pathname===c.path||c.path!=="/"&&t.pathname.startsWith(c.path);return u.jsxs(EY,{to:c.path,className:ie("flex items-center gap-3 px-3 py-3 rounded-xl text-sm font-medium transition-all duration-200 group relative overflow-hidden",h?"text-white shadow-lg shadow-indigo-500/25":"text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:[h&&u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600 to-violet-600 opacity-100"}),u.jsx(d,{className:ie("w-5 h-5 relative z-10",h?"text-white":"text-gray-400 dark:text-slate-500 group-hover:text-indigo-600 dark:group-hover:text-indigo-300 transition-colors")}),u.jsx("span",{className:"relative z-10",children:c.label})]},c.path)})]}),u.jsx("div",{className:"p-4 mt-auto border-t border-gray-100 dark:border-white/5",children:u.jsxs(re,{variant:"ghost",onClick:s,className:"w-full justify-start gap-3 text-gray-500 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors",children:[u.jsx(dQ,{className:"w-5 h-5"}),"k Yap"]})})]})}const RL=y.createContext();function sX(){return y.useContext(RL)}function iX({children:t}){const{user:e}=hn(),[n,r]=y.useState([]),[s,i]=y.useState(0),[o,a]=y.useState(!0),l=async()=>{if(e)try{const{data:f,error:p}=await X.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(20);if(p)throw p;r(f||[]),i(f?f.filter(m=>!m.is_read).length:0)}catch(f){console.error("Error fetching notifications:",f)}finally{a(!1)}},c=async f=>{try{r(m=>m.map(g=>g.id===f?{...g,is_read:!0}:g)),i(m=>Math.max(0,m-1));const{error:p}=await X.from("notifications").update({is_read:!0}).eq("id",f);if(p)throw p}catch(p){console.error("Error marking notification as read:",p),l()}},d=async()=>{try{r(p=>p.map(m=>({...m,is_read:!0}))),i(0);const{error:f}=await X.from("notifications").update({is_read:!0}).eq("user_id",e.id).eq("is_read",!1);if(f)throw f}catch(f){console.error("Error marking all as read:",f),l()}};y.useEffect(()=>{let f;return e&&(l(),f=X.channel("public:notifications").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},p=>{l()}).subscribe()),()=>{f&&X.removeChannel(f)}},[e]);const h={notifications:n,unreadCount:s,loading:o,markAsRead:c,markAllAsRead:d,refresh:l};return u.jsx(RL.Provider,{value:h,children:t})}var bj=1,oX=.9,aX=.8,lX=.17,Wv=.1,qv=.999,cX=.9999,uX=.99,dX=/[\\\/_+.#"@\[\(\{&]/,hX=/[\\\/_+.#"@\[\(\{&]/g,fX=/[\s-]/,PL=/[\s-]/g;function r2(t,e,n,r,s,i,o){if(i===e.length)return s===t.length?bj:uX;var a=`${s},${i}`;if(o[a]!==void 0)return o[a];for(var l=r.charAt(i),c=n.indexOf(l,s),d=0,h,f,p,m;c>=0;)h=r2(t,e,n,r,c+1,i+1,o),h>d&&(c===s?h*=bj:dX.test(t.charAt(c-1))?(h*=aX,p=t.slice(s,c-1).match(hX),p&&s>0&&(h*=Math.pow(qv,p.length))):fX.test(t.charAt(c-1))?(h*=oX,m=t.slice(s,c-1).match(PL),m&&s>0&&(h*=Math.pow(qv,m.length))):(h*=lX,s>0&&(h*=Math.pow(qv,c-s))),t.charAt(c)!==e.charAt(i)&&(h*=cX)),(h<Wv&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(f=r2(t,e,n,r,c+1,i+2,o),f*Wv>h&&(h=f*Wv)),h>d&&(d=h),c=n.indexOf(l,c+1);return o[a]=d,d}function xj(t){return t.toLowerCase().replace(PL," ")}function pX(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,r2(t,e,xj(t),xj(e),0,0,{})}function el(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function yj(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ol(...t){return e=>{let n=!1;const r=t.map(s=>{const i=yj(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():yj(t[s],null)}}}}function Yc(...t){return y.useCallback(ol(...t),t)}function mX(t,e){const n=y.createContext(e),r=i=>{const{children:o,...a}=i,l=y.useMemo(()=>a,Object.values(a));return u.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=y.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function gX(t,e=[]){let n=[];function r(i,o){const a=y.createContext(o),l=n.length;n=[...n,o];const c=h=>{var b;const{scope:f,children:p,...m}=h,g=((b=f==null?void 0:f[t])==null?void 0:b[l])||a,x=y.useMemo(()=>m,Object.values(m));return u.jsx(g.Provider,{value:x,children:p})};c.displayName=i+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,m=y.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>y.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,bX(s,...e)]}function bX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var cp=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},xX=Kp[" useId ".trim().toString()]||(()=>{}),yX=0;function Ho(t){const[e,n]=y.useState(xX());return cp(()=>{n(r=>r??String(yX++))},[t]),e?`radix-${e}`:""}var vX=Kp[" useInsertionEffect ".trim().toString()]||cp;function wX({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=kX({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=y.useRef(t!==void 0);y.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=y.useCallback(d=>{var h;if(a){const f=EX(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function kX({defaultProp:t,onChange:e}){const[n,r]=y.useState(t),s=y.useRef(n),i=y.useRef(e);return vX(()=>{i.current=e},[e]),y.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function EX(t){return typeof t=="function"}function CX(t){const e=SX(t),n=y.forwardRef((r,s)=>{const{children:i,...o}=r,a=y.Children.toArray(i),l=a.find(NX);if(l){const c=l.props.children,d=a.map(h=>h===l?y.Children.count(c)>1?y.Children.only(null):y.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:s,children:y.isValidElement(c)?y.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function SX(t){const e=y.forwardRef((n,r)=>{const{children:s,...i}=n;if(y.isValidElement(s)){const o=AX(s),a=_X(i,s.props);return s.type!==y.Fragment&&(a.ref=r?ol(r,o):o),y.cloneElement(s,a)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var TX=Symbol("radix.slottable");function NX(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===TX}function _X(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function AX(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var jX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Un=jX.reduce((t,e)=>{const n=CX(`Primitive.${e}`),r=y.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function OX(t,e){t&&eo.flushSync(()=>t.dispatchEvent(e))}function up(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function IX(t,e=globalThis==null?void 0:globalThis.document){const n=up(t);y.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var MX="DismissableLayer",s2="dismissableLayer.update",RX="dismissableLayer.pointerDownOutside",PX="dismissableLayer.focusOutside",vj,DL=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),LL=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=y.useContext(DL),[d,h]=y.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=y.useState({}),m=Yc(e,T=>h(T)),g=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(x),v=d?g.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,S=v>=b,E=BX(T=>{const _=T.target,O=[...c.branches].some(N=>N.contains(_));!S||O||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},f),C=$X(T=>{const _=T.target;[...c.branches].some(N=>N.contains(_))||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},f);return IX(T=>{v===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),y.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(vj=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),wj(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=vj)}},[d,f,n,c]),y.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),wj())},[d,c]),y.useEffect(()=>{const T=()=>p({});return document.addEventListener(s2,T),()=>document.removeEventListener(s2,T)},[]),u.jsx(Un.div,{...l,ref:m,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:el(t.onFocusCapture,C.onFocusCapture),onBlurCapture:el(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:el(t.onPointerDownCapture,E.onPointerDownCapture)})});LL.displayName=MX;var DX="DismissableLayerBranch",LX=y.forwardRef((t,e)=>{const n=y.useContext(DL),r=y.useRef(null),s=Yc(e,r);return y.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),u.jsx(Un.div,{...t,ref:s})});LX.displayName=DX;function BX(t,e=globalThis==null?void 0:globalThis.document){const n=up(t),r=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){BL(RX,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function $X(t,e=globalThis==null?void 0:globalThis.document){const n=up(t),r=y.useRef(!1);return y.useEffect(()=>{const s=i=>{i.target&&!r.current&&BL(PX,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function wj(){const t=new CustomEvent(s2);document.dispatchEvent(t)}function BL(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?OX(s,i):s.dispatchEvent(i)}var Gv="focusScope.autoFocusOnMount",Yv="focusScope.autoFocusOnUnmount",kj={bubbles:!1,cancelable:!0},FX="FocusScope",$L=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=y.useState(null),c=up(s),d=up(i),h=y.useRef(null),f=Yc(e,g=>l(g)),p=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let g=function(w){if(p.paused||!a)return;const S=w.target;a.contains(S)?h.current=S:ba(h.current,{select:!0})},x=function(w){if(p.paused||!a)return;const S=w.relatedTarget;S!==null&&(a.contains(S)||ba(h.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const E of w)E.removedNodes.length>0&&ba(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const v=new MutationObserver(b);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),v.disconnect()}}},[r,a,p.paused]),y.useEffect(()=>{if(a){Cj.add(p);const g=document.activeElement;if(!a.contains(g)){const b=new CustomEvent(Gv,kj);a.addEventListener(Gv,c),a.dispatchEvent(b),b.defaultPrevented||(HX(qX(FL(a)),{select:!0}),document.activeElement===g&&ba(a))}return()=>{a.removeEventListener(Gv,c),setTimeout(()=>{const b=new CustomEvent(Yv,kj);a.addEventListener(Yv,d),a.dispatchEvent(b),b.defaultPrevented||ba(g??document.body,{select:!0}),a.removeEventListener(Yv,d),Cj.remove(p)},0)}}},[a,c,d,p]);const m=y.useCallback(g=>{if(!n&&!r||p.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(x&&b){const v=g.currentTarget,[w,S]=UX(v);w&&S?!g.shiftKey&&b===S?(g.preventDefault(),n&&ba(w,{select:!0})):g.shiftKey&&b===w&&(g.preventDefault(),n&&ba(S,{select:!0})):b===v&&g.preventDefault()}},[n,r,p.paused]);return u.jsx(Un.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});$L.displayName=FX;function HX(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ba(r,{select:e}),document.activeElement!==n)return}function UX(t){const e=FL(t),n=Ej(e,t),r=Ej(e.reverse(),t);return[n,r]}function FL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ej(t,e){for(const n of t)if(!zX(n,{upTo:e}))return n}function zX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function VX(t){return t instanceof HTMLInputElement&&"select"in t}function ba(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&VX(t)&&e&&t.select()}}var Cj=WX();function WX(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Sj(t,e),t.unshift(e)},remove(e){var n;t=Sj(t,e),(n=t[0])==null||n.resume()}}}function Sj(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function qX(t){return t.filter(e=>e.tagName!=="A")}var GX="Portal",HL=y.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=y.useState(!1);cp(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?_6.createPortal(u.jsx(Un.div,{...r,ref:e}),o):null});HL.displayName=GX;function YX(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Iy=t=>{const{present:e,children:n}=t,r=KX(e),s=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),i=Yc(r.ref,JX(s));return typeof n=="function"||r.isPresent?y.cloneElement(s,{ref:i}):null};Iy.displayName="Presence";function KX(t){const[e,n]=y.useState(),r=y.useRef(null),s=y.useRef(t),i=y.useRef("none"),o=t?"mounted":"unmounted",[a,l]=YX(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=l0(r.current);i.current=a==="mounted"?c:"none"},[a]),cp(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,p=l0(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),cp(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=p=>{const g=l0(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&g&&(l("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=p=>{p.target===e&&(i.current=l0(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function l0(t){return(t==null?void 0:t.animationName)||"none"}function JX(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Kv=0;function QX(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Tj()),document.body.insertAdjacentElement("beforeend",t[1]??Tj()),Kv++,()=>{Kv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Kv--}},[])}function Tj(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var mg="right-scroll-bar-position",gg="width-before-scroll-bar",XX="with-scroll-bars-hidden",ZX="--removed-body-scroll-bar-size";function Jv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function eZ(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var tZ=typeof window<"u"?y.useLayoutEffect:y.useEffect,Nj=new WeakMap;function nZ(t,e){var n=eZ(null,function(r){return t.forEach(function(s){return Jv(s,r)})});return tZ(function(){var r=Nj.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Jv(a,null)}),i.forEach(function(a){s.has(a)||Jv(a,o)})}Nj.set(n,t)},[t]),n}function rZ(t){return t}function sZ(t,e){e===void 0&&(e=rZ);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function iZ(t){t===void 0&&(t={});var e=sZ(null);return e.options=_s({async:!0,ssr:!1},t),e}var UL=function(t){var e=t.sideCar,n=Cl(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,_s({},n))};UL.isSideCarExport=!0;function oZ(t,e){return t.useMedium(e),UL}var zL=iZ(),Qv=function(){},My=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:Qv,onWheelCapture:Qv,onTouchMoveCapture:Qv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,m=t.noIsolation,g=t.inert,x=t.allowPinchZoom,b=t.as,v=b===void 0?"div":b,w=t.gapMode,S=Cl(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,C=nZ([n,e]),T=_s(_s({},S),s);return y.createElement(y.Fragment,null,d&&y.createElement(E,{sideCar:zL,removeScrollBar:c,shards:h,noRelative:p,noIsolation:m,inert:g,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:w}),o?y.cloneElement(y.Children.only(a),_s(_s({},T),{ref:C})):y.createElement(v,_s({},T,{className:l,ref:C}),a))});My.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};My.classNames={fullWidth:gg,zeroRight:mg};var aZ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lZ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=aZ();return e&&t.setAttribute("nonce",e),t}function cZ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function uZ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var dZ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=lZ())&&(cZ(e,n),uZ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},hZ=function(){var t=dZ();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},VL=function(){var t=hZ(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},fZ={left:0,top:0,right:0,gap:0},Xv=function(t){return parseInt(t||"",10)||0},pZ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Xv(n),Xv(r),Xv(s)]},mZ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return fZ;var e=pZ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},gZ=VL(),sd="data-scroll-locked",bZ=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(XX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(sd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(mg,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(gg,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(mg," .").concat(mg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(gg," .").concat(gg,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(sd,`] {
    `).concat(ZX,": ").concat(a,`px;
  }
`)},_j=function(){var t=parseInt(document.body.getAttribute(sd)||"0",10);return isFinite(t)?t:0},xZ=function(){y.useEffect(function(){return document.body.setAttribute(sd,(_j()+1).toString()),function(){var t=_j()-1;t<=0?document.body.removeAttribute(sd):document.body.setAttribute(sd,t.toString())}},[])},yZ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;xZ();var i=y.useMemo(function(){return mZ(s)},[s]);return y.createElement(gZ,{styles:bZ(i,!e,s,n?"":"!important")})},i2=!1;if(typeof window<"u")try{var c0=Object.defineProperty({},"passive",{get:function(){return i2=!0,!0}});window.addEventListener("test",c0,c0),window.removeEventListener("test",c0,c0)}catch{i2=!1}var uu=i2?{passive:!1}:!1,vZ=function(t){return t.tagName==="TEXTAREA"},WL=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!vZ(t)&&n[e]==="visible")},wZ=function(t){return WL(t,"overflowY")},kZ=function(t){return WL(t,"overflowX")},Aj=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=qL(t,r);if(s){var i=GL(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},EZ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},CZ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},qL=function(t,e){return t==="v"?wZ(e):kZ(e)},GL=function(t,e){return t==="v"?EZ(e):CZ(e)},SZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},TZ=function(t,e,n,r,s){var i=SZ(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=GL(t,a),m=p[0],g=p[1],x=p[2],b=g-x-i*m;(m||b)&&qL(t,a)&&(h+=b,f+=m);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},u0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},jj=function(t){return[t.deltaX,t.deltaY]},Oj=function(t){return t&&"current"in t?t.current:t},NZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},_Z=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},AZ=0,du=[];function jZ(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),s=y.useState(AZ++)[0],i=y.useState(VL)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=GS([t.lockRef.current],(t.shards||[]).map(Oj),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var b=u0(g),v=n.current,w="deltaX"in g?g.deltaX:v[0]-b[0],S="deltaY"in g?g.deltaY:v[1]-b[1],E,C=g.target,T=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in g&&T==="h"&&C.type==="range")return!1;var _=window.getSelection(),O=_&&_.anchorNode,N=O?O===C||O.contains(C):!1;if(N)return!1;var R=Aj(T,C);if(!R)return!0;if(R?E=T:(E=T==="v"?"h":"v",R=Aj(T,C)),!R)return!1;if(!r.current&&"changedTouches"in g&&(w||S)&&(r.current=E),!E)return!0;var M=r.current||E;return TZ(M,x,g,M==="h"?w:S)},[]),l=y.useCallback(function(g){var x=g;if(!(!du.length||du[du.length-1]!==i)){var b="deltaY"in x?jj(x):u0(x),v=e.current.filter(function(E){return E.name===x.type&&(E.target===x.target||x.target===E.shadowParent)&&NZ(E.delta,b)})[0];if(v&&v.should){x.cancelable&&x.preventDefault();return}if(!v){var w=(o.current.shards||[]).map(Oj).filter(Boolean).filter(function(E){return E.contains(x.target)}),S=w.length>0?a(x,w[0]):!o.current.noIsolation;S&&x.cancelable&&x.preventDefault()}}},[]),c=y.useCallback(function(g,x,b,v){var w={name:g,delta:x,target:b,should:v,shadowParent:OZ(b)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),d=y.useCallback(function(g){n.current=u0(g),r.current=void 0},[]),h=y.useCallback(function(g){c(g.type,jj(g),g.target,a(g,t.lockRef.current))},[]),f=y.useCallback(function(g){c(g.type,u0(g),g.target,a(g,t.lockRef.current))},[]);y.useEffect(function(){return du.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,uu),document.addEventListener("touchmove",l,uu),document.addEventListener("touchstart",d,uu),function(){du=du.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,uu),document.removeEventListener("touchmove",l,uu),document.removeEventListener("touchstart",d,uu)}},[]);var p=t.removeScrollBar,m=t.inert;return y.createElement(y.Fragment,null,m?y.createElement(i,{styles:_Z(s)}):null,p?y.createElement(yZ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function OZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const IZ=oZ(zL,jZ);var YL=y.forwardRef(function(t,e){return y.createElement(My,_s({},t,{ref:e,sideCar:IZ}))});YL.classNames=My.classNames;var MZ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},hu=new WeakMap,d0=new WeakMap,h0={},Zv=0,KL=function(t){return t&&(t.host||KL(t.parentNode))},RZ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=KL(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},PZ=function(t,e,n,r){var s=RZ(e,Array.isArray(t)?t:[t]);h0[n]||(h0[n]=new WeakMap);var i=h0[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),m=p!==null&&p!=="false",g=(hu.get(f)||0)+1,x=(i.get(f)||0)+1;hu.set(f,g),i.set(f,x),o.push(f),g===1&&m&&d0.set(f,!0),x===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return d(e),a.clear(),Zv++,function(){o.forEach(function(h){var f=hu.get(h)-1,p=i.get(h)-1;hu.set(h,f),i.set(h,p),f||(d0.has(h)||h.removeAttribute(r),d0.delete(h)),p||h.removeAttribute(n)}),Zv--,Zv||(hu=new WeakMap,hu=new WeakMap,d0=new WeakMap,h0={})}},DZ=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=MZ(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),PZ(r,s,n,"aria-hidden")):function(){return null}};function LZ(t){const e=BZ(t),n=y.forwardRef((r,s)=>{const{children:i,...o}=r,a=y.Children.toArray(i),l=a.find(FZ);if(l){const c=l.props.children,d=a.map(h=>h===l?y.Children.count(c)>1?y.Children.only(null):y.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:s,children:y.isValidElement(c)?y.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function BZ(t){const e=y.forwardRef((n,r)=>{const{children:s,...i}=n;if(y.isValidElement(s)){const o=UZ(s),a=HZ(i,s.props);return s.type!==y.Fragment&&(a.ref=r?ol(r,o):o),y.cloneElement(s,a)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $Z=Symbol("radix.slottable");function FZ(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$Z}function HZ(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function UZ(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ry="Dialog",[JL]=gX(Ry),[zZ,ki]=JL(Ry),QL=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=y.useRef(null),l=y.useRef(null),[c,d]=wX({prop:r,defaultProp:s??!1,onChange:i,caller:Ry});return u.jsx(zZ,{scope:e,triggerRef:a,contentRef:l,contentId:Ho(),titleId:Ho(),descriptionId:Ho(),open:c,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};QL.displayName=Ry;var XL="DialogTrigger",VZ=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ki(XL,n),i=Yc(e,s.triggerRef);return u.jsx(Un.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":dT(s.open),...r,ref:i,onClick:el(t.onClick,s.onOpenToggle)})});VZ.displayName=XL;var cT="DialogPortal",[WZ,ZL]=JL(cT,{forceMount:void 0}),e8=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ki(cT,e);return u.jsx(WZ,{scope:e,forceMount:n,children:y.Children.map(r,o=>u.jsx(Iy,{present:n||i.open,children:u.jsx(HL,{asChild:!0,container:s,children:o})}))})};e8.displayName=cT;var Eb="DialogOverlay",t8=y.forwardRef((t,e)=>{const n=ZL(Eb,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ki(Eb,t.__scopeDialog);return i.modal?u.jsx(Iy,{present:r||i.open,children:u.jsx(GZ,{...s,ref:e})}):null});t8.displayName=Eb;var qZ=LZ("DialogOverlay.RemoveScroll"),GZ=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ki(Eb,n);return u.jsx(YL,{as:qZ,allowPinchZoom:!0,shards:[s.contentRef],children:u.jsx(Un.div,{"data-state":dT(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Tc="DialogContent",n8=y.forwardRef((t,e)=>{const n=ZL(Tc,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ki(Tc,t.__scopeDialog);return u.jsx(Iy,{present:r||i.open,children:i.modal?u.jsx(YZ,{...s,ref:e}):u.jsx(KZ,{...s,ref:e})})});n8.displayName=Tc;var YZ=y.forwardRef((t,e)=>{const n=ki(Tc,t.__scopeDialog),r=y.useRef(null),s=Yc(e,n.contentRef,r);return y.useEffect(()=>{const i=r.current;if(i)return DZ(i)},[]),u.jsx(r8,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:el(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:el(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:el(t.onFocusOutside,i=>i.preventDefault())})}),KZ=y.forwardRef((t,e)=>{const n=ki(Tc,t.__scopeDialog),r=y.useRef(!1),s=y.useRef(!1);return u.jsx(r8,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),r8=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=ki(Tc,n),l=y.useRef(null),c=Yc(e,l);return QX(),u.jsxs(u.Fragment,{children:[u.jsx($L,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:u.jsx(LL,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":dT(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(ZZ,{titleId:a.titleId}),u.jsx(tee,{contentRef:l,descriptionId:a.descriptionId})]})]})}),uT="DialogTitle",JZ=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ki(uT,n);return u.jsx(Un.h2,{id:s.titleId,...r,ref:e})});JZ.displayName=uT;var s8="DialogDescription",QZ=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ki(s8,n);return u.jsx(Un.p,{id:s.descriptionId,...r,ref:e})});QZ.displayName=s8;var i8="DialogClose",XZ=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ki(i8,n);return u.jsx(Un.button,{type:"button",...r,ref:e,onClick:el(t.onClick,()=>s.onOpenChange(!1))})});XZ.displayName=i8;function dT(t){return t?"open":"closed"}var o8="DialogTitleWarning",[NPe,a8]=mX(o8,{contentName:Tc,titleName:uT,docsSlug:"dialog"}),ZZ=({titleId:t})=>{const e=a8(o8),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},eee="DialogDescriptionWarning",tee=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a8(eee).contentName}}.`;return y.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},nee=QL,ree=e8,see=t8,iee=n8,Lh='[cmdk-group=""]',ew='[cmdk-group-items=""]',oee='[cmdk-group-heading=""]',l8='[cmdk-item=""]',Ij=`${l8}:not([aria-disabled="true"])`,o2="cmdk-item-select",Su="data-value",aee=(t,e,n)=>pX(t,e,n),c8=y.createContext(void 0),im=()=>y.useContext(c8),u8=y.createContext(void 0),hT=()=>y.useContext(u8),d8=y.createContext(void 0),h8=y.forwardRef((t,e)=>{let n=Tu(()=>{var H,I;return{search:"",value:(I=(H=t.value)!=null?H:t.defaultValue)!=null?I:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Tu(()=>new Set),s=Tu(()=>new Map),i=Tu(()=>new Map),o=Tu(()=>new Set),a=f8(t),{label:l,children:c,value:d,onValueChange:h,filter:f,shouldFilter:p,loop:m,disablePointerSelection:g=!1,vimBindings:x=!0,...b}=t,v=Ho(),w=Ho(),S=Ho(),E=y.useRef(null),C=xee();Nc(()=>{if(d!==void 0){let H=d.trim();n.current.value=H,T.emit()}},[d]),Nc(()=>{C(6,W)},[]);let T=y.useMemo(()=>({subscribe:H=>(o.current.add(H),()=>o.current.delete(H)),snapshot:()=>n.current,setState:(H,I,q)=>{var G,Z,te,fe;if(!Object.is(n.current[H],I)){if(n.current[H]=I,H==="search")M(),N(),C(1,R);else if(H==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let K=document.getElementById(S);K?K.focus():(G=document.getElementById(v))==null||G.focus()}if(C(7,()=>{var K;n.current.selectedItemId=(K=D())==null?void 0:K.id,T.emit()}),q||C(5,W),((Z=a.current)==null?void 0:Z.value)!==void 0){let K=I??"";(fe=(te=a.current).onValueChange)==null||fe.call(te,K);return}}T.emit()}},emit:()=>{o.current.forEach(H=>H())}}),[]),_=y.useMemo(()=>({value:(H,I,q)=>{var G;I!==((G=i.current.get(H))==null?void 0:G.value)&&(i.current.set(H,{value:I,keywords:q}),n.current.filtered.items.set(H,O(I,q)),C(2,()=>{N(),T.emit()}))},item:(H,I)=>(r.current.add(H),I&&(s.current.has(I)?s.current.get(I).add(H):s.current.set(I,new Set([H]))),C(3,()=>{M(),N(),n.current.value||R(),T.emit()}),()=>{i.current.delete(H),r.current.delete(H),n.current.filtered.items.delete(H);let q=D();C(4,()=>{M(),(q==null?void 0:q.getAttribute("id"))===H&&R(),T.emit()})}),group:H=>(s.current.has(H)||s.current.set(H,new Set),()=>{i.current.delete(H),s.current.delete(H)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:v,inputId:S,labelId:w,listInnerRef:E}),[]);function O(H,I){var q,G;let Z=(G=(q=a.current)==null?void 0:q.filter)!=null?G:aee;return H?Z(H,n.current.search,I):0}function N(){if(!n.current.search||a.current.shouldFilter===!1)return;let H=n.current.filtered.items,I=[];n.current.filtered.groups.forEach(G=>{let Z=s.current.get(G),te=0;Z.forEach(fe=>{let K=H.get(fe);te=Math.max(K,te)}),I.push([G,te])});let q=E.current;B().sort((G,Z)=>{var te,fe;let K=G.getAttribute("id"),pe=Z.getAttribute("id");return((te=H.get(pe))!=null?te:0)-((fe=H.get(K))!=null?fe:0)}).forEach(G=>{let Z=G.closest(ew);Z?Z.appendChild(G.parentElement===Z?G:G.closest(`${ew} > *`)):q.appendChild(G.parentElement===q?G:G.closest(`${ew} > *`))}),I.sort((G,Z)=>Z[1]-G[1]).forEach(G=>{var Z;let te=(Z=E.current)==null?void 0:Z.querySelector(`${Lh}[${Su}="${encodeURIComponent(G[0])}"]`);te==null||te.parentElement.appendChild(te)})}function R(){let H=B().find(q=>q.getAttribute("aria-disabled")!=="true"),I=H==null?void 0:H.getAttribute(Su);T.setState("value",I||void 0)}function M(){var H,I,q,G;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Z=0;for(let te of r.current){let fe=(I=(H=i.current.get(te))==null?void 0:H.value)!=null?I:"",K=(G=(q=i.current.get(te))==null?void 0:q.keywords)!=null?G:[],pe=O(fe,K);n.current.filtered.items.set(te,pe),pe>0&&Z++}for(let[te,fe]of s.current)for(let K of fe)if(n.current.filtered.items.get(K)>0){n.current.filtered.groups.add(te);break}n.current.filtered.count=Z}function W(){var H,I,q;let G=D();G&&(((H=G.parentElement)==null?void 0:H.firstChild)===G&&((q=(I=G.closest(Lh))==null?void 0:I.querySelector(oee))==null||q.scrollIntoView({block:"nearest"})),G.scrollIntoView({block:"nearest"}))}function D(){var H;return(H=E.current)==null?void 0:H.querySelector(`${l8}[aria-selected="true"]`)}function B(){var H;return Array.from(((H=E.current)==null?void 0:H.querySelectorAll(Ij))||[])}function $(H){let I=B()[H];I&&T.setState("value",I.getAttribute(Su))}function V(H){var I;let q=D(),G=B(),Z=G.findIndex(fe=>fe===q),te=G[Z+H];(I=a.current)!=null&&I.loop&&(te=Z+H<0?G[G.length-1]:Z+H===G.length?G[0]:G[Z+H]),te&&T.setState("value",te.getAttribute(Su))}function A(H){let I=D(),q=I==null?void 0:I.closest(Lh),G;for(;q&&!G;)q=H>0?gee(q,Lh):bee(q,Lh),G=q==null?void 0:q.querySelector(Ij);G?T.setState("value",G.getAttribute(Su)):V(H)}let z=()=>$(B().length-1),j=H=>{H.preventDefault(),H.metaKey?z():H.altKey?A(1):V(1)},U=H=>{H.preventDefault(),H.metaKey?$(0):H.altKey?A(-1):V(-1)};return y.createElement(Un.div,{ref:e,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:H=>{var I;(I=b.onKeyDown)==null||I.call(b,H);let q=H.nativeEvent.isComposing||H.keyCode===229;if(!(H.defaultPrevented||q))switch(H.key){case"n":case"j":{x&&H.ctrlKey&&j(H);break}case"ArrowDown":{j(H);break}case"p":case"k":{x&&H.ctrlKey&&U(H);break}case"ArrowUp":{U(H);break}case"Home":{H.preventDefault(),$(0);break}case"End":{H.preventDefault(),z();break}case"Enter":{H.preventDefault();let G=D();if(G){let Z=new Event(o2);G.dispatchEvent(Z)}}}}},y.createElement("label",{"cmdk-label":"",htmlFor:_.inputId,id:_.labelId,style:vee},l),Py(t,H=>y.createElement(u8.Provider,{value:T},y.createElement(c8.Provider,{value:_},H))))}),lee=y.forwardRef((t,e)=>{var n,r;let s=Ho(),i=y.useRef(null),o=y.useContext(d8),a=im(),l=f8(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Nc(()=>{if(!c)return a.item(s,o==null?void 0:o.id)},[c]);let d=p8(s,i,[t.value,t.children,i],t.keywords),h=hT(),f=al(C=>C.value&&C.value===d.current),p=al(C=>c||a.filter()===!1?!0:C.search?C.filtered.items.get(s)>0:!0);y.useEffect(()=>{let C=i.current;if(!(!C||t.disabled))return C.addEventListener(o2,m),()=>C.removeEventListener(o2,m)},[p,t.onSelect,t.disabled]);function m(){var C,T;g(),(T=(C=l.current).onSelect)==null||T.call(C,d.current)}function g(){h.setState("value",d.current,!0)}if(!p)return null;let{disabled:x,value:b,onSelect:v,forceMount:w,keywords:S,...E}=t;return y.createElement(Un.div,{ref:ol(i,e),...E,id:s,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!f,"data-disabled":!!x,"data-selected":!!f,onPointerMove:x||a.getDisablePointerSelection()?void 0:g,onClick:x?void 0:m},t.children)}),cee=y.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:s,...i}=t,o=Ho(),a=y.useRef(null),l=y.useRef(null),c=Ho(),d=im(),h=al(p=>s||d.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);Nc(()=>d.group(o),[]),p8(o,a,[t.value,t.heading,l]);let f=y.useMemo(()=>({id:o,forceMount:s}),[s]);return y.createElement(Un.div,{ref:ol(a,e),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&y.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),Py(t,p=>y.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},y.createElement(d8.Provider,{value:f},p))))}),uee=y.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,s=y.useRef(null),i=al(o=>!o.search);return!n&&!i?null:y.createElement(Un.div,{ref:ol(s,e),...r,"cmdk-separator":"",role:"separator"})}),dee=y.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,s=t.value!=null,i=hT(),o=al(c=>c.search),a=al(c=>c.selectedItemId),l=im();return y.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),y.createElement(Un.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:s?t.value:o,onChange:c=>{s||i.setState("search",c.target.value),n==null||n(c.target.value)}})}),hee=y.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...s}=t,i=y.useRef(null),o=y.useRef(null),a=al(c=>c.selectedItemId),l=im();return y.useEffect(()=>{if(o.current&&i.current){let c=o.current,d=i.current,h,f=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let p=c.offsetHeight;d.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return f.observe(c),()=>{cancelAnimationFrame(h),f.unobserve(c)}}},[]),y.createElement(Un.div,{ref:ol(i,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:l.listId},Py(t,c=>y.createElement("div",{ref:ol(o,l.listInnerRef),"cmdk-list-sizer":""},c)))}),fee=y.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:i,container:o,...a}=t;return y.createElement(nee,{open:n,onOpenChange:r},y.createElement(ree,{container:o},y.createElement(see,{"cmdk-overlay":"",className:s}),y.createElement(iee,{"aria-label":t.label,"cmdk-dialog":"",className:i},y.createElement(h8,{ref:e,...a}))))}),pee=y.forwardRef((t,e)=>al(n=>n.filtered.count===0)?y.createElement(Un.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),mee=y.forwardRef((t,e)=>{let{progress:n,children:r,label:s="Loading...",...i}=t;return y.createElement(Un.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Py(t,o=>y.createElement("div",{"aria-hidden":!0},o)))}),xa=Object.assign(h8,{List:hee,Item:lee,Input:dee,Group:cee,Separator:uee,Dialog:fee,Empty:pee,Loading:mee});function gee(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function bee(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function f8(t){let e=y.useRef(t);return Nc(()=>{e.current=t}),e}var Nc=typeof window>"u"?y.useEffect:y.useLayoutEffect;function Tu(t){let e=y.useRef();return e.current===void 0&&(e.current=t()),e}function al(t){let e=hT(),n=()=>t(e.snapshot());return y.useSyncExternalStore(e.subscribe,n,n)}function p8(t,e,n,r=[]){let s=y.useRef(),i=im();return Nc(()=>{var o;let a=(()=>{var c;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(c=d.current.textContent)==null?void 0:c.trim():s.current}})(),l=r.map(c=>c.trim());i.value(t,a,l),(o=e.current)==null||o.setAttribute(Su,a),s.current=a}),s}var xee=()=>{let[t,e]=y.useState(),n=Tu(()=>new Map);return Nc(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,s)=>{n.current.set(r,s),e({})}};function yee(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function Py({asChild:t,children:e},n){return t&&y.isValidElement(e)?y.cloneElement(yee(e),{ref:e.ref},n(e.props.children)):n(e)}var vee={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function wee(){const[t,e]=y.useState(!1),[n,r]=y.useState(""),s=ra();y.useEffect(()=>{const l=d=>{d.key==="k"&&(d.metaKey||d.ctrlKey)&&(d.preventDefault(),e(h=>!h))},c=()=>e(!0);return document.addEventListener("keydown",l),window.addEventListener("open-command-center",c),()=>{document.removeEventListener("keydown",l),window.removeEventListener("open-command-center",c)}},[]);const i=l=>{e(!1),l()},o=l=>{e(!1),s(`/search?q=${encodeURIComponent(l)}`)},a=async()=>{if(!n.trim())return;const l=n.trim();e(!1);const{error:c}=await X.from("external_tasks").insert({title:l,status:"Beklemede",due_date:new Date(Date.now()+864e5).toISOString(),priority:"Normal"});alert(c?"Grev oluturulamad.":` Grev eklendi: "${l}"`)};return t?u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-start justify-center pt-[15vh] animate-in fade-in duration-200",children:u.jsx("div",{className:"w-full max-w-[640px] shadow-2xl rounded-xl overflow-hidden animate-in zoom-in-95 slide-in-from-top-2 duration-200 ring-1 ring-white/10",children:u.jsxs(xa,{className:"bg-white dark:bg-[#0F172A] border border-gray-100 dark:border-slate-800 rounded-xl overflow-hidden flex flex-col w-full shadow-2xl",loop:!0,children:[u.jsxs("div",{className:"flex items-center border-b border-gray-100 dark:border-slate-800 px-4 bg-gray-50/50 dark:bg-slate-900/50 h-16",children:[u.jsx(gn,{className:"w-5 h-5 text-gray-400 mr-3 shrink-0"}),u.jsx(xa.Input,{value:n,onValueChange:r,placeholder:"Ne yapmak istiyorsunuz?",className:"w-full h-full bg-transparent border-none focus:outline-none text-lg text-gray-800 dark:text-gray-100 placeholder:text-gray-400 font-medium"}),u.jsxs("button",{onClick:()=>e(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-slate-800 rounded-lg transition-colors ml-2",children:[u.jsx("kbd",{className:"hidden sm:inline-block text-[10px] font-sans font-semibold text-gray-400 mr-2 border border-gray-200 dark:border-slate-700 rounded px-1.5 py-0.5",children:"ESC"}),u.jsx(Jt,{className:"w-4 h-4 text-gray-400 inline-block"})]})]}),u.jsxs(xa.List,{className:"max-h-[360px] overflow-y-auto overflow-x-hidden p-2 scroll-py-2 custom-scrollbar",children:[u.jsx(xa.Empty,{className:"py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:n?u.jsxs("div",{className:"flex flex-col gap-2 max-w-sm mx-auto",children:[u.jsxs("button",{onClick:a,className:"flex items-center gap-3 bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 dark:hover:bg-indigo-900/40 p-3 rounded-lg text-left transition-colors group",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center shrink-0",children:u.jsx(tr,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:"Yeni Grev Olutur"}),u.jsxs("div",{className:"text-xs text-indigo-600/70 dark:text-indigo-400/70 truncate",children:['"',n,'"']})]}),u.jsx(nT,{className:"w-4 h-4 text-indigo-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),u.jsxs("button",{onClick:()=>o(n),className:"flex items-center gap-3 bg-gray-50 dark:bg-slate-800/50 hover:bg-gray-100 dark:hover:bg-slate-800 p-3 rounded-lg text-left transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-slate-800 flex items-center justify-center shrink-0",children:u.jsx(gn,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Detayl Arama Yap"}),u.jsxs("div",{className:"text-xs text-gray-500 truncate",children:['Tm kaytlarda "',n,'" ara']})]})]})]}):u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx(kb,{className:"w-8 h-8 text-gray-200 dark:text-slate-700 mb-2"}),u.jsx("p",{children:"Bir komut arayn veya grev yazn..."})]})}),!n&&u.jsxs(xa.Group,{heading:"Hzl lemler",className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-2 mt-2",children:[u.jsxs(Mi,{onSelect:()=>i(()=>{s("/meeting-notes"),setTimeout(()=>{var l;return(l=document.querySelector('button[title="Yeni Not"]'))==null?void 0:l.click()},500)}),children:[u.jsx("div",{className:"w-5 h-5 rounded bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center mr-3",children:u.jsx(Ht,{className:"w-3 h-3 text-indigo-600 dark:text-indigo-400"})}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Yeni Toplant Notu"})]}),u.jsxs(Mi,{onSelect:()=>i(()=>s("/work-orders")),children:[u.jsx("div",{className:"w-5 h-5 rounded bg-green-100 dark:bg-green-900/50 flex items-center justify-center mr-3",children:u.jsx(tr,{className:"w-3 h-3 text-green-600 dark:text-green-400"})}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:" Emirlerine Git"})]})]}),u.jsxs(xa.Group,{heading:"Navigasyon",className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-2 mt-4",children:[u.jsxs(Mi,{onSelect:()=>i(()=>s("/")),children:[u.jsx(kb,{className:"w-4 h-4 mr-3 text-gray-400"}),"Ana Sayfa"]}),u.jsxs(Mi,{onSelect:()=>i(()=>s("/projects")),children:[u.jsx(pr,{className:"w-4 h-4 mr-3 text-gray-400"}),"Projeler"]}),u.jsxs(Mi,{onSelect:()=>i(()=>s("/clients")),children:[u.jsx(so,{className:"w-4 h-4 mr-3 text-gray-400"}),"Mteriler"]}),u.jsxs(Mi,{onSelect:()=>i(()=>s("/finance")),children:[u.jsx(dL,{className:"w-4 h-4 mr-3 text-gray-400"}),"Finans Ynetimi"]}),u.jsxs(Mi,{onSelect:()=>i(()=>s("/calendar")),children:[u.jsx(to,{className:"w-4 h-4 mr-3 text-gray-400"}),"Takvim"]})]}),u.jsxs(xa.Group,{heading:"Sistem",className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-2 mt-4",children:[u.jsxs(Mi,{onSelect:()=>i(()=>s("/settings")),children:[u.jsx(vL,{className:"w-4 h-4 mr-3 text-slate-400"}),"Ayarlar"]}),u.jsxs(Mi,{onSelect:()=>i(()=>{localStorage.setItem("theme","dark"),window.dispatchEvent(new Event("themeChange"))}),children:[u.jsx(mL,{className:"w-4 h-4 mr-3 text-slate-400"}),"Koyu Mod"]}),u.jsxs(Mi,{onSelect:()=>i(()=>{localStorage.setItem("theme","light"),window.dispatchEvent(new Event("themeChange"))}),children:[u.jsx(CL,{className:"w-4 h-4 mr-3 text-slate-400"}),"Ak Mod"]})]})]}),u.jsxs("div",{className:"border-t border-gray-100 dark:border-slate-800 p-2 bg-gray-50/50 dark:bg-slate-900/50 flex items-center justify-between text-[10px] text-gray-400 px-4",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold text-indigo-500",children:"pucu:"}),' Yazmaya balayn, "Grev Olutur" seenei otomatik kacaktr.']}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("span",{children:"Se"})," ",u.jsx("kbd",{className:"font-sans bg-white dark:bg-slate-800 border dark:border-slate-700 px-1 rounded",children:""})]})]})]})})}):null}function Mi({children:t,onSelect:e}){return u.jsx(xa.Item,{onSelect:e,className:"flex items-center px-4 py-3 text-sm text-gray-700 dark:text-gray-200 rounded-lg cursor-pointer aria-selected:bg-indigo-50 aria-selected:text-indigo-700 dark:aria-selected:bg-indigo-900/30 dark:aria-selected:text-indigo-200 transition-all select-none",children:t})}function kee(){var g,x;const{user:t,role:e,isAdmin:n}=hn(),{notifications:r,unreadCount:s,markAsRead:i,markAllAsRead:o}=sX(),[a,l]=y.useState(""),[c,d]=y.useState(!1),h=ra(),f=El();y.useEffect(()=>{d(!1)},[f.pathname]),y.useEffect(()=>{const b=setTimeout(()=>{a.trim()&&h(`/search?q=${encodeURIComponent(a.trim())}`)},500);return()=>clearTimeout(b)},[a,h]),y.useEffect(()=>{f.pathname!=="/search"&&l("")},[f.pathname]),y.useEffect(()=>{const b=()=>{(localStorage.getItem("theme")||"light")==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};return b(),window.addEventListener("themeChange",b),()=>window.removeEventListener("themeChange",b)},[]);const p=((g=t==null?void 0:t.user_metadata)==null?void 0:g.full_name)||((x=t==null?void 0:t.email)==null?void 0:x.split("@")[0])||"Smeyye encan",m=e||(n?"Ynetici":"alan");return u.jsxs("div",{className:"flex min-h-screen bg-[#F8F9FC] dark:bg-[#020617] transition-colors duration-300",children:[u.jsx(rX,{}),u.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[u.jsxs("header",{className:"h-16 bg-white dark:bg-[#0F172A] border-b border-gray-200 dark:border-slate-800 px-8 flex items-center justify-between sticky top-0 z-10 transition-colors duration-300",children:[u.jsx("div",{className:"flex-1 max-w-xl",children:u.jsxs("div",{className:"relative",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),u.jsx("input",{type:"text",readOnly:!0,placeholder:"Proje, grev veya kii ara... (Ctrl + K)",className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-slate-900 border-none rounded-lg text-sm focus:ring-2 focus:ring-primary/20 outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400 transition-colors cursor-pointer",onClick:()=>window.dispatchEvent(new CustomEvent("open-command-center")),onFocus:()=>window.dispatchEvent(new CustomEvent("open-command-center"))})]})}),u.jsxs("div",{className:"flex items-center gap-4 ml-4",children:[u.jsxs("div",{className:"relative",children:[u.jsxs(re,{variant:"ghost",size:"icon",className:"relative text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>d(!c),children:[u.jsx(cj,{className:"w-5 h-5"}),s>0&&u.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full border-2 border-white dark:border-[#0F172A]",children:s})]}),c&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)})," ",u.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-800 z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200 origin-top-right",children:[u.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center bg-gray-50/50 dark:bg-slate-950/50 backdrop-blur-sm",children:[u.jsx("span",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:"Bildirimler"}),s>0&&u.jsx("button",{onClick:o,className:"text-xs text-primary hover:text-primary/80 font-medium transition-colors",children:"Tmn Oku"})]}),u.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:r.length===0?u.jsxs("div",{className:"p-12 text-center",children:[u.jsx(cj,{className:"w-8 h-8 text-gray-200 dark:text-slate-700 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500 dark:text-slate-500 text-sm",children:"Henz bildiriminiz yok."})]}):u.jsx("div",{className:"divide-y divide-gray-50 dark:divide-slate-800",children:r.map(b=>u.jsx("div",{onClick:()=>{i(b.id),b.link&&(h(b.link),d(!1))},className:`p-4 hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors cursor-pointer relative group ${b.is_read?"":"bg-blue-50/40 dark:bg-blue-900/10"}`,children:u.jsxs("div",{className:"flex gap-3 items-start",children:[u.jsx("div",{className:`mt-1.5 w-2 h-2 rounded-full shrink-0 transition-colors ${b.is_read?"bg-gray-200 dark:bg-slate-700":"bg-blue-600 shadow-sm shadow-blue-500/50"}`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm mb-0.5 ${b.is_read?"font-medium text-gray-700 dark:text-slate-300":"font-semibold text-gray-900 dark:text-white"}`,children:b.title}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 line-clamp-2 leading-relaxed",children:b.message}),u.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-600 mt-1.5 font-medium",children:new Date(b.created_at).toLocaleDateString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})]})},b.id))})})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-gray-200 dark:border-slate-800",children:[u.jsxs("div",{className:"text-right hidden md:block",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-200",children:p}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:m})]}),u.jsx("div",{className:"w-9 h-9 rounded-full bg-purple-600 text-white flex items-center justify-center font-medium shadow-sm",children:p.substring(0,2).toUpperCase()})]})]})]}),u.jsx("div",{className:"flex-1 overflow-auto p-8",children:u.jsx(uY,{})})]}),u.jsx(wee,{})]})}function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function cn(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Je(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function At(t){Je(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||dp(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function m8(t,e){Je(2,arguments);var n=At(t),r=cn(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function fT(t,e){Je(2,arguments);var n=At(t),r=cn(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),i=new Date(n.getTime());i.setMonth(n.getMonth()+r+1,0);var o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function Eee(t,e){Je(2,arguments);var n=At(t).getTime(),r=cn(e);return new Date(n+r)}var Cee={};function ih(){return Cee}function Cb(t,e){var n,r,s,i,o,a,l,c;Je(1,arguments);var d=ih(),h=cn((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=At(t),p=f.getDay(),m=(p<h?7:0)+p-h;return f.setDate(f.getDate()-m),f.setHours(0,0,0,0),f}function See(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Mj(t){Je(1,arguments);var e=At(t);return e.setHours(0,0,0,0),e}var pT=6e4,g8=36e5;function mT(t,e){Je(2,arguments);var n=Mj(t),r=Mj(e);return n.getTime()===r.getTime()}function Tee(t){return Je(1,arguments),t instanceof Date||dp(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Nee(t){if(Je(1,arguments),!Tee(t)&&typeof t!="number")return!1;var e=At(t);return!isNaN(Number(e))}function _ee(t,e){return Je(2,arguments),At(t).getTime()-At(e).getTime()}var Rj={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},Aee="trunc";function jee(t){return t?Rj[t]:Rj[Aee]}function Oee(t,e,n){Je(2,arguments);var r=_ee(t,e)/pT;return jee(void 0)(r)}function a2(t){Je(1,arguments);var e=At(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function l2(t){Je(1,arguments);var e=At(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Pj(t,e){var n,r,s,i,o,a,l,c;Je(1,arguments);var d=ih(),h=cn((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=At(t),p=f.getDay(),m=(p<h?-7:0)+6-(p-h);return f.setDate(f.getDate()+m),f.setHours(23,59,59,999),f}function Iee(t,e){Je(2,arguments);var n=cn(e);return Eee(t,-n)}var Mee=864e5;function Ree(t){Je(1,arguments);var e=At(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/Mee)+1}function Sb(t){Je(1,arguments);var e=1,n=At(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function b8(t){Je(1,arguments);var e=At(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=Sb(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=Sb(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Pee(t){Je(1,arguments);var e=b8(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Sb(n);return r}var Dee=6048e5;function Lee(t){Je(1,arguments);var e=At(t),n=Sb(e).getTime()-Pee(e).getTime();return Math.round(n/Dee)+1}function Tb(t,e){var n,r,s,i,o,a,l,c;Je(1,arguments);var d=ih(),h=cn((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=At(t),p=f.getUTCDay(),m=(p<h?7:0)+p-h;return f.setUTCDate(f.getUTCDate()-m),f.setUTCHours(0,0,0,0),f}function x8(t,e){var n,r,s,i,o,a,l,c;Je(1,arguments);var d=At(t),h=d.getUTCFullYear(),f=ih(),p=cn((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:f.firstWeekContainsDate)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setUTCFullYear(h+1,0,p),m.setUTCHours(0,0,0,0);var g=Tb(m,e),x=new Date(0);x.setUTCFullYear(h,0,p),x.setUTCHours(0,0,0,0);var b=Tb(x,e);return d.getTime()>=g.getTime()?h+1:d.getTime()>=b.getTime()?h:h-1}function Bee(t,e){var n,r,s,i,o,a,l,c;Je(1,arguments);var d=ih(),h=cn((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=x8(t,e),p=new Date(0);p.setUTCFullYear(f,0,h),p.setUTCHours(0,0,0,0);var m=Tb(p,e);return m}var $ee=6048e5;function Fee(t,e){Je(1,arguments);var n=At(t),r=Tb(n,e).getTime()-Bee(n,e).getTime();return Math.round(r/$ee)+1}function ht(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var pa={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return ht(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):ht(r+1,2)},d:function(e,n){return ht(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return ht(e.getUTCHours()%12||12,n.length)},H:function(e,n){return ht(e.getUTCHours(),n.length)},m:function(e,n){return ht(e.getUTCMinutes(),n.length)},s:function(e,n){return ht(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return ht(i,n.length)}},fu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Hee={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return pa.y(e,n)},Y:function(e,n,r,s){var i=x8(e,s),o=i>0?i:1-i;if(n==="YY"){var a=o%100;return ht(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):ht(o,n.length)},R:function(e,n){var r=b8(e);return ht(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return ht(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return ht(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return ht(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return pa.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return ht(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=Fee(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):ht(i,n.length)},I:function(e,n,r){var s=Lee(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):ht(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):pa.d(e,n)},D:function(e,n,r){var s=Ree(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):ht(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return ht(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return ht(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return ht(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=fu.noon:s===0?i=fu.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=fu.evening:s>=12?i=fu.afternoon:s>=4?i=fu.morning:i=fu.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return pa.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):pa.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):ht(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):ht(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):pa.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):pa.s(e,n)},S:function(e,n){return pa.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Lj(o);case"XXXX":case"XX":return Kl(o);case"XXXXX":case"XXX":default:return Kl(o,":")}},x:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"x":return Lj(o);case"xxxx":case"xx":return Kl(o);case"xxxxx":case"xxx":default:return Kl(o,":")}},O:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Dj(o,":");case"OOOO":default:return"GMT"+Kl(o,":")}},z:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Dj(o,":");case"zzzz":default:return"GMT"+Kl(o,":")}},t:function(e,n,r,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return ht(o,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,o=i.getTime();return ht(o,n.length)}};function Dj(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e;return n+String(s)+o+ht(i,2)}function Lj(t,e){if(t%60===0){var n=t>0?"-":"+";return n+ht(Math.abs(t)/60,2)}return Kl(t,e)}function Kl(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=ht(Math.floor(s/60),2),o=ht(s%60,2);return r+i+n+o}var Bj=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},y8=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Uee=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return Bj(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Bj(s,n)).replace("{{time}}",y8(i,n))},zee={p:y8,P:Uee},Vee=["D","DD"],Wee=["YY","YYYY"];function qee(t){return Vee.indexOf(t)!==-1}function Gee(t){return Wee.indexOf(t)!==-1}function $j(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Yee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Kee=function(e,n,r){var s,i=Yee[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function id(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var Jee={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Zee={date:id({formats:Jee,defaultWidth:"full"}),time:id({formats:Qee,defaultWidth:"full"}),dateTime:id({formats:Xee,defaultWidth:"full"})},ete={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tte=function(e,n,r,s){return ete[e]};function Vi(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return s[c]}}var nte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},rte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ste={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ite={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ote={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ate={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},lte=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},cte={ordinalNumber:lte,era:Vi({values:nte,defaultWidth:"wide"}),quarter:Vi({values:rte,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Vi({values:ste,defaultWidth:"wide"}),day:Vi({values:ite,defaultWidth:"wide"}),dayPeriod:Vi({values:ote,defaultWidth:"wide",formattingValues:ate,defaultFormattingWidth:"wide"})};function Wi(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?dte(a,function(h){return h.test(o)}):ute(a,function(h){return h.test(o)}),c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var d=e.slice(o.length);return{value:c,rest:d}}}function ute(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function dte(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function v8(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var hte=/^(\d+)(th|st|nd|rd)?/i,fte=/\d+/i,pte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mte={any:[/^b/i,/^(a|c)/i]},gte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bte={any:[/1/i,/2/i,/3/i,/4/i]},xte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},vte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},kte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ete={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Cte={ordinalNumber:v8({matchPattern:hte,parsePattern:fte,valueCallback:function(e){return parseInt(e,10)}}),era:Wi({matchPatterns:pte,defaultMatchWidth:"wide",parsePatterns:mte,defaultParseWidth:"any"}),quarter:Wi({matchPatterns:gte,defaultMatchWidth:"wide",parsePatterns:bte,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Wi({matchPatterns:xte,defaultMatchWidth:"wide",parsePatterns:yte,defaultParseWidth:"any"}),day:Wi({matchPatterns:vte,defaultMatchWidth:"wide",parsePatterns:wte,defaultParseWidth:"any"}),dayPeriod:Wi({matchPatterns:kte,defaultMatchWidth:"any",parsePatterns:Ete,defaultParseWidth:"any"})},Ste={code:"en-US",formatDistance:Kee,formatLong:Zee,formatRelative:tte,localize:cte,match:Cte,options:{weekStartsOn:0,firstWeekContainsDate:1}},Tte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_te=/^'([^]*?)'?$/,Ate=/''/g,jte=/[a-zA-Z]/;function Ve(t,e,n){var r,s,i,o,a,l,c,d,h,f,p,m,g,x,b,v,w,S;Je(2,arguments);var E=String(e),C=ih(),T=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:C.locale)!==null&&r!==void 0?r:Ste,_=cn((i=(o=(a=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(c=n.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&a!==void 0?a:C.firstWeekContainsDate)!==null&&o!==void 0?o:(h=C.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=cn((p=(m=(g=(x=n==null?void 0:n.weekStartsOn)!==null&&x!==void 0?x:n==null||(b=n.locale)===null||b===void 0||(v=b.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&g!==void 0?g:C.weekStartsOn)!==null&&m!==void 0?m:(w=C.locale)===null||w===void 0||(S=w.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&p!==void 0?p:0);if(!(O>=0&&O<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var N=At(t);if(!Nee(N))throw new RangeError("Invalid time value");var R=See(N),M=Iee(N,R),W={firstWeekContainsDate:_,weekStartsOn:O,locale:T,_originalDate:N},D=E.match(Nte).map(function(B){var $=B[0];if($==="p"||$==="P"){var V=zee[$];return V(B,T.formatLong)}return B}).join("").match(Tte).map(function(B){if(B==="''")return"'";var $=B[0];if($==="'")return Ote(B);var V=Hee[$];if(V)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Gee(B)&&$j(B,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&qee(B)&&$j(B,e,String(t)),V(M,B,T.localize,W);if($.match(jte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");return B}).join("");return D}function Ote(t){var e=t.match(_te);return e?e[1].replace(Ate,"'"):t}function Ite(t){Je(1,arguments);var e=At(t),n=e.getFullYear(),r=e.getMonth(),s=new Date(0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Mte(t,e){Je(2,arguments);var n=At(t),r=At(e);return n.getTime()>r.getTime()}function Nb(t,e,n){Je(2,arguments);var r=Cb(t,n),s=Cb(e,n);return r.getTime()===s.getTime()}function w8(t,e){Je(2,arguments);var n=At(t),r=At(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Rte(t){return Je(1,arguments),mT(t,Date.now())}function k8(t,e){Je(2,arguments);var n=cn(e);return m8(t,-n)}function nt(t,e){var n;Je(1,arguments);var r=cn((n=void 0)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var s=Bte(t),i;if(s.date){var o=$te(s.date,r);i=Fte(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var a=i.getTime(),l=0,c;if(s.time&&(l=Hte(s.time),isNaN(l)))return new Date(NaN);if(s.timezone){if(c=Ute(s.timezone),isNaN(c))return new Date(NaN)}else{var d=new Date(a+l),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(a+l+c)}var f0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Pte=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Dte=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Lte=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Bte(t){var e={},n=t.split(f0.dateTimeDelimiter),r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],f0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(f0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){var s=f0.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function $te(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((r[1]||r[2]).length)}}function Fte(t,e){if(e===null)return new Date(NaN);var n=t.match(Pte);if(!n)return new Date(NaN);var r=!!n[4],s=Bh(n[1]),i=Bh(n[2])-1,o=Bh(n[3]),a=Bh(n[4]),l=Bh(n[5])-1;if(r)return Gte(e,a,l)?zte(e,a,l):new Date(NaN);var c=new Date(0);return!Wte(e,i,o)||!qte(e,s)?new Date(NaN):(c.setUTCFullYear(e,i,Math.max(s,o)),c)}function Bh(t){return t?parseInt(t):1}function Hte(t){var e=t.match(Dte);if(!e)return NaN;var n=tw(e[1]),r=tw(e[2]),s=tw(e[3]);return Yte(n,r,s)?n*g8+r*pT+s*1e3:NaN}function tw(t){return t&&parseFloat(t.replace(",","."))||0}function Ute(t){if(t==="Z")return 0;var e=t.match(Lte);if(!e)return 0;var n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return Kte(r,s)?n*(r*g8+s*pT):NaN}function zte(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var s=r.getUTCDay()||7,i=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}var Vte=[31,null,31,30,31,30,31,31,30,31,30,31];function E8(t){return t%400===0||t%4===0&&t%100!==0}function Wte(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Vte[e]||(E8(t)?29:28))}function qte(t,e){return e>=1&&e<=(E8(t)?366:365)}function Gte(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Yte(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Kte(t,e){return e>=0&&e<=59}function Jte(t,e){Je(2,arguments);var n=At(t),r=cn(e),s=n.getFullYear(),i=n.getDate(),o=new Date(0);o.setFullYear(s,r,15),o.setHours(0,0,0,0);var a=Ite(o);return n.setMonth(r,Math.min(i,a)),n}function Qte(t,e){if(Je(2,arguments),dp(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var n=At(t);return isNaN(n.getTime())?new Date(NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=Jte(n,e.month)),e.date!=null&&n.setDate(cn(e.date)),e.hours!=null&&n.setHours(cn(e.hours)),e.minutes!=null&&n.setMinutes(cn(e.minutes)),e.seconds!=null&&n.setSeconds(cn(e.seconds)),e.milliseconds!=null&&n.setMilliseconds(cn(e.milliseconds)),n)}function es(t,e){Je(2,arguments);var n=cn(e);return fT(t,-n)}var Xte={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},Zte=function(e,n,r){var s,i=Xte[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?s+" sonra":s+" nce":s},ene={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},tne={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},nne={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},rne={date:id({formats:ene,defaultWidth:"full"}),time:id({formats:tne,defaultWidth:"full"}),dateTime:id({formats:nne,defaultWidth:"full"})},sne={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},ine=function(e,n,r,s){return sne[e]},one={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},ane={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},lne={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},cne={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},une={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},dne={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},hne=function(e,n){var r=Number(e);return r+"."},fne={ordinalNumber:hne,era:Vi({values:one,defaultWidth:"wide"}),quarter:Vi({values:ane,defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Vi({values:lne,defaultWidth:"wide"}),day:Vi({values:cne,defaultWidth:"wide"}),dayPeriod:Vi({values:une,defaultWidth:"wide",formattingValues:dne,defaultFormattingWidth:"wide"})},pne=/^(\d+)(\.)?/i,mne=/\d+/i,gne={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},bne={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},xne={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},yne={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},vne={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},wne={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},kne={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},Ene={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},Cne={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},Sne={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},Tne={ordinalNumber:v8({matchPattern:pne,parsePattern:mne,valueCallback:function(e){return parseInt(e,10)}}),era:Wi({matchPatterns:gne,defaultMatchWidth:"wide",parsePatterns:bne,defaultParseWidth:"any"}),quarter:Wi({matchPatterns:xne,defaultMatchWidth:"wide",parsePatterns:yne,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Wi({matchPatterns:vne,defaultMatchWidth:"wide",parsePatterns:wne,defaultParseWidth:"any"}),day:Wi({matchPatterns:kne,defaultMatchWidth:"wide",parsePatterns:Ene,defaultParseWidth:"any"}),dayPeriod:Wi({matchPatterns:Cne,defaultMatchWidth:"any",parsePatterns:Sne,defaultParseWidth:"any"})},Cn={code:"tr",formatDistance:Zte,formatLong:rne,formatRelative:ine,localize:fne,match:Tne,options:{weekStartsOn:1,firstWeekContainsDate:1}};function Nne({user:t}){const[e,n]=y.useState(!0),[r,s]=y.useState([]),[i,o]=y.useState(0);y.useEffect(()=>{if(!t)return;const l=async()=>{try{n(!0);const d=new Date,h=Ve(d,"yyyy-MM-dd"),{data:f}=await X.from("external_tasks").select("id, title, due_date").gte("due_date",h+"T00:00:00").lte("due_date",h+"T23:59:59"),{data:p}=await X.from("calendar_events").select("id, title, start_time, end_time, type").gte("start_time",h+"T00:00:00").lte("start_time",h+"T23:59:59"),m=[];f==null||f.forEach((x,b)=>{const v=Qte(d,{hours:14+b,minutes:0});m.push({id:x.id,title:x.title,time:v,type:"task",duration:15})}),p==null||p.forEach(x=>{m.push({id:x.id,title:x.title,time:new Date(x.start_time),type:x.type||"event",duration:Oee(new Date(x.end_time),new Date(x.start_time))||30})}),a();const g=setInterval(()=>a(),6e4);return s(m.sort((x,b)=>x.time-b.time)),n(!1),()=>clearInterval(g)}catch(d){console.error("Briefing error:",d),n(!1)}};l();const c=X.channel("public:calendar_events").on("postgres_changes",{event:"*",schema:"public",table:"calendar_events"},l).subscribe();return()=>{X.removeChannel(c)}},[t]);const a=(l,c)=>{const d=new Date,h=d.getHours()*60+d.getMinutes(),f=24*60;o(h/f*100)};return e?u.jsx("div",{className:"h-40 rounded-3xl bg-slate-100 dark:bg-slate-800 animate-pulse"}):u.jsxs("div",{className:"col-span-1 lg:col-span-3 bg-white dark:bg-slate-900 rounded-3xl p-6 shadow-sm border border-slate-200 dark:border-slate-800 relative overflow-hidden flex flex-col justify-center",children:[u.jsxs("div",{className:"flex justify-between items-end mb-6",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(pi,{className:"w-6 h-6 text-violet-600"}),"Bugnn Zaman Tneli"]}),u.jsx("p",{className:"text-slate-500 text-sm mt-1",children:r.length>0?`${r.length} aktivite planland.`:"Bugn takvim bo grnyor."})]}),u.jsx("div",{className:"text-right",children:u.jsx("span",{className:"text-3xl font-black text-slate-900 dark:text-white font-mono tracking-wider",children:Ve(new Date,"HH:mm")})})]}),u.jsx("div",{className:"relative w-full h-32 bg-slate-50 dark:bg-slate-950 rounded-2xl border border-slate-100 dark:border-slate-800 overflow-hidden group/timeline",children:u.jsx("div",{className:"overflow-x-auto h-full w-full scrollbar-hide cursor-grab active:cursor-grabbing pb-2",style:{scrollBehavior:"smooth"},children:u.jsxs("div",{className:"relative min-w-[200%] h-full",children:[" ",u.jsx("div",{className:"absolute inset-0 flex justify-between px-8 items-end pb-2 pointer-events-none z-10",children:Array.from({length:25}).map((l,c)=>c).filter(l=>l%2===0).map(l=>u.jsxs("div",{className:"flex flex-col items-center gap-2 opacity-30 absolute top-0 h-full",style:{left:`${l/24*100}%`},children:[u.jsx("div",{className:"h-full w-px bg-slate-300 dark:bg-slate-600 border-l border-dashed h-24"}),u.jsxs("span",{className:"text-xs font-mono font-bold absolute bottom-2",children:[l.toString().padStart(2,"0"),":00"]})]},l))}),r.map(l=>{const d=(l.time.getHours()+l.time.getMinutes()/60)/24*100;return u.jsxs("div",{className:`absolute top-1/2 -translate-y-1/2 px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm whitespace-nowrap z-20 cursor-pointer transition-all hover:scale-110 hover:z-30 border ${l.type==="meeting"?"bg-violet-100 text-violet-700 border-violet-200 dark:bg-violet-900 dark:text-violet-100 dark:border-violet-700":l.type==="task"?"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900 dark:text-emerald-100 dark:border-emerald-700":"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900 dark:text-amber-100 dark:border-amber-700"}`,style:{left:`${d}%`},title:`${l.title} at ${Ve(l.time,"HH:mm")}`,children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${l.type==="meeting"?"bg-violet-500":l.type==="task"?"bg-emerald-500":"bg-amber-500"}`}),l.title]}),u.jsx("div",{className:"text-[9px] opacity-70 font-mono mt-0.5 ml-3",children:Ve(l.time,"HH:mm")})]},l.id)}),u.jsxs("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-30 shadow-[0_0_10px_rgba(239,68,68,0.5)] transition-all duration-1000 ease-linear",style:{left:`${i}%`},children:[u.jsx("div",{className:"absolute top-0 -translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-red-500 rounded-full shadow-sm"}),u.jsx("div",{className:"absolute bottom-0 -translate-x-1/2 translate-y-1/2 w-3 h-3 bg-red-500 rounded-full shadow-sm"})]})]})})})]})}function Fj(){var s;const t=ra(),{user:e}=hn(),[n,r]=y.useState({total_clients:0,total_projects:0,active_projects:0,my_pending_tasks:0,weekly_revenue:0,projects_raw:[],sessions_raw:[]});return y.useEffect(()=>{if(!e)return;(async()=>{try{const{data:o,error:a}=await X.rpc("get_dashboard_stats");if(a)throw a;const{data:l}=await X.from("projects").select("*, profiles(full_name)").limit(100),{data:c}=await X.from("work_sessions").select("*, profiles(full_name)").limit(100),{data:d}=await X.from("profiles").select("full_name");r({...o,projects_raw:l||[],sessions_raw:c||[],all_users:d||[]})}catch(o){console.error("Dashboard turbo fetch error:",o)}})()},[e]),e?u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[u.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white tracking-tighter transition-colors",children:["Ho geldin, ",u.jsx("span",{className:"bg-gradient-to-r from-violet-600 to-indigo-600 bg-clip-text text-transparent",children:(s=e.email)==null?void 0:s.split("@")[0]})," "]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mt-2 flex items-center gap-2 font-medium transition-colors",children:[u.jsx(XJ,{className:"w-4 h-4 text-violet-500"}),Ve(new Date,"d MMMM yyyy EEEEE",{locale:Cn}),u.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300 dark:bg-slate-600"}),"Bugn harika iler karacaz."]})]}),u.jsx("div",{className:"flex items-center gap-3",children:u.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-900 p-1.5 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm transition-colors duration-300",children:[u.jsx(nw,{icon:pr,label:"Proje",onClick:()=>t("/projects"),count:n.total_projects}),u.jsx(nw,{icon:no,label:" Emrim",onClick:()=>t("/work-orders"),count:n.my_pending_tasks}),u.jsx(nw,{icon:Ht,label:"Mteri",onClick:()=>t("/clients"),count:n.total_clients})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx(Nne,{user:e}),u.jsxs("div",{className:"space-y-8",children:[u.jsx(_ne,{user:e}),u.jsx(Ine,{user:e}),u.jsx(Rne,{user:e})]}),u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[u.jsx(jne,{projects:n.projects_raw,sessions:n.sessions_raw,all_users:n.all_users}),u.jsx(One,{projects:n.projects_raw,sessions:n.sessions_raw,all_users:n.all_users}),u.jsx(Ane,{projects:n.projects_raw,sessions:n.sessions_raw})]}),u.jsx(Mne,{user:e})]})]})]}):u.jsx("div",{className:"p-10 text-center text-slate-500",children:"Ykleniyor..."})}function nw({icon:t,label:e,onClick:n,count:r}){return u.jsxs("button",{onClick:n,className:"relative group p-3 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-all text-slate-500 dark:text-slate-400 hover:text-violet-600 dark:hover:text-violet-400",children:[u.jsx(t,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-slate-900 text-white text-[10px] rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-20",children:e}),r!==void 0&&r>0&&u.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-violet-500 rounded-full border border-white dark:border-slate-900"})]})}function _ne({user:t}){const[e,n]=y.useState(!1),[r,s]=y.useState(!1),[i,o]=y.useState(0),[a,l]=y.useState("Ofis"),[c,d]=y.useState(null),[h,f]=y.useState(0),[p,m]=y.useState(null),[g,x]=y.useState(!1),[b,v]=y.useState(""),w=y.useRef(null);y.useEffect(()=>{try{const _=localStorage.getItem(`timer_state_${t.id}`);if(_){const O=JSON.parse(_);if(n(O.isActive),s(O.isPaused),l(O.location),d(O.startTimestamp),f(O.totalPausedTime||0),m(O.pauseStartTimestamp),O.isActive){const N=Date.now(),R=O.startTimestamp||N,M=O.totalPausedTime||0;if(O.isPaused&&O.pauseStartTimestamp){const W=O.pauseStartTimestamp-R-M;o(Math.max(0,Math.floor(W/1e3)))}else{const W=N-R-M;o(Math.max(0,Math.floor(W/1e3)))}}}}catch(_){console.error("Timer load error",_)}},[t.id]),y.useEffect(()=>(e&&!r&&c?w.current=setInterval(()=>{const O=Date.now()-c-h;o(Math.floor(O/1e3))},1e3):clearInterval(w.current),()=>clearInterval(w.current)),[e,r,c,h]),y.useEffect(()=>{if(e){const _={isActive:e,isPaused:r,location:a,startTimestamp:c,totalPausedTime:h,pauseStartTimestamp:p};localStorage.setItem(`timer_state_${t.id}`,JSON.stringify(_))}else!e&&c===null&&localStorage.removeItem(`timer_state_${t.id}`)},[e,r,a,c,h,p,t.id]);const S=()=>{if(e)if(!r)m(Date.now()),s(!0);else{const O=Date.now()-p;f(N=>N+O),m(null),s(!1)}else{const _=Date.now();d(_),f(0),n(!0),s(!1)}},E=()=>{x(!0)},C=async()=>{const _=Date.now();let O=0;const N=c||Date.now(),R=h||0;r&&p?O=Math.floor((p-N-R)/1e3):O=Math.floor((_-N-R)/1e3),O=Math.max(0,O);try{const{error:M}=await X.from("work_sessions").insert({user_id:t.id,start_time:new Date(N).toISOString(),end_time:new Date(_).toISOString(),duration:O,location:a,description:b});if(M)throw M;n(!1),s(!1),o(0),d(null),m(null),f(0),x(!1),v(""),localStorage.removeItem(`timer_state_${t.id}`),alert("alma oturumu kaydedildi!"),window.location.reload()}catch(M){console.error("Session save failed:",M),alert("Kayedilirken hata olutu: "+M.message)}},T=_=>{(!_||isNaN(_))&&(_=0);const O=Math.floor(_/3600),N=Math.floor(_%3600/60),R=_%60;return`${O.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`};return u.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-3xl p-8 text-white shadow-2xl relative overflow-hidden group",children:[g&&u.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:u.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl shadow-2xl w-full max-w-xs overflow-hidden text-center",children:[u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-lg font-bold text-white",children:"Gn Bitir?"}),u.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"alma sreniz kaydedilip oturum kapatlacak."}),u.jsx("div",{className:"mt-4 text-left",children:u.jsx("textarea",{className:"w-full bg-slate-900/50 border border-slate-700 rounded-xl p-3 text-sm text-slate-200 placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-violet-500/50",placeholder:"zet...",rows:3,value:b,onChange:_=>v(_.target.value)})})]}),u.jsxs("div",{className:"bg-gray-900/50 px-6 py-4 flex gap-3",children:[u.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 rounded-lg",children:"Vazge"}),u.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-500 rounded-lg",children:"Bitir & Kaydet"})]})]})}),u.jsx("div",{className:ie("absolute top-0 right-0 w-64 h-64 bg-violet-600 rounded-full blur-[100px] opacity-20",e&&!r&&"opacity-40 animate-pulse")}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[!e&&u.jsxs("div",{className:"flex bg-white/10 p-1 rounded-full mb-8 backdrop-blur-md border border-white/10",children:[u.jsxs("button",{onClick:()=>l("Ofis"),className:ie("px-4 py-1.5 rounded-full text-xs font-medium transition-all flex items-center gap-2",a==="Ofis"?"bg-white text-slate-900 shadow-lg":"text-slate-400 hover:text-white"),children:[u.jsx(aT,{className:"w-3 h-3"})," Ofis"]}),u.jsxs("button",{onClick:()=>l("Uzaktan"),className:ie("px-4 py-1.5 rounded-full text-xs font-medium transition-all flex items-center gap-2",a==="Uzaktan"?"bg-white text-slate-900 shadow-lg":"text-slate-400 hover:text-white"),children:[u.jsx(kQ,{className:"w-3 h-3"})," Uzaktan"]})]}),e&&u.jsxs("div",{className:"mb-8 flex items-center gap-2 px-3 py-1 rounded-full bg-violet-500/20 text-violet-200 text-xs font-medium border border-violet-500/30",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-violet-400 animate-pulse"}),a==="Ofis"?"Ofistesin":"Uzaktan alyorsun"]}),u.jsx("div",{className:"text-6xl font-black font-mono tracking-wider mb-8 tabular-nums bg-gradient-to-b from-white to-slate-400 bg-clip-text text-transparent",children:T(i)}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:S,className:ie("w-16 h-16 rounded-2xl flex items-center justify-center transition-all shadow-xl active:scale-95 border border-white/10",e&&!r?"bg-amber-500 text-slate-900":"bg-white text-slate-900"),children:e&&!r?u.jsx(gL,{className:"w-6 h-6 fill-current"}):u.jsx(xL,{className:"w-6 h-6 fill-current ml-1"})}),e&&u.jsx("button",{onClick:E,className:"w-16 h-16 rounded-2xl bg-red-500/10 text-red-500 border border-red-500/20 flex items-center justify-center transition-all shadow-lg active:scale-95 hover:bg-red-500 hover:text-white",children:u.jsx(xQ,{className:"w-6 h-6 fill-current"})})]}),u.jsx("p",{className:"mt-6 text-slate-500 text-xs font-medium uppercase tracking-widest",children:e?r?"Duraklatld":"alma Kaydediliyor...":"Sre Balatlmaya Hazr"})]})]})}function Ane({projects:t,sessions:e}){const[n,r]=y.useState(null);return y.useEffect(()=>{if(!t||!e)return;const s={};t.forEach(a=>{var c;const l=(c=a.profiles)==null?void 0:c.full_name;l&&(s[l]=(s[l]||0)+10)}),e.forEach(a=>{var c;const l=(c=a.profiles)==null?void 0:c.full_name;l&&a.duration&&(s[l]=(s[l]||0)+a.duration/3600)});let i=null,o=-1;Object.keys(s).forEach(a=>{s[a]>o&&(o=s[a],i=a)}),r(i?{name:i,score:Math.floor(o)}:{name:"Henz Yok",score:0})},[t,e]),n?u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 relative overflow-hidden flex items-center justify-between mb-8 group hover:shadow-xl transition-all",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-amber-100/50 dark:from-amber-900/30 to-transparent rounded-full -translate-y-1/2 translate-x-1/2"}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs("p",{className:"text-amber-600 dark:text-amber-500 text-[10px] font-black uppercase tracking-widest mb-1 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 rounded-full bg-amber-500 animate-ping"}),"Sat ampiyonu"]}),u.jsx("h3",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:n.name}),u.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["+",n.score," puan"]})]}),u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center text-white shadow-lg",children:u.jsx(sm,{className:"w-8 h-8 fill-current"})})]}):null}function jne({projects:t,sessions:e,all_users:n}){const[r,s]=y.useState([]);return y.useEffect(()=>{if(!t||!e)return;const i=new Date,o={};n&&n.forEach(l=>{l.full_name&&(o[l.full_name]=0)}),t.forEach(l=>{var c;if(l.start_date&&Nb(nt(l.start_date),i,{locale:Cn})){const d=(c=l.profiles)==null?void 0:c.full_name;d&&(o[d]=(o[d]||0)+10)}}),e.forEach(l=>{var c;if(l.start_time&&Nb(nt(l.start_time),i,{locale:Cn})){const d=(c=l.profiles)==null?void 0:c.full_name;d&&(o[d]=(o[d]||0)+l.duration/3600)}});const a=Object.entries(o).map(([l,c])=>({name:l,score:Math.floor(c)})).sort((l,c)=>c.score-l.score).slice(0,2);s(a.length>0?a:[{name:"Henz Yok",score:0}])},[t,e]),r.length===0?null:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 relative overflow-hidden flex items-center justify-between mb-8 group hover:shadow-xl transition-all",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-violet-100/50 dark:from-violet-900/30 to-transparent rounded-full -translate-y-1/2 translate-x-1/2"}),u.jsxs("div",{className:"relative z-10 w-full pr-16",children:[u.jsxs("p",{className:"text-violet-600 dark:text-violet-400 text-[10px] font-black uppercase tracking-widest mb-1 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 rounded-full bg-violet-500 animate-ping"}),"Haftann alkanlar"]}),u.jsx("div",{className:"space-y-4 mt-4",children:r.map((i,o)=>u.jsxs("div",{className:"flex items-center justify-between border-b border-dashed border-slate-100 dark:border-slate-800 last:border-0 pb-1 last:pb-0",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white leading-tight",children:i.name}),u.jsxs("div",{className:"text-[10px] text-slate-500 font-medium",children:["#",o+1,"  ",i.score," puan"]})]}),o===0&&u.jsx("span",{className:"text-lg",children:""})]},o))})]}),u.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 w-12 h-12 bg-gradient-to-br from-violet-400 to-fuchsia-500 rounded-2xl flex items-center justify-center text-white shadow-lg",children:u.jsx(sm,{className:"w-6 h-6 fill-current"})})]})}function One({projects:t,sessions:e,all_users:n}){const[r,s]=y.useState([]);return y.useEffect(()=>{if(!t||!e)return;const i=new Date,o={};n&&n.forEach(l=>{l.full_name&&(o[l.full_name]=0)}),t.forEach(l=>{var c;if(l.start_date&&Nb(nt(l.start_date),i,{locale:Cn})){const d=(c=l.profiles)==null?void 0:c.full_name;d&&(o[d]=(o[d]||0)+10)}}),e.forEach(l=>{var c;if(l.start_time&&Nb(nt(l.start_time),i,{locale:Cn})){const d=(c=l.profiles)==null?void 0:c.full_name;d&&(o[d]=(o[d]||0)+l.duration/3600)}});const a=Object.entries(o).map(([l,c])=>({name:l,score:Math.floor(c)})).sort((l,c)=>l.score-c.score).slice(0,2);s(a.length>0?a:[{name:"Henz Yok",score:0}])},[t,e]),r.length===0?null:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 relative overflow-hidden flex items-center justify-between mb-8 group hover:shadow-xl transition-all",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-red-100/50 dark:from-red-900/30 to-transparent rounded-full -translate-y-1/2 translate-x-1/2"}),u.jsxs("div",{className:"relative z-10 w-full pr-16",children:[u.jsxs("p",{className:"text-red-500 dark:text-red-400 text-[10px] font-black uppercase tracking-widest mb-1 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 rounded-full bg-red-400 animate-pulse"}),"Haftann En Az Eforu"]}),u.jsx("div",{className:"space-y-4 mt-4",children:r.map((i,o)=>u.jsx("div",{className:"flex items-center justify-between border-b border-dashed border-red-100 dark:border-red-900/20 last:border-0 pb-1 last:pb-0",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white leading-tight",children:i.name}),u.jsxs("div",{className:"text-[10px] text-slate-500 font-medium",children:[i.score," puan"]})]})},o))})]}),u.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 w-12 h-12 bg-gradient-to-br from-red-400 to-rose-500 rounded-2xl flex items-center justify-center text-white shadow-lg",children:u.jsx(TL,{className:"w-6 h-6 fill-current"})})]})}function Ine({user:t}){const[e,n]=y.useState(""),[r,s]=y.useState(!1);y.useEffect(()=>{if(!t)return;(async()=>{const{data:l}=await X.from("personal_notes").select("content").eq("user_id",t.id).single();l&&n(l.content||"")})()},[t]);const i=async a=>{const l=a.target.value;n(l)},o=async()=>{if(!t)return;s(!0);const{error:a}=await X.from("personal_notes").upsert({user_id:t.id,content:e},{onConflict:"user_id"});s(!1)};return u.jsxs("div",{className:"bg-[#FFF9C4] dark:bg-amber-900/30 rounded-3xl p-6 shadow-sm border border-yellow-200/50 dark:border-amber-800/30 relative overflow-hidden group hover:shadow-md transition-all",children:[u.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-black/5 to-transparent pointer-events-none"}),u.jsxs("div",{className:"flex items-center gap-2 mb-4 text-yellow-800 dark:text-amber-200",children:[u.jsx(EL,{className:"w-5 h-5"}),u.jsxs("h3",{className:"font-bold",children:["Notlarm ",r&&u.jsx("span",{className:"text-[10px] opacity-50",children:"(Kaydediliyor...)"})]})]}),u.jsx("textarea",{className:"w-full h-40 bg-transparent border-none resize-none focus:outline-none text-gray-800 dark:text-amber-100 placeholder-yellow-700/50 dark:placeholder-amber-700/50 text-sm leading-relaxed",placeholder:"Aklndakileri buraya not al...",value:e,onChange:i,onBlur:o})]})}function Mne({user:t}){const[e,n]=y.useState([]),[r,s]=y.useState(!0),i=ra(),o=async()=>{if(t){s(!0);try{const{data:a,error:l}=await X.rpc("get_my_dashboard_tasks");if(l)throw l;n(a||[])}catch(a){console.error("Fetch tasks error:",a)}finally{s(!1)}}};return y.useEffect(()=>(o(),window.addEventListener("taskCreated",o),()=>window.removeEventListener("taskCreated",o)),[t]),u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white",children:"Grevlerim &  Emirlerim"}),u.jsx("button",{onClick:()=>i("/work-orders"),className:"text-sm font-medium text-violet-600 dark:text-violet-400 hover:underline",children:"Tm"})]}),u.jsx("div",{className:"space-y-3",children:r?u.jsx("div",{className:"flex justify-center p-4",children:u.jsx("div",{className:"w-5 h-5 border-2 border-violet-500 border-t-transparent rounded-full animate-spin"})}):e.length===0?u.jsx("p",{className:"text-slate-500 text-sm",children:"Aktif grev veya i emri bulunmuyor."}):e.map(a=>u.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700 group hover:border-violet-200 dark:hover:border-violet-900/50 transition-all",children:[u.jsx("div",{className:ie("w-1.5 h-10 rounded-full",a.source_type===" Emri"?"bg-violet-500":"bg-emerald-500")}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[u.jsx("h4",{className:"font-bold text-slate-900 dark:text-slate-100 text-sm truncate",children:a.title}),u.jsx("span",{className:ie("text-[9px] px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wider",a.source_type===" Emri"?"bg-violet-100 text-violet-600 dark:bg-violet-900/30":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30"),children:a.source_type})]}),u.jsx("p",{className:"text-xs text-slate-500 truncate",children:a.description||"Aklama yok"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 block whitespace-nowrap",children:a.due_date?Ve(nt(a.due_date),"d MMM",{locale:Cn}):Ve(nt(a.created_at),"d MMM",{locale:Cn})}),u.jsx("span",{className:"text-[9px] text-slate-400/70",children:a.status})]})]},a.id))})]})}function Rne({user:t}){const[e,n]=y.useState(""),[r,s]=y.useState(!1),i=async o=>{if(o.key==="Enter"||o.type==="click"){if(!e.trim())return;s(!0);try{const{error:a}=await X.from("external_tasks").insert({title:e.trim(),status:"Bekliyor",assigned_to:[t.id]});if(a)throw console.error("Quick task insert error detail:",a),a;console.log("Quick task created successfully!"),n(""),window.dispatchEvent(new CustomEvent("taskCreated"))}catch(a){console.error("Quick task catch error:",a),alert("Hata: "+(a.message||JSON.stringify(a)))}finally{s(!1)}}};return u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 transition-all hover:shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4 text-violet-600 dark:text-violet-400",children:[u.jsx(sm,{className:"w-5 h-5 fill-current"}),u.jsx("h3",{className:"font-bold",children:"Hzl Grev Ekle"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:e,onChange:o=>n(o.target.value),onKeyDown:i,disabled:r,placeholder:"Grev bal yaz ve Enter'a bas...",className:"w-full bg-slate-50 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-2xl py-3 pl-4 pr-12 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600"}),u.jsx("button",{onClick:i,disabled:r||!e.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-xl bg-violet-600 text-white hover:bg-violet-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-violet-200 dark:shadow-none",children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsx("p",{className:"mt-3 text-[10px] text-slate-400 dark:text-slate-500 font-medium italic",children:"* Bu grevler 'Harici Grevler' sekmesine kaydedilir."})]})}function Pne({isOpen:t,onClose:e,onCreate:n,initialData:r}){const[s,i]=y.useState({firstName:"",lastName:"",email:"",password:"",role:"Mhendis",team:"Teknik Ekip",address:"",iban:"",status:"Aktif",registrationDate:""}),o=!!r;if(y.useEffect(()=>{i(r?{firstName:r.name.split(" ")[0]||"",lastName:r.name.split(" ").slice(1).join(" ")||"",email:r.email||"",password:"",role:r.role||"Mhendis",team:r.team||"Teknik Ekip",address:r.address||"",iban:r.iban||"",status:r.status||"Aktif",registrationDate:r.registrationDate||""}:{firstName:"",lastName:"",email:"",password:"",role:"Mhendis",team:"Teknik Ekip",address:"",iban:"",status:"Aktif",registrationDate:""})},[r,t]),!t)return null;const a=l=>{l.preventDefault(),n({...s,name:`${s.firstName} ${s.lastName}`,registrationDate:s.registrationDate||Ve(new Date,"dd.MM.yyyy HH:mm")}),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh] border border-slate-200 dark:border-slate-800",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800 shrink-0",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o?"Kullanc Dzenle":"Yeni Kullanc Olutur"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:o?"Kullanc bilgilerini gncelleyin":"Kullanc bilgilerini girin"})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 dark:hover:bg-slate-800",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a,className:"p-6 space-y-4 overflow-y-auto",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Ad *"}),u.jsx("input",{required:!0,type:"text",placeholder:"Taner",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-950 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:s.firstName,onChange:l=>i({...s,firstName:l.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Soyad *"}),u.jsx("input",{required:!0,type:"text",placeholder:"Yldrm",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-950 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:s.lastName,onChange:l=>i({...s,lastName:l.target.value})})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"E-posta *"}),u.jsx("input",{required:!0,type:"email",placeholder:"taneryk2022@gmail.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-950 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:s.email,onChange:l=>i({...s,email:l.target.value})}),u.jsxs("div",{className:"flex items-start gap-2 text-xs text-blue-600 dark:text-blue-400 mt-1",children:[u.jsx(oQ,{className:"w-4 h-4 shrink-0"}),u.jsx("span",{children:"Trke karakterler otomatik olarak Latin karakterlere dntrlecektir (rn: ar  cagri)"})]})]}),!o&&u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"ifre *"}),u.jsx("input",{required:!0,type:"password",placeholder:"En az 6 karakter",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-950 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:s.password,onChange:l=>i({...s,password:l.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Rol *"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all bg-white dark:bg-slate-950 text-gray-900 dark:text-white",value:s.role,onChange:l=>i({...s,role:l.target.value}),children:[u.jsx("option",{value:"Ynetici",children:"Ynetici"}),u.jsx("option",{value:"Mhendis",children:"Mhendis"}),u.jsx("option",{value:"Muhasebe",children:"Muhasebe"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Ekip"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all bg-white dark:bg-slate-950 text-gray-900 dark:text-white",value:s.team,onChange:l=>i({...s,team:l.target.value}),children:[u.jsx("option",{value:"Teknik Ekip",children:"Teknik Ekip"}),u.jsx("option",{value:"Yazlm Ekibi",children:"Yazlm Ekibi"}),u.jsx("option",{value:"Pazarlama Ekibi",children:"Pazarlama Ekibi"}),u.jsx("option",{value:"Sat Ekibi",children:"Sat Ekibi"}),u.jsx("option",{value:"Ynetim",children:"Ynetim"}),u.jsx("option",{value:"Dier",children:"Dier"})]})]})]}),o&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Durum"}),u.jsxs("div",{className:"flex items-center gap-2 border border-gray-300 dark:border-slate-700 rounded-lg p-2 dark:bg-slate-950",children:[u.jsx("button",{type:"button",onClick:()=>i({...s,status:s.status==="Aktif"?"Pasif":"Aktif"}),className:ie("relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 cursor-pointer dark:ring-offset-slate-900",s.status==="Aktif"?"bg-black dark:bg-slate-700":"bg-gray-200 dark:bg-slate-700/50"),children:u.jsx("span",{className:ie("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",s.status==="Aktif"?"translate-x-6":"translate-x-1")})}),u.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.status})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Kayt Tarihi"}),u.jsx("input",{disabled:!0,type:"text",className:"w-full px-3 py-2 border border-gray-100 dark:border-slate-800 bg-gray-50 dark:bg-slate-800 rounded-lg text-gray-500 dark:text-slate-400 cursor-not-allowed",value:s.registrationDate||"21 Kasm 2025 07:49"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Adres"}),u.jsx("input",{type:"text",placeholder:"RAFET PAA MAHALLES...",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-950 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:s.address,onChange:l=>i({...s,address:l.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"IBAN"}),u.jsx("input",{type:"text",placeholder:"TR00 0000 0000 0000 0000 0000 00 (opsiyonel)",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-950 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:s.iban,onChange:l=>i({...s,iban:l.target.value})})]}),u.jsxs("div",{className:"pt-4 flex gap-3 justify-end border-t border-gray-100 dark:border-slate-800 mt-6 shrink-0",children:[u.jsx(re,{type:"button",variant:"secondary",onClick:e,className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-300",children:"ptal"}),u.jsx(re,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 shadow-blue-200 dark:shadow-blue-900/40 text-white",style:{backgroundColor:"#6366f1"},children:o?"Gncelle":"Olutur"})]})]})]})})}function Rn(t){this.content=t}Rn.prototype={constructor:Rn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),i=r.content.slice();return s==-1?i.push(n||t,e):(i[s+1]=e,n&&(i[s]=n)),new Rn(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Rn(n)},addToStart:function(t,e){return new Rn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Rn(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),i=r.find(t);return s.splice(i==-1?s.length:i,0,e,n),new Rn(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Rn.from(t),t.size?new Rn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Rn.from(t),t.size?new Rn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Rn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Rn.from=function(t){if(t instanceof Rn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Rn(e)};function C8(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),i=e.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=C8(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function S8(t,e,n,r){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=t.child(--s),a=e.child(--i),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=S8(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Q{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,i){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,s+a,i||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,s+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let i="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new Q(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let i=0,o=0;o<n;i++){let a=this.content[i],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),s+=a.nodeSize),o=l}return new Q(r,s)}cutByIndex(e,n){return e==n?Q.empty:e==0&&n==this.content.length?this:new Q(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new Q(s,i)}addToStart(e){return new Q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return C8(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return S8(this,e,n,r)}findIndex(e){if(e==0)return p0(0,e);if(e==this.size)return p0(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),i=r+s.nodeSize;if(i>=e)return i==e?p0(n+1,i):p0(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Q.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Q(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Q.empty;let n,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(n||(n=e.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new Q(n||e,r)}static from(e){if(!e)return Q.empty;if(e instanceof Q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Q.empty=new Q([],0);const rw={index:0,offset:0};function p0(t,e){return rw.index=t,rw.offset=e,rw}function _b(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!_b(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!_b(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let bt=class c2{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&_b(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return c2.none;if(e instanceof c2)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};bt.none=[];class Ab extends Error{}class ue{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=N8(this.content,e+this.openStart,n);return r&&new ue(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ue(T8(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ue.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ue(Q.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new ue(e,r,s)}}ue.empty=new ue(Q.empty,0,0);function T8(t,e,n){let{index:r,offset:s}=t.findIndex(e),i=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(s==e||i.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(T8(i.content,e-s-1,n-s-1)))}function N8(t,e,n,r){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=N8(o.content,e-i-1,n,o);return a&&t.replaceChild(s,o.copy(a))}function Dne(t,e,n){if(n.openStart>t.depth)throw new Ab("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ab("Inconsistent open depths");return _8(t,e,n,0)}function _8(t,e,n,r){let s=t.index(r),i=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let o=_8(t,e,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return hc(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Lne(n,t);return hc(i,j8(t,o,a,e,r))}else return hc(i,jb(t,e,r))}function A8(t,e){if(!e.type.compatibleContent(t.type))throw new Ab("Cannot join "+e.type.name+" onto "+t.type.name)}function u2(t,e,n){let r=t.node(n);return A8(r,e.node(n)),r}function dc(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function vf(t,e,n,r){let s=(e||t).node(n),i=0,o=e?e.index(n):s.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(dc(t.nodeAfter,r),i++));for(let a=i;a<o;a++)dc(s.child(a),r);e&&e.depth==n&&e.textOffset&&dc(e.nodeBefore,r)}function hc(t,e){return t.type.checkContent(e),t.copy(e)}function j8(t,e,n,r,s){let i=t.depth>s&&u2(t,e,s+1),o=r.depth>s&&u2(n,r,s+1),a=[];return vf(null,t,s,a),i&&o&&e.index(s)==n.index(s)?(A8(i,o),dc(hc(i,j8(t,e,n,r,s+1)),a)):(i&&dc(hc(i,jb(t,e,s+1)),a),vf(e,n,s,a),o&&dc(hc(o,jb(n,r,s+1)),a)),vf(r,null,s,a),new Q(a)}function jb(t,e,n){let r=[];if(vf(null,t,n,r),t.depth>n){let s=u2(t,e,n+1);dc(hc(s,jb(t,e,n+1)),r)}return vf(e,null,n,r),new Q(r)}function Lne(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)s=e.node(i).copy(Q.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class hp{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return bt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let a=r;r=s,s=a}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ob(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(i),c=i-l;if(r.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;i=c-1,s+=l+1}return new hp(n,r,i)}static resolveCached(e,n){let r=Hj.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else Hj.set(e,r=new Bne);let s=r.elts[r.i]=hp.resolve(e,n);return r.i=(r.i+1)%$ne,s}}class Bne{constructor(){this.elts=[],this.i=0}}const $ne=12,Hj=new WeakMap;class Ob{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Fne=Object.create(null);let Uo=class d2{constructor(e,n,r,s=bt.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||Q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&_b(this.attrs,n||e.defaultAttrs||Fne)&&bt.sameSet(this.marks,r||bt.none)}copy(e=null){return e==this.content?this:new d2(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new d2(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ue.empty;let s=this.resolve(e),i=this.resolve(n),o=r?0:s.sharedDepth(n),a=s.start(o),c=s.node(o).content.cut(s.pos-a,i.pos-a);return new ue(c,s.depth-o,i.depth-o)}replace(e,n,r){return Dne(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return hp.resolveCached(this,e)}resolveNoCache(e){return hp.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),O8(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Q.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=bt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!bt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=Q.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};Uo.prototype.text=void 0;class Ib extends Uo{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):O8(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ib(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ib(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function O8(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class _c{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Hne(e,n);if(r.next==null)return _c.empty;let s=I8(r);r.next&&r.err("Unexpected trailing text");let i=Yne(Gne(s));return Kne(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function i(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return Q.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:h}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&s.indexOf(h)==-1){s.push(h);let f=i(h,a.concat(d));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:l}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}_c.empty=new _c(!0);class Hne{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function I8(t){let e=[];do e.push(Une(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Une(t){let e=[];do e.push(zne(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function zne(t){let e=qne(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Vne(t,e);else break;return e}function Uj(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Vne(t,e){let n=Uj(t),r=n;return t.eat(",")&&(t.next!="}"?r=Uj(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Wne(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function qne(t){if(t.eat("(")){let e=I8(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Wne(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Gne(t){let e=[[]];return s(i(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=i(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),s(i(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return s(i(o.expr,a),l),s(i(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(i(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=n();s(i(o.expr,l),d),l=d}if(o.max==-1)s(i(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=n();r(l,d),s(i(o.expr,l),d),l=d}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function M8(t,e){return e-t}function zj(t,e){let n=[];return r(e),n.sort(M8);function r(s){let i=t[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:a,to:l}=i[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Yne(t){let e=Object.create(null);return n(zj(t,0));function n(r){let s=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<s.length;d++)s[d][0]==a&&(c=s[d][1]);zj(t,l).forEach(d=>{c||s.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let i=e[r.join(",")]=new _c(r.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(M8);i.next.push({type:s[o][0],next:e[a.join(",")]||n(a)})}return i}}function Kne(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function R8(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function P8(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let i=t[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function D8(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function L8(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Qne(t,r,e[r]);return n}let Vj=class B8{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=L8(e,r.attrs),this.defaultAttrs=R8(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==_c.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:P8(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Uo(this,this.computeAttrs(e),Q.from(n),bt.setFrom(r))}createChecked(e=null,n,r){return n=Q.from(n),this.checkContent(n),new Uo(this,this.computeAttrs(e),n,bt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Q.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(Q.empty,!0);return i?new Uo(this,e,n.append(i),bt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){D8(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:bt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,o)=>r[i]=new B8(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Jne(t,e,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class Qne{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Jne(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Dy{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=L8(e,s.attrs),this.excluded=null;let i=R8(this.attrs);this.instance=i?new bt(this,i):null}create(e=null){return!e&&this.instance?this.instance:new bt(this,P8(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new Dy(i,s++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){D8(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let $8=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=Rn.from(e.nodes),n.marks=Rn.from(e.marks||{}),this.nodes=Vj.compile(this.spec.nodes,this),this.marks=Dy.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=_c.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?Wj(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:Wj(this,o.split(" "))}this.nodeFromJSON=s=>Uo.fromJSON(this,s),this.markFromJSON=s=>bt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Vj){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new Ib(r,r.defaultAttrs,e,bt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function Wj(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],i=t.marks[s],o=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Xne(t){return t.tag!=null}function Zne(t){return t.style!=null}let ui=class h2{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(Xne(s))this.tags.push(s);else if(Zne(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new Gj(this,n,!1);return r.addAll(e,bt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Gj(this,n,!0);return r.addAll(e,bt.none,n.from,n.to),ue.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(nre(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<i)break}n.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=Yj(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=Yj(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new h2(e,h2.schemaRules(e)))}};const F8={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ere={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},H8={ol:!0,ul:!0},fp=1,f2=2,wf=4;function qj(t,e,n){return e!=null?(e?fp:0)|(e==="full"?f2:0):t&&t.whitespace=="pre"?fp|f2:n&~wf}class m0{constructor(e,n,r,s,i,o){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=bt.none,this.match=i||(o&wf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Q.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&fp)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=Q.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Q.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!F8.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Gj{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,i,o=qj(null,n.preserveWhitespace,0)|(r?wf:0);s?i=new m0(s.type,s.attrs,bt.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new m0(null,null,bt.none,!0,null,o):i=new m0(e.schema.topNodeType,null,bt.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,i=s.options&f2?"full":this.localPreserveWS||(s.options&fp)>0,{schema:o}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if(i==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=s.content[s.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;H8.hasOwnProperty(o)&&this.parser.normalizeLists&&tre(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:ere.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(F8.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let h=l&&l.skip?n:this.readStyles(e,n);h&&this.addAll(e,h),c&&this.sync(i),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(i,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,s){let i,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,n);this.findAtPoint(e,i)}findPlace(e,n,r){let s,i;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!s||s.length>c.length+a)&&(s=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)n=this.enterInner(s[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=bt.none;for(let a of s.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):Kj(a.type,e.type))&&(o=a.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,s){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,s)),i}enterInner(e,n,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=qj(e,i,o.options);o.options&wf&&o.content.length==0&&(a|=wf);let l=bt.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Kj(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new m0(e,n,l,s,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=fp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&s?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function tre(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&H8.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function nre(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Yj(t){let e={};for(let n in t)e[n]=t[n];return e}function Kj(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let i=[],o=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||i.indexOf(d)<0&&o(d))return!0}};if(o(s.contentMatch))return!0}}class us{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=sw(n).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,l=0;for(;a<i.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)s=i.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],d=this.serializeMark(c,o.isInline,n);d&&(i.push([c,s]),s.appendChild(d.dom),s=d.contentDOM||d.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=bg(sw(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&bg(sw(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return bg(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new us(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Jj(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Jj(e.marks)}}function Jj(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function sw(t){return t.document||window.document}const Qj=new WeakMap;function rre(t){let e=Qj.get(t);return e===void 0&&Qj.set(t,e=sre(t)),e}function sre(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function bg(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=rre(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let a,l=n?t.createElementNS(n,s):t.createElement(s),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let h in c)if(c[h]!=null){let f=h.indexOf(" ");f>0?l.setAttributeNS(h.slice(0,f),h.slice(f+1),c[h]):h=="style"&&l.style?l.style.cssText=c[h]:l.setAttribute(h,c[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=bg(t,f,n,r);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const U8=65535,z8=Math.pow(2,16);function ire(t,e){return t+e*z8}function Xj(t){return t&U8}function ore(t){return(t-(t&U8))/z8}const V8=1,W8=2,xg=4,q8=8;class p2{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&q8)>0}get deletedBefore(){return(this.delInfo&(V8|xg))>0}get deletedAfter(){return(this.delInfo&(W8|xg))>0}get deletedAcross(){return(this.delInfo&xg)>0}}class ns{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ns.empty)return ns.empty}recover(e){let n=0,r=Xj(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+ore(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+i],d=this.ranges[a+o],h=l+c;if(e<=h){let f=c?e==l?-1:e==h?1:n:n,p=l+s+(f<0?0:d);if(r)return p;let m=e==(n<0?l:h)?null:ire(a/3,e-l),g=e==l?W8:e==h?V8:xg;return(n<0?e!=l:e!=h)&&(g|=q8),new p2(p,g,m)}s+=d-c}return r?e+s:new p2(e+s,0,null)}touches(e,n){let r=0,s=Xj(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],d=l+c;if(e<=d&&a==s*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),l=o+(this.inverted?0:i),c=this.ranges[s+n],d=this.ranges[s+r];e(a,a+c,l,l+d),i+=d-c}}invert(){return new ns(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ns.empty:new ns(e<0?[0,-e,0]:[0,0,e])}}ns.empty=new ns([]);class jd{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new jd(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new jd;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new p2(e,s,null)}}const iw=Object.create(null);class sr{getMap(){return ns.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=iw[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in iw)throw new RangeError("Duplicate use of step JSON ID "+e);return iw[e]=n,n.prototype.jsonID=e,n}}class un{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new un(e,null)}static fail(e){return new un(null,e)}static fromReplace(e,n,r,s){try{return un.ok(e.replace(n,r,s))}catch(i){if(i instanceof Ab)return un.fail(i.message);throw i}}}function gT(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(gT(i.content,e,i))),i.isInline&&(i=e(i,n,s)),r.push(i)}return Q.fromArray(r)}class Ba extends sr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new ue(gT(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return un.fromReplace(e,this.from,this.to,i)}invert(){return new ri(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ba(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ba&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ba(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ba(n.from,n.to,e.markFromJSON(n.mark))}}sr.jsonID("addMark",Ba);class ri extends sr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ue(gT(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return un.fromReplace(e,this.from,this.to,r)}invert(){return new Ba(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ri(n.pos,r.pos,this.mark)}merge(e){return e instanceof ri&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ri(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ri(n.from,n.to,e.markFromJSON(n.mark))}}sr.jsonID("removeMark",ri);class $a extends sr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return un.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return un.fromReplace(e,this.pos,this.pos+1,new ue(Q.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new $a(this.pos,n.marks[s]);return new $a(this.pos,this.mark)}}return new Ac(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new $a(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new $a(n.pos,e.markFromJSON(n.mark))}}sr.jsonID("addNodeMark",$a);class Ac extends sr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return un.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return un.fromReplace(e,this.pos,this.pos+1,new ue(Q.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new $a(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ac(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ac(n.pos,e.markFromJSON(n.mark))}}sr.jsonID("removeNodeMark",Ac);class an extends sr{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&m2(e,this.from,this.to)?un.fail("Structure replace would overwrite content"):un.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ns([this.from,this.to-this.from,this.slice.size])}invert(e){return new an(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new an(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof an)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ue.empty:new ue(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new an(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ue.empty:new ue(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new an(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new an(n.from,n.to,ue.fromJSON(e,n.slice),!!n.structure)}}sr.jsonID("replace",an);class en extends sr{constructor(e,n,r,s,i,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(m2(e,this.from,this.gapFrom)||m2(e,this.gapTo,this.to)))return un.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return un.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?un.fromReplace(e,this.from,this.to,r):un.fail("Content does not fit in gap")}getMap(){return new ns([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new en(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new en(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new en(n.from,n.to,n.gapFrom,n.gapTo,ue.fromJSON(e,n.slice),n.insert,!!n.structure)}}sr.jsonID("replaceAround",en);function m2(t,e,n){let r=t.resolve(e),s=n-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function are(t,e,n,r){let s=[],i=[],o,a;t.doc.nodesBetween(e,n,(l,c,d)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&d.type.allowsMarkType(r.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,n),m=r.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(h[g])?o.to=p:s.push(o=new ri(f,p,h[g])));a&&a.to==f?a.to=p:i.push(a=new Ba(f,p,r))}}),s.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function lre(t,e,n,r){let s=[],i=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;i++;let l=null;if(r instanceof Dy){let c=o.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let d=0;d<l.length;d++){let h=l[d],f;for(let p=0;p<s.length;p++){let m=s[p];m.step==i-1&&h.eq(s[p].style)&&(f=m)}f?(f.to=c,f.step=i):s.push({style:h,from:Math.max(a,e),to:c,step:i})}}}),s.forEach(o=>t.step(new ri(o.from,o.to,o.style)))}function bT(t,e,n,r=n.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),d=a+c.nodeSize,h=r.matchType(c.type);if(!h)o.push(new an(a,d,ue.empty));else{r=h;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new ri(a,d,c.marks[f]));if(s&&c.isText&&n.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new ue(Q.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new an(a+f.index,a+f.index+f[0].length,m))}}a=d}if(!r.validEnd){let l=r.fillBefore(Q.empty,!0);t.replace(a,a,new ue(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function cre(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function oh(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,s=0,i=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+s,l=t.$to.indexAfter(r)-i;if(r<t.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!cre(o,a,l))break;a&&(s=1),l<o.childCount&&(i=1)}return null}function ure(t,e,n){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),a=s.after(i+1),l=o,c=a,d=Q.empty,h=0;for(let m=i,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,d=Q.from(r.node(m).copy(d)),h++):l--;let f=Q.empty,p=0;for(let m=i,g=!1;m>n;m--)g||s.after(m+1)<s.end(m)?(g=!0,f=Q.from(s.node(m).copy(f)),p++):c++;t.step(new en(l,c,o,a,new ue(d.append(f),h,p),d.size-h,!0))}function G8(t,e,n=null,r=t){let s=dre(t,e),i=s&&hre(r,e);return i?s.map(Zj).concat({type:e,attrs:n}).concat(i.map(Zj)):null}function Zj(t){return{type:t,attrs:null}}function dre(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return n.canReplaceWith(r,s,o)?i:null}function hre(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function fre(t,e,n){let r=Q.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Q.from(n[o].type.create(n[o].attrs,r))}let s=e.start,i=e.end;t.step(new en(s,i,s,i,new ue(r,0,0),n.length,!0))}function pre(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,l)&&mre(t.doc,t.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&K8(t,o,a,i),bT(t,t.mapping.slice(i).map(a,1),r,void 0,c===null);let d=t.mapping.slice(i),h=d.map(a,1),f=d.map(a+o.nodeSize,1);return t.step(new en(h,f,h+1,f-1,new ue(Q.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&Y8(t,o,a,i),!1}})}function Y8(t,e,n,r){e.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=t.mapping.slice(r).map(n+1+i+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function K8(t,e,n,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function mre(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function gre(t,e,n,r,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new en(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new ue(Q.from(o),0,0),1,!0))}function zo(t,e,n=1,r){let s=t.resolve(e),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,d=n-2;c>i;c--,d--){let h=s.node(c),f=s.index(c);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),m=r&&r[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let a=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function bre(t,e,n=1,r){let s=t.doc.resolve(e),i=Q.empty,o=Q.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){i=Q.from(s.node(a).copy(i));let d=r&&r[c];o=Q.from(d?d.type.create(d.attrs,o):s.node(a).copy(o))}t.step(new an(e,e,new ue(i.append(o),n,n),!0))}function Kc(t,e){let n=t.resolve(e),r=n.index();return J8(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function xre(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function J8(t,e){return!!(t&&e&&!t.isLeaf&&xre(t,e))}function Ly(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let i,o,a=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(s+1),a++,o=r.node(s).maybeChild(a)):(i=r.node(s).maybeChild(a-1),o=r.node(s+1)),i&&!i.isTextblock&&J8(i,o)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function yre(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-n),o=i.node().type;if(s&&o.inlineContent){let d=o.whitespace=="pre",h=!!o.contentMatch.matchType(s);d&&!h?r=!1:!d&&h&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);K8(t,d.node(),d.before(),a)}o.inlineContent&&bT(t,e+n-1,o,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new an(c,l.map(e+n,-1),ue.empty,!0)),r===!0){let d=t.doc.resolve(c);Y8(t,d.node(),d.before(),t.steps.length)}return t}function vre(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function Q8(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),d=!1;if(i==1)d=c.canReplace(l,l,s);else{let h=c.contentMatchAt(l).findWrapping(s.firstChild.type);d=h&&c.canReplaceWith(l,l,h[0])}if(d)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function By(t,e,n=e,r=ue.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),i=t.resolve(n);return X8(s,i,r)?new an(e,n,r):new wre(s,i,r).fit()}function X8(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class wre{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Q.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Q.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let l=new ue(i,o,a);return e>-1?new en(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new an(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=ow(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,h=null;if(n==1&&(o?c.matchType(o.type)||(h=c.fillBefore(Q.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:h};if(n==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:d};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=ow(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new ue(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=ow(e,n);if(s.childCount<=1&&n>0){let i=e.size-n<=n+s.size;this.unplaced=new ue(sf(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new ue(sf(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let g=0;g<i.length;g++)this.openFrontierNode(i[g]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,d=[],{match:h,type:f}=this.frontier[n];if(s){for(let g=0;g<s.childCount;g++)d.push(s.child(g));h=h.matchFragment(s)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),x=h.matchType(g.type);if(!x)break;c++,(c>1||l==0||g.content.size)&&(h=x,d.push(Z8(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=of(this.placed,n,Q.from(d)),this.frontier[n].match=h,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,x=a;g<p;g++){let b=x.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),x=b.content}this.unplaced=m?e==0?ue.empty:new ue(sf(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new ue(sf(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!aw(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=aw(e,n,s,r,i);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=aw(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:o,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=of(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=of(this.placed,this.depth,Q.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Q.empty,!0);n.childCount&&(this.placed=of(this.placed,this.frontier.length,n))}}function sf(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(sf(t.firstChild.content,e-1,n)))}function of(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(of(t.lastChild.content,e-1,n)))}function ow(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Z8(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Z8(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Q.empty,!0)))),t.copy(r)}function aw(t,e,n,r,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!kre(n,i.content,o)?a:null}function kre(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Ere(t){return t.spec.defining||t.spec.definingForContent}function Cre(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),i=t.doc.resolve(n);if(X8(s,i,r))return t.step(new an(e,n,r));let o=t9(s,i);o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let f=s.depth,p=s.pos-1;f>0;f--,p--){let m=s.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:s.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],d=r.openStart;for(let f=r.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==r.openStart)break;f=m.content}for(let f=d-1;f>=0;f--){let p=c[f],m=Ere(p.type);if(m&&!p.sameMarkup(s.node(Math.abs(a)-1)))d=f;else if(m||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+d+1)%(r.openStart+1),m=c[p];if(m)for(let g=0;g<o.length;g++){let x=o[(g+l)%o.length],b=!0;x<0&&(b=!1,x=-x);let v=s.node(x-1),w=s.index(x-1);if(v.canReplaceWith(w,w,m.type,m.marks))return t.replace(s.before(x),b?i.after(x):n,new ue(e9(r.content,0,r.openStart,p),p,r.openEnd))}}let h=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>h));f--){let p=o[f];p<0||(e=s.before(p),n=i.after(p))}}function e9(t,e,n,r,s){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(e9(i.content,e+1,n,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(Q.empty,!0))}return t}function Sre(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=vre(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new ue(Q.from(r),0,0))}function Tre(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),i=t9(r,s);for(let o=0;o<i.length;o++){let a=i[o],l=o==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return t.delete(r.before(a),s.after(a))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function t9(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&n.push(s)}return n}class od extends sr{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return un.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return un.fromReplace(e,this.pos,this.pos+1,new ue(Q.from(s),0,n.isLeaf?0:1))}getMap(){return ns.empty}invert(e){return new od(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new od(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new od(n.pos,n.attr,n.value)}}sr.jsonID("attr",od);class pp extends sr{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return un.ok(r)}getMap(){return ns.empty}invert(e){return new pp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new pp(n.attr,n.value)}}sr.jsonID("docAttr",pp);let Od=class extends Error{};Od=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Od.prototype=Object.create(Error.prototype);Od.prototype.constructor=Od;Od.prototype.name="TransformError";class xT{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new jd}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Od(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ue.empty){let s=By(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new ue(Q.from(r),0,0))}delete(e,n){return this.replace(e,n,ue.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Cre(this,e,n,r),this}replaceRangeWith(e,n,r){return Sre(this,e,n,r),this}deleteRange(e,n){return Tre(this,e,n),this}lift(e,n){return ure(this,e,n),this}join(e,n=1){return yre(this,e,n),this}wrap(e,n){return fre(this,e,n),this}setBlockType(e,n=e,r,s=null){return pre(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return gre(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new od(e,n,r)),this}setDocAttribute(e,n){return this.step(new pp(e,n)),this}addNodeMark(e,n){return this.step(new $a(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof bt)n.isInSet(r.marks)&&this.step(new Ac(e,n));else{let s=r.marks,i,o=[];for(;i=n.isInSet(s);)o.push(new Ac(e,i)),s=i.removeFromSet(s);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return bre(this,e,n,r),this}addMark(e,n,r){return are(this,e,n,r),this}removeMark(e,n,r){return lre(this,e,n,r),this}clearIncompatible(e,n,r){return bT(this,e,n,r),this}}const lw=Object.create(null);class Ne{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new n9(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ue.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(i);e.replaceRange(d.map(l.pos),d.map(c.pos),a?ue.empty:n),a==0&&n4(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],l=e.mapping.slice(r),c=l.map(o.pos),d=l.map(a.pos);i?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),n4(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new xe(e):Nu(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=n<0?Nu(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):Nu(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Fr(e.node(0))}static atStart(e){return Nu(e,e,0,0,1)||new Fr(e)}static atEnd(e){return Nu(e,e,e.content.size,e.childCount,-1)||new Fr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=lw[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in lw)throw new RangeError("Duplicate use of selection JSON ID "+e);return lw[e]=n,n.prototype.jsonID=e,n}getBookmark(){return xe.between(this.$anchor,this.$head).getBookmark()}}Ne.prototype.visible=!0;class n9{constructor(e,n){this.$from=e,this.$to=n}}let e4=!1;function t4(t){!e4&&!t.parent.inlineContent&&(e4=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class xe extends Ne{constructor(e,n=e){t4(e),t4(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ne.near(r);let s=e.resolve(n.map(this.anchor));return new xe(s.parent.inlineContent?s:r,r)}replace(e,n=ue.empty){if(super.replace(e,n),n==ue.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof xe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new $y(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new xe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=Ne.findFrom(n,r,!0)||Ne.findFrom(n,-r,!0);if(i)n=i.$head;else return Ne.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(Ne.findFrom(e,-r,!0)||Ne.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new xe(e,n)}}Ne.jsonID("text",xe);class $y{constructor(e,n){this.anchor=e,this.head=n}map(e){return new $y(e.map(this.anchor),e.map(this.head))}resolve(e){return xe.between(e.resolve(this.anchor),e.resolve(this.head))}}class ve extends Ne{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=e.resolve(s);return r?Ne.near(i):new ve(i)}content(){return new ue(Q.from(this.node),0,0)}eq(e){return e instanceof ve&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new yT(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ve(e.resolve(n.anchor))}static create(e,n){return new ve(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ve.prototype.visible=!1;Ne.jsonID("node",ve);class yT{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new $y(r,r):new yT(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ve.isSelectable(r)?new ve(n):Ne.near(n)}}class Fr extends Ne{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ue.empty){if(n==ue.empty){e.delete(0,e.doc.content.size);let r=Ne.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Fr(e)}map(e){return new Fr(e)}eq(e){return e instanceof Fr}getBookmark(){return Nre}}Ne.jsonID("all",Fr);const Nre={map(){return this},resolve(t){return new Fr(t)}};function Nu(t,e,n,r,s,i=!1){if(e.inlineContent)return xe.create(t,n);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&ve.isSelectable(a))return ve.create(t,n-(s<0?a.nodeSize:0))}else{let l=Nu(t,a,n+s,s<0?a.childCount:0,s,i);if(l)return l}n+=a.nodeSize*s}return null}function n4(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof an||s instanceof en))return;let i=t.mapping.maps[r],o;i.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(Ne.near(t.doc.resolve(o),n))}const r4=1,g0=2,s4=4;let _re=class extends xT{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|r4)&~g0,this.storedMarks=null,this}get selectionSet(){return(this.updated&r4)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=g0,this}ensureMarks(e){return bt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&g0)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~g0,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||bt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,i)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Ne.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=s4,this}get scrolledIntoView(){return(this.updated&s4)>0}};function i4(t,e){return!e||!t?t:t.bind(e)}class af{constructor(e,n,r){this.name=e,this.init=i4(n.init,r),this.apply=i4(n.apply,r)}}const Are=[new af("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new af("selection",{init(t,e){return t.selection||Ne.atStart(e.doc)},apply(t){return t.selection}}),new af("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new af("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class cw{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Are.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new af(r.key,r.spec.state,r))})}}class qu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,c=s?s[o].state:this,d=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(d&&r.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!s){s=[];for(let h=0;h<this.config.plugins.length;h++)s.push(h<o?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new qu(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new _re(this)}static create(e){let n=new cw(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new qu(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new cw(this.schema,e.plugins),r=n.fields,s=new qu(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new cw(e.schema,e.plugins),i=new qu(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=Uo.fromJSON(e.schema,n.doc);else if(o.name=="selection")i.selection=Ne.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[o.name]=c.fromJSON.call(l,e,n[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function r9(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=r9(s,e,{})),n[r]=s}return n}class Ie{constructor(e){this.spec=e,this.props={},e.props&&r9(e.props,this,this.props),this.key=e.key?e.key.key:s9("plugin")}getState(e){return e[this.key]}}const uw=Object.create(null);function s9(t){return t in uw?t+"$"+ ++uw[t]:(uw[t]=0,t+"$")}class We{constructor(e="key"){this.key=s9(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const vT=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function i9(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const o9=(t,e,n)=>{let r=i9(t,n);if(!r)return!1;let s=wT(r);if(!s){let o=r.blockRange(),a=o&&oh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(m9(t,s,e,-1))return!0;if(r.parent.content.size==0&&(Id(i,"end")||ve.isSelectable(i)))for(let o=r.depth;;o--){let a=By(t.doc,r.before(o),r.after(o),ue.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Id(i,"end")?Ne.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):ve.create(l.doc,s.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},jre=(t,e,n)=>{let r=i9(t,n);if(!r)return!1;let s=wT(r);return s?a9(t,s,e):!1},Ore=(t,e,n)=>{let r=c9(t,n);if(!r)return!1;let s=kT(r);return s?a9(t,s,e):!1};function a9(t,e,n){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let d=s.lastChild;if(!d)return!1;s=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=By(t.doc,i,l,ue.empty);if(!c||c.from!=i||c instanceof an&&c.slice.size>=l-i)return!1;if(n){let d=t.tr.step(c);d.setSelection(xe.create(d.doc,i)),n(d.scrollIntoView())}return!0}function Id(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const l9=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=wT(r)}let o=i&&i.nodeBefore;return!o||!ve.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ve.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function wT(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function c9(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const u9=(t,e,n)=>{let r=c9(t,n);if(!r)return!1;let s=kT(r);if(!s)return!1;let i=s.nodeAfter;if(m9(t,s,e,1))return!0;if(r.parent.content.size==0&&(Id(i,"start")||ve.isSelectable(i))){let o=By(t.doc,r.before(),r.after(),ue.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Id(i,"start")?Ne.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):ve.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},d9=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=kT(r)}let o=i&&i.nodeAfter;return!o||!ve.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ve.create(t.doc,i.pos)).scrollIntoView()),!0)};function kT(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Ire=(t,e)=>{let n=t.selection,r=n instanceof ve,s;if(r){if(n.node.isTextblock||!Kc(t.doc,n.from))return!1;s=n.from}else if(s=Ly(t.doc,n.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);r&&i.setSelection(ve.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},Mre=(t,e)=>{let n=t.selection,r;if(n instanceof ve){if(n.node.isTextblock||!Kc(t.doc,n.to))return!1;r=n.to}else if(r=Ly(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Rre=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),i=s&&oh(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},h9=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function ET(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Pre=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=ET(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Ne.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},f9=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof Fr||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=ET(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=t.tr.insert(o,i.createAndFill());a.setSelection(xe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},p9=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(zo(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&oh(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function Dre(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof ve&&e.selection.node.isBlock)return!r.parentOffset||!zo(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],o,a,l=!1,c=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){l=r.end(p)==r.pos+(r.depth-p),c=r.start(p)==r.pos-(r.depth-p),a=ET(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),i.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;i.unshift(null)}let d=e.tr;(e.selection instanceof xe||e.selection instanceof Fr)&&d.deleteSelection();let h=d.mapping.map(r.pos),f=zo(d.doc,h,i.length,i);if(f||(i[0]=a?{type:a}:null,f=zo(d.doc,h,i.length,i)),!f)return!1;if(d.split(h,i.length,i),!l&&c&&r.node(o).type!=a){let p=d.mapping.map(r.before(o)),m=d.doc.resolve(p);a&&r.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&d.setNodeMarkup(d.mapping.map(r.before(o)),a)}return n&&n(d.scrollIntoView()),!0}}const Lre=Dre(),Bre=(t,e)=>{let{$from:n,to:r}=t.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),e&&e(t.tr.setSelection(ve.create(t.doc,s))),!0)};function $re(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||Kc(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function m9(t,e,n,r){let s=e.nodeBefore,i=e.nodeAfter,o,a,l=s.type.spec.isolating||i.type.spec.isolating;if(!l&&$re(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(n){let p=e.pos+i.nodeSize,m=Q.empty;for(let b=o.length-1;b>=0;b--)m=Q.from(o[b].create(null,m));m=Q.from(s.copy(m));let g=t.tr.step(new en(e.pos-1,p,e.pos,p,new ue(m,1,0),o.length,!0)),x=g.doc.resolve(p+2*o.length);x.nodeAfter&&x.nodeAfter.type==s.type&&Kc(g.doc,x.pos)&&g.join(x.pos),n(g.scrollIntoView())}return!0}let d=i.type.spec.isolating||r>0&&l?null:Ne.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&oh(h);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(h,f).scrollIntoView()),!0;if(c&&Id(i,"start",!0)&&Id(s,"end")){let p=s,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=i,x=1;for(;!g.isTextblock;g=g.firstChild)x++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(n){let b=Q.empty;for(let w=m.length-1;w>=0;w--)b=Q.from(m[w].copy(b));let v=t.tr.step(new en(e.pos-m.length,e.pos+i.nodeSize,e.pos+x,e.pos+i.nodeSize-x,new ue(b,m.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function g9(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(e.tr.setSelection(xe.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const Fre=g9(-1),Hre=g9(1);function Ure(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),a=o&&G8(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function o4(t,e=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(o,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let d=n.doc.resolve(c),h=d.index();s=d.parent.canReplaceWith(h,h+1,t)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}function CT(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}CT(vT,o9,l9);CT(vT,u9,d9);CT(h9,f9,p9,Lre);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function zre(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i);if(!o)return!1;let a=r?n.tr:null;return Vre(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function Vre(t,e,n,r=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);i=new Ob(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Ob(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=G8(i,n,r,e);return a?(t&&Wre(t,e,a,s,n),!0):!1}function Wre(t,e,n,r,s){let i=Q.empty;for(let d=n.length-1;d>=0;d--)i=Q.from(n[d].type.create(n[d].attrs,i));t.step(new en(e.start-(r?2:0),e.end,e.start,e.end,new ue(i,0,0),n.length,!0));let o=0;for(let d=0;d<n.length;d++)n[d].type==s&&(o=d+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&zo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function qre(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?Gre(e,n,t,i):Yre(e,n,i):!0:!1}}function Gre(t,e,n,r){let s=t.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new en(i-1,o,i,o,new ue(Q.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ob(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const a=oh(r);if(a==null)return!1;s.lift(r,a);let l=s.doc.resolve(s.mapping.map(i,-1)-1);return Kc(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),e(s.scrollIntoView()),!0}function Yre(t,e,n){let r=t.tr,s=n.parent;for(let p=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)p-=s.child(m).nodeSize,r.delete(p-1,p+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==s.childCount,c=i.node(-1),d=i.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?Q.empty:Q.from(s))))return!1;let h=i.pos,f=h+o.nodeSize;return r.step(new en(h-(a?1:0),f+(l?1:0),h+1,f-1,new ue((a?Q.empty:Q.from(s.copy(Q.empty))).append(l?Q.empty:Q.from(s.copy(Q.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Kre(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,d=Q.from(c?t.create():null),h=new ue(Q.from(t.create(null,Q.from(a.type.create(null,d)))),c?3:1,0),f=i.start,p=i.end;n(e.tr.step(new en(f-(c?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const Pn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Md=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let g2=null;const Io=function(t,e,n){let r=g2||(g2=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Jre=function(){g2=null},jc=function(t,e,n,r){return n&&(a4(t,e,n,r,-1)||a4(t,e,n,r,1))},Qre=/^(img|br|input|textarea|hr)$/i;function a4(t,e,n,r,s){for(var i;;){if(t==n&&e==r)return!0;if(e==(s<0?0:As(t))){let o=t.parentNode;if(!o||o.nodeType!=1||om(t)||Qre.test(t.nodeName)||t.contentEditable=="false")return!1;e=Pn(t)+(s<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=o,e=s<0?As(t):0}else return!1}}function As(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Xre(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=As(t)}else if(t.parentNode&&!om(t))e=Pn(t),t=t.parentNode;else return null}}function Zre(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!om(t))e=Pn(t)+1,t=t.parentNode;else return null}}function ese(t,e,n){for(let r=e==0,s=e==As(t);r||s;){if(t==n)return!0;let i=Pn(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,s=s&&i==As(t)}}function om(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Fy=function(t){return t.focusNode&&jc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Xl(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function tse(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function nse(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(As(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(As(r.startContainer),r.startOffset)}}}const oo=typeof navigator<"u"?navigator:null,l4=typeof document<"u"?document:null,Tl=oo&&oo.userAgent||"",b2=/Edge\/(\d+)/.exec(Tl),b9=/MSIE \d/.exec(Tl),x2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Tl),Hr=!!(b9||x2||b2),tl=b9?document.documentMode:x2?+x2[1]:b2?+b2[1]:0,Rs=!Hr&&/gecko\/(\d+)/i.test(Tl);Rs&&+(/Firefox\/(\d+)/.exec(Tl)||[0,0])[1];const y2=!Hr&&/Chrome\/(\d+)/.exec(Tl),kn=!!y2,x9=y2?+y2[1]:0,nr=!Hr&&!!oo&&/Apple Computer/.test(oo.vendor),Rd=nr&&(/Mobile\/\w+/.test(Tl)||!!oo&&oo.maxTouchPoints>2),Es=Rd||(oo?/Mac/.test(oo.platform):!1),y9=oo?/Win/.test(oo.platform):!1,Lo=/Android \d/.test(Tl),am=!!l4&&"webkitFontSmoothing"in l4.documentElement.style,rse=am?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function sse(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Co(t,e){return typeof t=="number"?t:t[e]}function ise(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function c4(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Md(o);continue}let a=o,l=a==i.body,c=l?sse(i):ise(a),d=0,h=0;if(e.top<c.top+Co(r,"top")?h=-(c.top-e.top+Co(s,"top")):e.bottom>c.bottom-Co(r,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Co(s,"top")-c.top:e.bottom-c.bottom+Co(s,"bottom")),e.left<c.left+Co(r,"left")?d=-(c.left-e.left+Co(s,"left")):e.right>c.right-Co(r,"right")&&(d=e.right-c.right+Co(s,"right")),d||h)if(l)i.defaultView.scrollBy(d,h);else{let p=a.scrollLeft,m=a.scrollTop;h&&(a.scrollTop+=h),d&&(a.scrollLeft+=d);let g=a.scrollLeft-p,x=a.scrollTop-m;e={left:e.left-g,top:e.top-x,right:e.right-g,bottom:e.bottom-x}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:Md(o)}}function ose(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(i,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:v9(t.dom)}}function v9(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Md(r));return e}function ase({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;w9(n,r==0?0:r-e)}function w9(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:i}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let pu=null;function lse(t){if(t.setActive)return t.setActive();if(pu)return t.focus(pu);let e=v9(t);t.focus(pu==null?{get preventScroll(){return pu={preventScroll:!0},!0}}:void 0),pu||(pu=!1,w9(e,0))}function k9(t,e){let n,r=2e8,s,i=0,o=e.top,a=e.top,l,c;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=Io(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=d,r=g,s=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(i=h+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=h+1)}}return!n&&l&&(n=l,s=c,r=0),n&&n.nodeType==3?cse(n,s):!n||r&&n.nodeType==1?{node:t,offset:i}:k9(n,s)}function cse(t,e){let n=t.nodeValue.length,r=document.createRange(),s;for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=ya(r,1);if(o.top!=o.bottom&&ST(e,o)){s={node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),s||{node:t,offset:0}}function ST(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function use(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function dse(t,e,n){let{node:r,offset:s}=k9(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,s,i)}function hse(t,e,n,r){let s=-1;for(let i=e,o=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?s=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function E9(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(ST(e,c))return E9(o,e,c)}}if((i=(i+1)%r)==s)break}return t}function fse(t,e){let n=t.dom.ownerDocument,r,s=0,i=nse(n,e.left,e.top);i&&({node:r,offset:s}=i);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!ST(e,c)||(o=E9(t.dom,e,c),!o))return null}if(nr)for(let c=o;r&&c;c=Md(c))c.draggable&&(r=void 0);if(o=use(o,e),r){if(Rs&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let d=r.childNodes[s],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&s++}let c;am&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=hse(t,r,s,e))}a==null&&(a=dse(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function u4(t){return t.top<t.bottom||t.left<t.right}function ya(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(u4(r))return r}return Array.prototype.find.call(n,u4)||t.getBoundingClientRect()}const pse=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function C9(t,e,n){let{node:r,offset:s,atom:i}=t.docView.domFromPos(e,n<0?-1:1),o=am||Rs;if(r.nodeType==3)if(o&&(pse.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=ya(Io(r,s,s),n);if(Rs&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=ya(Io(r,s-1,s-1),-1);if(c.top==l.top){let d=ya(Io(r,s,s+1),-1);if(d.top!=l.top)return $h(d,d.left<c.left)}}return l}else{let l=s,c=s,d=n<0?1:-1;return n<0&&!s?(c++,d=-1):n>=0&&s==r.nodeValue.length?(l--,d=1):n<0?l--:c++,$h(ya(Io(r,l,c),d),d<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==As(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return dw(l.getBoundingClientRect(),!1)}if(i==null&&s<As(r)){let l=r.childNodes[s];if(l.nodeType==1)return dw(l.getBoundingClientRect(),!0)}return dw(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==As(r))){let l=r.childNodes[s-1],c=l.nodeType==3?Io(l,As(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return $h(ya(c,1),!1)}if(i==null&&s<As(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Io(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return $h(ya(c,-1),!0)}return $h(ya(r.nodeType==3?Io(r):r,-n),n>=0)}function $h(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function dw(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function S9(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function mse(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return S9(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=C9(t,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Io(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(n=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const gse=/[\u0590-\u08ac]/;function bse(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=t.domSelection();return a?!gse.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:o:S9(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:h}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),x=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(d,h),l&&(l!=d||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),x}):r.pos==r.start()||r.pos==r.end()}let d4=null,h4=null,f4=!1;function xse(t,e,n){return d4==e&&h4==n?f4:(d4=e,h4=n,f4=n=="up"||n=="down"?mse(t,e,n):bse(t,e,n))}const Ps=0,p4=1,sc=2,ao=3;class lm{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Ps,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>Pn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(a>e||o instanceof N9){s=e-i;break}i=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof T9&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Pn(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Pn(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(s==-1&&e<=c){let d=o+l.border;if(e>=d&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=Pn(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(c>n||a==this.children.length-1)){n=c;for(let d=a+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){i=Pn(h.dom);break}n+=h.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let i=Math.min(e,n),o=Math.max(e,n);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],x=m+g.size;if(i>m&&o<x)return g.setSelection(e-m-g.border,n-m-g.border,r,s);m=x}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),h=!1;if((Rs||nr)&&e==n){let{node:p,offset:m}=a;if(p.nodeType==3){if(h=!!(m&&p.nodeValue[m-1]==`
`),h&&m==p.nodeValue.length)for(let g=p,x;g;g=g.parentNode){if(x=g.nextSibling){x.nodeName=="BR"&&(a=l={node:x.parentNode,offset:Pn(x)+1});break}let b=g.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let g=p.childNodes[m-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Rs&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||h&&nr)&&jc(a.node,a.offset,d.anchorNode,d.anchorOffset)&&jc(l.node,l.offset,d.focusNode,d.focusOffset))return;let f=!1;if((c.extend||e==n)&&!(h&&Rs)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+i.border,l=o-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?sc:p4,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=ao:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?sc:ao}r=o}this.dirty=sc}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?sc:p4;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class T9 extends lm{constructor(e,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==Ps&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class yse extends lm{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Oc extends lm{constructor(e,n,r,s,i){super(e,[],r,s),this.mark=n,this.spec=i}static create(e,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=us.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Oc(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ao||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ao&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ps){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ps}}slice(e,n,r){let s=Oc.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=w2(i,n,o,r)),e>0&&(i=w2(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class nl extends lm{constructor(e,n,r,s,i,o,a,l,c){super(e,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,n,r,s,i,o){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,s),d=c&&c.dom,h=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=us.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!h&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let f=d;return d=j9(d,r,n),c?l=new vse(e,n,r,s,d,h||null,f,c,i,o+1):n.isText?new Hy(e,n,r,s,d,f,i):new nl(e,n,r,s,d,h||null,f,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Q.empty)}return e}matchesNode(e,n,r){return this.dirty==Ps&&e.eq(this.node)&&Mb(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,i=e.composing?this.localCompositionInfo(e,n):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new kse(this,o&&o.node,e);Sse(this.node,this.innerDeco,(c,d,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!h&&l.syncToMarks(d==this.node.childCount?bt.none:this.node.child(d).marks,r,e),l.placeWidget(c,e,s)},(c,d,h,f)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,d,h,f)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(p=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,d,h,p,e)||l.updateNextNode(c,d,h,e,f,s)||l.addNode(c,d,h,e,s),s+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==sc)&&(o&&this.protectLocalComposition(e,o),_9(this.contentDOM,this.children,e),Rd&&Tse(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof xe)||r<n||s>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=Nse(this.node.content,o,r-n,s-n);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new yse(this,i,n,s);e.input.compositionNodes.push(o),this.children=w2(this.children,r,r+s.length,e,o)}update(e,n,r,s){return this.dirty==ao||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Ps}updateOuterDeco(e){if(Mb(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=A9(this.dom,this.nodeDOM,v2(this.outerDeco,this.node,n),v2(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function m4(t,e,n,r,s){j9(r,e,t);let i=new nl(void 0,t,e,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class Hy extends nl{constructor(e,n,r,s,i,o,a){super(e,n,r,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==ao||this.dirty!=Ps&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ps||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Ps,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),i=document.createTextNode(s.text);return new Hy(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ao)}get domAtom(){return!1}isText(e){return this.node.text==e}}class N9 extends lm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ps&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class vse extends nl{constructor(e,n,r,s,i,o,a,l,c,d){super(e,n,r,s,i,o,a,c,d),this.spec=l}update(e,n,r,s){if(this.dirty==ao)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _9(t,e,n){let r=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=g4(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(a,r);if(o instanceof Oc){let l=r?r.previousSibling:t.lastChild;_9(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=g4(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const kf=function(t){t&&(this.nodeName=t)};kf.prototype=Object.create(null);const ic=[new kf];function v2(t,e,n){if(t.length==0)return ic;let r=n?ic[0]:new kf,s=[r];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(r=new kf(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&s.length==1&&s.push(r=new kf(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function A9(t,e,n,r){if(n==ic&&r==ic)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],a=n[i];if(i){let l;a&&a.nodeName==o.nodeName&&s!=t&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=ic[0]),s=l}wse(s,a||ic[0],o)}return s}function wse(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function j9(t,e,n){return A9(t,t,ic,v2(e,n,t.nodeType!=1))}function Mb(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function g4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class kse{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Ese(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=Ps,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Oc.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,s,i){let o=this.top.children[s];return o.dirty==ao&&o.dom==o.contentDOM&&(o.dirty=sc),o.update(e,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof nl){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let d=l.dom,h,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=ao&&Mb(n,l.outerDeco));if(!f&&l.update(e,n,r,s))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(l,e,n,r,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=sc,h.updateChildren(s,o+1),h.dirty=Ps),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,i,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Mb(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=nl.create(this.top,n,r,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,s,i){let o=nl.create(this.top,e,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new T9(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Oc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Hy)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((nr||kn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new N9(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Ese(t,e){let n=e,r=n.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Oc)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function Cse(t,e){return t.type.side-e.type.side}function Sse(t,e,n,r){let s=e.locals(t),i=0;if(s.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,s,e.forChild(i,d),c),i+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let d,h;for(;o<s.length&&s[o].to==i;){let x=s[o++];x.widget&&(d?(h||(h=[d])).push(x):d=x)}if(d)if(h){h.sort(Cse);for(let x=0;x<h.length;x++)n(h[x],c,!!l)}else n(d,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let x=0;x<a.length;x++)a[x].to<=i&&a.splice(x--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let m=i+f.nodeSize;if(f.isText){let x=m;o<s.length&&s[o].from<x&&(x=s[o].from);for(let b=0;b<a.length;b++)a[b].to<x&&(x=a[b].to);x<m&&(l=f.cut(x-i),f=f.cut(0,x-i),m=x,p=-1)}else for(;o<s.length&&s[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(x=>!x.inline):a.slice();r(f,g,e.forChild(i,f),p),i=m}}function Tse(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Nse(t,e,n,r){for(let s=0,i=0;s<t.childCount&&i<=r;){let o=t.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<t.childCount;){let c=t.child(s++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function w2(t,e,n,r,s){let i=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,d=a+=l.size;c>=n||d<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),s&&(i.push(s),s=void 0),d>n&&i.push(l.slice(n-c,l.size,r)))}return i}function TT(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Fy(n)){for(l=o;s&&!s.node;)s=s.parent;let h=s.node;if(s&&h.isAtom&&ve.isSelectable(h)&&s.parent&&!(h.isInline&&ese(n.focusNode,n.focusOffset,s.dom))){let f=s.posBefore;c=new ve(o==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let h=o,f=o;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);h=Math.min(h,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[l,o]=f==t.state.selection.anchor?[f,h]:[h,f],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!c){let h=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;c=NT(t,d,a,h)}return c}function O9(t){return t.editable?t.hasFocus():M9(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Vo(t,e=!1){let n=t.state.selection;if(I9(t,n),!!O9(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&kn){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&jc(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Ase(t);else{let{anchor:r,head:s}=n,i,o;b4&&!(n instanceof xe)&&(n.$from.parent.inlineContent||(i=x4(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=x4(t,n.to))),t.docView.setSelection(r,s,t,e),b4&&(i&&y4(i),o&&y4(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&_se(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const b4=nr||kn&&x9<63;function x4(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(nr&&s&&s.contentEditable=="false")return hw(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return hw(s);if(i)return hw(i)}}function hw(t){return t.contentEditable="true",nr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function y4(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function _se(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!O9(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Ase(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Pn(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Hr&&tl<=11&&(n.disabled=!0,n.disabled=!1)}function I9(t,e){if(e instanceof ve){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(v4(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else v4(t)}function v4(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function NT(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||xe.between(e,n,r)}function w4(t){return t.editable&&!t.hasFocus()?!1:M9(t)}function M9(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function jse(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return jc(e.node,e.offset,n.anchorNode,n.anchorOffset)}function k2(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&Ne.findFrom(i,e)}function Ca(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function k4(t,e,n){let r=t.state.selection;if(r instanceof xe)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return Ca(t,new xe(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=k2(t.state,e);return s&&s instanceof ve?Ca(t,s):!1}else if(!(Es&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?ve.isSelectable(i)?Ca(t,new ve(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):am?Ca(t,new xe(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ve&&r.node.isInline)return Ca(t,new xe(e>0?r.$to:r.$from));{let s=k2(t.state,e);return s?Ca(t,s):!1}}}function Rb(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ef(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function mu(t,e){return e<0?Ose(t):Ise(t)}function Ose(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,i,o=!1;for(Rs&&n.nodeType==1&&r<Rb(n)&&Ef(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Ef(a,-1))s=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(R9(n))break;{let a=n.previousSibling;for(;a&&Ef(a,-1);)s=n.parentNode,i=Pn(a),a=a.previousSibling;if(a)n=a,r=Rb(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?E2(t,n,r):s&&E2(t,s,i)}function Ise(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=Rb(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Ef(a,1))i=n,o=++r;else break}else{if(R9(n))break;{let a=n.nextSibling;for(;a&&Ef(a,1);)i=a.parentNode,o=Pn(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=Rb(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}i&&E2(t,i,o)}function R9(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Mse(t,e){for(;t&&e==t.childNodes.length&&!om(t);)e=Pn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Rse(t,e){for(;t&&!e&&!om(t);)e=Pn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function E2(t,e,n){if(e.nodeType!=3){let i,o;(o=Mse(e,n))?(e=o,n=0):(i=Rse(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Fy(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Vo(t)},50)}function E4(t,e){let n=t.state.doc.resolve(e);if(!(kn||y9)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function C4(t,e,n){let r=t.state.selection;if(r instanceof xe&&!r.empty||n.indexOf("s")>-1||Es&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=k2(t.state,e);if(o&&o instanceof ve)return Ca(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=r instanceof Fr?Ne.near(o,e):Ne.findFrom(o,e);return a?Ca(t,a):!1}return!1}function S4(t,e){if(!(t.state.selection instanceof xe))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),t.dispatch(o),!0}return!1}function T4(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Pse(t){if(!nr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;T4(t,r,"true"),setTimeout(()=>T4(t,r,"false"),20)}return!1}function Dse(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Lse(t,e){let n=e.keyCode,r=Dse(e);if(n==8||Es&&n==72&&r=="c")return S4(t,-1)||mu(t,-1);if(n==46&&!e.shiftKey||Es&&n==68&&r=="c")return S4(t,1)||mu(t,1);if(n==13||n==27)return!0;if(n==37||Es&&n==66&&r=="c"){let s=n==37?E4(t,t.state.selection.from)=="ltr"?-1:1:-1;return k4(t,s,r)||mu(t,s)}else if(n==39||Es&&n==70&&r=="c"){let s=n==39?E4(t,t.state.selection.from)=="ltr"?1:-1:1;return k4(t,s,r)||mu(t,s)}else{if(n==38||Es&&n==80&&r=="c")return C4(t,-1,r)||mu(t,-1);if(n==40||Es&&n==78&&r=="c")return Pse(t)||C4(t,1,r)||mu(t,1);if(r==(Es?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function _T(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let o=t.someProp("clipboardSerializer")||us.fromSchema(t.state.schema),a=F9(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,d,h=0;for(;c&&c.nodeType==1&&(d=$9[c.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${i}${h?` -${h}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function P9(t,e,n,r,s){let i=s.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=!!e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,i||r,t)}),i)return a=new ue(Q.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let h=t.someProp("clipboardTextParser",f=>f(e,s,r,t));if(h)a=h;else{let f=s.marks(),{schema:p}=t.state,m=us.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let x=o.appendChild(document.createElement("p"));g&&x.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),o=Hse(n),am&&Use(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||ui.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Bse.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=zse(N4(a,+d[1],+d[2]),d[4]);else if(a=ue.maxOpen($se(a.content,s),!0),a.openStart||a.openEnd){let h=0,f=0;for(let p=a.content.firstChild;h<a.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=N4(a,h,f)}return t.someProp("transformPasted",h=>{a=h(a,t,l)}),a}const Bse=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $se(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),i,o=[];if(t.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&i.length&&L9(l,i,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=B9(o[o.length-1],i.length));let d=D9(a,l);o.push(d),s=s.matchType(d.type),i=l}}),o)return Q.from(o)}return t}function D9(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Q.from(t));return t}function L9(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=L9(t,e,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(Q.from(D9(n,t,s+1))))}}function B9(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,B9(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Q.empty,!0);return t.copy(n.append(r))}function C2(t,e,n,r,s,i){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(i=0),s<r-1&&(a=C2(a,e,n,r,s+1,i)),s>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Q.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function N4(t,e,n){return e<t.openStart&&(t=new ue(C2(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ue(C2(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const $9={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _4=null;function F9(){return _4||(_4=document.implementation.createHTMLDocument("title"))}let fw=null;function Fse(t){let e=window.trustedTypes;return e?(fw||(fw=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),fw.createHTML(t)):t}function Hse(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=F9().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&$9[r[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=Fse(t),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function Use(t){let e=t.querySelectorAll(kn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function zse(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=Q.from(l.create(r[a+1],s)),i++,o++}return new ue(s,i,o)}const mr={},gr={},Vse={touchstart:!0,touchmove:!0};class Wse{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function qse(t){for(let e in mr){let n=mr[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Yse(t,r)&&!AT(t,r)&&(t.editable||!(r.type in gr))&&n(t,r)},Vse[e]?{passive:!0}:void 0)}nr&&t.dom.addEventListener("input",()=>null),S2(t)}function Fa(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Gse(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function S2(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>AT(t,r))})}function AT(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Yse(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Kse(t,e){!AT(t,e)&&mr[e.type]&&(t.editable||!(e.type in gr))&&mr[e.type](t,e)}gr.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!U9(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Lo&&kn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Rd&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,Xl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Lse(t,n)?n.preventDefault():Fa(t,"key")};gr.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};gr.keypress=(t,e)=>{let n=e;if(U9(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Es&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof xe)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,s,i))&&t.dispatch(i()),n.preventDefault()}};function Uy(t){return{left:t.clientX,top:t.clientY}}function Jse(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function jT(t,e,n,r,s){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,a=>o>i.depth?a(t,n,i.nodeAfter,i.before(o),s,!0):a(t,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function ad(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Qse(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ve.isSelectable(r)?(ad(t,new ve(n)),!0):!1}function Xse(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof ve&&(r=n.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(ve.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(ad(t,ve.create(t.state.doc,s)),!0):!1}function Zse(t,e,n,r,s){return jT(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(s?Xse(t,n):Qse(t,n))}function eie(t,e,n,r){return jT(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function tie(t,e,n,r){return jT(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||nie(t,n,r)}function nie(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ad(t,xe.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)ad(t,xe.create(r,a+1,a+1+o.content.size));else if(ve.isSelectable(o))ad(t,ve.create(r,a));else continue;return!0}}function OT(t){return Pb(t)}const H9=Es?"metaKey":"ctrlKey";mr.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=OT(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&Jse(n,t.input.lastClick)&&!n[H9]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let o=t.posAtCoords(Uy(n));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new rie(t,o,n,!!r)):(i=="doubleClick"?eie:tie)(t,o.pos,o.inside,n)?n.preventDefault():Fa(t,"pointer"))};class rie{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[H9],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),o=n.inside;else{let d=e.state.doc.resolve(n.pos);i=d.parent,o=d.depth?d.before():0}const a=s?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof ve&&c.from<=o&&c.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Rs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Fa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Vo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Uy(e))),this.updateAllowDefault(e),this.allowDefault||!n?Fa(this.view,"pointer"):Zse(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||nr&&this.mightDrag&&!this.mightDrag.node.isAtom||kn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ad(this.view,Ne.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Fa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Fa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}mr.touchstart=t=>{t.input.lastTouch=Date.now(),OT(t),Fa(t,"pointer")};mr.touchmove=t=>{t.input.lastTouch=Date.now(),Fa(t,"pointer")};mr.contextmenu=t=>OT(t);function U9(t,e){return t.composing?!0:nr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const sie=Lo?5e3:-1;gr.compositionstart=gr.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof xe&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||kn&&y9&&iie(t)))t.markCursor=t.state.storedMarks||n.marks(),Pb(t,!0),t.markCursor=null;else if(Pb(t,!e.selection.empty),Rs&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}z9(t,sie)};function iie(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}gr.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,z9(t,20))};function z9(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Pb(t),e))}function V9(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=aie());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function oie(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Xre(e.focusNode,e.focusOffset),r=Zre(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function aie(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Pb(t,e=!1){if(!(Lo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),V9(t),e||t.docView&&t.docView.dirty){let n=TT(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function lie(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const mp=Hr&&tl<15||Rd&&rse<604;mr.copy=gr.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let i=mp?null:n.clipboardData,o=r.content(),{dom:a,text:l}=_T(t,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):lie(t,a),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function cie(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function uie(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?gp(t,r.value,null,s,e):gp(t,r.textContent,r.innerHTML,s,e)},50)}function gp(t,e,n,r,s){let i=P9(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,s,i||ue.empty)))return!0;if(!i)return!1;let o=cie(i),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function W9(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}gr.paste=(t,e)=>{let n=e;if(t.composing&&!Lo)return;let r=mp?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&gp(t,W9(r),r.getData("text/html"),s,n)?n.preventDefault():uie(t,n)};class q9{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const die=Es?"altKey":"ctrlKey";function G9(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[die]}mr.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(Uy(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof ve?s.to-1:s.to))){if(r&&r.mightDrag)o=ve.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let h=t.docView.nearestDesc(n.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=ve.create(t.state.doc,h.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:d}=_T(t,a);(!n.dataTransfer.files.length||!kn||x9>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(mp?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",mp||n.dataTransfer.setData("text/plain",c),t.dragging=new q9(d,G9(t,n),o)};mr.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};gr.dragover=gr.dragenter=(t,e)=>e.preventDefault();gr.drop=(t,e)=>{try{hie(t,e,t.dragging)}finally{t.dragging=null}};function hie(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Uy(e));if(!r)return;let s=t.state.doc.resolve(r.pos),i=n&&n.slice;i?t.someProp("transformPasted",p=>{i=p(i,t,!1)}):i=P9(t,W9(e.dataTransfer),mp?null:e.dataTransfer.getData("text/html"),!1,s);let o=!!(n&&G9(t,e));if(t.someProp("handleDrop",p=>p(t,e,i||ue.empty,o))){e.preventDefault();return}if(!i)return;e.preventDefault();let a=i?Q8(t.state.doc,s.pos,i):s.pos;a==null&&(a=s.pos);let l=t.state.tr;if(o){let{node:p}=n;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=l.doc;if(d?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),l.doc.eq(h))return;let f=l.doc.resolve(c);if(d&&ve.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new ve(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,x,b)=>p=b),l.setSelection(NT(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}mr.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Vo(t)},20))};mr.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};mr.beforeinput=(t,e)=>{if(kn&&Lo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Xl(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in gr)mr[t]=gr[t];function bp(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Db{constructor(e,n){this.toDOM=e,this.spec=n||fc,this.side=this.spec.side||0}map(e,n,r,s){let{pos:i,deleted:o}=e.mapResult(n.from+s,this.side<0?-1:1);return o?null:new at(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Db&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&bp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class rl{constructor(e,n){this.attrs=e,this.spec=n||fc}map(e,n,r,s){let i=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new at(i,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof rl&&bp(this.attrs,e.attrs)&&bp(this.spec,e.spec)}static is(e){return e.type instanceof rl}destroy(){}}class IT{constructor(e,n){this.attrs=e,this.spec=n||fc}map(e,n,r,s){let i=e.mapResult(n.from+s,1);if(i.deleted)return null;let o=e.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new at(i.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),i;return s==n.from&&!(i=e.child(r)).isText&&s+i.nodeSize==n.to}eq(e){return this==e||e instanceof IT&&bp(this.attrs,e.attrs)&&bp(this.spec,e.spec)}destroy(){}}class at{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new at(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new at(e,e,new Db(n,r))}static inline(e,n,r,s){return new at(e,n,new rl(r,s))}static node(e,n,r,s){return new at(e,n,new IT(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof rl}get widget(){return this.type instanceof Db}}const _u=[],fc={};class Re{constructor(e,n){this.local=e.length?e:_u,this.children=n.length?n:_u}static create(e,n){return n.length?Lb(n,e,0,fc):Yn}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,s+a,i)}}map(e,n,r){return this==Yn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||fc)}mapInner(e,n,r,s,i){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,s);l&&l.type.valid(n,l)?(o||(o=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?fie(this.children,o||[],e,n,r,s,i):o?new Re(o.sort(pc),_u):Yn}add(e,n){return n.length?this==Yn?Re.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,i=0;e.forEach((a,l)=>{let c=l+r,d;if(d=K9(n,a,c)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(a,d,c+1):s.splice(i,0,l,l+a.nodeSize,Lb(d,a,c+1,fc)),i+=3}});let o=Y9(i?J9(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Re(o.length?this.local.concat(o).sort(pc):this.local,s||this.children)}remove(e){return e.length==0||this==Yn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,a=r[i]+n,l=r[i+1]+n;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>a&&h.to<l&&(e[d]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(o,a+1);c!=Yn?r[i+2]=c:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Re(s,r):Yn}forChild(e,n){if(this==Yn)return this;if(n.isLeaf)return Re.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,o=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>i&&l.type instanceof rl){let c=Math.max(i,l.from)-i,d=Math.min(o,l.to)-i;c<d&&(s||(s=[])).push(l.copy(c,d))}}if(s){let a=new Re(s.sort(pc),_u);return r?new Oa([a,r]):a}return r||Yn}eq(e){if(this==e)return!0;if(!(e instanceof Re)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return MT(this.localsInner(e))}localsInner(e){if(this==Yn)return _u;if(e.inlineContent||!this.local.some(rl.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof rl||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Re.empty=new Re([],[]);Re.removeOverlap=MT;const Yn=Re.empty;class Oa{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,fc));return Oa.from(r)}forChild(e,n){if(n.isLeaf)return Re.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,n);i!=Yn&&(i instanceof Oa?r=r.concat(i.members):r.push(i))}return Oa.from(r)}eq(e){if(!(e instanceof Oa)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?MT(r?n:n.sort(pc)):_u}static from(e){switch(e.length){case 0:return Yn;case 1:return e[0];default:return new Oa(e.every(n=>n instanceof Re)?e:e.reduce((n,r)=>n.concat(r instanceof Re?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function fie(t,e,n,r,s,i,o){let a=t.slice();for(let c=0,d=i;c<n.maps.length;c++){let h=0;n.maps[c].forEach((f,p,m,g)=>{let x=g-m-(p-f);for(let b=0;b<a.length;b+=3){let v=a[b+1];if(v<0||f>v+d-h)continue;let w=a[b]+d-h;p>=w?a[b+1]=f<=w?-2:-1:f>=d&&x&&(a[b]+=x,a[b+1]+=x)}h+=x}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=n.map(t[c]+i),h=d-s;if(h<0||h>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+i,-1),p=f-s,{index:m,offset:g}=r.content.findIndex(h),x=r.maybeChild(m);if(x&&g==h&&g+x.nodeSize==p){let b=a[c+2].mapInner(n,x,d+1,t[c]+i+1,o);b!=Yn?(a[c]=h,a[c+1]=p,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=pie(a,t,e,n,s,i,o),d=Lb(c,r,0,o);e=d.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new Re(e.sort(pc),a)}function Y9(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new at(s.from+e,s.to+e,s.type))}return n}function pie(t,e,n,r,s,i,o){function a(l,c){for(let d=0;d<l.local.length;d++){let h=l.local[d].map(r,s,c);h?n.push(h):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function K9(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),t[i]=null);return s}function J9(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Lb(t,e,n,r){let s=[],i=!1;e.forEach((a,l)=>{let c=K9(t,a,l+n);if(c){i=!0;let d=Lb(c,a,n+l+1,r);d!=Yn&&s.push(l,l+a.nodeSize,d)}});let o=Y9(i?J9(t):t,-n).sort(pc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new Re(o,s):Yn}function pc(t,e){return t.from-e.from||t.to-e.to}function MT(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,r.to),A4(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),A4(e,s,r.copy(i.from,r.to)));break}}}return e}function A4(t,e,n){for(;e<t.length&&pc(n,t[e])>0;)e++;t.splice(e,0,n)}function pw(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Yn&&e.push(r)}),t.cursorWrapper&&e.push(Re.create(t.state.doc,[t.cursorWrapper.deco])),Oa.from(e)}const mie={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},gie=Hr&&tl<=11;class bie{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class xie{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new bie,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Hr&&tl<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),gie&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,mie)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(w4(this.view)){if(this.suppressingSelectionUpdates)return Vo(this.view);if(Hr&&tl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&jc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=Md(i))n.add(i);for(let i=e.anchorNode;i;i=Md(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&w4(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let h=this.registerMutation(n[d],l);h&&(i=i<0?h.from:Math.min(h.from,i),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Rs&&l.length){let d=l.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||wie(e,h)!=p)&&f.remove()}}}else if((kn||nr)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Fy(r)&&(c=TT(e))&&c.eq(Ne.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Vo(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),yie(e)),this.handleDOMChange(i,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Vo(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];n.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Hr&&tl<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let o=s&&s.parentNode==e.target?Pn(s)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?Pn(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let j4=new WeakMap,O4=!1;function yie(t){if(!j4.has(t)&&(j4.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Rs,O4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),O4=!0}}function I4(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return jc(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function vie(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return I4(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?I4(t,n):null}function wie(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function kie(t,e,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],Fy(l)||c.push({node:l.focusNode,offset:l.focusOffset})),kn&&t.input.lastKeyCode===8)for(let x=i;x>s;x--){let b=r.childNodes[x-1],v=b.pmViewDesc;if(b.nodeName=="BR"&&!v){i=x;break}if(!v||v.size)break}let h=t.state.doc,f=t.someProp("domParser")||ui.fromSchema(t.state.schema),p=h.resolve(o),m=null,g=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:i,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Eie,context:p});if(c&&c[0].pos!=null){let x=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=x),m={anchor:x+o,head:b+o}}return{doc:g,sel:m,from:o,to:a}}function Eie(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(nr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||nr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Cie=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Sie(t,e,n,r,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let T=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=TT(t,T);if(_&&!t.state.selection.eq(_)){if(kn&&Lo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",N=>N(t,Xl(13,"Enter"))))return;let O=t.state.tr.setSelection(_);T=="pointer"?O.setMeta("pointer",!0):T=="key"&&O.scrollIntoView(),i&&O.setMeta("composition",i),t.dispatch(O)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=kie(t,e,n),d=t.state.doc,h=d.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=_ie(h.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(Rd&&t.input.lastIOSEnter>Date.now()-225||Lo)&&s.some(T=>T.nodeType==1&&!Cie.test(T.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",T=>T(t,Xl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof xe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let T=M4(t,t.state.doc,c.sel);if(T&&!T.eq(t.state.selection)){let _=t.state.tr.setSelection(T);i&&_.setMeta("composition",i),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof xe&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Hr&&tl<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),x=c.doc.resolveNoCache(m.endB-c.from),b=d.resolve(m.start),v=g.sameParent(x)&&g.parent.inlineContent&&b.end()>=m.endA;if((Rd&&t.input.lastIOSEnter>Date.now()-225&&(!v||s.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!v&&g.pos<c.doc.content.size&&(!g.sameParent(x)||!g.parent.inlineContent)&&g.pos<x.pos&&!/\S/.test(c.doc.textBetween(g.pos,x.pos,"","")))&&t.someProp("handleKeyDown",T=>T(t,Xl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&Nie(d,m.start,m.endA,g,x)&&t.someProp("handleKeyDown",T=>T(t,Xl(8,"Backspace")))){Lo&&kn&&t.domObserver.suppressSelectionUpdates();return}kn&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Lo&&!v&&g.start()!=x.start()&&x.parentOffset==0&&g.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,x=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(T){return T(t,Xl(13,"Enter"))})},20));let w=m.start,S=m.endA,E=T=>{let _=T||t.state.tr.replace(w,S,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let O=M4(t,_.doc,c.sel);O&&!(kn&&t.composing&&O.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(O.head==w||O.head==_.mapping.map(S)-1)||Hr&&O.empty&&O.head==w)&&_.setSelection(O)}return i&&_.setMeta("composition",i),_.scrollIntoView()},C;if(v)if(g.pos==x.pos){Hr&&tl<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Vo(t),20));let T=E(t.state.tr.delete(w,S)),_=d.resolve(m.start).marksAcross(d.resolve(m.endA));_&&T.ensureMarks(_),t.dispatch(T)}else if(m.endA==m.endB&&(C=Tie(g.parent.content.cut(g.parentOffset,x.parentOffset),b.parent.content.cut(b.parentOffset,m.endA-b.start())))){let T=E(t.state.tr);C.type=="add"?T.addMark(w,S,C.mark):T.removeMark(w,S,C.mark),t.dispatch(T)}else if(g.parent.child(g.index()).isText&&g.index()==x.index()-(x.textOffset?0:1)){let T=g.parent.textBetween(g.parentOffset,x.parentOffset),_=()=>E(t.state.tr.insertText(T,w,S));t.someProp("handleTextInput",O=>O(t,w,S,T,_))||t.dispatch(_())}else t.dispatch(E());else t.dispatch(E())}function M4(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:NT(t,e.resolve(n.anchor),e.resolve(n.head))}function Tie(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,i=r,o,a,l;for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(Q.from(c).eq(t))return{mark:a,type:o}}function Nie(t,e,n,r,s){if(n-e<=s.pos-r.pos||mw(r,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(mw(i,!0,!0));return!o.parent.isTextblock||o.pos>n||mw(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function mw(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function _ie(t,e,n,r,s){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(o,a));r-=o+l-i}if(o<i&&t.size<e.size){let l=r<=i&&r>=o?i-r:0;i-=l,i&&i<e.size&&R4(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&R4(t.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function R4(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Q9{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Wse,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach($4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=L4(this),D4(this),this.nodeViews=B4(this),this.docView=m4(this.state.doc,P4(this),pw(this),this.dom,this),this.domObserver=new xie(this,(r,s,i,o)=>Sie(this,r,s,i,o)),this.domObserver.start(),qse(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&S2(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach($4),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(V9(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=B4(this);jie(p,this.nodeViews)&&(this.nodeViews=p,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&S2(this),this.editable=L4(this),D4(this);let l=pw(this),c=P4(this),d=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",h=i||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(s.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&ose(this);if(o){this.domObserver.stop();let p=h&&(Hr||kn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&Aie(s.selection,e.selection);if(h){let m=kn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=oie(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=m4(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&jse(this))?Vo(this,p):(I9(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&ase(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ve){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&c4(this,n.getBoundingClientRect(),e)}else c4(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new q9(e.slice,e.move,s<0?void 0:ve.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=n?n(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(Hr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&lse(this.dom),Vo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return fse(this,e)}coordsAtPos(e,n=1){return C9(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return xse(this,n||this.state,e)}pasteHTML(e,n){return gp(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return gp(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return _T(this,e)}destroy(){this.docView&&(Gse(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],pw(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Jre())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Kse(this,e)}domSelectionRange(){let e=this.domSelection();return e?nr&&this.root.nodeType===11&&tse(this.dom.ownerDocument)==this.dom&&vie(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Q9.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function P4(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[at.node(0,t.state.doc.content.size,e)]}function D4(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:at.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function L4(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Aie(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function B4(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function jie(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function $4(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ll={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Bb={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Oie=typeof navigator<"u"&&/Mac/.test(navigator.platform),Iie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Dn=0;Dn<10;Dn++)ll[48+Dn]=ll[96+Dn]=String(Dn);for(var Dn=1;Dn<=24;Dn++)ll[Dn+111]="F"+Dn;for(var Dn=65;Dn<=90;Dn++)ll[Dn]=String.fromCharCode(Dn+32),Bb[Dn]=String.fromCharCode(Dn);for(var gw in ll)Bb.hasOwnProperty(gw)||(Bb[gw]=ll[gw]);function Mie(t){var e=Oie&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Iie&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Bb:ll)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Rie=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Pie=typeof navigator<"u"&&/Win/.test(navigator.platform);function Die(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Rie?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function Lie(t){let e=Object.create(null);for(let n in t)e[Die(n)]=t[n];return e}function bw(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function X9(t){return new Ie({props:{handleKeyDown:RT(t)}})}function RT(t){let e=Lie(t);return function(n,r){let s=Mie(r),i,o=e[bw(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[bw(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Pie&&r.ctrlKey&&r.altKey)&&(i=ll[r.keyCode])&&i!=s){let a=e[bw(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var Bie=Object.defineProperty,PT=(t,e)=>{for(var n in e)Bie(t,n,{get:e[n],enumerable:!0})};function zy(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}var Vy=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const d=a(...c)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o=[],a=!!t,l=t||s.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),o.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(n).map(([h,f])=>[h,(...m)=>{const g=this.buildProps(l,e),x=f(...m)(g);return o.push(x),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,i=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o={tr:t,editor:r,view:i,state:zy({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},Z9={};PT(Z9,{blur:()=>$ie,clearContent:()=>Fie,clearNodes:()=>Hie,command:()=>Uie,createParagraphNear:()=>zie,cut:()=>Vie,deleteCurrentNode:()=>Wie,deleteNode:()=>qie,deleteRange:()=>Gie,deleteSelection:()=>Yie,enter:()=>Kie,exitCode:()=>Jie,extendMarkRange:()=>Qie,first:()=>Xie,focus:()=>eoe,forEach:()=>toe,insertContent:()=>noe,insertContentAt:()=>soe,joinBackward:()=>aoe,joinDown:()=>ooe,joinForward:()=>loe,joinItemBackward:()=>coe,joinItemForward:()=>uoe,joinTextblockBackward:()=>doe,joinTextblockForward:()=>hoe,joinUp:()=>ioe,keyboardShortcut:()=>poe,lift:()=>moe,liftEmptyBlock:()=>goe,liftListItem:()=>boe,newlineInCode:()=>xoe,resetAttributes:()=>yoe,scrollIntoView:()=>voe,selectAll:()=>woe,selectNodeBackward:()=>koe,selectNodeForward:()=>Eoe,selectParentNode:()=>Coe,selectTextblockEnd:()=>Soe,selectTextblockStart:()=>Toe,setContent:()=>Noe,setMark:()=>zoe,setMeta:()=>Voe,setNode:()=>Woe,setNodeSelection:()=>qoe,setTextDirection:()=>Goe,setTextSelection:()=>Yoe,sinkListItem:()=>Koe,splitBlock:()=>Joe,splitListItem:()=>Qoe,toggleList:()=>Xoe,toggleMark:()=>Zoe,toggleNode:()=>eae,toggleWrap:()=>tae,undoInputRule:()=>nae,unsetAllMarks:()=>rae,unsetMark:()=>sae,unsetTextDirection:()=>iae,updateAttributes:()=>oae,wrapIn:()=>aae,wrapInList:()=>lae});var $ie=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),Fie=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Hie=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,h=c.resolve(d.map(l)),f=c.resolve(d.map(l+a.nodeSize)),p=h.blockRange(f);if(!p)return;const m=oh(p);if(a.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},Uie=t=>e=>t(e),zie=()=>({state:t,dispatch:e})=>f9(t,e),Vie=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new xe(r.doc.resolve(Math.max(o-1,0)))),!0},Wie=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const a=s.before(i),l=s.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1};function Nn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var qie=t=>({tr:e,state:n,dispatch:r})=>{const s=Nn(t,n.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const l=i.before(o),c=i.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},Gie=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},Yie=()=>({state:t,dispatch:e})=>vT(t,e),Kie=()=>({commands:t})=>t.keyboardShortcut("Enter"),Jie=()=>({state:t,dispatch:e})=>Pre(t,e);function DT(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function $b(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:DT(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function e7(t,e,n={}){return t.find(r=>r.type===e&&$b(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function F4(t,e,n={}){return!!e7(t,e,n)}function Wy(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(d=>d.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(d=>d.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!e7([...s.node.marks],e,n)))return;let o=s.index,a=t.start()+s.offset,l=o+1,c=a+s.node.nodeSize;for(;o>0&&F4([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&F4([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function ia(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Qie=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=ia(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:d}=a;if(s){const h=Wy(l,i,e);if(h&&h.from<=c&&h.to>=d){const f=xe.create(o,h.from,h.to);n.setSelection(f)}}return!0},Xie=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function t7(t){return t instanceof xe}function Bo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function n7(t,e=null){if(!e)return null;const n=Ne.atStart(t),r=Ne.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,i=r.to;return e==="all"?xe.create(t,Bo(0,s,i),Bo(t.content.size,s,i)):xe.create(t,Bo(e,s,i),Bo(e,s,i))}function Zie(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function LT(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var eoe=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(LT()||Zie())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!t7(n.state.selection))return o(),!0;const a=n7(s.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},toe=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),noe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),r7=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&r7(r)}return t};function b0(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return r7(n)}function xp(t,e,n){if(t instanceof Uo||t instanceof Q)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Q.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),xp("",e,n)}if(s){if(n.errorOnInvalidContent){let o=!1,a="";const l=new $8({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?ui.fromSchema(l).parseSlice(b0(t),n.parseOptions):ui.fromSchema(l).parse(b0(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=ui.fromSchema(e);return n.slice?i.parseSlice(b0(t),n.parseOptions).content:i.parse(b0(t),n.parseOptions)}return xp("",e,n)}function s7(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof an||s instanceof en))return;const i=t.mapping.maps[r];let o=0;i.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(Ne.near(t.doc.resolve(o),n))}var roe=t=>!("type"in t),soe=(t,e,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=x=>{i.emit("contentError",{editor:i,error:x,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{xp(e,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(x){l(x)}try{a=xp(e,i.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(x){return l(x),!1}let{from:d,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((roe(a)?a:[a]).forEach(x=>{x.check(),f=f?x.isText&&x.marks.length===0:!1,p=p?x.isBlock:!1}),d===h&&p){const{parent:x}=r.doc.resolve(d);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(x=>x.text||"").join("");else if(e instanceof Q){let x="";e.forEach(b=>{b.text&&(x+=b.text)}),g=x}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,d,h)}else{g=a;const x=r.doc.resolve(d),b=x.node(),v=x.parentOffset===0,w=b.isText||b.isTextblock,S=b.content.size>0;v&&w&&S&&(d=Math.max(0,d-1)),r.replaceWith(d,h,g)}n.updateSelection&&s7(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:g})}return!0},ioe=()=>({state:t,dispatch:e})=>Ire(t,e),ooe=()=>({state:t,dispatch:e})=>Mre(t,e),aoe=()=>({state:t,dispatch:e})=>o9(t,e),loe=()=>({state:t,dispatch:e})=>u9(t,e),coe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ly(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},uoe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ly(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},doe=()=>({state:t,dispatch:e})=>jre(t,e),hoe=()=>({state:t,dispatch:e})=>Ore(t,e);function i7(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function foe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))LT()||i7()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}var poe=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=foe(t).split(/-(?!$)/),o=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&s&&r.maybeStep(d)}),!0};function yp(t,e,n={}){const{from:r,to:s,empty:i}=t.selection,o=e?Nn(e,t.schema):null,a=[];t.doc.nodesBetween(r,s,(h,f)=>{if(h.isText)return;const p=Math.max(r,f),m=Math.min(s,f+h.nodeSize);a.push({node:h,from:p,to:m})});const l=s-r,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>$b(h.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}var moe=(t,e={})=>({state:n,dispatch:r})=>{const s=Nn(t,n.schema);return yp(n,s,e)?Rre(n,r):!1},goe=()=>({state:t,dispatch:e})=>p9(t,e),boe=t=>({state:e,dispatch:n})=>{const r=Nn(t,e.schema);return qre(r)(e,n)},xoe=()=>({state:t,dispatch:e})=>h9(t,e);function qy(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function H4(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var yoe=(t,e)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=qy(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=Nn(t,r.schema)),a==="mark"&&(o=ia(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,h)=>{i&&i===d.type&&(l=!0,s&&n.setNodeMarkup(h,void 0,H4(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(f=>{o===f.type&&(l=!0,s&&n.addMark(h,h+d.nodeSize,o.create(H4(f.attrs,e))))})})}),l},voe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),woe=()=>({tr:t,dispatch:e})=>{if(e){const n=new Fr(t.doc);t.setSelection(n)}return!0},koe=()=>({state:t,dispatch:e})=>l9(t,e),Eoe=()=>({state:t,dispatch:e})=>d9(t,e),Coe=()=>({state:t,dispatch:e})=>Bre(t,e),Soe=()=>({state:t,dispatch:e})=>Hre(t,e),Toe=()=>({state:t,dispatch:e})=>Fre(t,e);function Fb(t,e,n={},r={}){return xp(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var Noe=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{const{doc:l}=i;if(r.preserveWhitespace!=="full"){const c=Fb(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return o&&i.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return o&&i.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function o7(t,e){const n=ia(e,t.schema),{from:r,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Gy(t,e){const n=new xT(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function _oe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function U4(t,e){const n=[];return t.descendants((r,s)=>{e(r)&&n.push({node:r,pos:s})}),n}function a7(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,i)=>{n(s)&&r.push({node:s,pos:i})}),r}function Aoe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Yy(t){return e=>Aoe(e.$from,t)}function Ee(t,e,n){return t.config[e]===void 0&&t.parent?Ee(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ee(t.parent,e,n):null}):t.config[e]}function BT(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Ee(e,"addExtensions",n);return r?[e,...BT(r())]:e}).flat(10)}function $T(t,e){const n=us.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function l7(t){return typeof t=="function"}function mt(t,e=void 0,...n){return l7(t)?e?t.bind(e)(...n):t(...n):t}function joe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Pd(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function c7(t){const e=[],{nodeExtensions:n,markExtensions:r}=Pd(t),s=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},l=Ee(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...i,...p}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Ee(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,h])=>{const f={...i,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function ds(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const a=i?String(i).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(d=>!l.includes(d));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=i?i.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),a.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());c.set(h,f)}),r[s]=Array.from(c.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else r[s]=i}),r},{})}function Hb(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>ds(n,r),{})}function Ooe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function z4(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):Ooe(n.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...r,...s}}}}function V4(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&joe(n)?!1:n!=null))}function W4(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function u7(t,e){var n;const r=c7(t),{nodeExtensions:s,markExtensions:i}=Pd(t),o=(n=s.find(c=>Ee(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(s.map(c=>{const d=r.filter(b=>b.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((b,v)=>{const w=Ee(v,"extendNodeSchema",h);return{...b,...w?w(c):{}}},{}),p=V4({...f,content:mt(Ee(c,"content",h)),marks:mt(Ee(c,"marks",h)),group:mt(Ee(c,"group",h)),inline:mt(Ee(c,"inline",h)),atom:mt(Ee(c,"atom",h)),selectable:mt(Ee(c,"selectable",h)),draggable:mt(Ee(c,"draggable",h)),code:mt(Ee(c,"code",h)),whitespace:mt(Ee(c,"whitespace",h)),linebreakReplacement:mt(Ee(c,"linebreakReplacement",h)),defining:mt(Ee(c,"defining",h)),isolating:mt(Ee(c,"isolating",h)),attrs:Object.fromEntries(d.map(W4))}),m=mt(Ee(c,"parseHTML",h));m&&(p.parseDOM=m.map(b=>z4(b,d)));const g=Ee(c,"renderHTML",h);g&&(p.toDOM=b=>g({node:b,HTMLAttributes:Hb(b,d)}));const x=Ee(c,"renderText",h);return x&&(p.toText=x),[c.name,p]})),l=Object.fromEntries(i.map(c=>{const d=r.filter(x=>x.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((x,b)=>{const v=Ee(b,"extendMarkSchema",h);return{...x,...v?v(c):{}}},{}),p=V4({...f,inclusive:mt(Ee(c,"inclusive",h)),excludes:mt(Ee(c,"excludes",h)),group:mt(Ee(c,"group",h)),spanning:mt(Ee(c,"spanning",h)),code:mt(Ee(c,"code",h)),attrs:Object.fromEntries(d.map(W4))}),m=mt(Ee(c,"parseHTML",h));m&&(p.parseDOM=m.map(x=>z4(x,d)));const g=Ee(c,"renderHTML",h);return g&&(p.toDOM=x=>g({mark:x,HTMLAttributes:Hb(x,d)})),[c.name,p]}));return new $8({topNode:o,nodes:a,marks:l})}function Ioe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function FT(t){return t.sort((n,r)=>{const s=Ee(n,"priority")||100,i=Ee(r,"priority")||100;return s>i?-1:s<i?1:0})}function HT(t){const e=FT(BT(t)),n=Ioe(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function Moe(t,e){const n=HT(t);return u7(n,e)}function d7(t,e,n){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,s,(l,c,d,h)=>{var f;l.isBlock&&c>r&&(a+=i);const p=o==null?void 0:o[l.type.name];if(p)return d&&(a+=p({node:l,pos:c,parent:d,index:h,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(r,c)-c,s-c))}),a}function Roe(t,e){const n={from:0,to:t.content.size};return d7(t,n,e)}function h7(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function Poe(t,e){const n=Nn(e,t.schema),{from:r,to:s}=t.selection,i=[];t.doc.nodesBetween(r,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function f7(t,e){const n=qy(typeof e=="string"?e:e.name,t.schema);return n==="node"?Poe(t,e):n==="mark"?o7(t,e):{}}function Doe(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function Loe(t){const e=Doe(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,o)=>o!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function UT(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(i).map(a,-1),d=e.slice(i).map(l),h=e.invert().map(c,-1),f=e.invert().map(d);r.push({oldRange:{from:h,to:f},newRange:{from:c,to:d}})})}),Loe(r)}function zT(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const i=n.resolve(t),o=Wy(i,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}function xw(t,e){return e.nodes[t]||e.marks[t]||null}function yg(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}var Boe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,a)=>{var l,c;const d=((c=(l=s.type.spec).toText)==null?void 0:c.call(l,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?d:d.slice(0,Math.max(0,r-i))}),n};function T2(t,e,n={}){const{empty:r,ranges:s}=t.selection,i=e?ia(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>i?i.name===h.type.name:!0).find(h=>$b(h.attrs,n,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:h,$to:f})=>{const p=h.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,x)=>{if(!g.isText&&!g.marks.length)return;const b=Math.max(p,x),v=Math.min(m,x+g.nodeSize),w=v-b;o+=w,a.push(...g.marks.map(S=>({mark:S,from:b,to:v})))})}),o===0)return!1;const l=a.filter(h=>i?i.name===h.mark.type.name:!0).filter(h=>$b(h.mark.attrs,n,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>i?h.mark.type!==i&&h.mark.type.excludes(i):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function $oe(t,e,n={}){if(!e)return yp(t,null,n)||T2(t,null,n);const r=qy(e,t.schema);return r==="node"?yp(t,e,n):r==="mark"?T2(t,e,n):!1}function q4(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function G4(t,e){const{nodeExtensions:n}=Pd(e),r=n.find(o=>o.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=mt(Ee(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function Ky(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(Ky(i,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function p7(t){return t instanceof ve}var m7=class g7{constructor(e){this.position=e}static fromJSON(e){return new g7(e.position)}toJSON(){return{position:this.position}}};function Foe(t,e){const n=e.mapping.mapResult(t.position);return{position:new m7(n.pos),mapResult:n}}function Hoe(t){return new m7(t)}function VT(t,e,n){const s=t.state.doc.content.size,i=Bo(e,0,s),o=Bo(n,0,s),a=t.coordsAtPos(i),l=t.coordsAtPos(o,-1),c=Math.min(a.top,l.top),d=Math.max(a.bottom,l.bottom),h=Math.min(a.left,l.left),f=Math.max(a.right,l.right),p=f-h,m=d-c,b={top:c,bottom:d,left:h,right:f,width:p,height:m,x:h,y:c};return{...b,toJSON:()=>b}}function Uoe(t,e,n){var r;const{selection:s}=e;let i=null;if(t7(s)&&(i=s.$cursor),i){const a=(r=t.storedMarks)!=null?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,h,f)=>{if(c)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(n),m=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));c=p&&m}return!c}),c})}var zoe=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:a}=i,l=ia(t,r.schema);if(s)if(o){const c=o7(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;r.doc.nodesBetween(d,h,(f,p)=>{const m=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(b=>b.type===l)?f.marks.forEach(b=>{l===b.type&&n.addMark(m,g,l.create({...b.attrs,...e}))}):n.addMark(m,g,l.create(e))})});return Uoe(r,n,l)},Voe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Woe=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const i=Nn(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:a})=>o4(i,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>o4(i,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},qoe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=Bo(t,0,r.content.size),i=ve.create(r,s);e.setSelection(i)}return!0},Goe=(t,e)=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=r;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=i.from,a=i.to),s&&n.doc.nodesBetween(o,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},Yoe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=xe.atStart(r).from,a=xe.atEnd(r).to,l=Bo(s,o,a),c=Bo(i,o,a),d=xe.create(r,l,c);e.setSelection(d)}return!0},Koe=t=>({state:e,dispatch:n})=>{const r=Nn(t,e.schema);return Kre(r)(e,n)};function Y4(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}var Joe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:l}=i,c=s.extensionManager.attributes,d=yg(c,a.node().type.name,a.node().attrs);if(i instanceof ve&&i.node.isBlock)return!a.parentOffset||!zo(o,a.pos)?!1:(r&&(t&&Y4(n,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:_oe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,m=zo(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&zo(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:d}]:void 0),r){if(m&&(i instanceof xe&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),x=e.doc.resolve(g);a.node(-1).canReplaceWith(x.index(),x.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&Y4(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},Qoe=(t,e={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const a=Nn(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const h=l.node(-1);if(h.type!==a)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let b=Q.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-v;_>=l.depth-3;_-=1)b=Q.from(l.node(_).copy(b));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...yg(f,l.node().type.name,l.node().attrs),...e},E=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(S))||void 0;b=b.append(Q.from(a.createAndFill(null,E)||void 0));const C=l.before(l.depth-(v-1));n.replace(C,l.after(-w),new ue(b,4-v,0));let T=-1;n.doc.nodesBetween(C,n.doc.content.size,(_,O)=>{if(T>-1)return!1;_.isTextblock&&_.content.size===0&&(T=O+1)}),T>-1&&n.setSelection(xe.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...yg(f,h.type.name,h.attrs),...e},g={...yg(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const x=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!zo(n.doc,l.pos,2))return!1;if(s){const{selection:b,storedMarks:v}=r,{splittableMarks:w}=i.extensionManager,S=v||b.$to.parentOffset&&b.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!S||!s)return!0;const E=S.filter(C=>w.includes(C.type.name));n.ensureMarks(E)}return!0},yw=(t,e)=>{const n=Yy(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Kc(t.doc,n.pos)&&t.join(n.pos),!0},vw=(t,e)=>{const n=Yy(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Kc(t.doc,r)&&t.join(r),!0},Xoe=(t,e,n,r={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:h,splittableMarks:f}=s.extensionManager,p=Nn(t,o.schema),m=Nn(e,o.schema),{selection:g,storedMarks:x}=o,{$from:b,$to:v}=g,w=b.blockRange(v),S=x||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const E=Yy(C=>G4(C.type.name,h))(g);if(w.depth>=1&&E&&w.depth-E.depth<=1){if(E.node.type===p)return c.liftListItem(m);if(G4(E.node.type.name,h)&&p.validContent(E.node.content)&&a)return l().command(()=>(i.setNodeMarkup(E.pos,p),!0)).command(()=>yw(i,p)).command(()=>vw(i,p)).run()}return!n||!S||!a?l().command(()=>d().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>yw(i,p)).command(()=>vw(i,p)).run():l().command(()=>{const C=d().wrapInList(p,r),T=S.filter(_=>f.includes(_.type.name));return i.ensureMarks(T),C?!0:c.clearNodes()}).wrapInList(p,r).command(()=>yw(i,p)).command(()=>vw(i,p)).run()},Zoe=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=ia(t,r.schema);return T2(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},eae=(t,e,n={})=>({state:r,commands:s})=>{const i=Nn(t,r.schema),o=Nn(e,r.schema),a=yp(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(i,{...l,...n})},tae=(t,e={})=>({state:n,commands:r})=>{const s=Nn(t,n.schema);return yp(n,s,e)?r.lift(s):r.wrapIn(s,e)},nae=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else o.delete(i.from,i.to)}return!0}}return!1},rae=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},sae=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=ia(t,r.schema),{$from:c,empty:d,ranges:h}=a;if(!s)return!0;if(d&&o){let{from:f,to:p}=a;const m=(i=c.marks().find(x=>x.type===l))==null?void 0:i.attrs,g=Wy(c,l,m);g&&(f=g.from,p=g.to),n.removeMark(f,p,l)}else h.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},iae=t=>({tr:e,state:n,dispatch:r})=>{const{selection:s}=n;let i,o;return typeof t=="number"?(i=t,o=t):t&&"from"in t&&"to"in t?(i=t.from,o=t.to):(i=s.from,o=s.to),r&&e.doc.nodesBetween(i,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},oae=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=qy(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=Nn(t,r.schema)),a==="mark"&&(o=ia(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const d=c.$from.pos,h=c.$to.pos;let f,p,m,g;n.selection.empty?r.doc.nodesBetween(d,h,(x,b)=>{i&&i===x.type&&(l=!0,m=Math.max(b,d),g=Math.min(b+x.nodeSize,h),f=b,p=x)}):r.doc.nodesBetween(d,h,(x,b)=>{b<d&&i&&i===x.type&&(l=!0,m=Math.max(b,d),g=Math.min(b+x.nodeSize,h),f=b,p=x),b>=d&&b<=h&&(i&&i===x.type&&(l=!0,s&&n.setNodeMarkup(b,void 0,{...x.attrs,...e})),o&&x.marks.length&&x.marks.forEach(v=>{if(o===v.type&&(l=!0,s)){const w=Math.max(b,d),S=Math.min(b+x.nodeSize,h);n.addMark(w,S,o.create({...v.attrs,...e}))}}))}),p&&(f!==void 0&&s&&n.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(x=>{o===x.type&&s&&n.addMark(m,g,o.create({...x.attrs,...e}))}))}),l},aae=(t,e={})=>({state:n,dispatch:r})=>{const s=Nn(t,n.schema);return Ure(s,e)(n,r)},lae=(t,e={})=>({state:n,dispatch:r})=>{const s=Nn(t,n.schema);return zre(s,e)(n,r)},cae=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},uae=class{constructor(e){var n;this.find=e.find,this.handler=e.handler,this.undoable=(n=e.undoable)!=null?n:!0}},dae=(t,e)=>{if(DT(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function x0(t){var e;const{editor:n,from:r,to:s,text:i,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=Boe(c)+i;return o.forEach(f=>{if(d)return;const p=dae(h,f.find);if(!p)return;const m=l.state.tr,g=zy({state:l.state,transaction:m}),x={from:r-(p[0].length-i.length),to:s},{commands:b,chain:v,can:w}=new Vy({editor:n,state:g});f.handler({state:g,range:x,match:p,commands:b,chain:v,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:r,to:s,text:i}),l.dispatch(m),d=!0)}),d}function hae(t){const{editor:e,rules:n}=t,r=new Ie({state:{init(){return null},apply(s,i,o){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=$T(Q.from(d),o.schema);const{from:h}=l,f=h+d.length;x0({editor:e,from:h,to:f,text:d,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,a){return x0({editor:e,from:i,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&x0({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?x0({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function fae(t){return Object.prototype.toString.call(t).slice(8,-1)}function y0(t){return fae(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function b7(t,e){const n={...t};return y0(t)&&y0(e)&&Object.keys(e).forEach(r=>{y0(e[r])&&y0(t[r])?n[r]=b7(t[r],e[r]):n[r]=e[r]}),n}var WT=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...mt(Ee(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...mt(Ee(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>b7(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},qs=class x7 extends WT{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new x7(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function pae(t){return typeof t=="number"}var mae=class{constructor(t){this.find=t.find,this.handler=t.handler}},gae=(t,e,n)=>{if(DT(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function bae(t){const{editor:e,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:d}=new Vy({editor:e,state:n}),h=[];return n.doc.nodesBetween(r,s,(p,m)=>{var g,x,b,v,w;if((x=(g=p.type)==null?void 0:g.spec)!=null&&x.code||!(p.isText||p.isTextblock||p.isInline))return;const S=(w=(v=(b=p.content)==null?void 0:b.size)!=null?v:p.nodeSize)!=null?w:0,E=Math.max(r,m),C=Math.min(s,m+S);if(E>=C)return;const T=p.isText?p.text||"":p.textBetween(E-m,C-m,void 0,"");gae(T,i.find,o).forEach(O=>{if(O.index===void 0)return;const N=E+O.index+1,R=N+O[0].length,M={from:n.tr.mapping.map(N),to:n.tr.mapping.map(R)},W=i.handler({state:n,range:M,match:O,commands:l,chain:c,can:d,pasteEvent:o,dropEvent:a});h.push(W)})}),h.every(p=>p!==null)}var v0=null,xae=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function yae(t){const{editor:e,rules:n}=t;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:h,to:f,rule:p,pasteEvt:m})=>{const g=d.tr,x=zy({state:d,transaction:g});if(!(!bae({editor:e,state:x,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new Ie({view(h){const f=m=>{var g;r=(g=h.dom.parentElement)!=null&&g.contains(m.target)?h.dom.parentElement:null,r&&(v0=e)},p=()=>{v0&&(v0=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(i=r===h.dom.parentElement,a=f,!i){const p=v0;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(h,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,p)=>{const m=h[0],g=m.getMeta("uiEvent")==="paste"&&!s,x=m.getMeta("uiEvent")==="drop"&&!i,b=m.getMeta("applyPasteRules"),v=!!b;if(!g&&!x&&!v)return;if(v){let{text:E}=b;typeof E=="string"?E=E:E=$T(Q.from(E),p.schema);const{from:C}=b,T=C+E.length,_=xae(E);return l({rule:d,state:p,from:C,to:{b:T},pasteEvt:_})}const w=f.doc.content.findDiffStart(p.doc.content),S=f.doc.content.findDiffEnd(p.doc.content);if(!(!pae(w)||!S||w===S.b))return l({rule:d,state:p,from:w,to:S,pasteEvt:o})}}))}var Jy=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=HT(t),this.schema=u7(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:xw(e.name,this.schema)},r=Ee(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return FT([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:xw(r.name,this.schema)},i=[],o=Ee(r,"addKeyboardShortcuts",s);let a={};if(r.type==="mark"&&Ee(r,"exitable",s)&&(a.ArrowRight=()=>qs.handleExit({editor:t,mark:r})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=X9(a);i.push(l);const c=Ee(r,"addInputRules",s);if(q4(r,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=hae({editor:t,rules:f}),m=Array.isArray(p)?p:[p];i.push(...m)}}const d=Ee(r,"addPasteRules",s);if(q4(r,t.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=yae({editor:t,rules:f});i.push(...p)}}const h=Ee(r,"addProseMirrorPlugins",s);if(h){const f=h();i.push(...f)}return i})}get attributes(){return c7(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Pd(this.extensions);return Object.fromEntries(e.filter(n=>!!Ee(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Nn(n.name,this.schema)},i=Ee(n,"addNodeView",s);if(!i)return[];const o=i();if(!o)return[];const a=(l,c,d,h,f)=>{const p=Hb(l,r);return o({node:l,view:c,getPos:d,decorations:h,innerDecorations:f,editor:t,extension:n,HTMLAttributes:p})};return[n.name,a]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Pd(this.extensions);return Object.fromEntries(e.filter(n=>!!Ee(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ia(n.name,this.schema)},i=Ee(n,"addMarkView",s);if(!i)return[];const o=(a,l,c)=>{const d=Hb(a,r);return i()({mark:a,view:l,inline:c,editor:t,extension:n,HTMLAttributes:d,updateAttributes:h=>{Iae(a,t,h)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:xw(e.name,this.schema)};e.type==="mark"&&((n=mt(Ee(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=Ee(e,"onBeforeCreate",r),i=Ee(e,"onCreate",r),o=Ee(e,"onUpdate",r),a=Ee(e,"onSelectionUpdate",r),l=Ee(e,"onTransaction",r),c=Ee(e,"onFocus",r),d=Ee(e,"onBlur",r),h=Ee(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};Jy.resolve=HT;Jy.sort=FT;Jy.flatten=BT;var Au={};PT(Au,{ClipboardTextSerializer:()=>v7,Commands:()=>w7,Delete:()=>k7,Drop:()=>E7,Editable:()=>C7,FocusEvents:()=>T7,Keymap:()=>N7,Paste:()=>_7,Tabindex:()=>A7,TextDirection:()=>j7,focusEventsPluginKey:()=>S7});var ut=class y7 extends WT{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new y7(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},v7=ut.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ie({key:new We("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(d=>d.$from.pos)),a=Math.max(...i.map(d=>d.$to.pos)),l=h7(n);return d7(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),w7=ut.create({name:"commands",addCommands(){return{...Z9}}}),k7=ut.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const i=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const d=Gy(t.before,[t,...e]);UT(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const x=g+m.nodeSize-2,b=p.oldRange.from<=g&&x<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:x,newFrom:d.mapping.map(g),newTo:d.mapping.map(x),deletedRange:p.oldRange,newRange:p.newRange,partial:!b,editor:this.editor,transaction:t,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,m)=>{var g,x;if(p instanceof ri){const b=f.slice(m).map(p.from,-1),v=f.slice(m).map(p.to),w=f.invert().map(b,-1),S=f.invert().map(v),E=(g=d.doc.nodeAt(b-1))==null?void 0:g.marks.some(T=>T.eq(p.mark)),C=(x=d.doc.nodeAt(v))==null?void 0:x.marks.some(T=>T.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:S},newRange:{from:b,to:v},partial:!!(C||E),editor:this.editor,transaction:t,combinedTransform:d})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(i,0):i()}}),E7=ut.create({name:"drop",addProseMirrorPlugins(){return[new Ie({key:new We("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),C7=ut.create({name:"editable",addProseMirrorPlugins(){return[new Ie({key:new We("editable"),props:{editable:()=>this.editor.options.editable}})]}}),S7=new We("focusEvents"),T7=ut.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ie({key:S7,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),N7=ut.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:h}=l,{pos:f,parent:p}=h,m=h.parent.isTextblock&&f>0?a.doc.resolve(f-1):h,g=m.parent.type.spec.isolating,x=h.pos-h.parentOffset,b=g&&m.parent.childCount===1?x===h.pos:Ne.atStart(c).from===f;return!d||!p.type.isTextblock||p.textContent.length||!b||b&&h.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return LT()||i7()?i:s},addProseMirrorPlugins(){return[new Ie({key:new We("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),s=t.some(g=>g.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:a}=e.selection,l=Ne.atStart(e.doc).from,c=Ne.atEnd(e.doc).to;if(i||!(o===l&&a===c)||!Ky(n.doc))return;const f=n.tr,p=zy({state:n,transaction:f}),{commands:m}=new Vy({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),_7=ut.create({name:"paste",addProseMirrorPlugins(){return[new Ie({key:new We("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),A7=ut.create({name:"tabindex",addProseMirrorPlugins(){return[new Ie({key:new We("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),j7=ut.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Pd(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Ie({key:new We("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),vae=class ju{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ju(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ju(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ju(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=this.pos+r+(i?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!s&&a.depth<=this.depth)return;const l=new ju(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),e.push(new ju(a,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const i=s.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(i[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(l=>n[l]===o.node.attrs[l])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},wae=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function kae(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var Eae=class extends cae{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:Foe,createMappablePosition:Hoe},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:i})=>this.options.onDrop(r,s,i)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=n7(e,this.options.autofocus);this.editorState=qu.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=kae(wae,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=l7(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;n=n.filter(o=>!o.key.startsWith(i))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[C7,v7.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),w7,T7,N7,A7,E7,_7,k7,j7.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Jy(r,this)}createCommandManager(){this.commandManager=new Vy({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Fb(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Fb(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new Q9(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return f7(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return $oe(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return $T(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return Roe(this.state.doc,{blockSeparator:e,textSerializers:{...h7(this.schema),...n}})}get isEmpty(){return Ky(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new vae(e,this)}get $doc(){return this.$pos(0)}};function Dd(t){return new uae({find:t.find,handler:({state:e,range:n,match:r})=>{const s=mt(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),d=c+o.length;if(zT(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;d<n.to&&i.delete(d,n.to),c>n.from&&i.delete(n.from+l,c);const f=n.from+l+o.length;i.addMark(n.from+l,f,t.type.create(s||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}var Cae={};PT(Cae,{createAtomBlockMarkdownSpec:()=>Sae,createBlockMarkdownSpec:()=>Tae,createInlineMarkdownSpec:()=>Aae,parseAttributes:()=>qT,parseIndentedBlocks:()=>jae,renderNestedMarkdownContent:()=>Oae,serializeAttributes:()=>GT});function qT(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const c=s.map(d=>d.trim().slice(1));e.class=c.join(" ")}const i=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,c,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=n[f];p&&(e[c]=p.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function GT(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function Sae(t){const{nodeName:e,name:n,parseAttributes:r=qT,serializeAttributes:s=GT,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:a}=t,l=n||e,c=d=>{if(!a)return d;const h={};return a.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...i,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const g=m[1]||"",x=r(g);if(!o.find(v=>!(v in x)))return{type:e,raw:m[0],attributes:x}}},renderMarkdown:d=>{const h=c(d.attrs||{}),f=s(h),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function Tae(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=qT,serializeAttributes:i=GT,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=n||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(r){const g=r(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const m={...o,...h.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=h.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(h,f,p){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),x=h.match(g);if(!x)return;const[b,v=""]=x,w=s(v);let S=1;const E=b.length;let C="";const T=/^:::([\w-]*)(\s.*)?/gm,_=h.slice(E);for(T.lastIndex=0;;){const O=T.exec(_);if(O===null)break;const N=O.index,R=O[1];if(!((m=O[2])!=null&&m.endsWith(":::"))){if(R)S+=1;else if(S-=1,S===0){const M=_.slice(0,N);C=M.trim();const W=h.slice(0,E+N+O[0].length);let D=[];if(C)if(a==="block")for(D=p.blockTokens(M),D.forEach(B=>{B.text&&(!B.tokens||B.tokens.length===0)&&(B.tokens=p.inlineTokens(B.text))});D.length>0;){const B=D[D.length-1];if(B.type==="paragraph"&&(!B.text||B.text.trim()===""))D.pop();else break}else D=p.inlineTokens(C);return{type:e,raw:W,attributes:w,content:C,tokens:D}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),m=i(p),g=m?` {${m}}`:"",x=f.renderChildren(h.content||[],`

`);return`:::${c}${g}

${x}

:::`}}}function Nae(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,i,o]=r;e[s]=i||o,r=n.exec(t)}return e}function _ae(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function Aae(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=Nae,serializeAttributes:i=_ae,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=n||e,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,x=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const b=f[g];if(x!==void 0&&b===x)return;p[g]=b}}),p},h=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=r?r(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),x=f.match(g);if(!x)return;let b="",v="";if(a){const[,S]=x;v=S}else{const[,S,E]=x;v=S,b=E||""}const w=s(v.trim());return{type:e,raw:x[0],content:b.trim(),attributes:w}}},renderMarkdown:f=>{let p="";r?p=r(f):f.content&&f.content.length>0&&(p=f.content.filter(b=>b.type==="text").map(b=>b.text).join(""));const m=d(f.attrs||{}),g=i(m),x=g?` ${g}`:"";return a?`[${c}${x}]`:`[${c}${x}]${p}[/${c}]`}}}function jae(t,e,n){var r,s,i,o;const a=t.split(`
`),l=[];let c="",d=0;const h=e.baseIndentSize||2;for(;d<a.length;){const f=a[d],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){d+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:x}=m;c=`${c}${f}
`;const b=[x];for(d+=1;d<a.length;){const E=a[d];if(E.trim()===""){const T=a.slice(d+1).findIndex(N=>N.trim()!=="");if(T===-1)break;if((((s=(r=a[d+1+T].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>g){b.push(E),c=`${c}${E}
`,d+=1;continue}else break}if((((o=(i=E.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>g)b.push(E),c=`${c}${E}
`,d+=1;else break}let v;const w=b.slice(1);if(w.length>0){const E=w.map(C=>C.slice(g+h)).join(`
`);E.trim()&&(e.customNestedParser?v=e.customNestedParser(E):v=n.blockTokens(E))}const S=e.createToken(m,v);l.push(S)}if(l.length!==0)return{items:l,raw:c}}function Oae(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[i,...o]=t.content,a=e.renderChildren([i]),l=[`${s}${a}`];return o&&o.length>0&&o.forEach(c=>{const d=e.renderChildren([c]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(h)}}),l.join(`
`)}function Iae(t,e,n={}){const{state:r}=e,{doc:s,tr:i}=r,o=t;s.descendants((a,l)=>{const c=i.mapping.map(l),d=i.mapping.map(l)+a.nodeSize;let h=null;if(a.marks.forEach(p=>{if(p!==o)return!1;h=p}),!h)return;let f=!1;if(Object.keys(n).forEach(p=>{n[p]!==h.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...n});i.removeMark(c,d,t.type),i.addMark(c,d,p)}}),i.docChanged&&e.view.dispatch(i)}var Ei=class O7 extends WT{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new O7(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Ic(t){return new mae({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const i=mt(t.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const d=l.search(/\S/),h=n.from+l.indexOf(a),f=h+a.length;if(zT(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(x=>x===t.type&&x!==m.mark.type)).filter(m=>m.to>h).length)return null;f<n.to&&o.delete(f,n.to),h>n.from&&o.delete(n.from+d,h),c=n.from+d+a.length,o.addMark(n.from+d,c,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}var w0,Mae=new Uint8Array(16);function Rae(){if(!w0&&(w0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!w0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w0(Mae)}const Pae=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Dae(t){return typeof t=="string"&&Pae.test(t)}var On=[];for(var ww=0;ww<256;++ww)On.push((ww+256).toString(16).substr(1));function Lae(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(On[t[e+0]]+On[t[e+1]]+On[t[e+2]]+On[t[e+3]]+"-"+On[t[e+4]]+On[t[e+5]]+"-"+On[t[e+6]]+On[t[e+7]]+"-"+On[t[e+8]]+On[t[e+9]]+"-"+On[t[e+10]]+On[t[e+11]]+On[t[e+12]]+On[t[e+13]]+On[t[e+14]]+On[t[e+15]]).toLowerCase();if(!Dae(n))throw TypeError("Stringified UUID is invalid");return n}function I7(t,e,n){t=t||{};var r=t.random||(t.rng||Rae)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Lae(r)}function Bae(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function $ae(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Bae(e)}const Qy=ut.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return I7()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new Ie({key:new We("uniqueID"),appendTransaction:(n,r,s)=>{const i=n.some(p=>p.docChanged)&&!r.doc.eq(s.doc),o=this.options.filterTransaction&&n.some(p=>{var m,g;return!((g=(m=this.options).filterTransaction)!=null&&g.call(m,p))});if(!i||o)return;const{tr:a}=s,{types:l,attributeName:c,generateID:d}=this.options,h=Gy(r.doc,n),{mapping:f}=h;if(UT(h).forEach(({newRange:p})=>{const m=a7(s.doc,p,b=>l.includes(b.type.name)),g=m.map(({node:b})=>b.attrs[c]).filter(b=>b!==null),x=$ae(g);m.forEach(({node:b,pos:v})=>{var w;const S=(w=a.doc.nodeAt(v))==null?void 0:w.attrs[c];if(S===null){const C=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(C)===null){const T=JSON.parse(JSON.stringify(s.doc.toJSON()));if(T.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(T.content)===JSON.stringify(C.toJSON())){a.setNodeMarkup(v,void 0,{...b.attrs,[c]:"initialBlockId"});return}}a.setNodeMarkup(v,void 0,{...b.attrs,[c]:d()});return}const{deleted:E}=f.invert().mapResult(v);E&&x.includes(S)&&a.setNodeMarkup(v,void 0,{...b.attrs,[c]:d()})})}),!!a.steps.length)return a.setMeta("uniqueID",!0),a},view(n){const r=s=>{let i;t=!((i=n.dom.parentElement)===null||i===void 0)&&i.contains(s.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let s;return t!==n.dom.parentElement||((s=r.dataTransfer)===null||s===void 0?void 0:s.effectAllowed)==="copy"?e=!0:e=!1,t=null,!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:s}=this.options,i=o=>{const a=[];return o.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(i(l.content)));return}const c=l.type.create({...l.attrs,[s]:null},i(l.content),l.marks);a.push(c)}),Q.from(a)};return e=!1,new ue(i(n.content),n.openStart,n.openEnd)}}})]}});function K4(t){return t.type==="link"}function M7(t){return typeof t!="string"&&t.type==="link"}function Mc(t){return typeof t!="string"&&t.type==="text"}function cl(t){var e,n,r,s,i;return ul(t)?{...t}:vp(t)?{type:"tableCell",content:[].concat(t.content),props:{backgroundColor:((e=t.props)==null?void 0:e.backgroundColor)??"default",textColor:((n=t.props)==null?void 0:n.textColor)??"default",textAlignment:((r=t.props)==null?void 0:r.textAlignment)??"left",colspan:((s=t.props)==null?void 0:s.colspan)??1,rowspan:((i=t.props)==null?void 0:i.rowspan)??1}}:{type:"tableCell",content:[].concat(t),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function vp(t){return t!=null&&typeof t!="string"&&!Array.isArray(t)&&t.type==="tableCell"}function ul(t){return vp(t)&&t.props!==void 0&&t.content!==void 0}function Rc(t){return ul(t)?t.props.colspan??1:1}function wp(t){return ul(t)?t.props.rowspan??1:1}let lo=class extends Error{constructor(e){super(`Unreachable case: ${e}`)}};function Fe(t,e=!0){const{"data-test":n,...r}=t;if(Object.keys(r).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}function dl(t,e){const n=t.resolve(e);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,s=n.node(r);for(;r>0;){if(s.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:s};r--,s=n.node(r)}const i=[];t.descendants((a,l)=>{a.type.isInGroup("bnBlock")&&i.push(l)}),console.warn(`Position ${e} is not within a blockContainer node.`);const o=t.resolve(i.find(a=>a>=e)||i[i.length-1]);return{posBeforeNode:o.pos,node:o.nodeAfter}}function YT(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type.name}`);const n=t,r=e,s=r+n.nodeSize,i={node:n,beforePos:r,afterPos:s};if(n.type.name==="blockContainer"){let o,a;if(n.forEach((l,c)=>{if(l.type.spec.group==="blockContent"){const d=l,h=r+c+1,f=h+l.nodeSize;o={node:d,beforePos:h,afterPos:f}}else if(l.type.name==="blockGroup"){const d=l,h=r+c+1,f=h+l.nodeSize;a={node:d,beforePos:h,afterPos:f}}}),!o)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:i,blockContent:o,childContainer:a,blockNoteType:o.node.type.name}}else{if(!i.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${i.node}`);return{isBlockContainer:!1,bnBlock:i,childContainer:i,blockNoteType:i.node.type.name}}}function hl(t){return YT(t.node,t.posBeforeNode)}function Xy(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return YT(t.nodeAfter,t.pos)}function Tr(t){const e=dl(t.doc,t.selection.anchor);return hl(e)}function cm(t){const e=dl(t.doc,t.selection.anchor);return hl(e)}function tn(t){return"doc"in t?t.doc.type.schema:t.type.schema}function R7(t){return t.cached.blockNoteEditor}function um(t){return R7(t).schema}function KT(t){return um(t).blockSchema}function JT(t){return um(t).inlineContentSchema}function ah(t){return um(t).styleSchema}function QT(t){return R7(t).blockCache}function P7(t,e,n){var r,s;const i={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},o=[];t.content.forEach((a,l,c)=>{const d={cells:[]};c===0&&a.content.forEach(h=>{let f=h.attrs.colwidth;f==null&&(f=new Array(h.attrs.colspan??1).fill(void 0)),i.columnWidths.push(...f)}),d.cells=a.content.content.map((h,f)=>(o[c]||(o[c]=[]),o[c][f]=h.type.name==="tableHeader",{type:"tableCell",content:h.content.content.map(p=>Zy(p,e,n)).reduce((p,m)=>{if(!p.length)return m;const g=p[p.length-1],x=m[0];return x&&Mc(g)&&Mc(x)&&JSON.stringify(g.styles)===JSON.stringify(x.styles)?(g.text+=`
`+x.text,p.push(...m.slice(1)),p):(p.push(...m),p)},[]),props:{colspan:h.attrs.colspan,rowspan:h.attrs.rowspan,backgroundColor:h.attrs.backgroundColor,textColor:h.attrs.textColor,textAlignment:h.attrs.textAlignment}})),i.rows.push(d)});for(let a=0;a<o.length;a++)(r=o[a])!=null&&r.every(l=>l)&&(i.headerRows=(i.headerRows??0)+1);for(let a=0;a<((s=o[0])==null?void 0:s.length);a++)o!=null&&o.every(l=>l[a])&&(i.headerCols=(i.headerCols??0)+1);return i}function Zy(t,e,n){const r=[];let s;return t.content.forEach(i=>{if(i.type.name==="hardBreak"){if(s)if(Mc(s))s.text+=`
`;else if(K4(s))s.content[s.content.length-1].text+=`
`;else throw new Error("unexpected");else s={type:"text",text:`
`,styles:{}};return}if(i.type.name!=="link"&&i.type.name!=="text"){if(!e[i.type.name]){console.warn("unrecognized inline content type",i.type.name);return}s&&(r.push(s),s=void 0),r.push(XT(i,e,n));return}const o={};let a;for(const l of i.marks)if(l.type.name==="link")a=l;else{const c=n[l.type.name];if(!c){if(l.type.spec.blocknoteIgnore)continue;throw new Error(`style ${l.type.name} not found in styleSchema`)}if(c.propSchema==="boolean")o[c.type]=!0;else if(c.propSchema==="string")o[c.type]=l.attrs.stringValue;else throw new lo(c.propSchema)}s?Mc(s)?a?(r.push(s),s={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:o}]}):JSON.stringify(s.styles)===JSON.stringify(o)?s.text+=i.textContent:(r.push(s),s={type:"text",text:i.textContent,styles:o}):K4(s)&&(a?s.href===a.attrs.href?JSON.stringify(s.content[s.content.length-1].styles)===JSON.stringify(o)?s.content[s.content.length-1].text+=i.textContent:s.content.push({type:"text",text:i.textContent,styles:o}):(r.push(s),s={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:o}]}):(r.push(s),s={type:"text",text:i.textContent,styles:o})):a?s={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:o}]}:s={type:"text",text:i.textContent,styles:o}}),s&&r.push(s),r}function XT(t,e,n){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const r={},s=e[t.type.name];for(const[o,a]of Object.entries(t.attrs)){if(!s)throw Error("ic node is of an unrecognized type: "+t.type.name);const l=s.propSchema;o in l&&(r[o]=a)}let i;return s.content==="styled"?i=Zy(t,e,n):i=void 0,{type:t.type.name,props:r,content:i}}function Ut(t,e,n=KT(e),r=JT(e),s=ah(e),i=QT(e)){var o;if(!t.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+t.type.name);const a=i==null?void 0:i.get(t);if(a)return a;const l=YT(t,0);let c=l.bnBlock.node.attrs.id;c===null&&(c=Qy.options.generateID());const d=n[l.blockNoteType];if(!d)throw Error("Block is of an unrecognized type: "+l.blockNoteType);const h={};for(const[x,b]of Object.entries({...t.attrs,...l.isBlockContainer?l.blockContent.node.attrs:{}})){const v=d.propSchema;x in v&&!(v[x].default===void 0&&b===void 0)&&(h[x]=b)}const f=n[l.blockNoteType],p=[];(o=l.childContainer)==null||o.node.forEach(x=>{p.push(Ut(x,e,n,r,s,i))});let m;if(f.content==="inline"){if(!l.isBlockContainer)throw new Error("impossible");m=Zy(l.blockContent.node,r,s)}else if(f.content==="table"){if(!l.isBlockContainer)throw new Error("impossible");m=P7(l.blockContent.node,r,s)}else if(f.content==="none")m=void 0;else throw new lo(f.content);const g={id:c,type:f.type,props:h,content:m,children:p};return i==null||i.set(t,g),g}function Fae(t,e=tn(t),n=KT(e),r=JT(e),s=ah(e),i=QT(e)){const o=[];return t.firstChild&&t.firstChild.descendants(a=>(o.push(Ut(a,e,n,r,s,i)),!1)),o}function Hae(t,e,n=KT(e),r=JT(e),s=ah(e),i=QT(e)){function o(a,l,c){if(a.type.name!=="blockGroup")throw new Error("unexpected");const d=[];let h,f;return a.forEach((p,m,g)=>{if(p.type.name!=="blockContainer")throw new Error("unexpected");if(p.childCount===0)return;if(p.childCount===0||p.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+p.childCount);const x=g===0,b=g===a.childCount-1;if(p.firstChild.type.name==="blockGroup"){if(!x)throw new Error("unexpected");const E=o(p.firstChild,Math.max(0,l-1),b?Math.max(0,c-1):0);h=E.blockCutAtStart,b&&(f=E.blockCutAtEnd),d.push(...E.blocks);return}const v=Ut(p,e,n,r,s,i),w=p.childCount>1?p.child(1):void 0;let S=[];if(w){const E=o(w,0,b?Math.max(0,c-1):0);S=E.blocks,b&&(f=E.blockCutAtEnd)}b&&!w&&c>1&&(f=v.id),x&&l>1&&(h=v.id),d.push({...v,children:S})}),{blocks:d,blockCutAtStart:h,blockCutAtEnd:f}}if(t.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(t.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return o(t.content.firstChild,Math.max(t.openStart-1,0),Math.max(t.openEnd-1,0))}function Nl(t){const{height:e,width:n}=ZT(t),r=new Array(e).fill(!1).map(()=>new Array(n).fill(null)),s=(i,o)=>{for(let a=i;a<e;a++)for(let l=o;l<n;l++)if(!r[a][l])return{row:a,col:l};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let i=0;i<t.content.rows.length;i++)for(let o=0;o<t.content.rows[i].cells.length;o++){const a=cl(t.content.rows[i].cells[o]),l=wp(a),c=Rc(a),{row:d,col:h}=s(i,o);for(let f=d;f<d+l;f++)for(let p=h;p<h+c;p++){if(r[f][p])throw new Error(`Unable to create occupancy grid for table, cell at ${f},${p} is already occupied`);r[f][p]={row:i,col:o,rowspan:l,colspan:c,cell:a}}}return r}function kp(t){const e=new Set;return t.map(n=>({cells:n.map(r=>e.has(r.row+":"+r.col)?!1:(e.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function Pc(t,e,n=Nl(e)){for(let r=0;r<n.length;r++)for(let s=0;s<n[r].length;s++){const i=n[r][s];if(i&&i.row===t.row&&i.col===t.col)return{row:r,col:s,cell:i.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${t.row},${t.col} is not occupied`)}function ZT(t){const e=t.content.rows.length;let n=0;return t.content.rows.forEach(r=>{let s=0;r.cells.forEach(i=>{s+=Rc(i)}),n=Math.max(n,s)}),{height:e,width:n}}function D7(t,e,n=Nl(e)){var r;const s=(r=n[t.row])==null?void 0:r[t.col];if(s)return{row:s.row,col:s.col,cell:s.cell}}function N2(t,e){var n;const r=Nl(t);if(e<0||e>=r.length)return[];let s=0;for(let o=0;o<e;o++){const a=(n=r[s])==null?void 0:n[0];if(!a)return[];s+=a.rowspan}const i=new Array(r[0].length).fill(!1).map((o,a)=>D7({row:s,col:a},t,r)).filter(o=>o!==void 0);return i.filter((o,a)=>i.findIndex(l=>l.row===o.row&&l.col===o.col)===a)}function _2(t,e){var n;const r=Nl(t);if(e<0||e>=r[0].length)return[];let s=0;for(let o=0;o<e;o++){const a=(n=r[0])==null?void 0:n[s];if(!a)return[];s+=a.colspan}const i=new Array(r.length).fill(!1).map((o,a)=>D7({row:a,col:s},t,r)).filter(o=>o!==void 0);return i.filter((o,a)=>i.findIndex(l=>l.row===o.row&&l.col===o.col)===a)}function Uae(t,e,n,r=Nl(t)){const{col:s}=Pc({row:0,col:e},t,r),{col:i}=Pc({row:0,col:n},t,r);return r.forEach(o=>{const[a]=o.splice(s,1);o.splice(i,0,a)}),kp(r)}function zae(t,e,n,r=Nl(t)){const{row:s}=Pc({row:e,col:0},t,r),{row:i}=Pc({row:n,col:0},t,r),[o]=r.splice(s,1);return r.splice(i,0,o),kp(r)}function A2(t){return t?vp(t)?A2(t.content):typeof t=="string"?t.length===0:Array.isArray(t)?t.every(e=>typeof e=="string"?e.length===0:Mc(e)?e.text.length===0:M7(e)?typeof e.content=="string"?e.content.length===0:e.content.every(n=>n.text.length===0):!1):!1:!0}function Vae(t,e,n=Nl(t)){if(e==="columns"){let i=0;for(let o=n[0].length-1;o>=0&&n.every(a=>A2(a[o].cell)&&a[o].colspan===1);o--)i++;for(let o=n.length-1;o>=0;o--){const a=Math.max(n[o].length-i,1);n[o]=n[o].slice(0,a)}return kp(n)}let r=0;for(let i=n.length-1;i>=0&&n[i].every(o=>A2(o.cell)&&o.rowspan===1);i--)r++;const s=Math.min(r,n.length-1);return n.splice(n.length-s,s),kp(n)}function Wae(t,e,n,r=Nl(t)){const{width:s,height:i}=ZT(t);if(e==="columns")r.forEach((o,a)=>{if(n>=0)for(let l=0;l<n;l++)o.push({row:a,col:Math.max(...o.map(c=>c.col))+1,rowspan:1,colspan:1,cell:cl("")});else o.splice(s+n,-1*n)});else if(n>0)for(let o=0;o<n;o++){const a=new Array(s).fill(null).map((l,c)=>({row:i+o,col:c,rowspan:1,colspan:1,cell:cl("")}));r.push(a)}else n<0&&r.splice(i+n,-1*n);return kp(r)}function L7(t,e,n){const r=N2(t,n);if(!r.some(o=>wp(o.cell)>1))return!0;let s=n,i=n;return r.forEach(o=>{const a=wp(o.cell);s=Math.max(s,o.row+a-1),i=Math.min(i,o.row)}),e<n?n===s:n===i}function B7(t,e,n){const r=_2(t,n);if(!r.some(o=>Rc(o.cell)>1))return!0;let s=n,i=n;return r.forEach(o=>{const a=Rc(o.cell);s=Math.max(s,o.col+a-1),i=Math.min(i,o.col)}),e<n?n===s:n===i}function qae(t,e,n){const r=Pc(t,n),s=Pc(e,n);return r.col===s.col}function J4(t,e,n,r){const s=[];for(const[i,o]of Object.entries(t.styles||{})){const a=n[i];if(!a)throw new Error(`style ${i} not found in styleSchema`);if(a.propSchema==="boolean")o&&s.push(e.mark(i));else if(a.propSchema==="string")o&&s.push(e.mark(i,{stringValue:o}));else throw new lo(a.propSchema)}return!r||!e.nodes[r].spec.code?t.text.split(/(\n)/g).filter(i=>i.length>0).map(i=>i===`
`?e.nodes.hardBreak.createChecked():e.text(i,s)):t.text.length>0?[e.text(t.text,s)]:[]}function Gae(t,e,n){const r=e.marks.link.create({href:t.href});return j2(t.content,e,n).map(s=>{if(s.type.name==="text")return s.mark([...s.marks,r]);if(s.type.name==="hardBreak")return s;throw new Error("unexpected node type")})}function j2(t,e,n,r){const s=[];if(typeof t=="string")return s.push(...J4({text:t,styles:{}},e,n,r)),s;for(const i of t)s.push(...J4(i,e,n,r));return s}function mi(t,e,n,r=ah(e)){const s=[];for(const i of t)typeof i=="string"?s.push(...j2(i,e,r,n)):M7(i)?s.push(...Gae(i,e,r)):Mc(i)?s.push(...j2([i],e,r,n)):s.push($7(i,e,r));return s}function e1(t,e,n=ah(e)){const r=[],s=new Array(t.headerRows??0).fill(!0),i=new Array(t.headerCols??0).fill(!0),o=t.columnWidths??[];for(let a=0;a<t.rows.length;a++){const l=t.rows[a],c=[],d=s[a];for(let f=0;f<l.cells.length;f++){const p=l.cells[f],m=i[f],g=void 0;let x=null;const b=Pc({row:a,col:f},{content:t});let v=o[b.col]?[o[b.col]]:null;if(p)if(typeof p=="string")x=e.text(p);else if(vp(p)){p.content&&(x=mi(p.content,e,"tableParagraph",n));const S=Rc(p);S>1&&(v=new Array(S).fill(!1).map((E,C)=>o[b.col+C]??void 0))}else x=mi(p,e,"tableParagraph",n);const w=e.nodes[m||d?"tableHeader":"tableCell"].createChecked({...vp(p)?p.props:{},colwidth:v},e.nodes.tableParagraph.createChecked(g,x));c.push(w)}const h=e.nodes.tableRow.createChecked({},c);r.push(h)}return r}function $7(t,e,n){let r,s=t.type;if(s===void 0&&(s="paragraph"),!e.nodes[s])throw new Error(`node type ${s} not found in schema`);if(!t.content)r=e.nodes[s].createChecked(t.props);else if(typeof t.content=="string"){const i=mi([t.content],e,s,n);r=e.nodes[s].createChecked(t.props,i)}else if(Array.isArray(t.content)){const i=mi(t.content,e,s,n);r=e.nodes[s].createChecked(t.props,i)}else if(t.content.type==="tableContent"){const i=e1(t.content,e,n);r=e.nodes[s].createChecked(t.props,i)}else throw new lo(t.content.type);return r}function Jc(t,e,n=ah(e)){let r=t.id;r===void 0&&(r=Qy.options.generateID());const s=[];if(t.children)for(const i of t.children)s.push(Jc(i,e,n));if(!t.type||e.nodes[t.type].isInGroup("blockContent")){const i=$7(t,e,n),o=s.length>0?e.nodes.blockGroup.createChecked({},s):void 0;return e.nodes.blockContainer.createChecked({id:r,...t.props},o?[i,o]:i)}else{if(e.nodes[t.type].isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:r,...t.props},s);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}let O2,I2;if(typeof WeakMap<"u"){let t=new WeakMap;O2=e=>t.get(e),I2=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;O2=r=>{for(let s=0;s<t.length;s+=2)if(t[s]==r)return t[s+1]},I2=(r,s)=>(n==10&&(n=0),t[n++]=r,t[n++]=s)}var Et=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,s=e/this.width|0;let i=r+1,o=s+1;for(let a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(let a=1;o<this.height&&this.map[e+this.width*a]==n;a++)o++;return{left:r,top:s,right:i,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:s,top:i,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:s==this.width)?null:this.map[i*this.width+(n<0?r-1:s)]:(n<0?i==0:o==this.height)?null:this.map[r+this.width*(n<0?i-1:o)]}rectBetween(t,e){const{left:n,right:r,top:s,bottom:i}=this.findCell(t),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(s,l),right:Math.max(r,a),bottom:Math.max(i,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let s=t.left;s<t.right;s++){const i=r*this.width+s,o=this.map[i];n[o]||(n[o]=!0,!(s==t.left&&s&&this.map[i-1]==o||r==t.top&&r&&this.map[i-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,s=0;;r++){const i=s+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const a=(t+1)*this.width;for(;o<a&&this.map[o]<s;)o++;return o==a?i-1:this.map[o]}s=i}}static get(t){return O2(t)||I2(t,Yae(t))}};function Yae(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Kae(t),n=t.childCount,r=[];let s=0,i=null;const o=[];for(let c=0,d=e*n;c<d;c++)r[c]=0;for(let c=0,d=0;c<n;c++){const h=t.child(c);d++;for(let m=0;;m++){for(;s<r.length&&r[s]!=0;)s++;if(m==h.childCount)break;const g=h.child(m),{colspan:x,rowspan:b,colwidth:v}=g.attrs;for(let w=0;w<b;w++){if(w+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:d,n:b-w});break}const S=s+w*e;for(let E=0;E<x;E++){r[S+E]==0?r[S+E]=d:(i||(i=[])).push({type:"collision",row:c,pos:d,n:x-E});const C=v&&v[E];if(C){const T=(S+E)%e*2,_=o[T];_==null||_!=C&&o[T+1]==1?(o[T]=C,o[T+1]=1):_==C&&o[T+1]++}}}s+=x,d+=g.nodeSize}const f=(c+1)*e;let p=0;for(;s<f;)r[s++]==0&&p++;p&&(i||(i=[])).push({type:"missing",row:c,n:p}),d++}(e===0||n===0)&&(i||(i=[])).push({type:"zero_sized"});const a=new Et(e,n,r,i);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(l=!0);return l&&Jae(a,o,t),a}function Kae(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const s=t.child(r);let i=0;if(n)for(let o=0;o<r;o++){const a=t.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}}for(let o=0;o<s.childCount;o++){const a=s.child(o);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=i:e!=i&&(e=Math.max(e,i))}return e}function Jae(t,e,n){t.problems||(t.problems=[]);const r={};for(let s=0;s<t.map.length;s++){const i=t.map[s];if(r[i])continue;r[i]=!0;const o=n.nodeAt(i);if(!o)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const d=e[(s+c)%t.width*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=Qae(l)))[c]=d)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function Qae(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function rr(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],s=r.spec.tableRole;s&&(e[s]=r)}}return e}const Ia=new We("selectingCells");function Dc(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Xae(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function po(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function eN(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Dc(e.$head)||Zae(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Zae(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function M2(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function ele(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function tN(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function F7(t,e,n){const r=t.node(-1),s=Et.get(r),i=t.start(-1),o=s.nextCell(t.pos-i,e,n);return o==null?null:t.node(0).resolve(i+o)}function Lc(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}function H7(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let s=0;s<n;s++)r.colwidth.splice(e,0,0)}return r}function tle(t,e,n){const r=rr(e.type.schema).header_cell;for(let s=0;s<t.height;s++)if(e.nodeAt(t.map[n+s*t.width]).type!=r)return!1;return!0}var pt=class Ao extends Ne{constructor(e,n=e){const r=e.node(-1),s=Et.get(r),i=e.start(-1),o=s.rectBetween(e.pos-i,n.pos-i),a=e.node(0),l=s.cellsInRect(o).filter(d=>d!=n.pos-i);l.unshift(n.pos-i);const c=l.map(d=>{const h=r.nodeAt(d);if(!h)throw new RangeError(`No cell with offset ${d} found`);const f=i+d+1;return new n9(a.resolve(f),a.resolve(f+h.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),s=e.resolve(n.map(this.$headCell.pos));if(M2(r)&&M2(s)&&tN(r,s)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?Ao.rowSelection(r,s):i&&this.isColSelection()?Ao.colSelection(r,s):new Ao(r,s)}return xe.between(r,s)}content(){const e=this.$anchorCell.node(-1),n=Et.get(e),r=this.$anchorCell.start(-1),s=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},o=[];for(let l=s.top;l<s.bottom;l++){const c=[];for(let d=l*n.width+s.left,h=s.left;h<s.right;h++,d++){const f=n.map[d];if(i[f])continue;i[f]=!0;const p=n.findCell(f);let m=e.nodeAt(f);if(!m)throw new RangeError(`No cell with offset ${f} found`);const g=s.left-p.left,x=p.right-s.right;if(g>0||x>0){let b=m.attrs;if(g>0&&(b=Lc(b,0,g)),x>0&&(b=Lc(b,b.colspan-x,x)),p.left<s.left){if(m=m.type.createAndFill(b),!m)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else m=m.type.create(b,m.content)}if(p.top<s.top||p.bottom>s.bottom){const b={...m.attrs,rowspan:Math.min(p.bottom,s.bottom)-Math.max(p.top,s.top)};p.top<s.top?m=m.type.createAndFill(b):m=m.type.create(b,m.content)}c.push(m)}o.push(e.child(l).copy(Q.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new ue(Q.from(a),1,1)}replace(e,n=ue.empty){const r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){const{$from:a,$to:l}=s[o],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),o?ue.empty:n)}const i=Ne.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,n){this.replace(e,new ue(Q.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Et.get(n),s=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let o=0;o<i.length;o++)e(n.nodeAt(i[o]),s+i[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),s=Et.get(r),i=e.start(-1),o=s.findCell(e.pos-i),a=s.findCell(n.pos-i),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(i+s.map[o.left])),a.bottom<s.height&&(n=l.resolve(i+s.map[s.width*(s.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(i+s.map[a.left])),o.bottom<s.height&&(e=l.resolve(i+s.map[s.width*(s.height-1)+o.right-1]))),new Ao(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Et.get(e),r=this.$anchorCell.start(-1),s=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(s,i)>0)return!1;const o=s+this.$anchorCell.nodeAfter.attrs.colspan,a=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==n.width}eq(e){return e instanceof Ao&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),s=Et.get(r),i=e.start(-1),o=s.findCell(e.pos-i),a=s.findCell(n.pos-i),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(i+s.map[o.top*s.width])),a.right<s.width&&(n=l.resolve(i+s.map[s.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(i+s.map[a.top*s.width])),o.right<s.width&&(e=l.resolve(i+s.map[s.width*(o.top+1)-1]))),new Ao(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Ao(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Ao(e.resolve(n),e.resolve(r))}getBookmark(){return new nle(this.$anchorCell.pos,this.$headCell.pos)}};pt.prototype.visible=!1;Ne.jsonID("cell",pt);var nle=class U7{constructor(e,n){this.anchor=e,this.head=n}map(e){return new U7(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&tN(n,r)?new pt(n,r):Ne.near(r,1)}};function rle(t){if(!(t.selection instanceof pt))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(at.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Re.create(t.doc,e)}function sle({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,s=t.depth;for(;s>=0&&!(t.after(s+1)<t.end(s));s--,n++);for(let i=e.depth;i>=0&&!(e.before(i+1)>e.start(i));i--,r--);return n==r&&/row|table/.test(t.node(s).type.spec.tableRole)}function ile({$from:t,$to:e}){let n,r;for(let s=t.depth;s>0;s--){const i=t.node(s);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let s=e.depth;s>0;s--){const i=e.node(s);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&e.parentOffset===0}function ole(t,e,n){const r=(e||t).selection,s=(e||t).doc;let i,o;if(r instanceof ve&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")i=pt.create(s,r.from);else if(o=="row"){const a=s.resolve(r.from+1);i=pt.rowSelection(a,a)}else if(!n){const a=Et.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];i=pt.create(s,l+1,c)}}else r instanceof xe&&sle(r)?i=xe.create(s,r.from):r instanceof xe&&ile(r)&&(i=xe.create(s,r.$from.start(),r.$from.end()));return i&&(e||(e=t.tr)).setSelection(i),e}const ale=new We("fix-tables");function z7(t,e,n,r){const s=t.childCount,i=e.childCount;e:for(let o=0,a=0;o<i;o++){const l=e.child(o);for(let c=a,d=Math.min(s,o+3);c<d;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<s&&t.child(a).sameMarkup(l)?z7(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function lle(t,e){let n;const r=(s,i)=>{s.type.spec.tableRole=="table"&&(n=cle(t,s,i,n))};return e?e.doc!=t.doc&&z7(e.doc,t.doc,0,r):t.doc.descendants(r),n}function cle(t,e,n,r){const s=Et.get(e);if(!s.problems)return r;r||(r=t.tr);const i=[];for(let l=0;l<s.height;l++)i.push(0);for(let l=0;l<s.problems.length;l++){const c=s.problems[l];if(c.type=="collision"){const d=e.nodeAt(c.pos);if(!d)continue;const h=d.attrs;for(let f=0;f<h.rowspan;f++)i[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Lc(h,h.colspan-c.n,c.n))}else if(c.type=="missing")i[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+e.nodeSize)}}let o,a;for(let l=0;l<i.length;l++)i[l]&&(o==null&&(o=l),a=l);for(let l=0,c=n+1;l<s.height;l++){const d=e.child(l),h=c+d.nodeSize,f=i[l];if(f>0){let p="cell";d.firstChild&&(p=d.firstChild.type.spec.tableRole);const m=[];for(let x=0;x<f;x++){const b=rr(t.schema)[p].createAndFill();b&&m.push(b)}const g=(l==0||o==l-1)&&a==l?c+1:h-1;r.insert(r.mapping.map(g),m)}c=h}return r.setMeta(ale,{fixTables:!0})}function mo(t){const e=t.selection,n=eN(t),r=n.node(-1),s=n.start(-1),i=Et.get(r);return{...e instanceof pt?i.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):i.findCell(n.pos-s),tableStart:s,map:i,table:r}}function V7(t,{map:e,tableStart:n,table:r},s){let i=s>0?-1:0;tle(e,r,s+i)&&(i=s==0||s==e.width?null:0);for(let o=0;o<e.height;o++){const a=o*e.width+s;if(s>0&&s<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,H7(c.attrs,s-e.colCount(l))),o+=c.attrs.rowspan-1}else{const l=i==null?rr(r.type.schema).cell:r.nodeAt(e.map[a+i]).type,c=e.positionAt(o,s,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function ule(t,e){if(!po(t))return!1;if(e){const n=mo(t);e(V7(t.tr,n,n.left))}return!0}function dle(t,e){if(!po(t))return!1;if(e){const n=mo(t);e(V7(t.tr,n,n.right))}return!0}function hle(t,{map:e,table:n,tableStart:r},s){const i=t.mapping.maps.length;for(let o=0;o<e.height;){const a=o*e.width+s,l=e.map[a],c=n.nodeAt(l),d=c.attrs;if(s>0&&e.map[a-1]==l||s<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(i).map(r+l),null,Lc(d,s-e.colCount(l)));else{const h=t.mapping.slice(i).map(r+l);t.delete(h,h+c.nodeSize)}o+=d.rowspan}}function fle(t,e){if(!po(t))return!1;if(e){const n=mo(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let s=n.right-1;hle(r,n,s),s!=n.left;s--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw new RangeError("No table found");n.table=i,n.map=Et.get(i)}e(r)}return!0}function ple(t,e,n){var r;const s=rr(e.type.schema).header_cell;for(let i=0;i<t.width;i++)if(((r=e.nodeAt(t.map[i+n*t.width]))===null||r===void 0?void 0:r.type)!=s)return!1;return!0}function W7(t,{map:e,tableStart:n,table:r},s){let i=n;for(let c=0;c<s;c++)i+=r.child(c).nodeSize;const o=[];let a=s>0?-1:0;ple(e,r,s+a)&&(a=s==0||s==e.height?null:0);for(let c=0,d=e.width*s;c<e.width;c++,d++)if(s>0&&s<e.height&&e.map[d]==e.map[d-e.width]){const h=e.map[d],f=r.nodeAt(h).attrs;t.setNodeMarkup(n+h,null,{...f,rowspan:f.rowspan+1}),c+=f.colspan-1}else{var l;const h=a==null?rr(r.type.schema).cell:(l=r.nodeAt(e.map[d+a*e.width]))===null||l===void 0?void 0:l.type,f=h==null?void 0:h.createAndFill();f&&o.push(f)}return t.insert(i,rr(r.type.schema).row.create(null,o)),t}function mle(t,e){if(!po(t))return!1;if(e){const n=mo(t);e(W7(t.tr,n,n.top))}return!0}function gle(t,e){if(!po(t))return!1;if(e){const n=mo(t);e(W7(t.tr,n,n.bottom))}return!0}function ble(t,{map:e,table:n,tableStart:r},s){let i=0;for(let c=0;c<s;c++)i+=n.child(c).nodeSize;const o=i+n.child(s).nodeSize,a=t.mapping.maps.length;t.delete(i+r,o+r);const l=new Set;for(let c=0,d=s*e.width;c<e.width;c++,d++){const h=e.map[d];if(!l.has(h)){if(l.add(h),s>0&&h==e.map[d-e.width]){const f=n.nodeAt(h).attrs;t.setNodeMarkup(t.mapping.slice(a).map(h+r),null,{...f,rowspan:f.rowspan-1}),c+=f.colspan-1}else if(s<e.height&&h==e.map[d+e.width]){const f=n.nodeAt(h),p=f.attrs,m=f.type.create({...p,rowspan:f.attrs.rowspan-1},f.content),g=e.positionAt(s+1,c,n);t.insert(t.mapping.slice(a).map(r+g),m),c+=p.colspan-1}}}}function xle(t,e){if(!po(t))return!1;if(e){const n=mo(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let s=n.bottom-1;ble(r,n,s),s!=n.top;s--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw new RangeError("No table found");n.table=i,n.map=Et.get(n.table)}e(r)}return!0}function Q4(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function yle({width:t,height:e,map:n},r){let s=r.top*t+r.left,i=s,o=(r.bottom-1)*t+r.left,a=s+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<t&&n[a]==n[a+1])return!0;i+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[s]==n[s-t]||r.bottom<e&&n[o]==n[o+t])return!0;s++,o++}return!1}function vle(t,e){const n=t.selection;if(!(n instanceof pt)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=mo(t),{map:s}=r;if(yle(s,r))return!1;if(e){const i=t.tr,o={};let a=Q.empty,l,c;for(let d=r.top;d<r.bottom;d++)for(let h=r.left;h<r.right;h++){const f=s.map[d*s.width+h],p=r.table.nodeAt(f);if(!(o[f]||!p))if(o[f]=!0,l==null)l=f,c=p;else{Q4(p)||(a=a.append(p.content));const m=i.mapping.map(f+r.tableStart);i.delete(m,m+p.nodeSize)}}if(l==null||c==null)return!0;if(i.setNodeMarkup(l+r.tableStart,null,{...H7(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size>0){const d=l+1+c.content.size,h=Q4(c)?l+1:d;i.replaceWith(h+r.tableStart,d+r.tableStart,a)}i.setSelection(new pt(i.doc.resolve(l+r.tableStart))),e(i)}return!0}function wle(t,e){const n=rr(t.schema);return kle(({node:r})=>n[r.type.spec.tableRole])(t,e)}function kle(t){return(e,n)=>{const r=e.selection;let s,i;if(r instanceof pt){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;s=r.$anchorCell.nodeAfter,i=r.$anchorCell.pos}else{var o;if(s=Xae(r.$from),!s)return!1;i=(o=Dc(r.$from))===null||o===void 0?void 0:o.pos}if(s==null||i==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const d=mo(e),h=e.tr;for(let p=0;p<d.right-d.left;p++)l.push(c?{...a,colwidth:c&&c[p]?[c[p]]:null}:a);let f;for(let p=d.top;p<d.bottom;p++){let m=d.map.positionAt(p,d.left,d.table);p==d.top&&(m+=s.nodeSize);for(let g=d.left,x=0;g<d.right;g++,x++)g==d.left&&p==d.top||h.insert(f=h.mapping.map(m+d.tableStart,1),t({node:s,row:p,col:g}).createAndFill(l[x]))}h.setNodeMarkup(i,t({node:s,row:d.top,col:d.left}),l[0]),r instanceof pt&&h.setSelection(new pt(h.doc.resolve(r.$anchorCell.pos),f?h.doc.resolve(f):void 0)),n(h)}return!0}}function Ele(t){return function(e,n){if(!po(e))return!1;if(n){const r=rr(e.schema),s=mo(e),i=e.tr,o=s.map.cellsInRect(t=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:t=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),a=o.map(l=>s.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(s.tableStart+o[l],r.cell,a[l].attrs);if(i.steps.length===0)for(let l=0;l<o.length;l++)i.setNodeMarkup(s.tableStart+o[l],r.header_cell,a[l].attrs);n(i)}return!0}}function X4(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let s=0;s<r.length;s++){const i=e.table.nodeAt(r[s]);if(i&&i.type!==n.header_cell)return!1}return!0}function nN(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?Ele(t):function(n,r){if(!po(n))return!1;if(r){const s=rr(n.schema),i=mo(n),o=n.tr,a=X4("row",i,s),l=X4("column",i,s),c=(t==="column"?a:t==="row"&&l)?1:0,d=t=="column"?{left:0,top:c,right:1,bottom:i.map.height}:t=="row"?{left:c,top:0,right:i.map.width,bottom:1}:i,h=t=="column"?l?s.cell:s.header_cell:t=="row"?a?s.cell:s.header_cell:s.cell;i.map.cellsInRect(d).forEach(f=>{const p=f+i.tableStart,m=o.doc.nodeAt(p);m&&o.setNodeMarkup(p,h,m.attrs)}),r(o)}return!0}}nN("row",{useDeprecatedLogic:!0});nN("column",{useDeprecatedLogic:!0});nN("cell",{useDeprecatedLogic:!0});function Cle(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,s=t.before();r>=0;r--){const i=t.node(-1).child(r),o=i.lastChild;if(o)return s-1-o.nodeSize;s-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),s=t.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return s+1;s+=i.nodeSize}}return null}function Z4(t){return function(e,n){if(!po(e))return!1;const r=Cle(eN(e),t);if(r==null)return!1;if(n){const s=e.doc.resolve(r);n(e.tr.setSelection(xe.between(s,ele(s))).scrollIntoView())}return!0}}function k0(t,e){const n=t.selection;if(!(n instanceof pt))return!1;if(e){const r=t.tr,s=rr(t.schema).cell.createAndFill().content;n.forEachCell((i,o)=>{i.content.eq(s)||r.replace(r.mapping.map(o+1),r.mapping.map(o+i.nodeSize-1),new ue(s,0,0))}),r.docChanged&&e(r)}return!0}function Sle(t){if(t.size===0)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const s=e.child(0),i=s.type.spec.tableRole,o=s.type.schema,a=[];if(i=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const d=l?0:Math.max(0,n-1),h=l<e.childCount-1?0:Math.max(0,r-1);(d||h)&&(c=R2(rr(o).row,new ue(c,d,h)).content),a.push(c)}else if(i=="cell"||i=="header_cell")a.push(n||r?R2(rr(o).row,new ue(e,n,r)).content:e);else return null;return Tle(o,a)}function Tle(t,e){const n=[];for(let s=0;s<e.length;s++){const i=e[s];for(let o=i.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=i.child(o).attrs;for(let c=s;c<s+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let s=0;s<n.length;s++)r=Math.max(r,n[s]);for(let s=0;s<n.length;s++)if(s>=e.length&&e.push(Q.empty),n[s]<r){const i=rr(t).cell.createAndFill(),o=[];for(let a=n[s];a<r;a++)o.push(i);e[s]=e[s].append(Q.from(o))}return{height:e.length,width:r,rows:e}}function R2(t,e){const n=t.createAndFill();return new xT(n).replace(0,n.content.size,e).doc}function Nle({width:t,height:e,rows:n},r,s){if(t!=r){const i=[],o=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let d=i[a]||0,h=0;d<r;h++){let f=l.child(h%l.childCount);d+f.attrs.colspan>r&&(f=f.type.createChecked(Lc(f.attrs,f.attrs.colspan,d+f.attrs.colspan-r),f.content)),c.push(f),d+=f.attrs.colspan;for(let p=1;p<f.attrs.rowspan;p++)i[a+p]=(i[a+p]||0)+f.attrs.colspan}o.push(Q.from(c))}n=o,t=r}if(e!=s){const i=[];for(let o=0,a=0;o<s;o++,a++){const l=[],c=n[a%e];for(let d=0;d<c.childCount;d++){let h=c.child(d);o+h.attrs.rowspan>s&&(h=h.type.create({...h.attrs,rowspan:Math.max(1,s-h.attrs.rowspan)},h.content)),l.push(h)}i.push(Q.from(l))}n=i,e=s}return{width:t,height:e,rows:n}}function _le(t,e,n,r,s,i,o){const a=t.doc.type.schema,l=rr(a);let c,d;if(s>e.width)for(let h=0,f=0;h<e.height;h++){const p=n.child(h);f+=p.nodeSize;const m=[];let g;p.lastChild==null||p.lastChild.type==l.cell?g=c||(c=l.cell.createAndFill()):g=d||(d=l.header_cell.createAndFill());for(let x=e.width;x<s;x++)m.push(g);t.insert(t.mapping.slice(o).map(f-1+r),m)}if(i>e.height){const h=[];for(let m=0,g=(e.height-1)*e.width;m<Math.max(e.width,s);m++){const x=m>=e.width?!1:n.nodeAt(e.map[g+m]).type==l.header_cell;h.push(x?d||(d=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,Q.from(h)),p=[];for(let m=e.height;m<i;m++)p.push(f);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),p)}return!!(c||d)}function e5(t,e,n,r,s,i,o,a){if(o==0||o==e.height)return!1;let l=!1;for(let c=s;c<i;c++){const d=o*e.width+c,h=e.map[d];if(e.map[d-e.width]==h){l=!0;const f=n.nodeAt(h),{top:p,left:m}=e.findCell(h);t.setNodeMarkup(t.mapping.slice(a).map(h+r),null,{...f.attrs,rowspan:o-p}),t.insert(t.mapping.slice(a).map(e.positionAt(o,m,n)),f.type.createAndFill({...f.attrs,rowspan:p+f.attrs.rowspan-o})),c+=f.attrs.colspan-1}}return l}function t5(t,e,n,r,s,i,o,a){if(o==0||o==e.width)return!1;let l=!1;for(let c=s;c<i;c++){const d=c*e.width+o,h=e.map[d];if(e.map[d-1]==h){l=!0;const f=n.nodeAt(h),p=e.colCount(h),m=t.mapping.slice(a).map(h+r);t.setNodeMarkup(m,null,Lc(f.attrs,o-p,f.attrs.colspan-(o-p))),t.insert(m+f.nodeSize,f.type.createAndFill(Lc(f.attrs,0,o-p))),c+=f.attrs.rowspan-1}}return l}function n5(t,e,n,r,s){let i=n?t.doc.nodeAt(n-1):t.doc;if(!i)throw new Error("No table found");let o=Et.get(i);const{top:a,left:l}=r,c=l+s.width,d=a+s.height,h=t.tr;let f=0;function p(){if(i=n?h.doc.nodeAt(n-1):h.doc,!i)throw new Error("No table found");o=Et.get(i),f=h.mapping.maps.length}_le(h,o,i,n,c,d,f)&&p(),e5(h,o,i,n,l,c,a,f)&&p(),e5(h,o,i,n,l,c,d,f)&&p(),t5(h,o,i,n,a,d,l,f)&&p(),t5(h,o,i,n,a,d,c,f)&&p();for(let m=a;m<d;m++){const g=o.positionAt(m,l,i),x=o.positionAt(m,c,i);h.replace(h.mapping.slice(f).map(g+n),h.mapping.slice(f).map(x+n),new ue(s.rows[m-a],0,0))}p(),h.setSelection(new pt(h.doc.resolve(n+o.positionAt(a,l,i)),h.doc.resolve(n+o.positionAt(d-1,c-1,i)))),e(h)}const Ale=RT({ArrowLeft:E0("horiz",-1),ArrowRight:E0("horiz",1),ArrowUp:E0("vert",-1),ArrowDown:E0("vert",1),"Shift-ArrowLeft":C0("horiz",-1),"Shift-ArrowRight":C0("horiz",1),"Shift-ArrowUp":C0("vert",-1),"Shift-ArrowDown":C0("vert",1),Backspace:k0,"Mod-Backspace":k0,Delete:k0,"Mod-Delete":k0});function vg(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function E0(t,e){return(n,r,s)=>{if(!s)return!1;const i=n.selection;if(i instanceof pt)return vg(n,r,Ne.near(i.$headCell,e));if(t!="horiz"&&!i.empty)return!1;const o=q7(s,t,e);if(o==null)return!1;if(t=="horiz")return vg(n,r,Ne.near(n.doc.resolve(i.head+e),e));{const a=n.doc.resolve(o),l=F7(a,t,e);let c;return l?c=Ne.near(l,1):e<0?c=Ne.near(n.doc.resolve(a.before(-1)),-1):c=Ne.near(n.doc.resolve(a.after(-1)),1),vg(n,r,c)}}}function C0(t,e){return(n,r,s)=>{if(!s)return!1;const i=n.selection;let o;if(i instanceof pt)o=i;else{const l=q7(s,t,e);if(l==null)return!1;o=new pt(n.doc.resolve(l))}const a=F7(o.$headCell,t,e);return a?vg(n,r,new pt(o.$anchorCell,a)):!1}}function jle(t,e){const n=t.state.doc,r=Dc(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new pt(r))),!0):!1}function Ole(t,e,n){if(!po(t.state))return!1;let r=Sle(n);const s=t.state.selection;if(s instanceof pt){r||(r={width:1,height:1,rows:[Q.from(R2(rr(t.state.schema).cell,n))]});const i=s.$anchorCell.node(-1),o=s.$anchorCell.start(-1),a=Et.get(i).rectBetween(s.$anchorCell.pos-o,s.$headCell.pos-o);return r=Nle(r,a.right-a.left,a.bottom-a.top),n5(t.state,t.dispatch,o,a,r),!0}else if(r){const i=eN(t.state),o=i.start(-1);return n5(t.state,t.dispatch,o,Et.get(i.node(-1)).findCell(i.pos-o),r),!0}else return!1}function Ile(t,e){var n;if(e.button!=0||e.ctrlKey||e.metaKey)return;const r=r5(t,e.target);let s;if(e.shiftKey&&t.state.selection instanceof pt)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(s=Dc(t.state.selection.$anchor))!=null&&((n=kw(t,e))===null||n===void 0?void 0:n.pos)!=s.pos)i(s,e),e.preventDefault();else if(!r)return;function i(l,c){let d=kw(t,c);const h=Ia.getState(t.state)==null;if(!d||!tN(l,d))if(h)d=l;else return;const f=new pt(l,d);if(h||!t.state.selection.eq(f)){const p=t.state.tr.setSelection(f);h&&p.setMeta(Ia,l.pos),t.dispatch(p)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",a),Ia.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Ia,-1))}function a(l){const c=l,d=Ia.getState(t.state);let h;if(d!=null)h=t.state.doc.resolve(d);else if(r5(t,c.target)!=r&&(h=kw(t,e),!h))return o();h&&i(h,c)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",a)}function q7(t,e,n){if(!(t.state.selection instanceof xe))return null;const{$head:r}=t.state.selection;for(let s=r.depth-1;s>=0;s--){const i=r.node(s);if((n<0?r.index(s):r.indexAfter(s))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const o=r.before(s),a=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?o:null}}return null}function r5(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function kw(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return null;let{inside:r,pos:s}=n;return r>=0&&Dc(t.state.doc.resolve(r))||Dc(t.state.doc.resolve(s))}var G7=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),P2(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,P2(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function P2(t,e,n,r,s,i){let o=0,a=!0,l=e.firstChild;const c=t.firstChild;if(c){for(let h=0,f=0;h<c.childCount;h++){const{colspan:p,colwidth:m}=c.child(h).attrs;for(let g=0;g<p;g++,f++){const x=s==f?i:m&&m[g],b=x?x+"px":"";if(o+=x||r,x||(a=!1),l)l.style.width!=b&&(l.style.width=b),l=l.nextSibling;else{const v=document.createElement("col");v.style.width=b,e.appendChild(v)}}}for(;l;){var d;const h=l.nextSibling;(d=l.parentNode)===null||d===void 0||d.removeChild(l),l=h}a?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}}const rs=new We("tableColumnResizing");function Mle({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=G7,lastColumnResizable:s=!0}={}){const i=new Ie({key:rs,state:{init(o,a){var l;const c=(l=i.spec)===null||l===void 0||(l=l.props)===null||l===void 0?void 0:l.nodeViews,d=rr(a.schema).table.name;return r&&c&&(c[d]=(h,f)=>new r(h,n,f)),new Rle(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=rs.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{Ple(o,a,t,s)},mouseleave:o=>{Dle(o)},mousedown:(o,a)=>{Lle(o,a,e,n)}},decorations:o=>{const a=rs.getState(o);if(a&&a.activeHandle>-1)return Ule(o,a.activeHandle)},nodeViews:{}}});return i}var Rle=class wg{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(rs);if(r&&r.setHandle!=null)return new wg(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new wg(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let s=e.mapping.map(n.activeHandle,-1);return M2(e.doc.resolve(s))||(s=-1),new wg(s,n.dragging)}return n}};function Ple(t,e,n,r){if(!t.editable)return;const s=rs.getState(t.state);if(s&&!s.dragging){const i=$le(e.target);let o=-1;if(i){const{left:a,right:l}=i.getBoundingClientRect();e.clientX-a<=n?o=s5(t,e,"left",n):l-e.clientX<=n&&(o=s5(t,e,"right",n))}if(o!=s.activeHandle){if(!r&&o!==-1){const a=t.state.doc.resolve(o),l=a.node(-1),c=Et.get(l),d=a.start(-1);if(c.colCount(a.pos-d)+a.nodeAfter.attrs.colspan-1==c.width-1)return}Y7(t,o)}}}function Dle(t){if(!t.editable)return;const e=rs.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&Y7(t,-1)}function Lle(t,e,n,r){var s;if(!t.editable)return!1;const i=(s=t.dom.ownerDocument.defaultView)!==null&&s!==void 0?s:window,o=rs.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=t.state.doc.nodeAt(o.activeHandle),l=Ble(t,o.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(rs,{setDragging:{startX:e.clientX,startWidth:l}}));function c(h){i.removeEventListener("mouseup",c),i.removeEventListener("mousemove",d);const f=rs.getState(t.state);f!=null&&f.dragging&&(Fle(t,f.activeHandle,i5(f.dragging,h,n)),t.dispatch(t.state.tr.setMeta(rs,{setDragging:null})))}function d(h){if(!h.which)return c(h);const f=rs.getState(t.state);if(f&&f.dragging){const p=i5(f.dragging,h,n);o5(t,f.activeHandle,p,r)}}return o5(t,o.activeHandle,l,r),i.addEventListener("mouseup",c),i.addEventListener("mousemove",d),e.preventDefault(),!0}function Ble(t,e,{colspan:n,colwidth:r}){const s=r&&r[r.length-1];if(s)return s;const i=t.domAtPos(e);let o=i.node.childNodes[i.offset].offsetWidth,a=n;if(r)for(let l=0;l<n;l++)r[l]&&(o-=r[l],a--);return o/a}function $le(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function s5(t,e,n,r){const s=n=="right"?-r:r,i=t.posAtCoords({left:e.clientX+s,top:e.clientY});if(!i)return-1;const{pos:o}=i,a=Dc(t.state.doc.resolve(o));if(!a)return-1;if(n=="right")return a.pos;const l=Et.get(a.node(-1)),c=a.start(-1),d=l.map.indexOf(a.pos-c);return d%l.width==0?-1:c+l.map[d-1]}function i5(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function Y7(t,e){t.dispatch(t.state.tr.setMeta(rs,{setHandle:e}))}function Fle(t,e,n){const r=t.state.doc.resolve(e),s=r.node(-1),i=Et.get(s),o=r.start(-1),a=i.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<i.height;c++){const d=c*i.width+a;if(c&&i.map[d]==i.map[d-i.width])continue;const h=i.map[d],f=s.nodeAt(h).attrs,p=f.colspan==1?0:a-i.colCount(h);if(f.colwidth&&f.colwidth[p]==n)continue;const m=f.colwidth?f.colwidth.slice():Hle(f.colspan);m[p]=n,l.setNodeMarkup(o+h,null,{...f,colwidth:m})}l.docChanged&&t.dispatch(l)}function o5(t,e,n,r){const s=t.state.doc.resolve(e),i=s.node(-1),o=s.start(-1),a=Et.get(i).colCount(s.pos-o)+s.nodeAfter.attrs.colspan-1;let l=t.domAtPos(s.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&P2(i,l.firstChild,l,r,a,n)}function Hle(t){return Array(t).fill(0)}function Ule(t,e){const n=[],r=t.doc.resolve(e),s=r.node(-1);if(!s)return Re.empty;const i=Et.get(s),o=r.start(-1),a=i.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1;for(let c=0;c<i.height;c++){const d=a+c*i.width;if((a==i.width-1||i.map[d]!=i.map[d+1])&&(c==0||i.map[d]!=i.map[d-i.width])){var l;const h=i.map[d],f=o+h+s.nodeAt(h).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",!((l=rs.getState(t))===null||l===void 0)&&l.dragging&&n.push(at.node(o+h,o+h+s.nodeAt(h).nodeSize,{class:"column-resize-dragging"})),n.push(at.widget(f,p))}}return Re.create(t.doc,n)}function zle({allowTableNodeSelection:t=!1}={}){return new Ie({key:Ia,state:{init(){return null},apply(e,n){const r=e.getMeta(Ia);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:s,pos:i}=e.mapping.mapResult(n);return s?null:i}},props:{decorations:rle,handleDOMEvents:{mousedown:Ile},createSelectionBetween(e){return Ia.getState(e.state)!=null?e.state.selection:null},handleTripleClick:jle,handleKeyDown:Ale,handlePaste:Ole},appendTransaction(e,n,r){return ole(r,lle(r,n),t)}})}const Ds=()=>new Map,D2=t=>{const e=Ds();return t.forEach((n,r)=>{e.set(r,n)}),e},go=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},Vle=(t,e)=>{const n=[];for(const[r,s]of t)n.push(e(s,r));return n},Wle=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Bc=()=>new Set,Ew=t=>t[t.length-1],qle=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},fl=Array.from,rN=(t,e)=>{for(let n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},sN=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},Gle=(t,e)=>{const n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n},Ld=Array.isArray;class K7{constructor(){this._observers=Ds()}on(e,n){return go(this._observers,e,Bc).add(n),n}once(e,n){const r=(...s)=>{this.off(e,r),n(...s)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return fl((this._observers.get(e)||Ds()).values()).forEach(r=>r(...n))}destroy(){this._observers=Ds()}}const gi=Math.floor,kg=Math.abs,Wo=(t,e)=>t<e?t:e,bi=(t,e)=>t>e?t:e,J7=t=>t!==0?t<0:1/t<0,a5=1,l5=2,Cw=4,Sw=8,Ep=32,qo=64,fr=128,Yle=1<<29,t1=31,L2=63,mc=127,Kle=2147483647,Ub=Number.MAX_SAFE_INTEGER,c5=Number.MIN_SAFE_INTEGER,Jle=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&gi(t)===t),Q7=String.fromCharCode,Qle=t=>t.toLowerCase(),Xle=/^\s*/g,Zle=t=>t.replace(Xle,""),ece=/([A-Z])/g,u5=(t,e)=>Zle(t.replace(ece,n=>`${e}${Qle(n)}`)),tce=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.codePointAt(s);return r},Cp=typeof TextEncoder<"u"?new TextEncoder:null,nce=t=>Cp.encode(t),rce=Cp?nce:tce;let Cf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Cf&&Cf.decode(new Uint8Array).length===1&&(Cf=null);const sce=(t,e)=>Gle(e,()=>t).join("");class dm{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const hm=()=>new dm,ice=t=>{const e=hm();return t(e),si(e)},oce=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},si=t=>{const e=new Uint8Array(oce(t));let n=0;for(let r=0;r<t.bufs.length;r++){const s=t.bufs[r];e.set(s,n),n+=s.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},ace=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(bi(n,e)*2),t.cpos=0)},yn=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},B2=yn,Ke=(t,e)=>{for(;e>mc;)yn(t,fr|mc&e),e=gi(e/128);yn(t,mc&e)},iN=(t,e)=>{const n=J7(e);for(n&&(e=-e),yn(t,(e>L2?fr:0)|(n?qo:0)|L2&e),e=gi(e/64);e>0;)yn(t,(e>mc?fr:0)|mc&e),e=gi(e/128)},$2=new Uint8Array(3e4),lce=$2.length/3,cce=(t,e)=>{if(e.length<lce){const n=Cp.encodeInto(e,$2).written||0;Ke(t,n);for(let r=0;r<n;r++)yn(t,$2[r])}else Qr(t,rce(e))},uce=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Ke(t,r);for(let s=0;s<r;s++)yn(t,n.codePointAt(s))},ld=Cp&&Cp.encodeInto?cce:uce,n1=(t,e)=>{const n=t.cbuf.length,r=t.cpos,s=Wo(n-r,e.length),i=e.length-s;t.cbuf.set(e.subarray(0,s),r),t.cpos+=s,i>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(bi(n*2,i)),t.cbuf.set(e.subarray(s)),t.cpos=i)},Qr=(t,e)=>{Ke(t,e.byteLength),n1(t,e)},oN=(t,e)=>{ace(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},dce=(t,e)=>oN(t,4).setFloat32(0,e,!1),hce=(t,e)=>oN(t,8).setFloat64(0,e,!1),fce=(t,e)=>oN(t,8).setBigInt64(0,e,!1),d5=new DataView(new ArrayBuffer(4)),pce=t=>(d5.setFloat32(0,t),d5.getFloat32(0)===t),Bd=(t,e)=>{switch(typeof e){case"string":yn(t,119),ld(t,e);break;case"number":Jle(e)&&kg(e)<=Kle?(yn(t,125),iN(t,e)):pce(e)?(yn(t,124),dce(t,e)):(yn(t,123),hce(t,e));break;case"bigint":yn(t,122),fce(t,e);break;case"object":if(e===null)yn(t,126);else if(Ld(e)){yn(t,117),Ke(t,e.length);for(let n=0;n<e.length;n++)Bd(t,e[n])}else if(e instanceof Uint8Array)yn(t,116),Qr(t,e);else{yn(t,118);const n=Object.keys(e);Ke(t,n.length);for(let r=0;r<n.length;r++){const s=n[r];ld(t,s),Bd(t,e[s])}}break;case"boolean":yn(t,e?120:121);break;default:yn(t,127)}};class h5 extends dm{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Ke(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const f5=t=>{t.count>0&&(iN(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Ke(t.encoder,t.count-2))};class Eg{constructor(){this.encoder=new dm,this.s=0,this.count=0}write(e){this.s===e?this.count++:(f5(this),this.count=1,this.s=e)}toUint8Array(){return f5(this),si(this.encoder)}}const p5=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);iN(t.encoder,e),t.count>1&&Ke(t.encoder,t.count-2)}};class Tw{constructor(){this.encoder=new dm,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(p5(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return p5(this),si(this.encoder)}}class mce{constructor(){this.sarr=[],this.s="",this.lensE=new Eg}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new dm;return this.sarr.push(this.s),this.s="",ld(e,this.sarr.join("")),n1(e,this.lensE.toUint8Array()),si(e)}}const co=t=>new Error(t),Ls=()=>{throw co("Method unimplemented")},br=()=>{throw co("Unexpected case")},X7=co("Unexpected end of array"),Z7=co("Integer out of Range");class r1{constructor(e){this.arr=e,this.pos=0}}const lh=t=>new r1(t),gce=t=>t.pos!==t.arr.length,bce=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Xr=t=>bce(t,ze(t)),$d=t=>t.arr[t.pos++],ze=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const s=t.arr[t.pos++];if(e=e+(s&mc)*n,n*=128,s<fr)return e;if(e>Ub)throw Z7}throw X7},aN=t=>{let e=t.arr[t.pos++],n=e&L2,r=64;const s=(e&qo)>0?-1:1;if(!(e&fr))return s*n;const i=t.arr.length;for(;t.pos<i;){if(e=t.arr[t.pos++],n=n+(e&mc)*r,r*=128,e<fr)return s*n;if(n>Ub)throw Z7}throw X7},xce=t=>{let e=ze(t);if(e===0)return"";{let n=String.fromCodePoint($d(t));if(--e<100)for(;e--;)n+=String.fromCodePoint($d(t));else for(;e>0;){const r=e<1e4?e:1e4,s=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,s),e-=r}return decodeURIComponent(escape(n))}},yce=t=>Cf.decode(Xr(t)),cd=Cf?yce:xce,lN=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},vce=t=>lN(t,4).getFloat32(0,!1),wce=t=>lN(t,8).getFloat64(0,!1),kce=t=>lN(t,8).getBigInt64(0,!1),Ece=[t=>{},t=>null,aN,vce,wce,kce,t=>!1,t=>!0,cd,t=>{const e=ze(t),n={};for(let r=0;r<e;r++){const s=cd(t);n[s]=Sp(t)}return n},t=>{const e=ze(t),n=[];for(let r=0;r<e;r++)n.push(Sp(t));return n},Xr],Sp=t=>Ece[127-$d(t)](t);class m5 extends r1{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),gce(this)?this.count=ze(this)+1:this.count=-1),this.count--,this.s}}class Cg extends r1{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=aN(this);const e=J7(this.s);this.count=1,e&&(this.s=-this.s,this.count=ze(this)+2)}return this.count--,this.s}}class Nw extends r1{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=aN(this),n=e&1;this.diff=gi(e/2),this.count=1,n&&(this.count=ze(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Cce{constructor(e){this.decoder=new Cg(e),this.str=cd(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const Sce=crypto.getRandomValues.bind(crypto),Tce=Math.random,eB=()=>Sce(new Uint32Array(1))[0],Nce=t=>t[gi(Tce()*t.length)],_ce="10000000-1000-4000-8000"+-1e11,Ace=()=>_ce.replace(/[018]/g,t=>(t^eB()&15>>t/4).toString(16)),jce=Date.now,g5=t=>new Promise(t);Promise.all.bind(Promise);const b5=t=>t===void 0?null:t;class Oce{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let tB=new Oce,Ice=!0;try{typeof localStorage<"u"&&localStorage&&(tB=localStorage,Ice=!1)}catch{}const Mce=tB,Tp=Symbol("Equality"),nB=(t,e)=>{var n;return t===e||!!((n=t==null?void 0:t[Tp])!=null&&n.call(t,e))||!1},Rce=t=>typeof t=="object",Pce=Object.assign,rB=Object.keys,Dce=(t,e)=>{for(const n in t)e(t[n],n)},zb=t=>rB(t).length,Lce=t=>{for(const e in t)return!1;return!0},ch=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},cN=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Bce=(t,e)=>t===e||zb(t)===zb(e)&&ch(t,(n,r)=>(n!==void 0||cN(e,r))&&nB(e[r],n)),$ce=Object.freeze,sB=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&sB(t[e])}return $ce(t)},uN=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&uN(t,e,n+1)}},Fce=t=>t,Sg=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor&&(t.constructor||Object)!==(e.constructor||Object))return!1;if(t[Tp]!=null)return t[Tp](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Sg(t.get(n),e.get(n)))return!1;break}case void 0:case Object:if(zb(t)!==zb(e))return!1;for(const n in t)if(!cN(t,n)||!Sg(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Sg(t[n],e[n]))return!1;break;default:return!1}return!0},Hce=(t,e)=>e.includes(t);var iB={};const Fd=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",oB=typeof window<"u"&&typeof document<"u"&&!Fd;let Ri;const Uce=()=>{if(Ri===void 0)if(Fd){Ri=Ds();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&Ri.set(e,""),e=r):e!==null&&(Ri.set(e,r),e=null)}e!==null&&Ri.set(e,"")}else typeof location=="object"?(Ri=Ds(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Ri.set(`--${u5(e,"-")}`,n),Ri.set(`-${u5(e,"-")}`,n)}})):Ri=Ds();return Ri},F2=t=>Uce().has(t),Vb=t=>b5(Fd?iB[t.toUpperCase().replaceAll("-","_")]:Mce.getItem(t)),aB=t=>F2("--"+t)||Vb(t)!==null,zce=aB("production"),Vce=Fd&&Hce(iB.FORCE_COLOR,["true","1","2"]),Wce=Vce||!F2("--no-colors")&&!aB("no-color")&&(!Fd||process.stdout.isTTY)&&(!Fd||F2("--color")||Vb("COLORTERM")!==null||(Vb("TERM")||"").includes("color")),qce=t=>new Uint8Array(t),Gce=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=Q7(t[n]);return btoa(e)},Yce=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Kce=oB?Gce:Yce,Jce=t=>{const e=qce(t.byteLength);return e.set(t),e},Qce=t=>ice(e=>Bd(e,t));class Xce{constructor(e,n){this.left=e,this.right=n}}const So=(t,e)=>new Xce(t,e),x5=t=>t.next()>=.5,_w=(t,e,n)=>gi(t.next()*(n+1-e)+e),lB=(t,e,n)=>gi(t.next()*(n+1-e)+e),dN=(t,e,n)=>lB(t,e,n),Zce=t=>Q7(dN(t,97,122)),eue=(t,e=0,n=20)=>{const r=dN(t,e,n);let s="";for(let i=0;i<r;i++)s+=Zce(t);return s},Aw=(t,e)=>e[dN(t,0,e.length-1)],tue=Symbol("0schema");class nue{constructor(){this._rerrs=[]}extend(e,n,r,s=null){this._rerrs.push({path:e,expected:n,has:r,message:s})}toString(){const e=[];for(let n=this._rerrs.length-1;n>0;n--){const r=this._rerrs[n];e.push(sce(" ",(this._rerrs.length-n)*2)+`${r.path!=null?`[${r.path}] `:""}${r.has} doesn't match ${r.expected}. ${r.message}`)}return e.join(`
`)}}const H2=(t,e)=>t===e?!0:t==null||e==null||t.constructor!==e.constructor?!1:t[Tp]?nB(t,e):Ld(t)?rN(t,n=>sN(e,r=>H2(n,r))):Rce(t)?ch(t,(n,r)=>H2(n,e[r])):!1;var Fk;let wr=(Fk=class{extends(e){let[n,r]=[this.shape,e.shape];return this.constructor._dilutes&&([r,n]=[n,r]),H2(n,r)}equals(e){return this.constructor===e.constructor&&Sg(this.shape,e.shape)}[tue](){return!0}[Tp](e){return this.equals(e)}validate(e){return this.check(e)}check(e,n){Ls()}get nullable(){return uh(this,l1)}get optional(){return new dB(this)}cast(e){return y5(e,this),e}expect(e){return y5(e,this),e}},ko(Fk,"_dilutes",!1),Fk);class hN extends wr{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n=void 0){const r=(e==null?void 0:e.constructor)===this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name,(e==null?void 0:e.constructor)!==this.shape?"Constructor match failed":"Check failed")),r}}const fn=(t,e=null)=>new hN(t,e);fn(hN);class fN extends wr{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape(e);return!r&&(n==null||n.extend(null,"custom prop",e==null?void 0:e.constructor.name,"failed to check custom prop")),r}}const An=t=>new fN(t);fn(fN);class s1 extends wr{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape.some(s=>s===e);return!r&&(n==null||n.extend(null,this.shape.join(" | "),e.toString())),r}}const i1=(...t)=>new s1(t),cB=fn(s1),rue=RegExp.escape||(t=>t.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),uB=t=>{if(Hd.check(t))return[rue(t)];if(cB.check(t))return t.shape.map(e=>e+"");if(vB.check(t))return["[+-]?\\d+.?\\d*"];if(wB.check(t))return[".*"];if(qb.check(t))return t.shape.map(uB).flat(1);br()};class sue extends wr{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(uB).map(n=>`(${n.join("|")})`).join("")+"$")}check(e,n){const r=this._r.exec(e)!=null;return!r&&(n==null||n.extend(null,this._r.toString(),e.toString(),"String doesn't match string template.")),r}}fn(sue);const iue=Symbol("optional");class dB extends wr{constructor(e){super(),this.shape=e}check(e,n){const r=e===void 0||this.shape.check(e);return!r&&(n==null||n.extend(null,"undefined (optional)","()")),r}get[iue](){return!0}}const oue=fn(dB);class aue extends wr{check(e,n){return n==null||n.extend(null,"never",typeof e),!1}}fn(aue);const ly=class ly extends wr{constructor(e,n=!1){super(),this.shape=e,this._isPartial=n}get partial(){return new ly(this.shape,!0)}check(e,n){return e==null?(n==null||n.extend(null,"object","null"),!1):ch(this.shape,(r,s)=>{const i=this._isPartial&&!cN(e,s)||r.check(e[s],n);return!i&&(n==null||n.extend(s.toString(),r.toString(),typeof e[s],"Object property does not match")),i})}};ko(ly,"_dilutes",!0);let Wb=ly;const lue=t=>new Wb(t),cue=fn(Wb),uue=An(t=>t!=null&&(t.constructor===Object||t.constructor==null));class hB extends wr{constructor(e,n){super(),this.shape={keys:e,values:n}}check(e,n){return e!=null&&ch(e,(r,s)=>{const i=this.shape.keys.check(s,n);return!i&&(n==null||n.extend(s+"","Record",typeof e,i?"Key doesn't match schema":"Value doesn't match value")),i&&this.shape.values.check(r,n)})}}const fB=(t,e)=>new hB(t,e),due=fn(hB);class pB extends wr{constructor(e){super(),this.shape=e}check(e,n){return e!=null&&ch(this.shape,(r,s)=>{const i=r.check(e[s],n);return!i&&(n==null||n.extend(s.toString(),"Tuple",typeof r)),i})}}const hue=(...t)=>new pB(t);fn(pB);class mB extends wr{constructor(e){super(),this.shape=e.length===1?e[0]:new o1(e)}check(e,n){const r=Ld(e)&&rN(e,s=>this.shape.check(s));return!r&&(n==null||n.extend(null,"Array","")),r}}const gB=(...t)=>new mB(t),fue=fn(mB),pue=An(t=>Ld(t));class bB extends wr{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n){const r=e instanceof this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name)),r}}const mue=(t,e=null)=>new bB(t,e);fn(bB);const gue=mue(wr);class bue extends wr{constructor(e){super(),this.len=e.length-1,this.args=hue(...e.slice(-1)),this.res=e[this.len]}check(e,n){const r=e.constructor===Function&&e.length<=this.len;return!r&&(n==null||n.extend(null,"function",typeof e)),r}}const xue=fn(bue),yue=An(t=>typeof t=="function");class vue extends wr{constructor(e){super(),this.shape=e}check(e,n){const r=rN(this.shape,s=>s.check(e,n));return!r&&(n==null||n.extend(null,"Intersectinon",typeof e)),r}}fn(vue,t=>t.shape.length>0);class o1 extends wr{constructor(e){super(),this.shape=e}check(e,n){const r=sN(this.shape,s=>s.check(e,n));return n==null||n.extend(null,"Union",typeof e),r}}ko(o1,"_dilutes",!0);const uh=(...t)=>t.findIndex(e=>qb.check(e))>=0?uh(...t.map(e=>Np(e)).map(e=>qb.check(e)?e.shape:[e]).flat(1)):t.length===1?t[0]:new o1(t),qb=fn(o1),xB=()=>!0,Gb=An(xB),wue=fn(fN,t=>t.shape===xB),pN=An(t=>typeof t=="bigint"),kue=An(t=>t===pN),yB=An(t=>typeof t=="symbol");An(t=>t===yB);const ud=An(t=>typeof t=="number"),vB=An(t=>t===ud),Hd=An(t=>typeof t=="string"),wB=An(t=>t===Hd),a1=An(t=>typeof t=="boolean"),Eue=An(t=>t===a1),kB=i1(void 0);fn(s1,t=>t.shape.length===1&&t.shape[0]===void 0);i1(void 0);const l1=i1(null),Cue=fn(s1,t=>t.shape.length===1&&t.shape[0]===null);fn(Uint8Array);fn(hN,t=>t.shape===Uint8Array);const Sue=uh(ud,Hd,l1,kB,pN,a1,yB);(()=>{const t=gB(Gb),e=fB(Hd,Gb),n=uh(ud,Hd,l1,a1,t,e);return t.shape=n,e.shape.values=n,n})();const Np=t=>{if(gue.check(t))return t;if(uue.check(t)){const e={};for(const n in t)e[n]=Np(t[n]);return lue(e)}else{if(pue.check(t))return uh(...t.map(Np));if(Sue.check(t))return i1(t);if(yue.check(t))return fn(t)}br()},y5=zce?()=>{}:(t,e)=>{const n=new nue;if(!e.check(t,n))throw co(`Expected value to be of type ${e.constructor.name}.
${n.toString()}`)};class Tue{constructor(e){this.patterns=[],this.$state=e}if(e,n){return this.patterns.push({if:Np(e),h:n}),this}else(e){return this.if(Gb,e)}done(){return(e,n)=>{for(let r=0;r<this.patterns.length;r++){const s=this.patterns[r];if(s.if.check(e))return s.h(e,n)}throw co("Unhandled pattern")}}}const Nue=t=>new Tue(t),EB=Nue(Gb).if(vB,(t,e)=>_w(e,c5,Ub)).if(wB,(t,e)=>eue(e)).if(Eue,(t,e)=>x5(e)).if(kue,(t,e)=>BigInt(_w(e,c5,Ub))).if(qb,(t,e)=>gu(e,Aw(e,t.shape))).if(cue,(t,e)=>{const n={};for(const r in t.shape){let s=t.shape[r];if(oue.check(s)){if(x5(e))continue;s=s.shape}n[r]=EB(s,e)}return n}).if(fue,(t,e)=>{const n=[],r=lB(e,0,42);for(let s=0;s<r;s++)n.push(gu(e,t.shape));return n}).if(cB,(t,e)=>Aw(e,t.shape)).if(Cue,(t,e)=>null).if(xue,(t,e)=>{const n=gu(e,t.res);return()=>n}).if(wue,(t,e)=>gu(e,Aw(e,[ud,Hd,l1,kB,pN,a1,gB(ud),fB(uh("a","b","c"),ud)]))).if(due,(t,e)=>{const n={},r=_w(e,0,3);for(let s=0;s<r;s++){const i=gu(e,t.shape.keys),o=gu(e,t.shape.values);n[i]=o}return n}).done(),gu=(t,e)=>EB(Np(e),t),fm=typeof document<"u"?document:{};An(t=>t.nodeType===Iue);typeof DOMParser<"u"&&new DOMParser;An(t=>t.nodeType===Aue);An(t=>t.nodeType===jue);const _ue=t=>Vle(t,(e,n)=>`${n}:${e};`).join(""),Aue=fm.ELEMENT_NODE,jue=fm.TEXT_NODE,Oue=fm.DOCUMENT_NODE,Iue=fm.DOCUMENT_FRAGMENT_NODE;An(t=>t.nodeType===Oue);const Mue=t=>class{constructor(n){this._=n}destroy(){t(this._)}},Rue=Mue(clearTimeout),mN=(t,e)=>new Rue(setTimeout(e,t)),oa=Symbol,CB=oa(),SB=oa(),Pue=oa(),Due=oa(),Lue=oa(),TB=oa(),Bue=oa(),gN=oa(),$ue=oa(),Fue=t=>{var s;t.length===1&&((s=t[0])==null?void 0:s.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const i=t[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)e.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const i=t[r];i instanceof Symbol||n.push(i)}return n},Hue={[CB]:So("font-weight","bold"),[SB]:So("font-weight","normal"),[Pue]:So("color","blue"),[Lue]:So("color","green"),[Due]:So("color","grey"),[TB]:So("color","red"),[Bue]:So("color","purple"),[gN]:So("color","orange"),[$ue]:So("color","black")},Uue=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[],r=Ds();let s=[],i=0;for(;i<t.length;i++){const a=t[i],l=Hue[a];if(l!==void 0)r.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const c=_ue(r);i>0||c.length>0?(e.push("%c"+a),n.push(c)):e.push(a)}else break}}for(i>0&&(s=n,s.unshift(e.join("")));i<t.length;i++){const a=t[i];a instanceof Symbol||s.push(a)}return s},NB=Wce?Uue:Fue,zue=(...t)=>{console.log(...NB(t)),AB.forEach(e=>e.print(t))},_B=(...t)=>{console.warn(...NB(t)),t.unshift(gN),AB.forEach(e=>e.print(t))},AB=Bc(),jB=t=>({[Symbol.iterator](){return this},next:t}),Vue=(t,e)=>jB(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),jw=(t,e)=>jB(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class bN{constructor(e,n){this.clock=e,this.len=n}}class dh{constructor(){this.clients=new Map}}const pl=(t,e,n)=>e.clients.forEach((r,s)=>{const i=t.doc.store.clients.get(s);if(i!=null){const o=i[i.length-1],a=o.id.clock+o.length;for(let l=0,c=r[l];l<r.length&&c.clock<a;c=r[++l])VB(t,i,c.clock,c.len,n)}}),Wue=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const s=gi((n+r)/2),i=t[s],o=i.clock;if(o<=e){if(e<o+i.len)return s;n=s+1}else r=s-1}return null},hh=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&Wue(n,e.clock)!==null},xN=t=>{t.clients.forEach(e=>{e.sort((s,i)=>s.clock-i.clock);let n,r;for(n=1,r=1;n<e.length;n++){const s=e[r-1],i=e[n];s.clock+s.len>=i.clock?s.len=bi(s.len,i.clock+i.len-s.clock):(r<n&&(e[r]=i),r++)}e.length=r})},U2=t=>{const e=new dh;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,s)=>{if(!e.clients.has(s)){const i=r.slice();for(let o=n+1;o<t.length;o++)qle(i,t[o].clients.get(s)||[]);e.clients.set(s,i)}});return xN(e),e},_p=(t,e,n,r)=>{go(t.clients,e,()=>[]).push(new bN(n,r))},OB=()=>new dh,IB=t=>{const e=OB();return t.clients.forEach((n,r)=>{const s=[];for(let i=0;i<n.length;i++){const o=n[i];if(o.deleted){const a=o.id.clock;let l=o.length;if(i+1<n.length)for(let c=n[i+1];i+1<n.length&&c.deleted;c=n[++i+1])l+=c.length;s.push(new bN(a,l))}}s.length>0&&e.clients.set(r,s)}),e},fh=(t,e)=>{Ke(t.restEncoder,e.clients.size),fl(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Ke(t.restEncoder,n);const s=r.length;Ke(t.restEncoder,s);for(let i=0;i<s;i++){const o=r[i];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},yN=t=>{const e=new dh,n=ze(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const s=ze(t.restDecoder),i=ze(t.restDecoder);if(i>0){const o=go(e.clients,s,()=>[]);for(let a=0;a<i;a++)o.push(new bN(t.readDsClock(),t.readDsLen()))}}return e},v5=(t,e,n)=>{const r=new dh,s=ze(t.restDecoder);for(let i=0;i<s;i++){t.resetDsCurVal();const o=ze(t.restDecoder),a=ze(t.restDecoder),l=n.clients.get(o)||[],c=Xt(n,o);for(let d=0;d<a;d++){const h=t.readDsClock(),f=h+t.readDsLen();if(h<c){c<f&&_p(r,o,c,f-c);let p=zs(l,h),m=l[p];for(!m.deleted&&m.id.clock<h&&(l.splice(p+1,0,ex(e,m,h-m.id.clock)),p++);p<l.length&&(m=l[p++],m.id.clock<f);)m.deleted||(f<m.id.clock+m.length&&l.splice(p,0,ex(e,m,f-m.id.clock)),m.delete(e))}else _p(r,o,h,f-h)}}if(r.clients.size>0){const i=new $c;return Ke(i.restEncoder,0),fh(i,r),i.toUint8Array()}return null},MB=eB;class _l extends K7{constructor({guid:e=Ace(),collectionid:n=null,gc:r=!0,gcFilter:s=()=>!0,meta:i=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=s,this.clientID=MB(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new UB,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=g5(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>g5(c=>{const d=h=>{(h===void 0||h===!0)&&(this.off("sync",d),c())};this.on("sync",d)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&gt(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(fl(this.subdocs).map(e=>e.guid))}transact(e,n=null){return gt(this,e,n)}get(e,n=Sn){const r=go(this.share,e,()=>{const i=new n;return i._integrate(this,null),i}),s=r.constructor;if(n!==Sn&&s!==n)if(s===Sn){const i=new n;i._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=i}),i._start=r._start;for(let o=i._start;o!==null;o=o.right)o.parent=i;return i._length=r._length,this.share.set(e,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,fd)}getText(e=""){return this.get(e,ml)}getMap(e=""){return this.get(e,zd)}getXmlElement(e=""){return this.get(e,Ln)}getXmlFragment(e=""){return this.get(e,Fc)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,fl(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new _l({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,gt(e.parent.doc,r=>{const s=n.doc;e.deleted||r.subdocsAdded.add(s),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class RB{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return ze(this.restDecoder)}readDsLen(){return ze(this.restDecoder)}}class PB extends RB{readLeftID(){return Me(ze(this.restDecoder),ze(this.restDecoder))}readRightID(){return Me(ze(this.restDecoder),ze(this.restDecoder))}readClient(){return ze(this.restDecoder)}readInfo(){return $d(this.restDecoder)}readString(){return cd(this.restDecoder)}readParentInfo(){return ze(this.restDecoder)===1}readTypeRef(){return ze(this.restDecoder)}readLen(){return ze(this.restDecoder)}readAny(){return Sp(this.restDecoder)}readBuf(){return Jce(Xr(this.restDecoder))}readJSON(){return JSON.parse(cd(this.restDecoder))}readKey(){return cd(this.restDecoder)}}class que{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ze(this.restDecoder),this.dsCurrVal}readDsLen(){const e=ze(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Ud extends que{constructor(e){super(e),this.keys=[],ze(e),this.keyClockDecoder=new Nw(Xr(e)),this.clientDecoder=new Cg(Xr(e)),this.leftClockDecoder=new Nw(Xr(e)),this.rightClockDecoder=new Nw(Xr(e)),this.infoDecoder=new m5(Xr(e),$d),this.stringDecoder=new Cce(Xr(e)),this.parentInfoDecoder=new m5(Xr(e),$d),this.typeRefDecoder=new Cg(Xr(e)),this.lenDecoder=new Cg(Xr(e))}readLeftID(){return new dd(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new dd(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Sp(this.restDecoder)}readBuf(){return Xr(this.restDecoder)}readJSON(){return Sp(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class DB{constructor(){this.restEncoder=hm()}toUint8Array(){return si(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Ke(this.restEncoder,e)}writeDsLen(e){Ke(this.restEncoder,e)}}class pm extends DB{writeLeftID(e){Ke(this.restEncoder,e.client),Ke(this.restEncoder,e.clock)}writeRightID(e){Ke(this.restEncoder,e.client),Ke(this.restEncoder,e.clock)}writeClient(e){Ke(this.restEncoder,e)}writeInfo(e){B2(this.restEncoder,e)}writeString(e){ld(this.restEncoder,e)}writeParentInfo(e){Ke(this.restEncoder,e?1:0)}writeTypeRef(e){Ke(this.restEncoder,e)}writeLen(e){Ke(this.restEncoder,e)}writeAny(e){Bd(this.restEncoder,e)}writeBuf(e){Qr(this.restEncoder,e)}writeJSON(e){ld(this.restEncoder,JSON.stringify(e))}writeKey(e){ld(this.restEncoder,e)}}class LB{constructor(){this.restEncoder=hm(),this.dsCurrVal=0}toUint8Array(){return si(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Ke(this.restEncoder,n)}writeDsLen(e){e===0&&br(),Ke(this.restEncoder,e-1),this.dsCurrVal+=e}}class $c extends LB{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Tw,this.clientEncoder=new Eg,this.leftClockEncoder=new Tw,this.rightClockEncoder=new Tw,this.infoEncoder=new h5(B2),this.stringEncoder=new mce,this.parentInfoEncoder=new h5(B2),this.typeRefEncoder=new Eg,this.lenEncoder=new Eg}toUint8Array(){const e=hm();return Ke(e,0),Qr(e,this.keyClockEncoder.toUint8Array()),Qr(e,this.clientEncoder.toUint8Array()),Qr(e,this.leftClockEncoder.toUint8Array()),Qr(e,this.rightClockEncoder.toUint8Array()),Qr(e,si(this.infoEncoder)),Qr(e,this.stringEncoder.toUint8Array()),Qr(e,si(this.parentInfoEncoder)),Qr(e,this.typeRefEncoder.toUint8Array()),Qr(e,this.lenEncoder.toUint8Array()),n1(e,si(this.restEncoder)),si(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Bd(this.restEncoder,e)}writeBuf(e){Qr(this.restEncoder,e)}writeJSON(e){Bd(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const Gue=(t,e,n,r)=>{r=bi(r,e[0].id.clock);const s=zs(e,r);Ke(t.restEncoder,e.length-s),t.writeClient(n),Ke(t.restEncoder,r);const i=e[s];i.write(t,r-i.id.clock);for(let o=s+1;o<e.length;o++)e[o].write(t,0)},vN=(t,e,n)=>{const r=new Map;n.forEach((s,i)=>{Xt(e,i)>s&&r.set(i,s)}),mm(e).forEach((s,i)=>{n.has(i)||r.set(i,0)}),Ke(t.restEncoder,r.size),fl(r.entries()).sort((s,i)=>i[0]-s[0]).forEach(([s,i])=>{Gue(t,e.clients.get(s),s,i)})},Yue=(t,e)=>{const n=Ds(),r=ze(t.restDecoder);for(let s=0;s<r;s++){const i=ze(t.restDecoder),o=new Array(i),a=t.readClient();let l=ze(t.restDecoder);n.set(a,{i:0,refs:o});for(let c=0;c<i;c++){const d=t.readInfo();switch(t1&d){case 0:{const h=t.readLen();o[c]=new js(Me(a,l),h),l+=h;break}case 10:{const h=ze(t.restDecoder);o[c]=new Os(Me(a,l),h),l+=h;break}default:{const h=(d&(qo|fr))===0,f=new Nt(Me(a,l),null,(d&fr)===fr?t.readLeftID():null,null,(d&qo)===qo?t.readRightID():null,h?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,h&&(d&Ep)===Ep?t.readString():null,h$(t,d));o[c]=f,l+=f.length}}}}return n},Kue=(t,e,n)=>{const r=[];let s=fl(n.keys()).sort((p,m)=>p-m);if(s.length===0)return null;const i=()=>{if(s.length===0)return null;let p=n.get(s[s.length-1]);for(;p.refs.length===p.i;)if(s.pop(),s.length>0)p=n.get(s[s.length-1]);else return null;return p};let o=i();if(o===null)return null;const a=new UB,l=new Map,c=(p,m)=>{const g=l.get(p);(g==null||g>m)&&l.set(p,m)};let d=o.refs[o.i++];const h=new Map,f=()=>{for(const p of r){const m=p.id.client,g=n.get(m);g?(g.i--,a.clients.set(m,g.refs.slice(g.i)),n.delete(m),g.i=0,g.refs=[]):a.clients.set(m,[p]),s=s.filter(x=>x!==m)}r.length=0};for(;;){if(d.constructor!==Os){const m=go(h,d.id.client,()=>Xt(e,d.id.client))-d.id.clock;if(m<0)r.push(d),c(d.id.client,d.id.clock-1),f();else{const g=d.getMissing(t,e);if(g!==null){r.push(d);const x=n.get(g)||{refs:[],i:0};if(x.refs.length===x.i)c(g,Xt(e,g)),f();else{d=x.refs[x.i++];continue}}else(m===0||m<d.length)&&(d.integrate(t,m),h.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(o!==null&&o.i<o.refs.length)d=o.refs[o.i++];else{if(o=i(),o===null)break;d=o.refs[o.i++]}}if(a.clients.size>0){const p=new $c;return vN(p,a,new Map),Ke(p.restEncoder,0),{missing:l,update:p.toUint8Array()}}return null},Jue=(t,e)=>vN(t,e.doc.store,e.beforeState),Que=(t,e,n,r=new Ud(t))=>gt(e,s=>{s.local=!1;let i=!1;const o=s.doc,a=o.store,l=Yue(r,o),c=Kue(s,a,l),d=a.pendingStructs;if(d){for(const[f,p]of d.missing)if(p<Xt(a,f)){i=!0;break}if(c){for(const[f,p]of c.missing){const m=d.missing.get(f);(m==null||m>p)&&d.missing.set(f,p)}d.update=Kb([d.update,c.update])}}else a.pendingStructs=c;const h=v5(r,s,a);if(a.pendingDs){const f=new Ud(lh(a.pendingDs));ze(f.restDecoder);const p=v5(f,s,a);h&&p?a.pendingDs=Kb([h,p]):a.pendingDs=h||p}else a.pendingDs=h;if(i){const f=a.pendingStructs.update;a.pendingStructs=null,Yb(s.doc,f)}},n,!1),Yb=(t,e,n,r=Ud)=>{const s=lh(e);Que(s,t,n,new r(s))},w5=(t,e,n)=>Yb(t,e,n,PB),Xue=(t,e,n=new Map)=>{vN(t,e.store,n),fh(t,IB(e.store))},Zue=(t,e=new Uint8Array([0]),n=new $c)=>{const r=BB(e);Xue(n,t,r);const s=[n.toUint8Array()];if(t.store.pendingDs&&s.push(t.store.pendingDs),t.store.pendingStructs&&s.push(xde(t.store.pendingStructs.update,e)),s.length>1){if(n.constructor===pm)return gde(s.map((i,o)=>o===0?i:vde(i)));if(n.constructor===$c)return Kb(s)}return s[0]},k5=(t,e)=>Zue(t,e,new pm),ede=t=>{const e=new Map,n=ze(t.restDecoder);for(let r=0;r<n;r++){const s=ze(t.restDecoder),i=ze(t.restDecoder);e.set(s,i)}return e},BB=t=>ede(new RB(lh(t))),$B=(t,e)=>(Ke(t.restEncoder,e.size),fl(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{Ke(t.restEncoder,n),Ke(t.restEncoder,r)}),t),tde=(t,e)=>$B(t,mm(e.store)),nde=(t,e=new LB)=>(t instanceof Map?$B(e,t):tde(e,t),e.toUint8Array()),rde=t=>nde(t,new DB);class sde{constructor(){this.l=[]}}const E5=()=>new sde,C5=(t,e)=>t.l.push(e),S5=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(s=>e!==s),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},FB=(t,e,n)=>uN(t.l,[e,n]);class dd{constructor(e,n){this.client=e,this.clock=n}}const Gu=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,Me=(t,e)=>new dd(t,e),Ap=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw br()},jp=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class Op{constructor(e,n,r,s=0){this.type=e,this.tname=n,this.item=r,this.assoc=s}}const Sf=t=>new Op(t.type==null?null:Me(t.type.client,t.type.clock),t.tname??null,t.item==null?null:Me(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class ide{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const ode=(t,e,n=0)=>new ide(t,e,n),S0=(t,e,n)=>{let r=null,s=null;return t._item===null?s=Ap(t):r=Me(t._item.id.client,t._item.id.clock),new Op(r,s,e,n)},Ow=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return S0(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return S0(t,Me(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return S0(t,r.lastId,n);r=r.right}return S0(t,null,n)},ade=(t,e)=>{const n=hd(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},lde=(t,e,n=!0)=>{const r=e.store,s=t.item,i=t.type,o=t.tname,a=t.assoc;let l=null,c=0;if(s!==null){if(Xt(r,s.client)<=s.clock)return null;const d=n?q2(r,s):ade(r,s),h=d.item;if(!(h instanceof Nt))return null;if(l=h.parent,l._item===null||!l._item.deleted){c=h.deleted||!h.countable?0:d.diff+(a>=0?0:1);let f=h.left;for(;f!==null;)!f.deleted&&f.countable&&(c+=f.length),f=f.left}}else{if(o!==null)l=e.get(o);else if(i!==null){if(Xt(r,i.client)<=i.clock)return null;const{item:d}=n?q2(r,i):{item:hd(r,i)};if(d instanceof Nt&&d.content instanceof Ci)l=d.content.type;else return null}else throw br();a>=0?c=l._length:c=0}return ode(l,c,t.assoc)},T5=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&Gu(t.item,e.item)&&Gu(t.type,e.type)&&t.assoc===e.assoc;class wN{constructor(e,n){this.ds=e,this.sv=n}}const HB=(t,e)=>new wN(t,e),Iw=t=>HB(IB(t.store),mm(t.store)),Zl=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!hh(e.ds,t.id),z2=(t,e)=>{const n=go(t.meta,z2,Bc),r=t.doc.store;n.has(e)||(e.sv.forEach((s,i)=>{s<Xt(r,i)&&Ir(t,Me(i,s))}),pl(t,e.ds,s=>{}),n.add(e))};class UB{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const mm=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const s=n[n.length-1];e.set(r,s.id.clock+s.length)}),e},Xt=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},zB=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw br()}n.push(e)},zs=(t,e)=>{let n=0,r=t.length-1,s=t[r],i=s.id.clock;if(i===e)return r;let o=gi(e/(i+s.length-1)*r);for(;n<=r;){if(s=t[o],i=s.id.clock,i<=e){if(e<i+s.length)return o;n=o+1}else r=o-1;o=gi((n+r)/2)}throw br()},cde=(t,e)=>{const n=t.clients.get(e.client);return n[zs(n,e.clock)]},hd=cde,V2=(t,e,n)=>{const r=zs(e,n),s=e[r];return s.id.clock<n&&s instanceof Nt?(e.splice(r+1,0,ex(t,s,n-s.id.clock)),r+1):r},Ir=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[V2(t,n,e.clock)]},N5=(t,e,n)=>{const r=e.clients.get(n.client),s=zs(r,n.clock),i=r[s];return n.clock!==i.id.clock+i.length-1&&i.constructor!==js&&r.splice(s+1,0,ex(t,i,n.clock-i.id.clock+1)),i},ude=(t,e,n)=>{const r=t.clients.get(e.id.client);r[zs(r,e.id.clock)]=n},VB=(t,e,n,r,s)=>{if(r===0)return;const i=n+r;let o=V2(t,e,n),a;do a=e[o++],i<a.id.clock+a.length&&V2(t,e,i),s(a);while(o<e.length&&e[o].id.clock<i)};class dde{constructor(e,n,r){this.doc=e,this.deleteSet=new dh,this.beforeState=mm(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const _5=(t,e)=>e.deleteSet.clients.size===0&&!Wle(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(xN(e.deleteSet),Jue(t,e),fh(t,e.deleteSet),!0),A5=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&go(t.changed,e,Bc).add(n)},Tg=(t,e)=>{let n=t[e],r=t[e-1],s=e;for(;s>0;n=r,r=t[--s-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Nt&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=e-s;return i&&t.splice(e+1-i,i),i},hde=(t,e,n)=>{for(const[r,s]of t.clients.entries()){const i=e.clients.get(r);for(let o=s.length-1;o>=0;o--){const a=s[o],l=a.clock+a.len;for(let c=zs(i,a.clock),d=i[c];c<i.length&&d.id.clock<l;d=i[++c]){const h=i[c];if(a.clock+a.len<=h.id.clock)break;h instanceof Nt&&h.deleted&&!h.keep&&n(h)&&h.gc(e,!1)}}}},fde=(t,e)=>{t.clients.forEach((n,r)=>{const s=e.clients.get(r);for(let i=n.length-1;i>=0;i--){const o=n[i],a=Wo(s.length-1,1+zs(s,o.clock+o.len-1));for(let l=a,c=s[l];l>0&&c.id.clock>=o.clock;c=s[l])l-=1+Tg(s,l)}})},WB=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,s=r.store,i=n.deleteSet,o=n._mergeStructs;try{xN(i),n.afterState=mm(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(d=>d.target._item===null||!d.target._item.deleted),l.forEach(d=>{d.currentTarget=c,d._path=null}),l.sort((d,h)=>d.path.length-h.path.length),FB(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),uN(a,[]),n._needFormattingCleanup&&Rde(n)}finally{r.gc&&hde(i,s,r.gcFilter),fde(i,s),n.afterState.forEach((d,h)=>{const f=n.beforeState.get(h)||0;if(f!==d){const p=s.clients.get(h),m=bi(zs(p,f),1);for(let g=p.length-1;g>=m;)g-=1+Tg(p,g)}});for(let d=o.length-1;d>=0;d--){const{client:h,clock:f}=o[d].id,p=s.clients.get(h),m=zs(p,f);m+1<p.length&&Tg(p,m+1)>1||m>0&&Tg(p,m)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(zue(gN,CB,"[yjs] ",SB,TB,"Changed the client-id because another client seems to be using it."),r.clientID=MB()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const d=new pm;_5(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const d=new $c;_5(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),c.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):WB(t,e+1)}}},gt=(t,e,n=null,r=!0)=>{const s=t._transactionCleanups;let i=!1,o=null;t._transaction===null&&(i=!0,t._transaction=new dde(t,n,r),s.push(t._transaction),s.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(i){const a=t._transaction===s[0];t._transaction=null,a&&WB(s,0)}}return o};class pde{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const j5=(t,e,n)=>{pl(t,n.deletions,r=>{r instanceof Nt&&e.scope.some(s=>s===t.doc||jp(s,r))&&AN(r,!1)})},O5=(t,e,n)=>{let r=null;const s=t.doc,i=t.scope;gt(s,a=>{for(;e.length>0&&t.currStackItem===null;){const l=s.store,c=e.pop(),d=new Set,h=[];let f=!1;pl(a,c.insertions,p=>{if(p instanceof Nt){if(p.redone!==null){let{item:m,diff:g}=q2(l,p.id);g>0&&(m=Ir(a,Me(m.id.client,m.id.clock+g))),p=m}!p.deleted&&i.some(m=>m===a.doc||jp(m,p))&&h.push(p)}}),pl(a,c.deletions,p=>{p instanceof Nt&&i.some(m=>m===a.doc||jp(m,p))&&!hh(c.insertions,p.id)&&d.add(p)}),d.forEach(p=>{f=d$(a,p,d,c.insertions,t.ignoreRemoteMapChanges,t)!==null||f});for(let p=h.length-1;p>=0;p--){const m=h[p];t.deleteFilter(m)&&(m.delete(a),f=!0)}t.currStackItem=f?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=a},t);const o=t.currStackItem;if(o!=null){const a=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:o,type:n,changedParentTypes:a,origin:t},t]),t.currStackItem=null}return o};class qB extends K7{constructor(e,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:s=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:a=Ld(e)?e[0].doc:e instanceof _l?e:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=s,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(x=>l.changedParentTypes.has(x)||x===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,d=this.redoing,h=c?this.redoStack:this.undoStack;c?this.stopCapturing():d||this.clear(!1,!0);const f=new dh;l.afterState.forEach((x,b)=>{const v=l.beforeState.get(b)||0,w=x-v;w>0&&_p(f,b,v,w)});const p=jce();let m=!1;if(this.lastChange>0&&p-this.lastChange<this.captureTimeout&&h.length>0&&!c&&!d){const x=h[h.length-1];x.deletions=U2([x.deletions,l.deleteSet]),x.insertions=U2([x.insertions,f])}else h.push(new pde(l.deleteSet,f)),m=!0;!c&&!d&&(this.lastChange=p),pl(l,l.deleteSet,x=>{x instanceof Nt&&this.scope.some(b=>b===l.doc||jp(b,x))&&AN(x,!0)});const g=[{stackItem:h[h.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];m?this.emit("stack-item-added",g):this.emit("stack-item-updated",g)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const n=new Set(this.scope);e=Ld(e)?e:[e],e.forEach(r=>{n.has(r)||(n.add(r),(r instanceof Sn?r.doc!==this.doc:r!==this.doc)&&_B("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(s=>j5(r,this,s)),this.undoStack=[]),n&&(this.redoStack.forEach(s=>j5(r,this,s)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=O5(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=O5(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*mde(t){const e=ze(t.restDecoder);for(let n=0;n<e;n++){const r=ze(t.restDecoder),s=t.readClient();let i=ze(t.restDecoder);for(let o=0;o<r;o++){const a=t.readInfo();if(a===10){const l=ze(t.restDecoder);yield new Os(Me(s,i),l),i+=l}else if(t1&a){const l=(a&(qo|fr))===0,c=new Nt(Me(s,i),null,(a&fr)===fr?t.readLeftID():null,null,(a&qo)===qo?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(a&Ep)===Ep?t.readString():null,h$(t,a));yield c,i+=c.length}else{const l=t.readLen();yield new js(Me(s,i),l),i+=l}}}}class kN{constructor(e,n){this.gen=mde(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Os);return this.curr}}class EN{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const gde=t=>Kb(t,PB,pm),bde=(t,e)=>{if(t.constructor===js){const{client:n,clock:r}=t.id;return new js(Me(n,r+e),t.length-e)}else if(t.constructor===Os){const{client:n,clock:r}=t.id;return new Os(Me(n,r+e),t.length-e)}else{const n=t,{client:r,clock:s}=n.id;return new Nt(Me(r,s+e),null,Me(r,s+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Kb=(t,e=Ud,n=$c)=>{if(t.length===1)return t[0];const r=t.map(d=>new e(lh(d)));let s=r.map(d=>new kN(d,!0)),i=null;const o=new n,a=new EN(o);for(;s=s.filter(f=>f.curr!==null),s.sort((f,p)=>{if(f.curr.id.client===p.curr.id.client){const m=f.curr.id.clock-p.curr.id.clock;return m===0?f.curr.constructor===p.curr.constructor?0:f.curr.constructor===Os?1:-1:m}else return p.curr.id.client-f.curr.id.client}),s.length!==0;){const d=s[0],h=d.curr.id.client;if(i!==null){let f=d.curr,p=!1;for(;f!==null&&f.id.clock+f.length<=i.struct.id.clock+i.struct.length&&f.id.client>=i.struct.id.client;)f=d.next(),p=!0;if(f===null||f.id.client!==h||p&&f.id.clock>i.struct.id.clock+i.struct.length)continue;if(h!==i.struct.id.client)Ma(a,i.struct,i.offset),i={struct:f,offset:0},d.next();else if(i.struct.id.clock+i.struct.length<f.id.clock)if(i.struct.constructor===Os)i.struct.length=f.id.clock+f.length-i.struct.id.clock;else{Ma(a,i.struct,i.offset);const m=f.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Os(Me(h,i.struct.id.clock+i.struct.length),m),offset:0}}else{const m=i.struct.id.clock+i.struct.length-f.id.clock;m>0&&(i.struct.constructor===Os?i.struct.length-=m:f=bde(f,m)),i.struct.mergeWith(f)||(Ma(a,i.struct,i.offset),i={struct:f,offset:0},d.next())}}else i={struct:d.curr,offset:0},d.next();for(let f=d.curr;f!==null&&f.id.client===h&&f.id.clock===i.struct.id.clock+i.struct.length&&f.constructor!==Os;f=d.next())Ma(a,i.struct,i.offset),i={struct:f,offset:0}}i!==null&&(Ma(a,i.struct,i.offset),i=null),CN(a);const l=r.map(d=>yN(d)),c=U2(l);return fh(o,c),o.toUint8Array()},xde=(t,e,n=Ud,r=$c)=>{const s=BB(e),i=new r,o=new EN(i),a=new n(lh(t)),l=new kN(a,!1);for(;l.curr;){const d=l.curr,h=d.id.client,f=s.get(h)||0;if(l.curr.constructor===Os){l.next();continue}if(d.id.clock+d.length>f)for(Ma(o,d,bi(f-d.id.clock,0)),l.next();l.curr&&l.curr.id.client===h;)Ma(o,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===h&&l.curr.id.clock+l.curr.length<=f;)l.next()}CN(o);const c=yN(a);return fh(i,c),i.toUint8Array()},GB=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:si(t.encoder.restEncoder)}),t.encoder.restEncoder=hm(),t.written=0)},Ma=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&GB(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Ke(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},CN=t=>{GB(t);const e=t.encoder.restEncoder;Ke(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Ke(e,r.written),n1(e,r.restEncoder)}},yde=(t,e,n,r)=>{const s=new n(lh(t)),i=new kN(s,!1),o=new r,a=new EN(o);for(let c=i.curr;c!==null;c=i.next())Ma(a,e(c),0);CN(a);const l=yN(s);return fh(o,l),o.toUint8Array()},vde=t=>yde(t,Fce,Ud,pm),I5="You must not compute changes after the event-handler fired.";class c1{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=wde(this.currentTarget,this.target))}deletes(e){return hh(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw co(I5);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(s=>{if(s!==null){const i=n._map.get(s);let o,a;if(this.adds(i)){let l=i.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(i))if(l!==null&&this.deletes(l))o="delete",a=Ew(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=Ew(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(i))o="delete",a=Ew(i.content.getContent());else return;e.set(s,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw co(I5);const n=this.target,r=Bc(),s=Bc(),i=[];if(e={added:r,deleted:s,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&i.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,s.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const wde=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)!s.deleted&&s.countable&&(r+=s.length),s=s.right;n.unshift(r)}e=e._item.parent}return n},Zn=()=>{_B("Invalid access: Add Yjs type to a document before reading data.")},YB=80;let SN=0;class kde{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=SN++}}const Ede=t=>{t.timestamp=SN++},KB=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=SN++},Cde=(t,e,n)=>{if(t.length>=YB){const r=t.reduce((s,i)=>s.timestamp<i.timestamp?s:i);return KB(r,e,n),r}else{const r=new kde(e,n);return t.push(r),r}},u1=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((i,o)=>kg(e-i.index)<kg(e-o.index)?i:o);let r=t._start,s=0;for(n!==null&&(r=n.p,s=n.index,Ede(n));r.right!==null&&s<e;){if(!r.deleted&&r.countable){if(e<s+r.length)break;s+=r.length}r=r.right}for(;r.left!==null&&s>e;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);return n!==null&&kg(n.index-s)<r.parent.length/YB?(KB(n,r,s),n):Cde(t._searchMarker,r,s)},Ip=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const s=t[r];if(n>0){let i=s.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(s.index-=i.length);if(i===null||i.marker===!0){t.splice(r,1);continue}s.p=i,i.marker=!0}(e<s.index||n>0&&e===s.index)&&(s.index=bi(e,s.index+n))}},d1=(t,e,n)=>{const r=t,s=e.changedParentTypes;for(;go(s,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;FB(r._eH,n,e)};class Sn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=E5(),this._dEH=E5(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Ls()}clone(){throw Ls()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){C5(this._eH,e)}observeDeep(e){C5(this._dEH,e)}unobserve(e){S5(this._eH,e)}unobserveDeep(e){S5(this._dEH,e)}toJSON(){}}const JB=(t,e,n)=>{t.doc??Zn(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const s=[];let i=t._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const o=i.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&r>0;a++)s.push(o[a]),r--;e=0}}i=i.right}return s},QB=t=>{t.doc??Zn();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let s=0;s<r.length;s++)e.push(r[s])}n=n.right}return e},XB=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&Zl(r,e)){const s=r.content.getContent();for(let i=0;i<s.length;i++)n.push(s[i])}r=r.right}return n},Mp=(t,e)=>{let n=0,r=t._start;for(t.doc??Zn();r!==null;){if(r.countable&&!r.deleted){const s=r.content.getContent();for(let i=0;i<s.length;i++)e(s[i],n++,t)}r=r.right}},ZB=(t,e)=>{const n=[];return Mp(t,(r,s)=>{n.push(e(r,s,t))}),n},Sde=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const s=n[r++];return n.length<=r&&(n=null),{done:!1,value:s}}}},e$=(t,e)=>{t.doc??Zn();const n=u1(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},Jb=(t,e,n,r)=>{let s=n;const i=t.doc,o=i.clientID,a=i.store,l=n===null?e._start:n.right;let c=[];const d=()=>{c.length>0&&(s=new Nt(Me(o,Xt(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new Hc(c)),s.integrate(t,0),c=[])};r.forEach(h=>{if(h===null)c.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(h);break;default:switch(d(),h.constructor){case Uint8Array:case ArrayBuffer:s=new Nt(Me(o,Xt(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new gm(new Uint8Array(h))),s.integrate(t,0);break;case _l:s=new Nt(Me(o,Xt(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new bm(h)),s.integrate(t,0);break;default:if(h instanceof Sn)s=new Nt(Me(o,Xt(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new Ci(h)),s.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},t$=()=>co("Length exceeded!"),n$=(t,e,n,r)=>{if(n>e._length)throw t$();if(n===0)return e._searchMarker&&Ip(e._searchMarker,n,r.length),Jb(t,e,null,r);const s=n,i=u1(e,n);let o=e._start;for(i!==null&&(o=i.p,n-=i.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&Ir(t,Me(o.id.client,o.id.clock+n));break}n-=o.length}return e._searchMarker&&Ip(e._searchMarker,s,r.length),Jb(t,e,o,r)},Tde=(t,e,n)=>{let s=(e._searchMarker||[]).reduce((i,o)=>o.index>i.index?o:i,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return Jb(t,e,s,n)},r$=(t,e,n,r)=>{if(r===0)return;const s=n,i=r,o=u1(e,n);let a=e._start;for(o!==null&&(a=o.p,n-=o.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Ir(t,Me(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&Ir(t,Me(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw t$();e._searchMarker&&Ip(e._searchMarker,s,-i+r)},Qb=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},TN=(t,e,n,r)=>{const s=e._map.get(n)||null,i=t.doc,o=i.clientID;let a;if(r==null)a=new Hc([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new Hc([r]);break;case Uint8Array:a=new gm(r);break;case _l:a=new bm(r);break;default:if(r instanceof Sn)a=new Ci(r);else throw new Error("Unexpected content type")}new Nt(Me(o,Xt(i.store,o)),s,s&&s.lastId,null,null,e,n,a).integrate(t,0)},NN=(t,e)=>{t.doc??Zn();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},s$=t=>{const e={};return t.doc??Zn(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},i$=(t,e)=>{t.doc??Zn();const n=t._map.get(e);return n!==void 0&&!n.deleted},Nde=(t,e)=>{const n={};return t._map.forEach((r,s)=>{let i=r;for(;i!==null&&(!e.sv.has(i.id.client)||i.id.clock>=(e.sv.get(i.id.client)||0));)i=i.left;i!==null&&Zl(i,e)&&(n[s]=i.content.getContent()[i.length-1])}),n},T0=t=>(t.doc??Zn(),Vue(t._map.entries(),e=>!e[1].deleted));class _de extends c1{}class fd extends Sn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new fd;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new fd}clone(){const e=new fd;return e.insert(0,this.toArray().map(n=>n instanceof Sn?n.clone():n)),e}get length(){return this.doc??Zn(),this._length}_callObserver(e,n){super._callObserver(e,n),d1(this,e,new _de(this,e))}insert(e,n){this.doc!==null?gt(this.doc,r=>{n$(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?gt(this.doc,n=>{Tde(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?gt(this.doc,r=>{r$(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return e$(this,e)}toArray(){return QB(this)}slice(e=0,n=this.length){return JB(this,e,n)}toJSON(){return this.map(e=>e instanceof Sn?e.toJSON():e)}map(e){return ZB(this,e)}forEach(e){Mp(this,e)}[Symbol.iterator](){return Sde(this)}_write(e){e.writeTypeRef(Zde)}}const Ade=t=>new fd;class jde extends c1{constructor(e,n,r){super(e,n),this.keysChanged=r}}class zd extends Sn{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,s)=>{this.set(s,r)}),this._prelimContent=null}_copy(){return new zd}clone(){const e=new zd;return this.forEach((n,r)=>{e.set(r,n instanceof Sn?n.clone():n)}),e}_callObserver(e,n){d1(this,e,new jde(this,e,n))}toJSON(){this.doc??Zn();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const s=n.content.getContent()[n.length-1];e[r]=s instanceof Sn?s.toJSON():s}}),e}get size(){return[...T0(this)].length}keys(){return jw(T0(this),e=>e[0])}values(){return jw(T0(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return jw(T0(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Zn(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?gt(this.doc,n=>{Qb(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?gt(this.doc,r=>{TN(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return NN(this,e)}has(e){return i$(this,e)}clear(){this.doc!==null?gt(this.doc,e=>{this.forEach(function(n,r,s){Qb(e,s,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(ehe)}}const Ode=t=>new zd,Ha=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&Bce(t,e);class W2{constructor(e,n,r,s){this.left=e,this.right=n,this.index=r,this.currentAttributes=s}forward(){switch(this.right===null&&br(),this.right.content.constructor){case dn:this.right.deleted||ph(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const M5=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case dn:e.right.deleted||ph(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Ir(t,Me(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},N0=(t,e,n,r)=>{const s=new Map,i=r?u1(e,n):null;if(i){const o=new W2(i.p.left,i.p,i.index,s);return M5(t,o,n-i.index)}else{const o=new W2(null,e._start,0,s);return M5(t,o,n)}},o$=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===dn&&Ha(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const s=t.doc,i=s.clientID;r.forEach((o,a)=>{const l=n.left,c=n.right,d=new Nt(Me(i,Xt(s.store,i)),l,l&&l.lastId,c,c&&c.id,e,null,new dn(a,o));d.integrate(t,0),n.right=d,n.forward()})},ph=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},a$=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===dn&&Ha(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},l$=(t,e,n,r)=>{const s=t.doc,i=s.clientID,o=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!Ha(c,l)){o.set(a,c);const{left:d,right:h}=n;n.right=new Nt(Me(i,Xt(s.store,i)),d,d&&d.lastId,h,h&&h.id,e,null,new dn(a,l)),n.right.integrate(t,0),n.forward()}}return o},Mw=(t,e,n,r,s)=>{n.currentAttributes.forEach((f,p)=>{s[p]===void 0&&(s[p]=null)});const i=t.doc,o=i.clientID;a$(n,s);const a=l$(t,e,n,s),l=r.constructor===String?new xi(r):r instanceof Sn?new Ci(r):new Qc(r);let{left:c,right:d,index:h}=n;e._searchMarker&&Ip(e._searchMarker,n.index,l.getLength()),d=new Nt(Me(o,Xt(i.store,o)),c,c&&c.lastId,d,d&&d.id,e,null,l),d.integrate(t,0),n.right=d,n.index=h,n.forward(),o$(t,e,n,a)},R5=(t,e,n,r,s)=>{const i=t.doc,o=i.clientID;a$(n,s);const a=l$(t,e,n,s);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===dn));){if(!n.right.deleted)switch(n.right.content.constructor){case dn:{const{key:l,value:c}=n.right.content,d=s[l];if(d!==void 0){if(Ha(d,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(t)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&Ir(t,Me(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new Nt(Me(o,Xt(i.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new xi(l)),n.right.integrate(t,0),n.forward()}o$(t,e,n,a)},c$=(t,e,n,r,s)=>{let i=e;const o=Ds();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===dn){const c=i.content;o.set(c.key,c)}i=i.right}let a=0,l=!1;for(;e!==i;){if(n===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case dn:{const{key:d,value:h}=c,f=r.get(d)??null;(o.get(d)!==c||f===h)&&(e.delete(t),a++,!l&&(s.get(d)??null)===h&&f!==h&&(f===null?s.delete(d):s.set(d,f))),!l&&!e.deleted&&ph(s,c);break}}}e=e.right}return a},Ide=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===dn){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},Mde=t=>{let e=0;return gt(t.doc,n=>{let r=t._start,s=t._start,i=Ds();const o=D2(i);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case dn:ph(o,s.content);break;default:e+=c$(n,r,s,i,o),i=D2(o),r=s;break}s=s.right}}),e},Rde=t=>{const e=new Set,n=t.doc;for(const[r,s]of t.afterState.entries()){const i=t.beforeState.get(r)||0;s!==i&&VB(t,n.store.clients.get(r),i,s,o=>{!o.deleted&&o.content.constructor===dn&&o.constructor!==js&&e.add(o.parent)})}gt(n,r=>{pl(t,t.deleteSet,s=>{if(s instanceof js||!s.parent._hasFormatting||e.has(s.parent))return;const i=s.parent;s.content.constructor===dn?e.add(i):Ide(r,s)});for(const s of e)Mde(s)})},P5=(t,e,n)=>{const r=n,s=D2(e.currentAttributes),i=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Ci:case Qc:case xi:n<e.right.length&&Ir(t,Me(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}i&&c$(t,i,e.right,s,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&Ip(o._searchMarker,e.index,-r+n),e};class Pde extends c1{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];gt(e,r=>{const s=new Map,i=new Map;let o=this.target._start,a=null;const l={};let c="",d=0,h=0;const f=()=>{if(a!==null){let p=null;switch(a){case"delete":h>0&&(p={delete:h}),h=0;break;case"insert":(typeof c=="object"||c.length>0)&&(p={insert:c},s.size>0&&(p.attributes={},s.forEach((m,g)=>{m!==null&&(p.attributes[g]=m)}))),c="";break;case"retain":d>0&&(p={retain:d},Lce(l)||(p.attributes=Pce({},l))),d=0;break}p&&n.push(p),a=null}};for(;o!==null;){switch(o.content.constructor){case Ci:case Qc:this.adds(o)?this.deletes(o)||(f(),a="insert",c=o.content.getContent()[0],f()):this.deletes(o)?(a!=="delete"&&(f(),a="delete"),h+=1):o.deleted||(a!=="retain"&&(f(),a="retain"),d+=1);break;case xi:this.adds(o)?this.deletes(o)||(a!=="insert"&&(f(),a="insert"),c+=o.content.str):this.deletes(o)?(a!=="delete"&&(f(),a="delete"),h+=o.length):o.deleted||(a!=="retain"&&(f(),a="retain"),d+=o.length);break;case dn:{const{key:p,value:m}=o.content;if(this.adds(o)){if(!this.deletes(o)){const g=s.get(p)??null;Ha(g,m)?m!==null&&o.delete(r):(a==="retain"&&f(),Ha(m,i.get(p)??null)?delete l[p]:l[p]=m)}}else if(this.deletes(o)){i.set(p,m);const g=s.get(p)??null;Ha(g,m)||(a==="retain"&&f(),l[p]=g)}else if(!o.deleted){i.set(p,m);const g=l[p];g!==void 0&&(Ha(g,m)?g!==null&&o.delete(r):(a==="retain"&&f(),m===null?delete l[p]:l[p]=m))}o.deleted||(a==="insert"&&f(),ph(s,o.content));break}}o=o.right}for(f();n.length>0;){const p=n[n.length-1];if(p.retain!==void 0&&p.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class ml extends Sn{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Zn(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new ml}clone(){const e=new ml;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new Pde(this,e,n);d1(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Zn();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===xi&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?gt(this.doc,r=>{const s=new W2(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const o=e[i];if(o.insert!==void 0){const a=!n&&typeof o.insert=="string"&&i===e.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&Mw(r,this,s,a,o.attributes||{})}else o.retain!==void 0?R5(r,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&P5(r,s,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??Zn();const s=[],i=new Map,o=this.doc;let a="",l=this._start;function c(){if(a.length>0){const h={};let f=!1;i.forEach((m,g)=>{f=!0,h[g]=m});const p={insert:a};f&&(p.attributes=h),s.push(p),a=""}}const d=()=>{for(;l!==null;){if(Zl(l,e)||n!==void 0&&Zl(l,n))switch(l.content.constructor){case xi:{const h=i.get("ychange");e!==void 0&&!Zl(l,e)?(h===void 0||h.user!==l.id.client||h.type!=="removed")&&(c(),i.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!Zl(l,n)?(h===void 0||h.user!==l.id.client||h.type!=="added")&&(c(),i.set("ychange",r?r("added",l.id):{type:"added"})):h!==void 0&&(c(),i.delete("ychange")),a+=l.content.str;break}case Ci:case Qc:{c();const h={insert:l.content.getContent()[0]};if(i.size>0){const f={};h.attributes=f,i.forEach((p,m)=>{f[m]=p})}s.push(h);break}case dn:Zl(l,e)&&(c(),ph(i,l.content));break}l=l.right}c()};return e||n?gt(o,h=>{e&&z2(h,e),n&&z2(h,n),d()},"cleanup"):d(),s}insert(e,n,r){if(n.length<=0)return;const s=this.doc;s!==null?gt(s,i=>{const o=N0(i,this,e,!r);r||(r={},o.currentAttributes.forEach((a,l)=>{r[l]=a})),Mw(i,this,o,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const s=this.doc;s!==null?gt(s,i=>{const o=N0(i,this,e,!r);Mw(i,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?gt(r,s=>{P5(s,N0(s,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const s=this.doc;s!==null?gt(s,i=>{const o=N0(i,this,e,!1);o.right!==null&&R5(i,this,o,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?gt(this.doc,n=>{Qb(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?gt(this.doc,r=>{TN(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return NN(this,e)}getAttributes(){return s$(this)}_write(e){e.writeTypeRef(the)}}const Dde=t=>new ml;class Rw{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Zn()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Ln||n.constructor===Fc)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Fc extends Sn{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Fc}clone(){const e=new Fc;return e.insert(0,this.toArray().map(n=>n instanceof Sn?n.clone():n)),e}get length(){return this.doc??Zn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Rw(this,e)}querySelector(e){e=e.toUpperCase();const r=new Rw(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),fl(new Rw(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){d1(this,e,new $de(this,n,e))}toString(){return ZB(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const s=e.createDocumentFragment();return r!==void 0&&r._createAssociation(s,this),Mp(this,i=>{s.insertBefore(i.toDOM(e,n,r),null)}),s}insert(e,n){this.doc!==null?gt(this.doc,r=>{n$(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)gt(this.doc,r=>{const s=e&&e instanceof Sn?e._item:e;Jb(r,this,s,n)});else{const r=this._prelimContent,s=e===null?0:r.findIndex(i=>i===e)+1;if(s===0&&e!==null)throw co("Reference item not found");r.splice(s,0,...n)}}delete(e,n=1){this.doc!==null?gt(this.doc,r=>{r$(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return QB(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return e$(this,e)}slice(e=0,n=this.length){return JB(this,e,n)}forEach(e){Mp(this,e)}_write(e){e.writeTypeRef(rhe)}}const Lde=t=>new Fc;class Ln extends Fc{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,s)=>{this.setAttribute(s,r)}),this._prelimAttrs=null}_copy(){return new Ln(this.nodeName)}clone(){const e=new Ln(this.nodeName),n=this.getAttributes();return Dce(n,(r,s)=>{e.setAttribute(s,r)}),e.insert(0,this.toArray().map(r=>r instanceof Sn?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const s=r.length;for(let a=0;a<s;a++){const l=r[a];n.push(l+'="'+e[l]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(e){this.doc!==null?gt(this.doc,n=>{Qb(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?gt(this.doc,r=>{TN(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return NN(this,e)}hasAttribute(e){return i$(this,e)}getAttributes(e){return e?Nde(this,e):s$(this)}toDOM(e=document,n={},r){const s=e.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const a=i[o];typeof a=="string"&&s.setAttribute(o,a)}return Mp(this,o=>{s.appendChild(o.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(nhe),e.writeKey(this.nodeName)}}const Bde=t=>new Ln(t.readKey());class $de extends c1{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class Xb extends zd{constructor(e){super(),this.hookName=e}_copy(){return new Xb(this.hookName)}clone(){const e=new Xb(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const s=n[this.hookName];let i;return s!==void 0?i=s.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(she),e.writeKey(this.hookName)}}const Fde=t=>new Xb(t.readKey());class as extends ml{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new as}clone(){const e=new as;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const s=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(s,this),s}toString(){return this.toDelta().map(e=>{const n=[];for(const s in e.attributes){const i=[];for(const o in e.attributes[s])i.push({key:o,value:e.attributes[s][o]});i.sort((o,a)=>o.key<a.key?-1:1),n.push({nodeName:s,attrs:i})}n.sort((s,i)=>s.nodeName<i.nodeName?-1:1);let r="";for(let s=0;s<n.length;s++){const i=n[s];r+=`<${i.nodeName}`;for(let o=0;o<i.attrs.length;o++){const a=i.attrs[o];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let s=n.length-1;s>=0;s--)r+=`</${n[s].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(ihe)}}const Hde=t=>new as;class _N{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Ls()}mergeWith(e){return!1}write(e,n,r){throw Ls()}integrate(e,n){throw Ls()}}const Ude=0;class js extends _N{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),zB(e.doc.store,this)}write(e,n){e.writeInfo(Ude),e.writeLen(this.length-n)}getMissing(e,n){return null}}class gm{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new gm(this.content)}splice(e){throw Ls()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const zde=t=>new gm(t.readBuf());class Rp{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Rp(this.len)}splice(e){const n=new Rp(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){_p(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const Vde=t=>new Rp(t.readLen()),u$=(t,e)=>new _l({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class bm{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new bm(u$(this.doc.guid,this.opts))}splice(e){throw Ls()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const Wde=t=>new bm(u$(t.readString(),t.readAny()));class Qc{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Qc(this.embed)}splice(e){throw Ls()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const qde=t=>new Qc(t.readJSON());class dn{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new dn(this.key,this.value)}splice(e){throw Ls()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Gde=t=>new dn(t.readKey(),t.readJSON());class Zb{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Zb(this.arr)}splice(e){const n=new Zb(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let s=n;s<r;s++){const i=this.arr[s];e.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const Yde=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const s=t.readString();s==="undefined"?n.push(void 0):n.push(JSON.parse(s))}return new Zb(n)},Kde=Vb("node_env")==="development";class Hc{constructor(e){this.arr=e,Kde&&sB(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Hc(this.arr)}splice(e){const n=new Hc(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let s=n;s<r;s++){const i=this.arr[s];e.writeAny(i)}}getRef(){return 8}}const Jde=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Hc(n)};class xi{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new xi(this.str)}splice(e){const n=new xi(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const Qde=t=>new xi(t.readString()),Xde=[Ade,Ode,Dde,Bde,Lde,Fde,Hde],Zde=0,ehe=1,the=2,nhe=3,rhe=4,she=5,ihe=6;class Ci{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ci(this.type._copy())}splice(e){throw Ls()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const ohe=t=>new Ci(Xde[t.readTypeRef()](t)),q2=(t,e)=>{let n=e,r=0,s;do r>0&&(n=Me(n.client,n.clock+r)),s=hd(t,n),r=n.clock-s.id.clock,n=s.redone;while(n!==null&&s instanceof Nt);return{item:s,diff:r}},AN=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},ex=(t,e,n)=>{const{client:r,clock:s}=e.id,i=new Nt(Me(r,s+n),e,Me(r,s+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&i.markDeleted(),e.keep&&(i.keep=!0),e.redone!==null&&(i.redone=Me(e.redone.client,e.redone.clock+n)),e.right=i,i.right!==null&&(i.right.left=i),t._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),e.length=n,i},D5=(t,e)=>sN(t,n=>hh(n.deletions,e)),d$=(t,e,n,r,s,i)=>{const o=t.doc,a=o.store,l=o.clientID,c=e.redone;if(c!==null)return Ir(t,c);let d=e.parent._item,h=null,f;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!n.has(d)||d$(t,d,n,r,s,i)===null))return null;for(;d.redone!==null;)d=Ir(t,d.redone)}const p=d===null?e.parent:d.content.type;if(e.parentSub===null){for(h=e.left,f=e;h!==null;){let b=h;for(;b!==null&&b.parent._item!==d;)b=b.redone===null?null:Ir(t,b.redone);if(b!==null&&b.parent._item===d){h=b;break}h=h.left}for(;f!==null;){let b=f;for(;b!==null&&b.parent._item!==d;)b=b.redone===null?null:Ir(t,b.redone);if(b!==null&&b.parent._item===d){f=b;break}f=f.right}}else if(f=null,e.right&&!s){for(h=e;h!==null&&h.right!==null&&(h.right.redone||hh(r,h.right.id)||D5(i.undoStack,h.right.id)||D5(i.redoStack,h.right.id));)for(h=h.right;h.redone;)h=Ir(t,h.redone);if(h&&h.right!==null)return null}else h=p._map.get(e.parentSub)||null;const m=Xt(a,l),g=Me(l,m),x=new Nt(g,h,h&&h.lastId,f,f&&f.id,p,e.parentSub,e.content.copy());return e.redone=g,AN(x,!0),x.integrate(t,0),x};let Nt=class G2 extends _N{constructor(e,n,r,s,i,o,a,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=s,this.rightOrigin=i,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?l5:0}set marker(e){(this.info&Sw)>0!==e&&(this.info^=Sw)}get marker(){return(this.info&Sw)>0}get keep(){return(this.info&a5)>0}set keep(e){this.keep!==e&&(this.info^=a5)}get countable(){return(this.info&l5)>0}get deleted(){return(this.info&Cw)>0}set deleted(e){this.deleted!==e&&(this.info^=Cw)}markDeleted(){this.info|=Cw}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Xt(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Xt(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===dd&&this.id.client!==this.parent.client&&this.parent.clock>=Xt(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=N5(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Ir(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===js||this.right&&this.right.constructor===js)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===G2?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===G2&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===dd){const r=hd(n,this.parent);r.constructor===js?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=N5(e,e.doc.store,Me(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,s;if(r!==null)s=r.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const i=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),i.add(s),Gu(this.origin,s.origin)){if(s.id.client<this.id.client)r=s,i.clear();else if(Gu(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(hd(e.doc.store,s.origin)))i.has(hd(e.doc.store,s.origin))||(r=s,i.clear());else break;s=s.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),zB(e.doc.store,this),this.content.integrate(e,this),A5(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new js(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Me(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Gu(e.origin,this.lastId)&&this.right===e&&Gu(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),_p(e.deleteSet,this.id.client,this.id.clock,this.length),A5(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw br();this.content.gc(e),n?ude(e,this,new js(this.id,this.length)):this.content=new Rp(this.length)}write(e,n){const r=n>0?Me(this.id.client,this.id.clock+n-1):this.origin,s=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&t1|(r===null?0:fr)|(s===null?0:qo)|(i===null?0:Ep);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),s!==null&&e.writeRightID(s),r===null&&s===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=Ap(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===dd?(e.writeParentInfo(!1),e.writeLeftID(a)):br();i!==null&&e.writeString(i)}this.content.write(e,n)}};const h$=(t,e)=>ahe[e&t1](t),ahe=[()=>{br()},Vde,Yde,zde,Qde,qde,Gde,ohe,Jde,Wde,()=>{br()}],lhe=10;class Os extends _N{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){br()}write(e,n){e.writeInfo(lhe),Ke(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const f$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},p$="__ $YJS$ __";f$[p$]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");f$[p$]=!0;const che=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},uhe=/[\uD800-\uDBFF]/,dhe=/[\uDC00-\uDFFF]/,hhe=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&uhe.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&dhe.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},fhe=hhe,kt=new We("y-sync"),Ji=new We("y-undo"),_0=new We("yjs-cursor"),Qi=(t,e)=>t>>>e|t<<32-e,phe=t=>Qi(t,2)^Qi(t,13)^Qi(t,22),mhe=t=>Qi(t,6)^Qi(t,11)^Qi(t,25),ghe=t=>Qi(t,7)^Qi(t,18)^t>>>3,bhe=t=>Qi(t,17)^Qi(t,19)^t>>>10,xhe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yhe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class vhe{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(yhe),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let h=16;h<64;h++)n[h]=bhe(n[h-2])+n[h-7]+ghe(n[h-15])+n[h-16];let r=e[0],s=e[1],i=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7];for(let h=0,f,p;h<64;h++)f=d+mhe(a)+(a&l^~a&c)+xhe[h]+n[h]>>>0,p=phe(r)+(r&s^r&i^s&i)>>>0,d=c,c=l,l=a,a=o+f>>>0,o=i,i=s,s=r,r=f+p>>>0;e[0]+=r,e[1]+=s,e[2]+=i,e[3]+=o,e[4]+=a,e[5]+=l,e[6]+=c,e[7]+=d}digest(e){let n=0;for(;n+56<=e.length;){let o=0;for(;o<16&&n+3<e.length;o++)this._W[o]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,o,16);n<e.length;)this._W[o]|=e[n]<<(3-n%4)*8,n++;this._W[o]|=fr<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let s=0;for(;n<e.length;s++)for(let o=3;o>=0&&n<e.length;o--)this._W[s]|=e[n++]<<o*8;r||(this._W[s-(n%4===0?0:1)]|=fr<<(3-n%4)*8),this._W[14]=e.byteLength/Yle,this._W[15]=e.byteLength*8,this._updateHash();const i=new Uint8Array(32);for(let o=0;o<this._H.length;o++)for(let a=0;a<4;a++)i[o*4+a]=this._H[o]>>>(3-a)*8;return i}}const whe=t=>new vhe().digest(t),khe=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},Ehe=t=>Kce(khe(whe(Qce(t)))),tx=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!hh(e.ds,t.id),Che=[{light:"#ecd44433",dark:"#ecd444"}],She=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=Bc();t.forEach(s=>r.add(s)),e=e.filter(s=>!r.has(s))}t.set(n,Nce(e))}return t.get(n)},The=(t,{colors:e=Che,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:s=()=>{},mapping:i}={})=>{let o=!1;const a=new _he(t,i),l=new Ie({props:{editable:c=>{const d=kt.getState(c);return d.snapshot==null&&d.prevSnapshot==null}},key:kt,state:{init:(c,d)=>({type:t,doc:t.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(c,d)=>{const h=c.getMeta(kt);if(h!==void 0){d=Object.assign({},d);for(const f in h)d[f]=h[f]}return d.addToHistory=c.getMeta("addToHistory")!==!1,d.isChangeOrigin=h!==void 0&&!!h.isChangeOrigin,d.isUndoRedoOperation=h!==void 0&&!!h.isChangeOrigin&&!!h.isUndoRedoOperation,a.prosemirrorView!==null&&h!==void 0&&(h.snapshot!=null||h.prevSnapshot!=null)&&mN(0,()=>{a.prosemirrorView!=null&&(h.restore==null?a._renderSnapshot(h.snapshot,h.prevSnapshot,d):(a._renderSnapshot(h.snapshot,h.snapshot,d),delete d.restore,delete d.snapshot,delete d.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),d}},view:c=>(a.initView(c),i==null&&a._forceRerender(),s(),{update:()=>{const d=l.getState(c.state);if(d.snapshot==null&&d.prevSnapshot==null&&(o||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(o=!0,d.addToHistory===!1&&!d.isChangeOrigin){const h=Ji.getState(c.state),f=h&&h.undoManager;f&&f.stopCapturing()}a.mux(()=>{d.doc.transact(h=>{h.meta.set("addToHistory",d.addToHistory),a._prosemirrorChanged(c.state.doc)},kt)})}},destroy:()=>{a.destroy()}})});return l},Nhe=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new Fr(t.doc));else if(e.type==="node"){const r=gc(n.doc,n.type,e.anchor,n.mapping);t.setSelection(ve.create(t.doc,r))}else{const r=gc(n.doc,n.type,e.anchor,n.mapping),s=gc(n.doc,n.type,e.head,n.mapping);if(r!==null&&s!==null){const i=xe.between(t.doc.resolve(r),t.doc.resolve(s));t.setSelection(i)}}},nx=(t,e)=>({type:e.selection.jsonID,anchor:Dp(e.selection.anchor,t.type,t.mapping),head:Dp(e.selection.head,t.type,t.mapping)});class _he{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=che(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=nx(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(oB&&this._domSelectionInView===null&&(mN(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const s=n.getBoundingClientRect(),i=fm.documentElement;return s.bottom>=0&&s.right>=0&&s.left<=(window.innerWidth||i.clientWidth||0)&&s.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(e,n){n||(n=HB(OB(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(kt,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>Ng(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new ue(Q.from(e),0,0));n.setMeta(kt,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(s=>Ng(s,this.prosemirrorView.state.schema,this)).filter(s=>s!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new ue(Q.from(n),0,0));if(e){const s=Wo(bi(e.anchor,0),r.doc.content.size),i=Wo(bi(e.head,0),r.doc.content.size);r.setSelection(xe.create(r.doc,s,i))}this.prosemirrorView.dispatch(r.setMeta(kt,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let s=this.doc,i=this.type;if(e||(e=Iw(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&br(),s=new _l({gc:!1}),Yb(s,n),n=Iw(s),Yb(s,e),e=Iw(s),i._item===null){const o=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);i=s.getXmlFragment(o)}else{const o=s.store.clients.get(i._item.id.client)??[],a=zs(o,i._item.id.clock);i=o[a].content.type}this.mapping.clear(),this.mux(()=>{s.transact(o=>{const a=r.permanentUserData;a&&a.dss.forEach(h=>{pl(o,h,f=>{})});const l=(h,f)=>{const p=h==="added"?a.getUserByClientId(f.client):a.getUserByDeletedId(f);return{user:p,type:h,color:She(r.colorMapping,r.colors,p)}},c=XB(i,new wN(n.ds,e.sv)).map(h=>!h._item.deleted||tx(h._item,e)||tx(h._item,n)?Ng(h,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,l):null).filter(h=>h!==null),d=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new ue(Q.from(c),0,0));this.prosemirrorView.dispatch(d.setMeta(kt,{isChangeOrigin:!0}))},kt)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=kt.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const s=(a,l)=>this.mapping.delete(l);pl(n,n.deleteSet,a=>{if(a.constructor===Nt){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(s),n.changedParentTypes.forEach(s);const i=this.type.toArray().map(a=>m$(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let o=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new ue(Q.from(i),0,0));Nhe(o,this.beforeTransactionSelection,this),o=o.setMeta(kt,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof qB}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&o.scrollIntoView(),this.prosemirrorView.dispatch(o)})}_prosemirrorChanged(e){this.doc.transact(()=>{K2(this.doc,this.type,e,this),this.beforeTransactionSelection=nx(this,this.prosemirrorView.state)},kt)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const m$=(t,e,n,r,s,i)=>{const o=n.mapping.get(t);if(o===void 0){if(t instanceof Ln)return Ng(t,e,n,r,s,i);throw Ls()}return o},Ng=(t,e,n,r,s,i)=>{const o=[],a=l=>{var c,d;if(l instanceof Ln){const h=m$(l,e,n,r,s,i);h!==null&&o.push(h)}else{const h=(d=(c=l._item.right)==null?void 0:c.content)==null?void 0:d.type;h instanceof ml&&!h._item.deleted&&h._item.id.client===h.doc.clientID&&(l.applyDelta([{retain:l.length},...h.toDelta()]),h.doc.transact(p=>{h._item.delete(p)}));const f=Ahe(l,e,n,r,s,i);f!==null&&f.forEach(p=>{p!==null&&o.push(p)})}};r===void 0||s===void 0?t.toArray().forEach(a):XB(t,new wN(s.ds,r.sv)).forEach(a);try{const l=t.getAttributes(r);r!==void 0&&(tx(t._item,r)?tx(t._item,s)||(l.ychange=i?i("added",t._item.id):{type:"added"}):l.ychange=i?i("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,l,o);return n.mapping.set(t,c),c}catch{return t.doc.transact(c=>{t._item.delete(c)},kt),n.mapping.delete(t),null}},Ahe=(t,e,n,r,s,i)=>{const o=[],a=t.toDelta(r,s,i);try{for(let l=0;l<a.length;l++){const c=a[l];o.push(e.text(c.insert,Phe(c.attributes,e)))}}catch{return t.doc.transact(c=>{t._item.delete(c)},kt),null}return o},jhe=(t,e)=>{const n=new as,r=t.map(s=>({insert:s.text,attributes:x$(s.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},Ohe=(t,e)=>{const n=new Ln(t.type.name);for(const r in t.attrs){const s=t.attrs[r];s!==null&&r!=="ychange"&&n.setAttribute(r,s)}return n.insert(0,h1(t).map(r=>Y2(r,e))),e.mapping.set(n,t),n},Y2=(t,e)=>t instanceof Array?jhe(t,e):Ohe(t,e),L5=t=>typeof t=="object"&&t!==null,jN=(t,e)=>{const n=Object.keys(t).filter(s=>t[s]!==null);let r=n.length===(e==null?0:Object.keys(e).filter(s=>e[s]!==null).length);for(let s=0;s<n.length&&r;s++){const i=n[s],o=t[i],a=e[i];r=i==="ychange"||o===a||L5(o)&&L5(a)&&jN(o,a)}return r},h1=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const s=e[r];if(s.isText){const i=[];for(let o=e[r];r<e.length&&o.isText;o=e[++r])i.push(o);r--,n.push(i)}else n.push(s)}return n},g$=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,s)=>r.insert===e[s].text&&rB(r.attributes||{}).length===e[s].marks.length&&ch(r.attributes,(i,o)=>{var c;const a=b$(o),l=e[s].marks;return jN(i,(c=l.find(d=>d.type.name===a))==null?void 0:c.attrs)}))},Pp=(t,e)=>{if(t instanceof Ln&&!(e instanceof Array)&&J2(t,e)){const n=h1(e);return t._length===n.length&&jN(t.getAttributes(),e.attrs)&&t.toArray().every((r,s)=>Pp(r,n[s]))}return t instanceof as&&e instanceof Array&&g$(t,e)},rx=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),B5=(t,e,n)=>{const r=t.toArray(),s=h1(e),i=s.length,o=r.length,a=Wo(o,i);let l=0,c=0,d=!1;for(;l<a;l++){const h=r[l],f=s[l];if(rx(n.mapping.get(h),f))d=!0;else if(!Pp(h,f))break}for(;l+c<a;c++){const h=r[o-c-1],f=s[i-c-1];if(rx(n.mapping.get(h),f))d=!0;else if(!Pp(h,f))break}return{equalityFactor:l+c,foundMappedChild:d}},Ihe=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof xi?e+=n.content.str:n.content instanceof dn&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},Mhe=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:s}=Ihe(t),i=e.map(c=>({insert:c.text,attributes:Object.assign({},r,x$(c.marks,n))})),{insert:o,remove:a,index:l}=fhe(s,i.map(c=>c.insert).join(""));t.delete(l,a),t.insert(l,o),t.applyDelta(i.map(c=>({retain:c.insert.length,attributes:c.attributes})))},Rhe=/(.*)(--[a-zA-Z0-9+/=]{8})$/,b$=t=>{var e;return((e=Rhe.exec(t))==null?void 0:e[1])??t},Phe=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(b$(r),t[r]));return n},x$=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const s=go(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[s?`${r.type.name}--${Ehe(r.toJSON())}`:r.type.name]=r.attrs}}),n},K2=(t,e,n,r)=>{if(e instanceof Ln&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof Ln){const h=e.getAttributes(),f=n.attrs;for(const p in f)f[p]!==null?h[p]!==f[p]&&p!=="ychange"&&e.setAttribute(p,f[p]):e.removeAttribute(p);for(const p in h)f[p]===void 0&&e.removeAttribute(p)}const s=h1(n),i=s.length,o=e.toArray(),a=o.length,l=Wo(i,a);let c=0,d=0;for(;c<l;c++){const h=o[c],f=s[c];if(!rx(r.mapping.get(h),f))if(Pp(h,f))r.mapping.set(h,f);else break}for(;d+c<l;d++){const h=o[a-d-1],f=s[i-d-1];if(!rx(r.mapping.get(h),f))if(Pp(h,f))r.mapping.set(h,f);else break}t.transact(()=>{for(;a-c-d>0&&i-c-d>0;){const f=o[c],p=s[c],m=o[a-d-1],g=s[i-d-1];if(f instanceof as&&p instanceof Array)g$(f,p)||Mhe(f,p,r),c+=1;else{let x=f instanceof Ln&&J2(f,p),b=m instanceof Ln&&J2(m,g);if(x&&b){const v=B5(f,p,r),w=B5(m,g,r);v.foundMappedChild&&!w.foundMappedChild?b=!1:!v.foundMappedChild&&w.foundMappedChild||v.equalityFactor<w.equalityFactor?x=!1:b=!1}x?(K2(t,f,p,r),c+=1):b?(K2(t,m,g,r),d+=1):(r.mapping.delete(e.get(c)),e.delete(c,1),e.insert(c,[Y2(p,r)]),c+=1)}}const h=a-c-d;if(a===1&&i===0&&o[0]instanceof as?(r.mapping.delete(o[0]),o[0].delete(0,o[0].length)):h>0&&(e.slice(c,c+h).forEach(f=>r.mapping.delete(f)),e.delete(c,h)),c+d<i){const f=[];for(let p=c;p<i-d;p++)f.push(Y2(s[p],r));e.insert(c,f)}},kt)},J2=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let Tf=null;const Dhe=()=>{const t=Tf;Tf=null,t.forEach((e,n)=>{const r=n.state.tr,s=kt.getState(n.state);s&&s.binding&&!s.binding.isDestroyed&&(e.forEach((i,o)=>{r.setMeta(o,i)}),n.dispatch(r))})},Lhe=(t,e,n)=>{Tf||(Tf=new Map,mN(0,Dhe)),go(Tf,t,Ds).set(e,n)},Dp=(t,e,n)=>{if(t===0)return Ow(e,0,e.length===0?-1:0);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof as){if(r._length>=t)return Ow(r,t,e.length===0?-1:0);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const s=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<s)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&s>1)return new Op(r._item===null?null:r._item.id,r._item===null?Ap(r):null,null);if(t-=s,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new Op(r._item===null?null:r._item.id,r._item===null?Ap(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw br();if(t===0&&r.constructor!==as&&r!==e)return Bhe(r._item.parent,r._item)}return Ow(e,e._length,e.length===0?-1:0)},Bhe=(t,e)=>{let n=null,r=null;return t._item===null?r=Ap(t):n=Me(t._item.id.client,t._item.id.clock),new Op(n,r,e.id)},gc=(t,e,n,r)=>{const s=lde(n,t);if(s===null||s.type!==e&&!jp(e,s.type._item))return null;let i=s.type,o=0;if(i.constructor===as)o=s.index;else if(i._item===null||!i._item.deleted){let a=i._first,l=0;for(;l<i._length&&l<s.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof as?o+=c._length:o+=r.get(c).nodeSize}a=a.right}o+=1}for(;i!==e&&i._item!==null;){const a=i._item.parent;if(a._item===null||!a._item.deleted){o+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===i)break;l.deleted||(c instanceof as?o+=c._length:o+=r.get(c).nodeSize),l=l.right}}i=a}return o-1},$he=(t,e,n)=>t!==e,Fhe=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode(""),s=document.createTextNode("");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(s,null),e},y$=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),Hhe=/^#[0-9a-fA-F]{6}$/,$5=(t,e,n,r,s)=>{const i=kt.getState(t),o=i.doc,a=[];return i.snapshot!=null||i.prevSnapshot!=null||i.binding.mapping.size===0?Re.create(t.doc,[]):(e.getStates().forEach((l,c)=>{if(n(o.clientID,c,l)&&l.cursor!=null){const d=l.user||{};d.color==null?d.color="#ffa500":Hhe.test(d.color)||console.warn("A user uses an unsupported color format",d),d.name==null&&(d.name=`User: ${c}`);let h=gc(o,i.type,Sf(l.cursor.anchor),i.binding.mapping),f=gc(o,i.type,Sf(l.cursor.head),i.binding.mapping);if(h!==null&&f!==null){const p=bi(t.doc.content.size-1,0);h=Wo(h,p),f=Wo(f,p),a.push(at.widget(f,()=>r(d,c),{key:c+"",side:10}));const m=Wo(h,f),g=bi(h,f);a.push(at.inline(m,g,s(d,c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),Re.create(t.doc,a))},Uhe=(t,{awarenessStateFilter:e=$he,cursorBuilder:n=Fhe,selectionBuilder:r=y$,getSelection:s=o=>o.selection}={},i="cursor")=>new Ie({key:_0,state:{init(o,a){return $5(a,t,e,n,r)},apply(o,a,l,c){const d=kt.getState(c),h=o.getMeta(_0);return d&&d.isChangeOrigin||h&&h.awarenessUpdated?$5(c,t,e,n,r):a.map(o.mapping,o.doc)}},props:{decorations:o=>_0.getState(o)},view:o=>{const a=()=>{o.docView&&Lhe(o,_0,{awarenessUpdated:!0})},l=()=>{const c=kt.getState(o.state),d=t.getLocalState()||{};if(o.hasFocus()){const h=s(o.state),f=Dp(h.anchor,c.type,c.binding.mapping),p=Dp(h.head,c.type,c.binding.mapping);(d.cursor==null||!T5(Sf(d.cursor.anchor),f)||!T5(Sf(d.cursor.head),p))&&t.setLocalStateField(i,{anchor:f,head:p})}else d.cursor!=null&&gc(c.doc,c.type,Sf(d.cursor.anchor),c.binding.mapping)!==null&&t.setLocalStateField(i,null)};return t.on("change",a),o.dom.addEventListener("focusin",l),o.dom.addEventListener("focusout",l),{update:l,destroy:()=>{o.dom.removeEventListener("focusin",l),o.dom.removeEventListener("focusout",l),t.off("change",a),t.setLocalStateField(i,null)}}}}),zhe=t=>{var e,n;return((n=(e=Ji.getState(t))==null?void 0:e.undoManager)==null?void 0:n.undo())!=null},Vhe=t=>{var e,n;return((n=(e=Ji.getState(t))==null?void 0:e.undoManager)==null?void 0:n.redo())!=null},Whe=(t,e)=>{var n,r;return e==null?(r=(n=Ji.getState(t))==null?void 0:n.undoManager)==null?void 0:r.canUndo():zhe(t)},qhe=(t,e)=>{var n,r;return e==null?(r=(n=Ji.getState(t))==null?void 0:n.undoManager)==null?void 0:r.canRedo():Vhe(t)},Ghe=new Set(["paragraph"]),Yhe=(t,e)=>!(t instanceof Nt)||!(t.content instanceof Ci)||!(t.content.type instanceof ml||t.content.type instanceof Ln&&e.has(t.content.type.nodeName))||t.content.type._length===0,Khe=({protectedNodes:t=Ghe,trackedOrigins:e=[],undoManager:n=null}={})=>new Ie({key:Ji,state:{init:(r,s)=>{const i=kt.getState(s),o=n||new qB(i.type,{trackedOrigins:new Set([kt].concat(e)),deleteFilter:a=>Yhe(a,t),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:o,prevSel:null,hasUndoOps:o.undoStack.length>0,hasRedoOps:o.redoStack.length>0}},apply:(r,s,i,o)=>{const a=kt.getState(o).binding,l=s.undoManager,c=l.undoStack.length>0,d=l.redoStack.length>0;return a?{undoManager:l,prevSel:nx(a,i),hasUndoOps:c,hasRedoOps:d}:c!==s.hasUndoOps||d!==s.hasRedoOps?Object.assign({},s,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):s}},view:r=>{const s=kt.getState(r.state),i=Ji.getState(r.state).undoManager;return i.on("stack-item-added",({stackItem:o})=>{const a=s.binding;a&&o.meta.set(a,Ji.getState(r.state).prevSel)}),i.on("stack-item-popped",({stackItem:o})=>{const a=s.binding;a&&(a.beforeTransactionSelection=o.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{i.destroy()}}}}),pd=new WeakMap,_g=new WeakMap,sx={current:[]};let Pw=!1;const A0=new Set,F5=new Map;function v$(t){const e=Array.from(t).sort((n,r)=>n instanceof md&&n.options.deps.includes(r)?1:r instanceof md&&r.options.deps.includes(n)?-1:0);for(const n of e){if(sx.current.includes(n))continue;sx.current.push(n),n.recompute();const r=_g.get(n);if(r)for(const s of r){const i=pd.get(s);i&&v$(i)}}}function Jhe(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function Qhe(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function Xhe(t){if(A0.add(t),!Pw)try{for(Pw=!0;A0.size>0;){const e=Array.from(A0);A0.clear();for(const n of e){const r=F5.get(n)??n.prevState;n.prevState=r,Jhe(n)}for(const n of e){const r=pd.get(n);r&&(sx.current.push(n),v$(r))}for(const n of e){const r=pd.get(n);if(r)for(const s of r)Qhe(s)}}}finally{Pw=!1,sx.current=[],F5.clear()}}function Zhe(t){return typeof t=="function"}class Q2{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var s,i;this.listeners.add(r);const o=(i=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:i.call(s,r,this);return()=>{this.listeners.delete(r),o==null||o()}},this.prevState=e,this.state=e,this.options=n}setState(e){var n,r,s;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(e):Zhe(e)?this.state=e(this.prevState):this.state=e,(s=(r=this.options)==null?void 0:r.onUpdate)==null||s.call(r),Xhe(this)}}class md{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=this.options.deps.length,r=new Array(n),s=new Array(n);for(let i=0;i<n;i++){const o=this.options.deps[i];r[i]=o.prevState,s[i]=o.state}return this.lastSeenDepValues=s,{prevDepVals:r,currDepVals:s,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const s=this.getDepVals();this.state=this.options.fn(s),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof md&&i.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:s}=this.getDepVals();for(let i=0;i<s.length;i++)if(s[i]!==r[i]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,s;this.listeners.add(n);const i=(s=(r=this.options).onSubscribe)==null?void 0:s.call(r,n,this);return()=>{this.listeners.delete(n),i==null||i()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof md)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof Q2){let r=pd.get(n);r||(r=new Set,pd.set(n,r)),r.add(this);let s=_g.get(this);s||(s=new Set,_g.set(this,s)),s.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof md)this.unregisterFromGraph(n.options.deps);else if(n instanceof Q2){const r=pd.get(n);r&&r.delete(this);const s=_g.get(this);s&&s.delete(n)}}}const X2=Symbol("originalFactory");function it(t){if(typeof t=="object"&&"key"in t)return function e(){return t[X2]=e,t};if(typeof t!="function")throw new Error("factory must be a function");return function e(n){return r=>{const s=t({editor:r.editor,options:n});return s[X2]=e,s}}}function Al(t,e){return new Q2(t,e)}var H5=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},efe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,tfe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,nfe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,rfe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,sfe=qs.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return H5("strong",{...ds(this.options.HTMLAttributes,t),children:H5("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Dd({find:efe,type:this.type}),Dd({find:nfe,type:this.type})]},addPasteRules(){return[Ic({find:tfe,type:this.type}),Ic({find:rfe,type:this.type})]}}),ife=sfe,ofe=/(^|[^`])`([^`]+)`(?!`)$/,afe=/(^|[^`])`([^`]+)`(?!`)/g,lfe=qs.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",ds(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Dd({find:ofe,type:this.type})]},addPasteRules(){return[Ic({find:afe,type:this.type})]}}),cfe=lfe,ufe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,dfe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,hfe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ffe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,pfe=qs.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",ds(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Dd({find:ufe,type:this.type}),Dd({find:hfe,type:this.type})]},addPasteRules(){return[Ic({find:dfe,type:this.type}),Ic({find:ffe,type:this.type})]}}),mfe=pfe,gfe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,bfe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,xfe=qs.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",ds(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Dd({find:gfe,type:this.type})]},addPasteRules(){return[Ic({find:bfe,type:this.type})]}}),yfe=xfe,vfe=qs.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",ds(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:n.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),wfe=vfe,kfe=class w${constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,n,r){e<0||this.cache.set(e,[n,r])}replace(e,n,r,s){this.remove(e),this.set(n,r,s)}remove(e){this.cache.delete(e)}invalidate(e){const n=new w$(this.cache),r=e.mapping;return this.cache.forEach(([s,i],o)=>{if(o<0)return;const a=r.mapResult(o),l=e.doc.nodeAt(a.pos);if(a.deleted||!(l!=null&&l.eq(s)))n.remove(o);else if(o!==a.pos){const c=i.map(d=>d.map(r,0,0)).filter(d=>d!=null);n.replace(o,a.pos,l,c)}}),n}};function Efe({parser:t,nodeTypes:e=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new We("prosemirror-highlight");return new Ie({key:r,state:{init(s,i){const o=new kfe,[a,l]=U5(i.doc,t,e,n,o);return{cache:o,decorations:a,promises:l}},apply:(s,i)=>{const o=i.cache.invalidate(s),a=!!s.getMeta("prosemirror-highlight-refresh");if(!s.docChanged&&!a){const d=i.decorations.map(s.mapping,s.doc),h=i.promises;return{cache:o,decorations:d,promises:h}}const[l,c]=U5(s.doc,t,e,n,o);return{cache:o,decorations:l,promises:c}}},view:s=>{const i=new Set,o=()=>{if(i.size>0)return;const l=s.state.tr.setMeta("prosemirror-highlight-refresh",!0);s.dispatch(l)},a=()=>{var l;const c=r.getState(s.state);for(const d of(l=c==null?void 0:c.promises)!=null?l:[])i.add(d),d.then(()=>{i.delete(d),o()}).catch(()=>{i.delete(d)})};return a(),{update:()=>{a()}}},props:{decorations(s){var i;return(i=this.getState(s))==null?void 0:i.decorations}}})}function U5(t,e,n,r,s){const i=[],o=[];return t.descendants((a,l)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const c=r(a),d=s.get(l);if(d){const[h,f]=d;i.push(...f)}else{const h=e({content:a.textContent,language:c||void 0,pos:l,size:a.nodeSize});h&&Array.isArray(h)?(s.set(l,a,h),i.push(...h)):h instanceof Promise&&(s.remove(l),o.push(h))}}return!1}),[Re.create(t,i),o]}function Cfe(t,e){return function({content:r,language:s,pos:i,size:o}){var a;const l=[],{tokens:c,fg:d,bg:h,rootStyle:f}=t.codeToTokens(r,{lang:s,theme:t.getLoadedThemes()[0]}),p=f||(d&&h?`--prosemirror-highlight:${d};--prosemirror-highlight-bg:${h}`:"");if(p){const g=at.node(i,i+o,{style:p});l.push(g)}let m=i+1;for(const g of c){for(const x of g){const b=m+x.content.length,v=at.inline(m,b,{style:Sfe((a=x.htmlStyle)!=null?a:`color: ${x.color}`),class:"shiki"});l.push(v),m=b}m+=1}return l}}function Sfe(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}var Tfe=Object.defineProperty,Nfe=(t,e,n)=>e in t?Tfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$l=(t,e,n)=>Nfe(t,typeof e!="symbol"?e+"":e,n);const _fe=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function ks(t,e="Ctrl"){return _fe()?t.replace("Mod",""):t.replace("Mod",e)}function Kt(...t){return[...new Set(t.filter(e=>e).join(" ").split(" "))].join(" ")}const Z2=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Afe(t,e,n,r){const s=document.createElement("div");s.className=Kt("bn-block-content",n.class),s.setAttribute("data-content-type",t);for(const[o,a]of Object.entries(n))o!=="class"&&s.setAttribute(o,a);const i=document.createElement(e);i.className=Kt("bn-inline-content",r.class);for(const[o,a]of Object.entries(r))o!=="class"&&i.setAttribute(o,a);return s.appendChild(i),{dom:s,contentDOM:i}}const z5=(t,e)=>{let n=Jc(t,e.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=e.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const s=r(n);if(typeof s!="object"||!("dom"in s))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return s};function jfe(t,e="<br>"){const n=t.querySelectorAll("p");if(n.length>1){const r=n[0];for(let s=1;s<n.length;s++){const i=n[s];r.innerHTML+=e+i.innerHTML,i.remove()}}}function eC(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function V5(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function Ofe(t){var e;const n=["mp4","webm","ogg","mov","mkv","flv","avi","wmv","m4v"];try{const r=((e=new URL(t).pathname.split(".").pop())==null?void 0:e.toLowerCase())||"";return n.includes(r)}catch{return!1}}function Ife(t){const e={};return Object.entries(t).forEach(([n,r])=>{e[n]={default:r.default,keepOnSplit:!0,parseHTML:s=>{const i=s.getAttribute(eC(n));if(i===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return i==="true"?!0:i==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const o=parseFloat(i);return!Number.isNaN(o)&&Number.isFinite(o)?o:null}return i},renderHTML:s=>s[n]!==r.default?{[eC(n)]:s[n]}:{}}}),e}function Mfe(t,e,n,r){const s=t();if(s===void 0)throw new Error("Cannot find node position");const i=n.state.doc.resolve(s).node().attrs.id;if(!i)throw new Error("Block doesn't have id");const o=e.getBlock(i);if(o.type!==r)throw new Error("Block type does not match");return o}function tC(t,e,n,r,s=!1,i){const o=document.createElement("div");if(i!==void 0)for(const[a,l]of Object.entries(i))a!=="class"&&o.setAttribute(a,l);o.className=Kt("bn-block-content",(i==null?void 0:i.class)||""),o.setAttribute("data-content-type",e);for(const[a,l]of Object.entries(n)){const c=r[a].default;l!==c&&o.setAttribute(eC(a),l)}return s&&o.setAttribute("data-file-block",""),o.appendChild(t.dom),t.contentDOM&&(t.contentDOM.className=Kt("bn-inline-content",t.contentDOM.className)),{...t,dom:o}}function Rfe(t,e,n){return{config:{type:t.type,content:t.content,propSchema:e},implementation:{node:t.node,render:z5,toExternalHTML:z5},extensions:n}}function Pfe(t,e){t.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function Dfe(t,e){const n=[{tag:"[data-content-type="+t.type+"]",contentElement:".bn-inline-content"}];return e.parse&&n.push({tag:"*",getAttrs(r){var s;if(typeof r=="string")return!1;const i=(s=e.parse)==null?void 0:s.call(e,r);return i===void 0?!1:i},preserveWhitespace:!0,getContent:t.content==="inline"||t.content==="none"?(r,s)=>{var i;if(e.parseContent)return e.parseContent({el:r,schema:s});if(t.content==="inline"){const o=r.cloneNode(!0);return jfe(o,(i=e.meta)!=null&&i.code?`
`:"<br>"),ui.fromSchema(s).parse(o,{topNode:s.nodes.paragraph.create(),preserveWhitespace:!0}).content}return Q.empty}:void 0}),n}function Lfe(t,e,n,r){var s,i,o,a;const l=e.node||Ei.create({name:t.type,content:t.content==="inline"?"inline*":t.content==="none"?"":t.content,group:"blockContent",selectable:((s=e.meta)==null?void 0:s.selectable)??!0,isolating:((i=e.meta)==null?void 0:i.isolating)??!0,code:((o=e.meta)==null?void 0:o.code)??!1,defining:((a=e.meta)==null?void 0:a.defining)??!0,priority:r,addAttributes(){return Ife(t.propSchema)},parseHTML(){return Dfe(t,e)},renderHTML({HTMLAttributes:c}){var d;const h=document.createElement("div");return tC({dom:h,contentDOM:t.content==="inline"?h:void 0},t.type,{},t.propSchema,((d=e.meta)==null?void 0:d.fileBlockAccept)!==void 0,c)},addNodeView(){return c=>{var d,h;const f=this.options.editor,p=Mfe(c.getPos,f,this.editor,t.type),m=((d=this.options.domAttributes)==null?void 0:d.blockContent)||{},g=e.render.call({blockContentDOMAttributes:m,props:c,renderType:"nodeView"},p,f);return((h=e.meta)==null?void 0:h.selectable)===!1&&Pfe(g,this.editor),g}}});if(l.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return{config:t,implementation:{...e,node:l,render(c,d){var h;const f=((h=l.options.domAttributes)==null?void 0:h.blockContent)||{};return e.render.call({blockContentDOMAttributes:f,props:void 0,renderType:"dom"},c,d)},toExternalHTML:(c,d)=>{var h,f;const p=((h=l.options.domAttributes)==null?void 0:h.blockContent)||{};return((f=e.toExternalHTML)==null?void 0:f.call({blockContentDOMAttributes:p},c,d))??e.render.call({blockContentDOMAttributes:p,renderType:"dom",props:void 0},c,d)}},extensions:n}}function bs(t,e,n){return(r={})=>{const s=typeof t=="function"?t(r):t,i=typeof e=="function"?e(r):e,o=n?typeof n=="function"?n(r):n:void 0;return{config:s,implementation:{...i,toExternalHTML(a,l){var c,d;const h=(c=i.toExternalHTML)==null?void 0:c.call({blockContentDOMAttributes:this.blockContentDOMAttributes},a,l);if(h!==void 0)return tC(h,a.type,a.props,s.propSchema,((d=i.meta)==null?void 0:d.fileBlockAccept)!==void 0)},render(a,l){var c;const d=i.render.call({blockContentDOMAttributes:this.blockContentDOMAttributes,renderType:this.renderType,props:this.props},a,l);return tC(d,a.type,a.props,s.propSchema,((c=i.meta)==null?void 0:c.fileBlockAccept)!==void 0,this.blockContentDOMAttributes)}},extensions:o}}}function k$(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function Bfe(t){return t==="boolean"?{}:{stringValue:{default:void 0,keepOnSplit:!0,parseHTML:e=>e.getAttribute("data-value"),renderHTML:e=>e.stringValue!==void 0?{"data-value":e.stringValue}:{}}}}function j0(t,e,n,r){return t.dom.setAttribute("data-style-type",e),r==="string"&&t.dom.setAttribute("data-value",n),t.contentDOM&&t.contentDOM.setAttribute("data-editable",""),t}function E$(t,e){return{config:t,implementation:e}}function Fh(t,e){return E$({type:t.name,propSchema:e},{mark:t,render(n,r){const s=r.pmSchema.marks[t.name].spec.toDOM;if(s===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const i=r.pmSchema.mark(t.name,{stringValue:n}),o=us.renderSpec(document,s(i,!0));if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap mark's `renderHTML` function does not return an object with the `dom` property.");return o},toExternalHTML(n,r){const s=r.pmSchema.marks[t.name].spec.toDOM;if(s===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const i=r.pmSchema.mark(t.name,{stringValue:n}),o=us.renderSpec(document,s(i,!0));if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap mark's `renderHTML` function does not return an object with the `dom` property.");return o}})}function C$(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function $fe(t,e){const n=[{tag:`[data-style-type="${t.type}"]`,contentElement:r=>{const s=r;return s.matches("[data-editable]")?s:s.querySelector("[data-editable]")||s}}];return e&&n.push({tag:"*",consuming:!1,getAttrs(r){if(typeof r=="string")return!1;const s=e==null?void 0:e(r);return s===void 0?!1:{stringValue:s}}}),n}function S$(t,e){const n=qs.create({name:t.type,addAttributes(){return Bfe(t.propSchema)},parseHTML(){return $fe(t,e.parse)},renderHTML({mark:r}){const s=(e.toExternalHTML||e.render)(r.attrs.stringValue);return j0(s,t.type,r.attrs.stringValue,t.propSchema)},addMarkView(){return({mark:r})=>{const s=e.render(r.attrs.stringValue);return j0(s,t.type,r.attrs.stringValue,t.propSchema)}}});return E$(t,{...e,mark:n,render:r=>{const s=e.render(r);return j0(s,t.type,r,t.propSchema)},toExternalHTML:r=>{const s=(e.toExternalHTML||e.render)(r);return j0(s,t.type,r,t.propSchema)}})}function xr(t,e){let n,r;if(e.firstChild.descendants((s,i)=>n?!1:!ON(s)||s.attrs.id!==t?!0:(n=s,r=i+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function ON(t){return t.type.isInGroup("bnBlock")}const Ffe=(t,e)=>({tr:n,dispatch:r})=>(r&&f1(n,t,e),!0);function f1(t,e,n,r,s){const i=Xy(t.doc.resolve(e));let o=null;i.blockNoteType==="table"&&(o=zfe(t));const a=tn(t),l=a.nodes[i.blockNoteType],c=a.nodes[n.type||i.blockNoteType],d=c.isInGroup("bnBlock")?c:a.nodes.blockContainer;if(i.isBlockContainer&&c.isInGroup("blockContent"))W5(n,t,i),Hfe(n,t,l,c,i);else if(!i.isBlockContainer&&c.isInGroup("bnBlock"))W5(n,t,i);else{const h=Ut(i.bnBlock.node,a);t.replaceWith(i.bnBlock.beforePos,i.bnBlock.afterPos,Jc({children:h.children,...n},a));return}t.setNodeMarkup(i.bnBlock.beforePos,d,{...i.bnBlock.node.attrs,...n.props}),o&&Vfe(t,i,o)}function Hfe(t,e,n,r,s,i,o){const a=tn(e);let l="keep";if(t.content)if(typeof t.content=="string")l=mi([t.content],a,r.name);else if(Array.isArray(t.content))l=mi(t.content,a,r.name);else if(t.content.type==="tableContent")l=e1(t.content,a);else throw new lo(t.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(l=[]);l==="keep"?e.setNodeMarkup(s.blockContent.beforePos,r,{...s.blockContent.node.attrs,...t.props}):e.replaceWith(s.blockContent.beforePos,s.blockContent.afterPos,r.createChecked({...s.blockContent.node.attrs,...t.props},l))}function W5(t,e,n){const r=tn(e);if(t.children!==void 0&&t.children.length>0){const s=t.children.map(i=>Jc(i,r));if(n.childContainer)e.step(new an(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new ue(Q.from(s),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");e.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},s))}}}function Ufe(t,e,n,r,s){const i=typeof e=="string"?e:e.id,o=xr(i,t.doc);if(!o)throw new Error(`Block with ID ${i} not found`);f1(t,o.posBeforeNode,n);const a=t.doc.resolve(o.posBeforeNode+1).node(),l=tn(t);return Ut(a,l)}function zfe(t){const e="selection"in t?t.selection:null;if(!(e instanceof xe))return null;const n=t.doc.resolve(e.head);let r=-1,s=-1;for(let g=n.depth;g>=0;g--){const x=n.node(g).type.name;if(r<0&&(x==="tableCell"||x==="tableHeader")&&(r=g),x==="table"){s=g;break}}if(r<0||s<0)return null;const i=n.before(r),o=n.before(s),a=t.doc.nodeAt(o);if(!a||a.type.name!=="table")return null;const l=Et.get(a),c=i-(o+1),d=l.map.indexOf(c);if(d<0)return null;const h=Math.floor(d/l.width),f=d%l.width,p=i+1+1,m=Math.max(0,e.head-p);return{row:h,col:f,offset:m}}function Vfe(t,e,n){var r;if(e.blockNoteType!=="table")return!1;let s=-1;if(e.isBlockContainer)s=t.mapping.map(e.blockContent.beforePos);else{const x=t.mapping.map(e.bnBlock.beforePos),b=x+(((r=t.doc.nodeAt(x))==null?void 0:r.nodeSize)||0);t.doc.nodesBetween(x,b,(v,w)=>v.type.name==="table"?(s=w,!1):!0)}const i=s>=0?t.doc.nodeAt(s):null;if(!i||i.type.name!=="table")return!1;const o=Et.get(i),a=Math.max(0,Math.min(n.row,o.height-1)),l=Math.max(0,Math.min(n.col,o.width-1)),c=a*o.width+l,d=o.map[c];if(d==null)return!1;const h=s+1+d+1,f=t.doc.nodeAt(h),p=h+1,m=f?f.content.size:0,g=p+Math.max(0,Math.min(n.offset,m));return"selection"in t&&t.setSelection(xe.create(t.doc,g)),!0}const Ua={gray:{text:"#9b9a97",background:"#ebeced"},brown:{text:"#64473a",background:"#e9e5e3"},red:{text:"#e03e3e",background:"#fbe4e4"},orange:{text:"#d9730d",background:"#f6e9d9"},yellow:{text:"#dfab01",background:"#fbf3db"},green:{text:"#4d6461",background:"#ddedea"},blue:{text:"#0b6e99",background:"#ddebf1"},purple:{text:"#6940a5",background:"#eae4f2"},pink:{text:"#ad1a72",background:"#f4dfeb"}},st={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},Vr=t=>{const e={};return t.hasAttribute("data-background-color")?e.backgroundColor=t.getAttribute("data-background-color"):t.style.backgroundColor&&(e.backgroundColor=t.style.backgroundColor),t.hasAttribute("data-text-color")?e.textColor=t.getAttribute("data-text-color"):t.style.color&&(e.textColor=t.style.color),e.textAlignment=st.textAlignment.values.includes(t.style.textAlign)?t.style.textAlign:void 0,e},Xc=(t,e)=>{t.backgroundColor&&t.backgroundColor!==st.backgroundColor.default&&(e.style.backgroundColor=t.backgroundColor in Ua?Ua[t.backgroundColor].background:t.backgroundColor),t.textColor&&t.textColor!==st.textColor.default&&(e.style.color=t.textColor in Ua?Ua[t.textColor].text:t.textColor),t.textAlignment&&t.textAlignment!==st.textAlignment.default&&(e.style.textAlign=t.textAlignment)},Wfe=(t="backgroundColor")=>({default:st.backgroundColor.default,parseHTML:e=>e.hasAttribute("data-background-color")?e.getAttribute("data-background-color"):e.style.backgroundColor?e.style.backgroundColor:st.backgroundColor.default,renderHTML:e=>e[t]===st.backgroundColor.default?{}:{"data-background-color":e[t]}}),qfe=(t="textColor")=>({default:st.textColor.default,parseHTML:e=>e.hasAttribute("data-text-color")?e.getAttribute("data-text-color"):e.style.color?e.style.color:st.textColor.default,renderHTML:e=>e[t]===st.textColor.default?{}:{"data-text-color":e[t]}}),p1=(t,e)=>{const n=t.querySelector(e);if(!n)return;const r=t.querySelector("figcaption"),s=(r==null?void 0:r.textContent)??void 0;return{targetElement:n,caption:s}},ii=it(({editor:t})=>{const e=Al(void 0);function n(){e.setState(void 0)}return{key:"filePanel",store:e,mount({signal:r}){const s=t.onChange(n,!1),i=t.onSelectionChange(n,!1);r.addEventListener("abort",()=>{s(),i()})},closeMenu:n,showMenu(r){e.setState(r)}}}),Gfe=(t,e,n)=>{const r=document.createElement("div");r.className="bn-add-file-button";const s=document.createElement("div");s.className="bn-add-file-button-icon",n?s.appendChild(n):s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',r.appendChild(s);const i=document.createElement("p");i.className="bn-add-file-button-text",i.innerHTML=t.type in e.dictionary.file_blocks.add_button_text?e.dictionary.file_blocks.add_button_text[t.type]:e.dictionary.file_blocks.add_button_text.file,r.appendChild(i);const o=l=>{l.preventDefault(),l.stopPropagation()},a=()=>{var l;e.isEditable&&((l=e.getExtension(ii))==null||l.showMenu(t.id))};return r.addEventListener("mousedown",o,!0),r.addEventListener("click",a,!0),{dom:r,destroy:()=>{r.removeEventListener("mousedown",o,!0),r.removeEventListener("click",a,!0)}}},Yfe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',Kfe=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=Yfe,e.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=t.props.name,e.appendChild(r),{dom:e}},IN=(t,e,n,r)=>{const s=document.createElement("div");if(s.className="bn-file-block-content-wrapper",t.props.url===""){const o=Gfe(t,e,r);s.appendChild(o.dom);const a=e.onUploadStart(l=>{if(l===t.id){s.removeChild(o.dom);const c=document.createElement("div");c.className="bn-file-loading-preview",c.textContent="Loading...",s.appendChild(c)}});return{dom:s,destroy:()=>{a(),o.destroy()}}}const i={dom:s};if(t.props.showPreview===!1||!n){const o=Kfe(t);s.appendChild(o.dom),i.destroy=()=>{var a;(a=o.destroy)==null||a.call(o)}}else s.appendChild(n.dom);if(t.props.caption){const o=document.createElement("p");o.className="bn-file-caption",o.textContent=t.props.caption,s.appendChild(o)}return i},MN=(t,e)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},m1=(t,e)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},q5=t=>({url:t.src||void 0}),Jfe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',Qfe=t=>({type:"audio",propSchema:{backgroundColor:st.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},content:"none"}),Xfe=(t={})=>e=>{if(e.tagName==="AUDIO"){if(e.closest("figure"))return;const{backgroundColor:n}=Vr(e);return{...q5(e),backgroundColor:n}}if(e.tagName==="FIGURE"){const n=p1(e,"audio");if(!n)return;const{targetElement:r,caption:s}=n,{backgroundColor:i}=Vr(e);return{...q5(r),backgroundColor:i,caption:s}}},Zfe=(t={})=>(e,n)=>{const r=document.createElement("div");r.innerHTML=t.icon??Jfe;const s=document.createElement("audio");return s.className="bn-audio",n.resolveFileUrl?n.resolveFileUrl(e.props.url).then(i=>{s.src=i}):s.src=e.props.url,s.controls=!0,s.contentEditable="false",s.draggable=!1,IN(e,n,{dom:s},r.firstElementChild)},epe=(t={})=>(e,n)=>{if(!e.props.url){const s=document.createElement("p");return s.textContent="Add audio",{dom:s}}let r;return e.props.showPreview?(r=document.createElement("audio"),r.src=e.props.url):(r=document.createElement("a"),r.href=e.props.url,r.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?MN(r,e.props.caption):m1(r,e.props.caption):{dom:r}},tpe=bs(Qfe,t=>({meta:{fileBlockAccept:["audio/*"]},parse:Xfe(t),render:Zfe(t),toExternalHTML:epe(t),runsBefore:["file"]})),G5=Symbol.for("blocknote.shikiParser"),Dw=Symbol.for("blocknote.shikiHighlighterPromise");function npe(t){const e=globalThis;let n,r;return Efe({parser:s=>{if(!t.createHighlighter)return[];if(!n)return e[Dw]=e[Dw]||t.createHighlighter(),e[Dw].then(o=>{n=o});const i=T$(t,s.language);return!i||i==="text"||i==="none"||i==="plaintext"||i==="txt"?[]:n.getLoadedLanguages().includes(i)?(r||(r=e[G5]||Cfe(n),e[G5]=r),r(s)):n.loadLanguage(i)},languageExtractor:s=>s.attrs.language,nodeTypes:["codeBlock"]})}const rpe=({defaultLanguage:t="text"})=>({type:"codeBlock",propSchema:{language:{default:t}},content:"inline"}),spe=bs(rpe,t=>({meta:{code:!0,defining:!0,isolating:!1},parse:e=>{var n,r;if(e.tagName!=="PRE"||e.childElementCount!==1||((n=e.firstElementChild)==null?void 0:n.tagName)!=="CODE")return;const s=e.firstElementChild;return{language:s.getAttribute("data-language")||((r=s.className.split(" ").find(i=>i.includes("language-")))==null?void 0:r.replace("language-",""))}},parseContent:({el:e,schema:n})=>{const r=ui.fromSchema(n),s=e.firstElementChild;return r.parse(s,{preserveWhitespace:"full",topNode:n.nodes.codeBlock.create()}).content},render(e,n){const r=document.createDocumentFragment(),s=document.createElement("pre"),i=document.createElement("code");s.appendChild(i);let o;if(t.supportedLanguages){const a=document.createElement("select");Object.entries(t.supportedLanguages??{}).forEach(([d,{name:h}])=>{const f=document.createElement("option");f.value=d,f.text=h,a.appendChild(f)}),a.value=e.props.language||t.defaultLanguage||"text";const l=d=>{const h=d.target.value;n.updateBlock(e.id,{props:{language:h}})};a.addEventListener("change",l),o=()=>a.removeEventListener("change",l);const c=document.createElement("div");c.contentEditable="false",c.appendChild(a),r.appendChild(c)}return r.appendChild(s),{dom:r,contentDOM:i,destroy:()=>{o==null||o()}}},toExternalHTML(e){const n=document.createElement("pre"),r=document.createElement("code");return r.className=`language-${e.props.language}`,r.dataset.language=e.props.language,n.appendChild(r),{dom:n,contentDOM:r}}}),t=>[it({key:"code-block-highlighter",prosemirrorPlugins:[npe(t)]}),it({key:"code-block-keyboard-shortcuts",keyboardShortcuts:{Delete:({editor:e})=>e.transact(n=>{const{block:r}=e.getTextCursorPosition();if(r.type!=="codeBlock")return!1;const{$from:s}=n.selection;return s.parent.textContent?!1:(e.removeBlocks([r]),!0)}),Tab:({editor:e})=>t.indentLineWithTab===!1?!1:e.transact(n=>{const{block:r}=e.getTextCursorPosition();return r.type==="codeBlock"?(n.insertText("  "),!0):!1}),Enter:({editor:e})=>e.transact(n=>{const{block:r,nextBlock:s}=e.getTextCursorPosition();if(r.type!=="codeBlock")return!1;const{$from:i}=n.selection,o=i.parentOffset===i.parent.nodeSize-2,a=i.parent.textContent.endsWith(`

`);if(o&&a){if(n.delete(i.pos-2,i.pos),s)return e.setTextCursorPosition(s,"start"),!0;const[l]=e.insertBlocks([{type:"paragraph"}],r,"after");return e.setTextCursorPosition(l,"start"),!0}return n.insertText(`
`),!0}),"Shift-Enter":({editor:e})=>e.transact(()=>{const{block:n}=e.getTextCursorPosition();if(n.type!=="codeBlock")return!1;const[r]=e.insertBlocks([{type:"paragraph"}],n,"after");return e.setTextCursorPosition(r,"start"),!0})},inputRules:[{find:/^```(.*?)\s$/,replace:({match:e})=>{const n=e[1].trim();return{type:"codeBlock",props:{language:{language:T$(t,n)??n}.language},content:[]}}}]})]);function T$(t,e){var n;return(n=Object.entries(t.supportedLanguages??{}).find(([r,{aliases:s}])=>(s==null?void 0:s.includes(e))||r===e))==null?void 0:n[0]}const ipe=()=>({type:"divider",propSchema:{},content:"none"}),ope=bs(ipe,{meta:{isolating:!1},parse(t){if(t.tagName==="HR")return{}},render(){return{dom:document.createElement("hr")}}},[it({key:"divider-block-shortcuts",inputRules:[{find:new RegExp("^---$"),replace(){return{type:"divider",props:{},content:[]}}}]})]),Y5=t=>({url:t.src||void 0}),ape=()=>({type:"file",propSchema:{backgroundColor:st.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},content:"none"}),lpe=()=>t=>{if(t.tagName==="EMBED"){if(t.closest("figure"))return;const{backgroundColor:e}=Vr(t);return{...Y5(t),backgroundColor:e}}if(t.tagName==="FIGURE"){const e=p1(t,"embed");if(!e)return;const{targetElement:n,caption:r}=e,{backgroundColor:s}=Vr(t);return{...Y5(n),backgroundColor:s,caption:r}}},cpe=bs(ape,{meta:{fileBlockAccept:["*/*"]},parse:lpe(),render(t,e){return IN(t,e)},toExternalHTML(t){if(!t.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?m1(e,t.props.caption):{dom:e}}}),upe={set:(t,e)=>window.localStorage.setItem(`toggle-${t.id}`,e?"true":"false"),get:t=>window.localStorage.getItem(`toggle-${t.id}`)==="true"},N$=(t,e,n,r=upe)=>{if("isToggleable"in t.props&&!t.props.isToggleable)return{dom:n};const s=document.createElement("div"),i=document.createElement("div");i.className="bn-toggle-wrapper";const o=document.createElement("button");o.className="bn-toggle-button",o.type="button",o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="CURRENTCOLOR"><path d="M320-200v-560l440 280-440 280Z"/></svg>';const a=m=>m.preventDefault();o.addEventListener("mousedown",a);const l=()=>{var m;i.getAttribute("data-show-children")==="true"?(i.setAttribute("data-show-children","false"),r.set(e.getBlock(t),!1),s.contains(c)&&s.removeChild(c)):(i.setAttribute("data-show-children","true"),r.set(e.getBlock(t),!0),e.isEditable&&((m=e.getBlock(t))==null?void 0:m.children.length)===0&&!s.contains(c)&&s.appendChild(c))};o.addEventListener("click",l),i.appendChild(o),i.appendChild(n);const c=document.createElement("button");c.className="bn-toggle-add-block-button",c.type="button",c.textContent=e.dictionary.toggle_blocks.add_block_button;const d=m=>m.preventDefault();c.addEventListener("mousedown",d);const h=()=>{e.transact(()=>{const m=e.updateBlock(t,{children:[{}]});e.setTextCursorPosition(m.children[0].id,"end"),e.focus()})};c.addEventListener("click",h),s.appendChild(i);let f=t.children.length;const p=e.onChange(()=>{var m;const g=((m=e.getBlock(t))==null?void 0:m.children.length)??0;g>f?(i.getAttribute("data-show-children")==="false"&&(i.setAttribute("data-show-children","true"),r.set(e.getBlock(t),!0)),s.contains(c)&&s.removeChild(c)):g===0&&g<f&&(i.getAttribute("data-show-children")==="true"&&(i.setAttribute("data-show-children","false"),r.set(e.getBlock(t),!1)),s.contains(c)&&s.removeChild(c)),f=g});return r.get(t)?(i.setAttribute("data-show-children","true"),e.isEditable&&t.children.length===0&&s.appendChild(c)):i.setAttribute("data-show-children","false"),{dom:s,ignoreMutation:m=>m instanceof MutationRecord&&(m.type==="attributes"&&m.target===i&&m.attributeName==="data-show-children"||m.type==="childList"&&(m.addedNodes[0]===c||m.removedNodes[0]===c)),destroy:()=>{o.removeEventListener("mousedown",a),o.removeEventListener("click",l),c.removeEventListener("mousedown",d),c.removeEventListener("click",h),p==null||p()}}},_$=[1,2,3,4,5,6],dpe=t=>({editor:e})=>{const n=e.getTextCursorPosition();return e.schema.blockSchema[n.block.type].content!=="inline"?!1:(e.updateBlock(n.block,{type:"heading",props:{level:t}}),!0)},hpe=({defaultLevel:t=1,levels:e=_$,allowToggleHeadings:n=!0}={})=>({type:"heading",propSchema:{...st,level:{default:t,values:e},...n?{isToggleable:{default:!1,optional:!0}}:{}},content:"inline"}),fpe=bs(hpe,({allowToggleHeadings:t=!0}={})=>({meta:{isolating:!1},parse(e){let n;switch(e.tagName){case"H1":n=1;break;case"H2":n=2;break;case"H3":n=3;break;case"H4":n=4;break;case"H5":n=5;break;case"H6":n=6;break;default:return}return{...Vr(e),level:n}},render(e,n){const r=document.createElement(`h${e.props.level}`);return t?{...N$(e,n,r),contentDOM:r}:{dom:r,contentDOM:r}},toExternalHTML(e){const n=document.createElement(`h${e.props.level}`);return Xc(e.props,n),{dom:n,contentDOM:n}}}),({levels:t=_$}={})=>[it({key:"heading-shortcuts",keyboardShortcuts:Object.fromEntries(t.map(e=>[`Mod-Alt-${e}`,dpe(e)])??[]),inputRules:t.map(e=>({find:new RegExp(`^(#{${e}})\\s$`),replace({match:n}){return{type:"heading",props:{level:n[1].length}}}}))})]),A$=(t,e,n,r,s)=>{const{dom:i,destroy:o}=IN(t,e,n,s),a=i;a.style.position="relative",t.props.url&&t.props.showPreview&&(t.props.previewWidth?a.style.width=`${t.props.previewWidth}px`:a.style.width="fit-content");const l=document.createElement("div");l.className="bn-resize-handle",l.style.left="4px";const c=document.createElement("div");c.className="bn-resize-handle",c.style.right="4px";const d=document.createElement("div");d.style.position="absolute",d.style.height="100%",d.style.width="100%";let h,f=t.props.previewWidth;const p=w=>{var S,E;if(!h){!e.isEditable&&r.contains(l)&&r.contains(c)&&(r.removeChild(l),r.removeChild(c));return}let C;const T="touches"in w?w.touches[0].clientX:w.clientX;t.props.textAlignment==="center"?h.handleUsed==="left"?C=h.initialWidth+(h.initialClientX-T)*2:C=h.initialWidth+(T-h.initialClientX)*2:h.handleUsed==="left"?C=h.initialWidth+h.initialClientX-T:C=h.initialWidth+T-h.initialClientX,f=Math.min(Math.max(C,64),((E=(S=e.domElement)==null?void 0:S.firstElementChild)==null?void 0:E.clientWidth)||Number.MAX_VALUE),a.style.width=`${f}px`},m=w=>{(!w.target||!a.contains(w.target)||!e.isEditable)&&r.contains(l)&&r.contains(c)&&(r.removeChild(l),r.removeChild(c)),h&&(h=void 0,a.contains(d)&&a.removeChild(d),e.updateBlock(t,{props:{previewWidth:f}}))},g=()=>{e.isEditable&&(r.appendChild(l),r.appendChild(c))},x=w=>{w.relatedTarget===l||w.relatedTarget===c||h||e.isEditable&&r.contains(l)&&r.contains(c)&&(r.removeChild(l),r.removeChild(c))},b=w=>{w.preventDefault(),a.contains(d)||a.appendChild(d);const S="touches"in w?w.touches[0].clientX:w.clientX;h={handleUsed:"left",initialWidth:a.clientWidth,initialClientX:S}},v=w=>{w.preventDefault(),a.contains(d)||a.appendChild(d);const S="touches"in w?w.touches[0].clientX:w.clientX;h={handleUsed:"right",initialWidth:a.clientWidth,initialClientX:S}};return window.addEventListener("mousemove",p),window.addEventListener("touchmove",p),window.addEventListener("mouseup",m),window.addEventListener("touchend",m),a.addEventListener("mouseenter",g),a.addEventListener("mouseleave",x),l.addEventListener("mousedown",b),l.addEventListener("touchstart",b),c.addEventListener("mousedown",v),c.addEventListener("touchstart",v),{dom:a,destroy:()=>{o==null||o(),window.removeEventListener("mousemove",p),window.removeEventListener("touchmove",p),window.removeEventListener("mouseup",m),window.removeEventListener("touchend",m),a.removeEventListener("mouseenter",g),a.removeEventListener("mouseleave",x),l.removeEventListener("mousedown",b),l.removeEventListener("touchstart",b),c.removeEventListener("mousedown",v),c.removeEventListener("touchstart",v)}}},K5=t=>{const e=t.src||void 0,n=t.width||void 0,r=t.alt||void 0;return{url:e,previewWidth:n,name:r}},ppe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',mpe=(t={})=>({type:"image",propSchema:{textAlignment:st.textAlignment,backgroundColor:st.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none"}),gpe=(t={})=>e=>{if(e.tagName==="IMG"){if(e.closest("figure"))return;const{backgroundColor:n}=Vr(e);return{...K5(e),backgroundColor:n}}if(e.tagName==="FIGURE"){const n=p1(e,"img");if(!n)return;const{targetElement:r,caption:s}=n,{backgroundColor:i}=Vr(e);return{...K5(r),backgroundColor:i,caption:s}}},bpe=(t={})=>(e,n)=>{const r=document.createElement("div");r.innerHTML=t.icon??ppe;const s=document.createElement("div");s.className="bn-visual-media-wrapper";const i=document.createElement("img");return i.className="bn-visual-media",n.resolveFileUrl?n.resolveFileUrl(e.props.url).then(o=>{i.src=o}):i.src=e.props.url,i.alt=e.props.name||e.props.caption||"BlockNote image",i.contentEditable="false",i.draggable=!1,s.appendChild(i),A$(e,n,{dom:s},s,r.firstElementChild)},xpe=(t={})=>(e,n)=>{if(!e.props.url){const s=document.createElement("p");return s.textContent="Add image",{dom:s}}let r;return e.props.showPreview?(r=document.createElement("img"),r.src=e.props.url,r.alt=e.props.name||e.props.caption||"BlockNote image",e.props.previewWidth&&(r.width=e.props.previewWidth)):(r=document.createElement("a"),r.href=e.props.url,r.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?MN(r,e.props.caption):m1(r,e.props.caption):{dom:r}},ype=bs(mpe,t=>({meta:{fileBlockAccept:["image/*"]},parse:gpe(t),render:bpe(t),toExternalHTML:xpe(t),runsBefore:["file"]})),vpe=(t,e,n)=>({state:r,dispatch:s})=>s?j$(r.tr,t,e,n):!0,j$=(t,e,n,r)=>{const s=dl(t.doc,e),i=hl(s);if(!i.isBlockContainer)return!1;const o=tn(t),a=[{type:i.bnBlock.node.type,attrs:r?{...i.bnBlock.node.attrs,id:void 0}:{}},{type:n?i.blockContent.node.type:o.nodes.paragraph,attrs:r?{...i.blockContent.node.attrs}:{}}];return t.split(e,2,a),!0},g1=(t,e)=>{const{blockInfo:n,selectionEmpty:r}=t.transact(o=>({blockInfo:cm(o),selectionEmpty:o.selection.anchor===o.selection.head}));if(!n.isBlockContainer)return!1;const{bnBlock:s,blockContent:i}=n;return i.node.type.name!==e||!r?!1:i.node.childCount===0?(t.transact(o=>{f1(o,s.beforePos,{type:"paragraph",props:{}})}),!0):i.node.childCount>0?t.transact(o=>(o.deleteSelection(),j$(o,o.selection.from,!0))):!1};function RN(t,e,n){var r,s,i;const o=ui.fromSchema(e),a=t,l=document.createElement("div");l.setAttribute("data-node-type","blockGroup");for(const p of Array.from(a.childNodes))l.appendChild(p.cloneNode(!0));let c=o.parse(l,{topNode:e.nodes.blockGroup.create()});((s=(r=c.firstChild)==null?void 0:r.firstChild)==null?void 0:s.type.name)==="checkListItem"&&(c=c.copy(c.content.cut(c.firstChild.firstChild.nodeSize+2)));const d=(i=c.firstChild)==null?void 0:i.firstChild;if(!(d!=null&&d.isTextblock))return Q.from(c);const h=e.nodes[n].create({},d.content),f=c.content.cut(d.nodeSize+2);if(f.size>0){const p=c.copy(f);return h.content.addToEnd(p)}return h.content}const wpe=()=>({type:"bulletListItem",propSchema:{...st},content:"inline"}),kpe=bs(wpe,{meta:{isolating:!1},parse(t){var e;if(t.tagName!=="LI")return;const n=t.parentElement;if(n!==null&&(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"))return Vr(t)},parseContent:({el:t,schema:e})=>RN(t,e,"bulletListItem"),render(){const t=document.createElement("p");return{dom:t,contentDOM:t}},toExternalHTML(t){const e=document.createElement("li"),n=document.createElement("p");return Xc(t.props,e),e.appendChild(n),{dom:e,contentDOM:n}}},[it({key:"bullet-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:t})=>g1(t,"bulletListItem"),"Mod-Shift-8":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"bulletListItem",props:{}}),!0)}},inputRules:[{find:new RegExp("^[-+*]\\s$"),replace({editor:t}){if(Tr(t.prosemirrorState).blockNoteType!=="heading")return{type:"bulletListItem",props:{}}}}]})]),Epe=()=>({type:"checkListItem",propSchema:{...st,checked:{default:!1,type:"boolean"}},content:"inline"}),Cpe=bs(Epe,{meta:{isolating:!1},parse(t){var e;if(t.tagName==="input")return t.closest("[data-content-type]")||t.closest("li")?void 0:t.type==="checkbox"?{checked:t.checked}:void 0;if(t.tagName!=="LI")return;const n=t.parentElement;if(n!==null&&(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL")){const r=t.querySelector("input[type=checkbox]")||null;return r===null?void 0:{...Vr(t),checked:r.checked}}},parseContent:({el:t,schema:e})=>RN(t,e,"checkListItem"),render(t,e){const n=document.createDocumentFragment(),r=document.createElement("input");r.type="checkbox",r.checked=t.props.checked,t.props.checked&&r.setAttribute("checked",""),r.addEventListener("change",()=>{e.updateBlock(t,{props:{checked:!t.props.checked}})});const s=document.createElement("p");return n.appendChild(r),n.appendChild(s),{dom:n,contentDOM:s}},toExternalHTML(t){const e=document.createElement("li"),n=document.createElement("input");n.type="checkbox",n.checked=t.props.checked,t.props.checked&&n.setAttribute("checked","");const r=document.createElement("p");return Xc(t.props,e),e.appendChild(n),e.appendChild(r),{dom:e,contentDOM:r}},runsBefore:["bulletListItem"]},[it({key:"check-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:t})=>g1(t,"checkListItem"),"Mod-Shift-9":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"checkListItem",props:{}}),!0)}},inputRules:[{find:new RegExp("^\\[\\s*\\]\\s$"),replace(){return{type:"checkListItem",props:{checked:!1},content:[]}}},{find:new RegExp("^\\[[Xx]\\]\\s$"),replace(){return{type:"checkListItem",props:{checked:!0}}}}]})]);function O$(t,e,n,r){let s=t.firstChild.attrs.start||1,i=!0;const o=!!t.firstChild.attrs.start,a=hl({posBeforeNode:e,node:t});if(!a.isBlockContainer)throw new Error("impossible");const l=n.doc.resolve(a.bnBlock.beforePos).nodeBefore,c=l?r.get(l):void 0;return c!==void 0?(s=c+1,i=!1):l&&hl({posBeforeNode:a.bnBlock.beforePos-l.nodeSize,node:l}).blockNoteType==="numberedListItem"&&(s=O$(l,a.bnBlock.beforePos-l.nodeSize,n,r).index+1,i=!1),r.set(t,s),{index:s,isFirst:i,hasStart:o}}function J5(t,e){const n=new Map,r=e.decorations.map(t.mapping,t.doc),s=[];t.doc.nodesBetween(0,t.doc.nodeSize-2,(o,a)=>{if(o.type.name==="blockContainer"&&o.firstChild.type.name==="numberedListItem"){const{index:l,isFirst:c,hasStart:d}=O$(o,a,t,n);if(r.find(a,a+o.nodeSize,h=>h.index===l&&h.isFirst===c&&h.hasStart===d).length===0){const h=t.doc.nodeAt(a+1);s.push(at.node(a+1,a+1+h.nodeSize,{"data-index":l.toString()}))}}});const i=s.flatMap(o=>r.find(o.from,o.to));return{decorations:r.remove(i).add(t.doc,s)}}const Spe=()=>new Ie({key:new We("numbered-list-indexing-decorations"),state:{init(t,e){return J5(e.tr,{decorations:Re.empty})},apply(t,e){return!t.docChanged&&!t.selectionSet&&e.decorations?e:J5(t,e)}},props:{decorations(t){var e;return((e=this.getState(t))==null?void 0:e.decorations)??Re.empty}}}),Tpe=()=>({type:"numberedListItem",propSchema:{...st,start:{default:void 0,type:"number"}},content:"inline"}),Npe=bs(Tpe,{meta:{isolating:!1},parse(t){var e;if(t.tagName!=="LI")return;const n=t.parentElement;if(n!==null&&(n.tagName==="OL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="OL")){const r=parseInt(n.getAttribute("start")||"1"),s=Vr(t);return t.previousElementSibling||r===1?s:{...s,start:r}}},parseContent:({el:t,schema:e})=>RN(t,e,"numberedListItem"),render(){const t=document.createElement("p");return{dom:t,contentDOM:t}},toExternalHTML(t){const e=document.createElement("li"),n=document.createElement("p");return Xc(t.props,e),e.appendChild(n),{dom:e,contentDOM:n}}},[it({key:"numbered-list-item-shortcuts",inputRules:[{find:new RegExp("^(\\d+)\\.\\s$"),replace({match:t,editor:e}){if(Tr(e.prosemirrorState).blockNoteType==="heading")return;const n=parseInt(t[1]);return{type:"numberedListItem",props:{start:n!==1?n:void 0}}}}],keyboardShortcuts:{Enter:({editor:t})=>g1(t,"numberedListItem"),"Mod-Shift-7":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"numberedListItem",props:{}}),!0)}},prosemirrorPlugins:[Spe()]})]),_pe=()=>({type:"toggleListItem",propSchema:{...st},content:"inline"}),Ape=bs(_pe,{meta:{isolating:!1},render(t,e){const n=document.createElement("p");return{...N$(t,e,n),contentDOM:n}},toExternalHTML(t){const e=document.createElement("li"),n=document.createElement("p");return Xc(t.props,e),e.appendChild(n),{dom:e,contentDOM:n}}},[it({key:"toggle-list-item-shortcuts",keyboardShortcuts:{Enter:({editor:t})=>g1(t,"toggleListItem"),"Mod-Shift-6":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"toggleListItem",props:{}}),!0)}}})]),jpe=()=>({type:"paragraph",propSchema:st,content:"inline"}),I$=bs(jpe,{meta:{isolating:!1},parse:t=>{var e;if(t.tagName==="P"&&(e=t.textContent)!=null&&e.trim())return Vr(t)},render:()=>{const t=document.createElement("p");return{dom:t,contentDOM:t}},toExternalHTML:t=>{const e=document.createElement("p");return Xc(t.props,e),{dom:e,contentDOM:e}},runsBefore:["default"]},[it({key:"paragraph-shortcuts",keyboardShortcuts:{"Mod-Alt-0":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"paragraph",props:{}}),!0)}}})]),Ope=()=>({type:"quote",propSchema:{backgroundColor:st.backgroundColor,textColor:st.textColor},content:"inline"}),Ipe=bs(Ope,{meta:{isolating:!1},parse(t){if(t.tagName==="BLOCKQUOTE"){const{backgroundColor:e,textColor:n}=Vr(t);return{backgroundColor:e,textColor:n}}},render(){const t=document.createElement("blockquote");return{dom:t,contentDOM:t}},toExternalHTML(t){const e=document.createElement("blockquote");return Xc(t.props,e),{dom:e,contentDOM:e}}},[it({key:"quote-block-shortcuts",keyboardShortcuts:{"Mod-Alt-q":({editor:t})=>{const e=t.getTextCursorPosition();return t.schema.blockSchema[e.block.type].content!=="inline"?!1:(t.updateBlock(e.block,{type:"quote",props:{}}),!0)}},inputRules:[{find:new RegExp("^>\\s$"),replace(){return{type:"quote",props:{}}}}]})]),Mpe=35,PN=120,Rpe=31,Ppe=ut.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[Mle({cellMinWidth:Mpe,defaultCellMinWidth:PN,View:null}),zle()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,n=t.$head.parentOffset===0,r=t.$head.node().type.name==="tableParagraph";return e&&n&&r},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>Z4(1)(t,e,n)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>Z4(-1)(t,e,n))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:mt(Ee(t,"tableRole",e))}}}),Dpe={textColor:st.textColor},Lpe=Ei.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"tableContent+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(n=>parseInt(n,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th",getContent:(t,e)=>M$(t,e)}]},renderHTML({HTMLAttributes:t}){return["th",ds(this.options.HTMLAttributes,t),0]}}),Bpe=Ei.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"tableContent+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(n=>parseInt(n,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td",getContent:(t,e)=>M$(t,e)}]},renderHTML({HTMLAttributes:t}){return["td",ds(this.options.HTMLAttributes,t),0]}}),$pe=Ei.create({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r,s;const i=Afe(this.name,"table",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{}),o=document.createElement("colgroup");for(const a of t.children[0].children)if(a.attrs.colwidth)for(const l of a.attrs.colwidth){const c=document.createElement("col");l&&(c.style=`width: ${l}px`),o.appendChild(c)}else o.appendChild(document.createElement("col"));return(s=i.dom.firstChild)==null||s.appendChild(o),i},addNodeView(){return({node:t,HTMLAttributes:e})=>{var n;class r extends G7{constructor(i,o,a){super(i,o),this.node=i,this.cellMinWidth=o,this.blockContentHTMLAttributes=a;const l=document.createElement("div");l.className=Kt("bn-block-content",a.class),l.setAttribute("data-content-type","table");for(const[f,p]of Object.entries(a))f!=="class"&&l.setAttribute(f,p);const c=this.dom,d=document.createElement("div");d.className="tableWrapper-inner",d.appendChild(c.firstChild),c.appendChild(d),l.appendChild(c);const h=document.createElement("div");h.className="table-widgets-container",h.style.position="relative",c.appendChild(h),this.dom=l}ignoreMutation(i){return!i.target.closest(".tableWrapper-inner")||super.ignoreMutation(i)}}return new r(t,PN,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e})}}}),Fpe=Ei.create({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent||!t.closest("[data-content-type]"))return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"||e.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),Hpe=Ei.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",ds(this.options.HTMLAttributes,t),0]}});function M$(t,e){const n=ui.fromSchema(e).parse(t,{topNode:e.nodes.blockGroup.create()}),r=[];return n.content.descendants(s=>{if(s.isInline)return r.push(s),!1}),Q.fromArray(r)}const Upe=()=>Rfe({node:$pe,type:"table",content:"table"},Dpe,[it({key:"table-extensions",tiptapExtensions:[Ppe,Fpe,Lpe,Bpe,Hpe]}),it({key:"table-keyboard-delete",keyboardShortcuts:{Backspace:({editor:t})=>{if(!(t.prosemirrorState.selection instanceof pt))return!1;const e=t.getTextCursorPosition().block,n=e.content;let r=0;for(const i of n.rows)for(const o of i.cells){if("type"in o&&o.content.length>0||!("type"in o)&&o.length>0)return!1;r++}let s=0;return t.prosemirrorState.selection.forEachCell(()=>{s++}),s<r?!1:(t.transact(()=>{(t.getPrevBlock(e)||t.getNextBlock(e))&&t.setTextCursorPosition(e),t.removeBlocks([e])}),!0)}}})]),Q5=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},zpe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',Vpe=t=>({type:"video",propSchema:{textAlignment:st.textAlignment,backgroundColor:st.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},content:"none"}),Wpe=t=>e=>{if(e.tagName==="VIDEO"){if(e.closest("figure"))return;const{backgroundColor:n}=Vr(e);return{...Q5(e),backgroundColor:n}}if(e.tagName==="FIGURE"){const n=p1(e,"video");if(!n)return;const{targetElement:r,caption:s}=n,{backgroundColor:i}=Vr(e);return{...Q5(r),backgroundColor:i,caption:s}}},qpe=bs(Vpe,t=>({meta:{fileBlockAccept:["video/*"]},parse:Wpe(),render(e,n){const r=document.createElement("div");r.innerHTML=t.icon??zpe;const s=document.createElement("div");s.className="bn-visual-media-wrapper";const i=document.createElement("video");return i.className="bn-visual-media",n.resolveFileUrl?n.resolveFileUrl(e.props.url).then(o=>{i.src=o}):i.src=e.props.url,i.controls=!0,i.contentEditable="false",i.draggable=!1,i.width=e.props.previewWidth,s.appendChild(i),A$(e,n,{dom:s},s,r.firstElementChild)},toExternalHTML(e){if(!e.props.url){const r=document.createElement("p");return r.textContent="Add video",{dom:r}}let n;return e.props.showPreview?(n=document.createElement("video"),n.src=e.props.url,e.props.previewWidth&&(n.width=e.props.previewWidth)):(n=document.createElement("a"),n.href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?MN(n,e.props.caption):m1(n,e.props.caption):{dom:n}},runsBefore:["file"]}));function It(t,e,n){if(!(e in t.schema.blockSpecs))return!1;if(!n)return!0;for(const[r,s]of Object.entries(n)){if(!(r in t.schema.blockSpecs[e].config.propSchema))return!1;if(typeof s=="string"){if(t.schema.blockSpecs[e].config.propSchema[r].default!==void 0&&typeof t.schema.blockSpecs[e].config.propSchema[r].default!==s||t.schema.blockSpecs[e].config.propSchema[r].type!==void 0&&t.schema.blockSpecs[e].config.propSchema[r].type!==s)return!1}else{if(t.schema.blockSpecs[e].config.propSchema[r].default!==s.default||t.schema.blockSpecs[e].config.propSchema[r].default===void 0&&s.default===void 0&&t.schema.blockSpecs[e].config.propSchema[r].type!==s.type||typeof t.schema.blockSpecs[e].config.propSchema[r].values!=typeof s.values)return!1;if(typeof t.schema.blockSpecs[e].config.propSchema[r].values=="object"&&typeof s.values=="object"){for(const i of s.values)if(!t.schema.blockSpecs[e].config.propSchema[r].values.includes(i))return!1}}}return!0}function Pr(t,e,n,r){return It(e,n,r)&&t.type===n}function nC(t){return t instanceof pt}const O0=new Map;function Gpe(t){if(O0.has(t))return O0.get(t);const e=new jd;return t._tiptapEditor.on("transaction",({transaction:n})=>{e.appendMapping(n.mapping)}),t._tiptapEditor.on("destroy",()=>{O0.delete(t)}),O0.set(t,e),e}function Ype(t,e,n="left"){const r=kt.getState(t.prosemirrorState);if(!r){const i=Gpe(t),o=i.maps.length;return()=>i.slice(o).map(e,n==="left"?-1:1)}const s=Dp(e+(n==="right"?1:-1),r.binding.type,r.binding.mapping);return()=>{const i=kt.getState(t.prosemirrorState),o=gc(i.doc,i.binding.type,s,i.binding.mapping);if(o===null)throw new Error("Position not found, cannot track positions");return o+(n==="right"?-1:1)}}const Kpe=Yy(t=>t.type.name==="blockContainer");class Jpe{constructor(e,n,r){$l(this,"state"),$l(this,"emitUpdate"),$l(this,"rootEl"),$l(this,"pluginState"),$l(this,"handleScroll",()=>{var i,o;if((i=this.state)!=null&&i.show){const a=(o=this.rootEl)==null?void 0:o.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect().toJSON(),this.emitUpdate(this.pluginState.triggerCharacter)}}),$l(this,"closeMenu",()=>{this.editor.transact(i=>i.setMeta(oc,null))}),$l(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(i=>i.selection.from)}).run()});var s;this.editor=e,this.pluginState=void 0,this.emitUpdate=i=>{var o;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(i,{...this.state,ignoreQueryLength:(o=this.pluginState)==null?void 0:o.ignoreQueryLength})},this.rootEl=r.root,(s=this.rootEl)==null||s.addEventListener("scroll",this.handleScroll,!0)}update(e,n){var r;const s=oc.getState(n),i=oc.getState(e.state),o=s===void 0&&i!==void 0,a=s!==void 0&&i===void 0;if(!o&&!(s!==void 0&&i!==void 0)&&!a)return;if(this.pluginState=a?s:i,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect().toJSON(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const oc=new We("SuggestionMenuPlugin"),Bs=it(({editor:t})=>{const e=[];let n;const r=Al(void 0);return{key:"suggestionMenu",store:r,addTriggerCharacter:s=>{e.push(s)},removeTriggerCharacter:s=>{e.splice(e.indexOf(s),1)},closeMenu:()=>{n==null||n.closeMenu()},clearQuery:()=>{n==null||n.clearQuery()},shown:()=>{var s;return((s=n==null?void 0:n.state)==null?void 0:s.show)||!1},openSuggestionMenu:(s,i)=>{t.headless||(t.focus(),t.transact(o=>{i!=null&&i.deleteTriggerCharacter&&o.insertText(s),o.scrollIntoView().setMeta(oc,{triggerCharacter:s,deleteTriggerCharacter:(i==null?void 0:i.deleteTriggerCharacter)||!1,ignoreQueryLength:(i==null?void 0:i.ignoreQueryLength)||!1})}))},prosemirrorPlugins:[new Ie({key:oc,view:s=>(n=new Jpe(t,(i,o)=>{r.setState({...o,triggerCharacter:i})},s),n),state:{init(){},apply:(s,i,o,a)=>{if(s.selection.$from.parent.type.spec.code)return i;const l=s.getMeta(oc);if(typeof l=="object"&&l!==null){i&&(n==null||n.closeMenu());const d=Ype(t,a.selection.from-l.triggerCharacter.length);return{triggerCharacter:l.triggerCharacter,deleteTriggerCharacter:l.deleteTriggerCharacter!==!1,queryStartPos:()=>d()+l.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:l==null?void 0:l.ignoreQueryLength}}if(i===void 0)return i;if(a.selection.from!==a.selection.to||l===null||s.getMeta("focus")||s.getMeta("blur")||s.getMeta("pointer")||i.triggerCharacter!==void 0&&a.selection.from<i.queryStartPos()||!a.selection.$from.sameParent(a.doc.resolve(i.queryStartPos())))return;const c={...i};return c.query=a.doc.textBetween(i.queryStartPos(),a.selection.from),c}},props:{handleTextInput(s,i,o,a){if(i===o){const l=s.state.doc;for(const c of e){const d=c.length>1?l.textBetween(i-c.length,i)+a:a;if(c===d)return s.dispatch(s.state.tr.insertText(a)),s.dispatch(s.state.tr.setMeta(oc,{triggerCharacter:d}).scrollIntoView()),!0}}return!1},decorations(s){const i=this.getState(s);if(i===void 0)return null;if(!i.deleteTriggerCharacter){const o=Kpe(s.selection);if(o)return Re.create(s.doc,[at.node(o.pos,o.pos+o.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":i.decorationId})])}return Re.create(s.doc,[at.inline(i.queryStartPos()-i.triggerCharacter.length,i.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":i.decorationId})])}}})]}});function Qpe(t){let e=t.getTextCursorPosition().block,n=t.schema.blockSchema[e.type].content;for(;n==="none";){if(e=t.getTextCursorPosition().nextBlock,e===void 0)return;n=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}}function Gn(t,e){const n=t.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&Mc(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=t.updateBlock(n,e),t.setTextCursorPosition(r)):(r=t.insertBlocks([e],n,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),Qpe(t),r}function Xpe(t){const e=[];return It(t,"heading",{level:"number"})&&(t.schema.blockSchema.heading.propSchema.level.values||[]).filter(n=>n<=3).forEach(n=>{e.push({onItemClick:()=>{Gn(t,{type:"heading",props:{level:n}})},badge:ks(`Mod-Alt-${n}`),key:n===1?"heading":`heading_${n}`,...t.dictionary.slash_menu[n===1?"heading":`heading_${n}`]})}),It(t,"quote")&&e.push({onItemClick:()=>{Gn(t,{type:"quote"})},key:"quote",...t.dictionary.slash_menu.quote}),It(t,"toggleListItem")&&e.push({onItemClick:()=>{Gn(t,{type:"toggleListItem"})},badge:ks("Mod-Shift-6"),key:"toggle_list",...t.dictionary.slash_menu.toggle_list}),It(t,"numberedListItem")&&e.push({onItemClick:()=>{Gn(t,{type:"numberedListItem"})},badge:ks("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),It(t,"bulletListItem")&&e.push({onItemClick:()=>{Gn(t,{type:"bulletListItem"})},badge:ks("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),It(t,"checkListItem")&&e.push({onItemClick:()=>{Gn(t,{type:"checkListItem"})},badge:ks("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),It(t,"paragraph")&&e.push({onItemClick:()=>{Gn(t,{type:"paragraph"})},badge:ks("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),It(t,"codeBlock")&&e.push({onItemClick:()=>{Gn(t,{type:"codeBlock"})},badge:ks("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),It(t,"divider")&&e.push({onItemClick:()=>{Gn(t,{type:"divider"})},key:"divider",...t.dictionary.slash_menu.divider}),It(t,"table")&&e.push({onItemClick:()=>{Gn(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),It(t,"image",{url:"string"})&&e.push({onItemClick:()=>{var n;const r=Gn(t,{type:"image"});(n=t.getExtension(ii))==null||n.showMenu(r.id)},key:"image",...t.dictionary.slash_menu.image}),It(t,"video",{url:"string"})&&e.push({onItemClick:()=>{var n;const r=Gn(t,{type:"video"});(n=t.getExtension(ii))==null||n.showMenu(r.id)},key:"video",...t.dictionary.slash_menu.video}),It(t,"audio",{url:"string"})&&e.push({onItemClick:()=>{var n;const r=Gn(t,{type:"audio"});(n=t.getExtension(ii))==null||n.showMenu(r.id)},key:"audio",...t.dictionary.slash_menu.audio}),It(t,"file",{url:"string"})&&e.push({onItemClick:()=>{var n;const r=Gn(t,{type:"file"});(n=t.getExtension(ii))==null||n.showMenu(r.id)},key:"file",...t.dictionary.slash_menu.file}),It(t,"heading",{level:"number",isToggleable:"boolean"})&&(t.schema.blockSchema.heading.propSchema.level.values||[]).filter(n=>n<=3).forEach(n=>{e.push({onItemClick:()=>{Gn(t,{type:"heading",props:{level:n,isToggleable:!0}})},key:n===1?"toggle_heading":`toggle_heading_${n}`,...t.dictionary.slash_menu[n===1?"toggle_heading":`toggle_heading_${n}`]})}),It(t,"heading",{level:"number"})&&(t.schema.blockSchema.heading.propSchema.level.values||[]).filter(n=>n>3).forEach(n=>{e.push({onItemClick:()=>{Gn(t,{type:"heading",props:{level:n}})},badge:ks(`Mod-Alt-${n}`),key:`heading_${n}`,...t.dictionary.slash_menu[`heading_${n}`]})}),e.push({onItemClick:()=>{var n;(n=t.getExtension(Bs))==null||n.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function Zpe(t,e){return t.filter(({title:n,aliases:r})=>n.toLowerCase().includes(e.toLowerCase())||r&&r.filter(s=>s.toLowerCase().includes(e.toLowerCase())).length!==0)}const eme={audio:tpe(),bulletListItem:kpe(),checkListItem:Cpe(),codeBlock:spe(),divider:ope(),file:cpe(),heading:fpe(),image:ype(),numberedListItem:Npe(),paragraph:I$(),quote:Ipe(),table:Upe(),toggleListItem:Ape(),video:qpe()},tme=S$({type:"textColor",propSchema:"string"},{render:()=>{const t=document.createElement("span");return{dom:t,contentDOM:t}},toExternalHTML:t=>{const e=document.createElement("span");return t!==st.textColor.default&&(e.style.color=t in Ua?Ua[t].text:t),{dom:e,contentDOM:e}},parse:t=>{if(t.tagName==="SPAN"&&t.style.color)return t.style.color}}),nme=S$({type:"backgroundColor",propSchema:"string"},{render:()=>{const t=document.createElement("span");return{dom:t,contentDOM:t}},toExternalHTML:t=>{const e=document.createElement("span");return t!==st.backgroundColor.default&&(e.style.backgroundColor=t in Ua?Ua[t].background:t),{dom:e,contentDOM:e}},parse:t=>{if(t.tagName==="SPAN"&&t.style.backgroundColor)return t.style.backgroundColor}}),DN={bold:Fh(ife,"boolean"),italic:Fh(mfe,"boolean"),underline:Fh(wfe,"boolean"),strike:Fh(yfe,"boolean"),code:Fh(cfe,"boolean"),textColor:tme,backgroundColor:nme};C$(DN);const R$={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},rme=k$(R$);var sme=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const ime=qp(sme);function P$(t={}){return new Ie({view(e){return new ome(e,t)}})}class ome{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,a=i.height/s.offsetHeight;if(n){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=h?m.bottom:m.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let x=this.width/2*a;r={left:m.left,right:m.right,top:g-x,bottom:g+x}}}}if(!r){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let h=l.getBoundingClientRect(),f=h.width/l.offsetWidth,p=h.height/l.offsetHeight;c=h.left-l.scrollLeft*f,d=h.top-l.scrollTop*p}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Q8(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}var ix=200,Tn=function(){};Tn.prototype.append=function(e){return e.length?(e=Tn.from(e),!this.length&&e||e.length<ix&&this.leafAppend(e)||this.length<ix&&e.leafPrepend(this)||this.appendInner(e)):this};Tn.prototype.prepend=function(e){return e.length?Tn.from(e).append(this):this};Tn.prototype.appendInner=function(e){return new ame(this,e)};Tn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Tn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Tn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Tn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Tn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},n,r),s};Tn.from=function(e){return e instanceof Tn?e:e&&e.length?new D$(e):Tn.empty};var D$=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var l=i;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var l=i-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=ix)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=ix)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Tn);Tn.empty=new D$([]);var ame=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Tn);const lme=500;class ni{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,a,l,c=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){s||(s=this.remapping(r,f+1),i=s.maps.length),i--,d.push(h);return}if(s){d.push(new Di(h.map));let p=h.step.map(s.slice(i)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Di(m,void 0,void 0,c.length+d.length))),i--,m&&s.appendMap(m,i)}else o.maybeStep(h.step);if(h.selection)return a=s?h.selection.map(s.slice(i)):h.selection,l=new ni(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,s){let i=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new Di(e.mapping.maps[d],h,n),p;(p=l&&l.merge(f))&&(f=p,d?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(o++,n=void 0),s||(l=f)}let c=o-r.depth;return c>ume&&(a=cme(a,c),o-=c),new ni(a.append(i),o)}remapping(e,n){let r=new jd;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new ni(this.items.append(e.map(n=>new Di(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let l=n;this.items.forEach(f=>{let p=i.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=i.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),x=f.selection&&f.selection.map(i.slice(l+1,p));x&&a++,r.push(new Di(m,g,x))}else r.push(new Di(m))},s);let c=[];for(let f=n;f<o;f++)c.push(new Di(i.maps[f]));let d=this.items.slice(0,s).append(c).append(r),h=new ni(d,a);return h.emptyItemCount()>lme&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=o.selection&&o.selection.map(n.slice(r));d&&i++;let h=new Di(c.invert(),l,d),f,p=s.length-1;(f=s.length&&s[p].merge(h))?s[p]=f:s.push(h)}}else o.map&&r--},this.items.length,0),new ni(Tn.from(s.reverse()),i)}}ni.empty=new ni(Tn.empty,0);function cme(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class Di{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Di(n.getMap().invert(),n,this.selection)}}}class Sa{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const ume=20;function dme(t,e,n,r){let s=n.getMeta(bc),i;if(s)return s.historyState;n.getMeta(L$)&&(t=new Sa(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(bc))return o.getMeta(bc).redo?new Sa(t.done.addTransform(n,void 0,r,Ag(e)),t.undone,X5(n.mapping.maps),t.prevTime,t.prevComposition):new Sa(t.done,t.undone.addTransform(n,void 0,r,Ag(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!hme(n,t.prevRanges)),c=o?Lw(t.prevRanges,n.mapping):X5(n.mapping.maps);return new Sa(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Ag(e)),ni.empty,c,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Sa(t.done.rebased(n,i),t.undone.rebased(n,i),Lw(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Sa(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Lw(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function hme(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function X5(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,o)=>e.push(i,o));return e}function Lw(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function fme(t,e,n){let r=Ag(e),s=bc.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),l=new Sa(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(bc,{redo:n,historyState:l})}let Bw=!1,Z5=null;function Ag(t){let e=t.plugins;if(Z5!=e){Bw=!1,Z5=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Bw=!0;break}}return Bw}function pme(t){return t.setMeta(L$,!0)}const bc=new We("history"),L$=new We("closeHistory");function B$(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ie({key:bc,state:{init(){return new Sa(ni.empty,ni.empty,null,0,-1)},apply(e,n,r){return dme(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?LN:r=="historyRedo"?BN:null;return!s||!e.editable?!1:(n.preventDefault(),s(e.state,e.dispatch))}}}})}function $$(t,e){return(n,r)=>{let s=bc.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=fme(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const LN=$$(!1,!0),BN=$$(!0,!0);class xm{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}xm.prototype.normal={};xm.prototype.property={};xm.prototype.space=void 0;function F$(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new xm(n,r,e)}function Lp(t){return t.toLowerCase()}class Wr{constructor(e,n){this.attribute=n,this.property=e}}Wr.prototype.attribute="";Wr.prototype.booleanish=!1;Wr.prototype.boolean=!1;Wr.prototype.commaOrSpaceSeparated=!1;Wr.prototype.commaSeparated=!1;Wr.prototype.defined=!1;Wr.prototype.mustUseProperty=!1;Wr.prototype.number=!1;Wr.prototype.overloadedBoolean=!1;Wr.prototype.property="";Wr.prototype.spaceSeparated=!1;Wr.prototype.space=void 0;let mme=0;const Le=Zc(),sn=Zc(),rC=Zc(),de=Zc(),wt=Zc(),gd=Zc(),Jr=Zc();function Zc(){return 2**++mme}const sC=Object.freeze(Object.defineProperty({__proto__:null,boolean:Le,booleanish:sn,commaOrSpaceSeparated:Jr,commaSeparated:gd,number:de,overloadedBoolean:rC,spaceSeparated:wt},Symbol.toStringTag,{value:"Module"})),$w=Object.keys(sC);class $N extends Wr{constructor(e,n,r,s){let i=-1;if(super(e,n),eO(this,"space",s),typeof r=="number")for(;++i<$w.length;){const o=$w[i];eO(this,$w[i],(r&sC[o])===sC[o])}}}$N.prototype.defined=!0;function eO(t,e,n){n&&(t[e]=n)}function mh(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const i=new $N(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[Lp(r)]=r,n[Lp(i.attribute)]=r}return new xm(e,n,t.space)}const H$=mh({properties:{ariaActiveDescendant:null,ariaAtomic:sn,ariaAutoComplete:null,ariaBusy:sn,ariaChecked:sn,ariaColCount:de,ariaColIndex:de,ariaColSpan:de,ariaControls:wt,ariaCurrent:null,ariaDescribedBy:wt,ariaDetails:null,ariaDisabled:sn,ariaDropEffect:wt,ariaErrorMessage:null,ariaExpanded:sn,ariaFlowTo:wt,ariaGrabbed:sn,ariaHasPopup:null,ariaHidden:sn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:wt,ariaLevel:de,ariaLive:null,ariaModal:sn,ariaMultiLine:sn,ariaMultiSelectable:sn,ariaOrientation:null,ariaOwns:wt,ariaPlaceholder:null,ariaPosInSet:de,ariaPressed:sn,ariaReadOnly:sn,ariaRelevant:null,ariaRequired:sn,ariaRoleDescription:wt,ariaRowCount:de,ariaRowIndex:de,ariaRowSpan:de,ariaSelected:sn,ariaSetSize:de,ariaSort:null,ariaValueMax:de,ariaValueMin:de,ariaValueNow:de,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function U$(t,e){return e in t?t[e]:e}function z$(t,e){return U$(t,e.toLowerCase())}const gme=mh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:gd,acceptCharset:wt,accessKey:wt,action:null,allow:null,allowFullScreen:Le,allowPaymentRequest:Le,allowUserMedia:Le,alt:null,as:null,async:Le,autoCapitalize:null,autoComplete:wt,autoFocus:Le,autoPlay:Le,blocking:wt,capture:null,charSet:null,checked:Le,cite:null,className:wt,cols:de,colSpan:null,content:null,contentEditable:sn,controls:Le,controlsList:wt,coords:de|gd,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Le,defer:Le,dir:null,dirName:null,disabled:Le,download:rC,draggable:sn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Le,formTarget:null,headers:wt,height:de,hidden:rC,high:de,href:null,hrefLang:null,htmlFor:wt,httpEquiv:wt,id:null,imageSizes:null,imageSrcSet:null,inert:Le,inputMode:null,integrity:null,is:null,isMap:Le,itemId:null,itemProp:wt,itemRef:wt,itemScope:Le,itemType:wt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Le,low:de,manifest:null,max:null,maxLength:de,media:null,method:null,min:null,minLength:de,multiple:Le,muted:Le,name:null,nonce:null,noModule:Le,noValidate:Le,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Le,optimum:de,pattern:null,ping:wt,placeholder:null,playsInline:Le,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Le,referrerPolicy:null,rel:wt,required:Le,reversed:Le,rows:de,rowSpan:de,sandbox:wt,scope:null,scoped:Le,seamless:Le,selected:Le,shadowRootClonable:Le,shadowRootDelegatesFocus:Le,shadowRootMode:null,shape:null,size:de,sizes:null,slot:null,span:de,spellCheck:sn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:de,step:null,style:null,tabIndex:de,target:null,title:null,translate:null,type:null,typeMustMatch:Le,useMap:null,value:sn,width:de,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:wt,axis:null,background:null,bgColor:null,border:de,borderColor:null,bottomMargin:de,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Le,declare:Le,event:null,face:null,frame:null,frameBorder:null,hSpace:de,leftMargin:de,link:null,longDesc:null,lowSrc:null,marginHeight:de,marginWidth:de,noResize:Le,noHref:Le,noShade:Le,noWrap:Le,object:null,profile:null,prompt:null,rev:null,rightMargin:de,rules:null,scheme:null,scrolling:sn,standby:null,summary:null,text:null,topMargin:de,valueType:null,version:null,vAlign:null,vLink:null,vSpace:de,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Le,disableRemotePlayback:Le,prefix:null,property:null,results:de,security:null,unselectable:null},space:"html",transform:z$}),bme=mh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Jr,accentHeight:de,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:de,amplitude:de,arabicForm:null,ascent:de,attributeName:null,attributeType:null,azimuth:de,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:de,by:null,calcMode:null,capHeight:de,className:wt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:de,diffuseConstant:de,direction:null,display:null,dur:null,divisor:de,dominantBaseline:null,download:Le,dx:null,dy:null,edgeMode:null,editable:null,elevation:de,enableBackground:null,end:null,event:null,exponent:de,externalResourcesRequired:null,fill:null,fillOpacity:de,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:gd,g2:gd,glyphName:gd,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:de,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:de,horizOriginX:de,horizOriginY:de,id:null,ideographic:de,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:de,k:de,k1:de,k2:de,k3:de,k4:de,kernelMatrix:Jr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:de,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:de,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:de,overlineThickness:de,paintOrder:null,panose1:null,path:null,pathLength:de,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:wt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:de,pointsAtY:de,pointsAtZ:de,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Jr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Jr,rev:Jr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Jr,requiredFeatures:Jr,requiredFonts:Jr,requiredFormats:Jr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:de,specularExponent:de,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:de,strikethroughThickness:de,string:null,stroke:null,strokeDashArray:Jr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:de,strokeOpacity:de,strokeWidth:null,style:null,surfaceScale:de,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Jr,tabIndex:de,tableValues:null,target:null,targetX:de,targetY:de,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Jr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:de,underlineThickness:de,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:de,values:null,vAlphabetic:de,vMathematical:de,vectorEffect:null,vHanging:de,vIdeographic:de,version:null,vertAdvY:de,vertOriginX:de,vertOriginY:de,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:de,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:U$}),V$=mh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),W$=mh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:z$}),q$=mh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),xme=/[A-Z]/g,tO=/-[a-z]/g,yme=/^data[-\w.:]+$/i;function FN(t,e){const n=Lp(e);let r=e,s=Wr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&yme.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(tO,wme);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!tO.test(i)){let o=i.replace(xme,vme);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=$N}return new s(r,e)}function vme(t){return"-"+t.toLowerCase()}function wme(t){return t.charAt(1).toUpperCase()}const b1=F$([H$,gme,V$,W$,q$],"html"),ym=F$([H$,bme,V$,W$,q$],"svg");function nO(t){const e=[],n=String(t||"");let r=n.indexOf(","),s=0,i=!1;for(;!i;){r===-1&&(r=n.length,i=!0);const o=n.slice(s,r).trim();(o||!i)&&e.push(o),s=r+1,r=n.indexOf(",",s)}return e}function kme(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const rO=/[#.]/g;function Eme(t,e){const n=t||"",r={};let s=0,i,o;for(;s<n.length;){rO.lastIndex=s;const a=rO.exec(n),l=n.slice(s,a?a.index:n.length);l&&(i?i==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,s+=l.length),a&&(i=a[0],s++)}return{type:"element",tagName:o||e||"div",properties:r,children:[]}}function sO(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function Cme(t){return t.join(" ").trim()}function G$(t,e,n){const r=n?_me(n):void 0;function s(i,o,...a){let l;if(i==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else{l=Eme(i,e);const c=l.tagName.toLowerCase(),d=r?r.get(c):void 0;if(l.tagName=d||c,Sme(o))a.unshift(o);else for(const[h,f]of Object.entries(o))Tme(t,l.properties,h,f)}for(const c of a)iC(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return s}function Sme(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const s=e[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const i=s;for(const o of i)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function Tme(t,e,n,r){const s=FN(t,n);let i;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;i=r}else typeof r=="boolean"?i=r:typeof r=="string"?s.spaceSeparated?i=sO(r):s.commaSeparated?i=nO(r):s.commaOrSpaceSeparated?i=sO(nO(r).join(" ")):i=iO(s,s.property,r):Array.isArray(r)?i=[...r]:i=s.property==="style"?Nme(r):String(r);if(Array.isArray(i)){const o=[];for(const a of i)o.push(iO(s,s.property,a));i=o}s.property==="className"&&Array.isArray(e.className)&&(i=e.className.concat(i)),e[s.property]=i}}function iC(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)iC(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?iC(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function iO(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||Lp(n)===Lp(e)))return!0}return n}function Nme(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function _me(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const Ame=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Y$=G$(b1,"div"),K$=G$(ym,"g",Ame);function jme(t){const e=String(t),n=[];return{toOffset:s,toPoint:r};function r(i){if(typeof i=="number"&&i>-1&&i<=e.length){let o=0;for(;;){let a=n[o];if(a===void 0){const l=oO(e,n[o-1]);a=l===-1?e.length+1:l+1,n[o]=a}if(a>i)return{line:o+1,column:i-(o>0?n[o-1]:0)+1,offset:i};o++}}}function s(i){if(i&&typeof i.line=="number"&&typeof i.column=="number"&&!Number.isNaN(i.line)&&!Number.isNaN(i.column)){for(;n.length<i.line;){const a=n[n.length-1],l=oO(e,a),c=l===-1?e.length+1:l+1;if(a===c)break;n.push(c)}const o=(i.line>1?n[i.line-2]:0)+i.column-1;if(o<n[i.line-1])return o}}}function oO(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const jg={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"},J$={}.hasOwnProperty,Ome=Object.prototype;function Ime(t,e){const n=e||{};return HN({file:n.file||void 0,location:!1,schema:n.space==="svg"?ym:b1,verbose:n.verbose||!1},t)}function HN(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},Og(t,r,n),n}case"#document":case"#document-fragment":{const r=e,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Q$(t,e.childNodes),data:{quirksMode:s}},t.file&&t.location){const i=String(t.file),o=jme(i),a=o.toPoint(0),l=o.toPoint(i.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},Og(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},Og(t,r,n),n}default:return n=Mme(t,e),n}}function Q$(t,e){let n=-1;const r=[];for(;++n<e.length;){const s=HN(t,e[n]);r.push(s)}return r}function Mme(t,e){const n=t.schema;t.schema=e.namespaceURI===jg.svg?ym:b1;let r=-1;const s={};for(;++r<e.attrs.length;){const a=e.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;J$.call(Ome,l)||(s[l]=a.value)}const o=(t.schema.space==="svg"?K$:Y$)(e.tagName,s,Q$(t,e.childNodes));if(Og(t,e,o),o.tagName==="template"){const a=e,l=a.sourceCodeLocation,c=l&&l.startTag&&Yu(l.startTag),d=l&&l.endTag&&Yu(l.endTag),h=HN(t,a.content);c&&d&&t.file&&(h.position={start:c.end,end:d.start}),o.content=h}return t.schema=n,o}function Og(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=Rme(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function Rme(t,e,n){const r=Yu(n);if(e.type==="element"){const s=e.children[e.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),t.verbose){const i={};let o;if(n.attrs)for(o in n.attrs)J$.call(n.attrs,o)&&(i[FN(t.schema,o).property]=Yu(n.attrs[o]));n.startTag;const a=Yu(n.startTag),l=n.endTag?Yu(n.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=i,e.data={position:c}}}return r}function Yu(t){const e=aO({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=aO({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function aO(t){return t.line&&t.column?t:void 0}const Pme=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Lt="";var P;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(P||(P={}));const Er={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function X$(t){return t>=55296&&t<=57343}function Dme(t){return t>=56320&&t<=57343}function Lme(t,e){return(t-55296)*1024+9216+e}function Z$(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function eF(t){return t>=64976&&t<=65007||Pme.has(t)}var J;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(J||(J={}));const Bme=65536;class $me{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Bme,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:s,offset:i}=this,o=s+n,a=i+n;return{code:e,startLine:r,endLine:r,startCol:o,endCol:o,startOffset:a,endOffset:a}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Dme(n))return this.pos++,this._addGap(),Lme(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,P.EOF;return this._err(J.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,P.EOF;const r=this.html.charCodeAt(n);return r===P.CARRIAGE_RETURN?P.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,P.EOF;let e=this.html.charCodeAt(this.pos);return e===P.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,P.LINE_FEED):e===P.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,X$(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===P.LINE_FEED||e===P.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){Z$(e)?this._err(J.controlCharacterInInputStream):eF(e)&&this._err(J.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var tt;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(tt||(tt={}));function tF(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const Fme=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),Hme=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function Ume(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=Hme.get(t))!==null&&e!==void 0?e:t}var wn;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(wn||(wn={}));const zme=32;var za;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(za||(za={}));function oC(t){return t>=wn.ZERO&&t<=wn.NINE}function Vme(t){return t>=wn.UPPER_A&&t<=wn.UPPER_F||t>=wn.LOWER_A&&t<=wn.LOWER_F}function Wme(t){return t>=wn.UPPER_A&&t<=wn.UPPER_Z||t>=wn.LOWER_A&&t<=wn.LOWER_Z||oC(t)}function qme(t){return t===wn.EQUALS||Wme(t)}var xn;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(xn||(xn={}));var Ro;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Ro||(Ro={}));class Gme{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=xn.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ro.Strict}startEntity(e){this.decodeMode=e,this.state=xn.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case xn.EntityStart:return e.charCodeAt(n)===wn.NUM?(this.state=xn.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=xn.NamedEntity,this.stateNamedEntity(e,n));case xn.NumericStart:return this.stateNumericStart(e,n);case xn.NumericDecimal:return this.stateNumericDecimal(e,n);case xn.NumericHex:return this.stateNumericHex(e,n);case xn.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|zme)===wn.LOWER_X?(this.state=xn.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=xn.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,s){if(n!==r){const i=r-n;this.result=this.result*Math.pow(s,i)+Number.parseInt(e.substr(n,i),s),this.consumed+=i}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(oC(s)||Vme(s))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(oC(s))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===wn.SEMI)this.consumed+=1;else if(this.decodeMode===Ro.Strict)return 0;return this.emitCodePoint(Ume(this.result),this.consumed),this.errors&&(e!==wn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let s=r[this.treeIndex],i=(s&za.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=Yme(r,s,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Ro.Attribute&&(i===0||qme(o))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],i=(s&za.VALUE_LENGTH)>>14,i!==0){if(o===wn.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Ro.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,s=(r[n]&za.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~za.VALUE_LENGTH:s[e+1],r),n===3&&this.emitCodePoint(s[e+2],r),r}end(){var e;switch(this.state){case xn.NamedEntity:return this.result!==0&&(this.decodeMode!==Ro.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case xn.NumericDecimal:return this.emitNumericEntity(0,2);case xn.NumericHex:return this.emitNumericEntity(0,3);case xn.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case xn.EntityStart:return 0}}}function Yme(t,e,n,r){const s=(e&za.BRANCH_LENGTH)>>7,i=e&za.JUMP_TABLE;if(s===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=s?-1:t[n+l]-1}let o=n,a=o+s-1;for(;o<=a;){const l=o+a>>>1,c=t[l];if(c<r)o=l+1;else if(c>r)a=l-1;else return t[l+s]}return-1}var se;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(se||(se={}));var xc;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(xc||(xc={}));var Ts;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Ts||(Ts={}));var Y;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(Y||(Y={}));var k;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(k||(k={}));const Kme=new Map([[Y.A,k.A],[Y.ADDRESS,k.ADDRESS],[Y.ANNOTATION_XML,k.ANNOTATION_XML],[Y.APPLET,k.APPLET],[Y.AREA,k.AREA],[Y.ARTICLE,k.ARTICLE],[Y.ASIDE,k.ASIDE],[Y.B,k.B],[Y.BASE,k.BASE],[Y.BASEFONT,k.BASEFONT],[Y.BGSOUND,k.BGSOUND],[Y.BIG,k.BIG],[Y.BLOCKQUOTE,k.BLOCKQUOTE],[Y.BODY,k.BODY],[Y.BR,k.BR],[Y.BUTTON,k.BUTTON],[Y.CAPTION,k.CAPTION],[Y.CENTER,k.CENTER],[Y.CODE,k.CODE],[Y.COL,k.COL],[Y.COLGROUP,k.COLGROUP],[Y.DD,k.DD],[Y.DESC,k.DESC],[Y.DETAILS,k.DETAILS],[Y.DIALOG,k.DIALOG],[Y.DIR,k.DIR],[Y.DIV,k.DIV],[Y.DL,k.DL],[Y.DT,k.DT],[Y.EM,k.EM],[Y.EMBED,k.EMBED],[Y.FIELDSET,k.FIELDSET],[Y.FIGCAPTION,k.FIGCAPTION],[Y.FIGURE,k.FIGURE],[Y.FONT,k.FONT],[Y.FOOTER,k.FOOTER],[Y.FOREIGN_OBJECT,k.FOREIGN_OBJECT],[Y.FORM,k.FORM],[Y.FRAME,k.FRAME],[Y.FRAMESET,k.FRAMESET],[Y.H1,k.H1],[Y.H2,k.H2],[Y.H3,k.H3],[Y.H4,k.H4],[Y.H5,k.H5],[Y.H6,k.H6],[Y.HEAD,k.HEAD],[Y.HEADER,k.HEADER],[Y.HGROUP,k.HGROUP],[Y.HR,k.HR],[Y.HTML,k.HTML],[Y.I,k.I],[Y.IMG,k.IMG],[Y.IMAGE,k.IMAGE],[Y.INPUT,k.INPUT],[Y.IFRAME,k.IFRAME],[Y.KEYGEN,k.KEYGEN],[Y.LABEL,k.LABEL],[Y.LI,k.LI],[Y.LINK,k.LINK],[Y.LISTING,k.LISTING],[Y.MAIN,k.MAIN],[Y.MALIGNMARK,k.MALIGNMARK],[Y.MARQUEE,k.MARQUEE],[Y.MATH,k.MATH],[Y.MENU,k.MENU],[Y.META,k.META],[Y.MGLYPH,k.MGLYPH],[Y.MI,k.MI],[Y.MO,k.MO],[Y.MN,k.MN],[Y.MS,k.MS],[Y.MTEXT,k.MTEXT],[Y.NAV,k.NAV],[Y.NOBR,k.NOBR],[Y.NOFRAMES,k.NOFRAMES],[Y.NOEMBED,k.NOEMBED],[Y.NOSCRIPT,k.NOSCRIPT],[Y.OBJECT,k.OBJECT],[Y.OL,k.OL],[Y.OPTGROUP,k.OPTGROUP],[Y.OPTION,k.OPTION],[Y.P,k.P],[Y.PARAM,k.PARAM],[Y.PLAINTEXT,k.PLAINTEXT],[Y.PRE,k.PRE],[Y.RB,k.RB],[Y.RP,k.RP],[Y.RT,k.RT],[Y.RTC,k.RTC],[Y.RUBY,k.RUBY],[Y.S,k.S],[Y.SCRIPT,k.SCRIPT],[Y.SEARCH,k.SEARCH],[Y.SECTION,k.SECTION],[Y.SELECT,k.SELECT],[Y.SOURCE,k.SOURCE],[Y.SMALL,k.SMALL],[Y.SPAN,k.SPAN],[Y.STRIKE,k.STRIKE],[Y.STRONG,k.STRONG],[Y.STYLE,k.STYLE],[Y.SUB,k.SUB],[Y.SUMMARY,k.SUMMARY],[Y.SUP,k.SUP],[Y.TABLE,k.TABLE],[Y.TBODY,k.TBODY],[Y.TEMPLATE,k.TEMPLATE],[Y.TEXTAREA,k.TEXTAREA],[Y.TFOOT,k.TFOOT],[Y.TD,k.TD],[Y.TH,k.TH],[Y.THEAD,k.THEAD],[Y.TITLE,k.TITLE],[Y.TR,k.TR],[Y.TRACK,k.TRACK],[Y.TT,k.TT],[Y.U,k.U],[Y.UL,k.UL],[Y.SVG,k.SVG],[Y.VAR,k.VAR],[Y.WBR,k.WBR],[Y.XMP,k.XMP]]);function x1(t){var e;return(e=Kme.get(t))!==null&&e!==void 0?e:k.UNKNOWN}const ae=k,Jme={[se.HTML]:new Set([ae.ADDRESS,ae.APPLET,ae.AREA,ae.ARTICLE,ae.ASIDE,ae.BASE,ae.BASEFONT,ae.BGSOUND,ae.BLOCKQUOTE,ae.BODY,ae.BR,ae.BUTTON,ae.CAPTION,ae.CENTER,ae.COL,ae.COLGROUP,ae.DD,ae.DETAILS,ae.DIR,ae.DIV,ae.DL,ae.DT,ae.EMBED,ae.FIELDSET,ae.FIGCAPTION,ae.FIGURE,ae.FOOTER,ae.FORM,ae.FRAME,ae.FRAMESET,ae.H1,ae.H2,ae.H3,ae.H4,ae.H5,ae.H6,ae.HEAD,ae.HEADER,ae.HGROUP,ae.HR,ae.HTML,ae.IFRAME,ae.IMG,ae.INPUT,ae.LI,ae.LINK,ae.LISTING,ae.MAIN,ae.MARQUEE,ae.MENU,ae.META,ae.NAV,ae.NOEMBED,ae.NOFRAMES,ae.NOSCRIPT,ae.OBJECT,ae.OL,ae.P,ae.PARAM,ae.PLAINTEXT,ae.PRE,ae.SCRIPT,ae.SECTION,ae.SELECT,ae.SOURCE,ae.STYLE,ae.SUMMARY,ae.TABLE,ae.TBODY,ae.TD,ae.TEMPLATE,ae.TEXTAREA,ae.TFOOT,ae.TH,ae.THEAD,ae.TITLE,ae.TR,ae.TRACK,ae.UL,ae.WBR,ae.XMP]),[se.MATHML]:new Set([ae.MI,ae.MO,ae.MN,ae.MS,ae.MTEXT,ae.ANNOTATION_XML]),[se.SVG]:new Set([ae.TITLE,ae.FOREIGN_OBJECT,ae.DESC]),[se.XLINK]:new Set,[se.XML]:new Set,[se.XMLNS]:new Set},aC=new Set([ae.H1,ae.H2,ae.H3,ae.H4,ae.H5,ae.H6]);Y.STYLE,Y.SCRIPT,Y.XMP,Y.IFRAME,Y.NOEMBED,Y.NOFRAMES,Y.PLAINTEXT;var L;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(L||(L={}));const Mr={DATA:L.DATA,RCDATA:L.RCDATA,RAWTEXT:L.RAWTEXT,SCRIPT_DATA:L.SCRIPT_DATA,PLAINTEXT:L.PLAINTEXT,CDATA_SECTION:L.CDATA_SECTION};function Qme(t){return t>=P.DIGIT_0&&t<=P.DIGIT_9}function lf(t){return t>=P.LATIN_CAPITAL_A&&t<=P.LATIN_CAPITAL_Z}function Xme(t){return t>=P.LATIN_SMALL_A&&t<=P.LATIN_SMALL_Z}function va(t){return Xme(t)||lf(t)}function lO(t){return va(t)||Qme(t)}function I0(t){return t+32}function nF(t){return t===P.SPACE||t===P.LINE_FEED||t===P.TABULATION||t===P.FORM_FEED}function cO(t){return nF(t)||t===P.SOLIDUS||t===P.GREATER_THAN_SIGN}function Zme(t){return t===P.NULL?J.nullCharacterReference:t>1114111?J.characterReferenceOutsideUnicodeRange:X$(t)?J.surrogateCharacterReference:eF(t)?J.noncharacterCharacterReference:Z$(t)||t===P.CARRIAGE_RETURN?J.controlCharacterReference:null}class e0e{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=L.DATA,this.returnState=L.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new $me(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new Gme(Fme,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(J.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(J.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=Zme(r);s&&this._err(s,1)}}:void 0)}_err(e,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e==null||e())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:tt.START_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:tt.END_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:tt.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:tt.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(tF(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(J.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=x1(e.tagName),e.type===tt.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(J.endTagWithAttributes),e.selfClosing&&this._err(J.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case tt.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case tt.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case tt.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:tt.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=nF(e)?tt.WHITESPACE_CHARACTER:e===P.NULL?tt.NULL_CHARACTER:tt.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(tt.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=L.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Ro.Attribute:Ro.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===L.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===L.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===L.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case L.DATA:{this._stateData(e);break}case L.RCDATA:{this._stateRcdata(e);break}case L.RAWTEXT:{this._stateRawtext(e);break}case L.SCRIPT_DATA:{this._stateScriptData(e);break}case L.PLAINTEXT:{this._statePlaintext(e);break}case L.TAG_OPEN:{this._stateTagOpen(e);break}case L.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case L.TAG_NAME:{this._stateTagName(e);break}case L.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case L.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case L.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case L.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case L.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case L.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case L.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case L.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case L.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case L.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case L.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case L.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case L.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case L.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case L.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case L.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case L.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case L.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case L.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case L.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case L.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case L.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case L.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case L.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case L.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case L.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case L.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case L.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case L.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case L.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case L.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case L.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case L.BOGUS_COMMENT:{this._stateBogusComment(e);break}case L.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case L.COMMENT_START:{this._stateCommentStart(e);break}case L.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case L.COMMENT:{this._stateComment(e);break}case L.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case L.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case L.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case L.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case L.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case L.COMMENT_END:{this._stateCommentEnd(e);break}case L.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case L.DOCTYPE:{this._stateDoctype(e);break}case L.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case L.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case L.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case L.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case L.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case L.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case L.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case L.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case L.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case L.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case L.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case L.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case L.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case L.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case L.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case L.CDATA_SECTION:{this._stateCdataSection(e);break}case L.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case L.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case L.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case L.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case P.LESS_THAN_SIGN:{this.state=L.TAG_OPEN;break}case P.AMPERSAND:{this._startCharacterReference();break}case P.NULL:{this._err(J.unexpectedNullCharacter),this._emitCodePoint(e);break}case P.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case P.AMPERSAND:{this._startCharacterReference();break}case P.LESS_THAN_SIGN:{this.state=L.RCDATA_LESS_THAN_SIGN;break}case P.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(Lt);break}case P.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case P.LESS_THAN_SIGN:{this.state=L.RAWTEXT_LESS_THAN_SIGN;break}case P.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(Lt);break}case P.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case P.LESS_THAN_SIGN:{this.state=L.SCRIPT_DATA_LESS_THAN_SIGN;break}case P.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(Lt);break}case P.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case P.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(Lt);break}case P.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(va(e))this._createStartTagToken(),this.state=L.TAG_NAME,this._stateTagName(e);else switch(e){case P.EXCLAMATION_MARK:{this.state=L.MARKUP_DECLARATION_OPEN;break}case P.SOLIDUS:{this.state=L.END_TAG_OPEN;break}case P.QUESTION_MARK:{this._err(J.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=L.BOGUS_COMMENT,this._stateBogusComment(e);break}case P.EOF:{this._err(J.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(J.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=L.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(va(e))this._createEndTagToken(),this.state=L.TAG_NAME,this._stateTagName(e);else switch(e){case P.GREATER_THAN_SIGN:{this._err(J.missingEndTagName),this.state=L.DATA;break}case P.EOF:{this._err(J.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(J.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=L.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:{this.state=L.BEFORE_ATTRIBUTE_NAME;break}case P.SOLIDUS:{this.state=L.SELF_CLOSING_START_TAG;break}case P.GREATER_THAN_SIGN:{this.state=L.DATA,this.emitCurrentTagToken();break}case P.NULL:{this._err(J.unexpectedNullCharacter),n.tagName+=Lt;break}case P.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(lf(e)?I0(e):e)}}_stateRcdataLessThanSign(e){e===P.SOLIDUS?this.state=L.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=L.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){va(e)?(this.state=L.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=L.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=L.BEFORE_ATTRIBUTE_NAME,!1;case P.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=L.SELF_CLOSING_START_TAG,!1;case P.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=L.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=L.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===P.SOLIDUS?this.state=L.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=L.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){va(e)?(this.state=L.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=L.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=L.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case P.SOLIDUS:{this.state=L.SCRIPT_DATA_END_TAG_OPEN;break}case P.EXCLAMATION_MARK:{this.state=L.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=L.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){va(e)?(this.state=L.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=L.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=L.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===P.HYPHEN_MINUS?(this.state=L.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=L.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===P.HYPHEN_MINUS?(this.state=L.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=L.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case P.HYPHEN_MINUS:{this.state=L.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case P.LESS_THAN_SIGN:{this.state=L.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case P.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(Lt);break}case P.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case P.HYPHEN_MINUS:{this.state=L.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case P.LESS_THAN_SIGN:{this.state=L.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case P.NULL:{this._err(J.unexpectedNullCharacter),this.state=L.SCRIPT_DATA_ESCAPED,this._emitChars(Lt);break}case P.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=L.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case P.HYPHEN_MINUS:{this._emitChars("-");break}case P.LESS_THAN_SIGN:{this.state=L.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case P.GREATER_THAN_SIGN:{this.state=L.SCRIPT_DATA,this._emitChars(">");break}case P.NULL:{this._err(J.unexpectedNullCharacter),this.state=L.SCRIPT_DATA_ESCAPED,this._emitChars(Lt);break}case P.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=L.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===P.SOLIDUS?this.state=L.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:va(e)?(this._emitChars("<"),this.state=L.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=L.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){va(e)?(this.state=L.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=L.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=L.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Er.SCRIPT,!1)&&cO(this.preprocessor.peek(Er.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Er.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=L.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case P.HYPHEN_MINUS:{this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case P.LESS_THAN_SIGN:{this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case P.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(Lt);break}case P.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case P.HYPHEN_MINUS:{this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case P.LESS_THAN_SIGN:{this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case P.NULL:{this._err(J.unexpectedNullCharacter),this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Lt);break}case P.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case P.HYPHEN_MINUS:{this._emitChars("-");break}case P.LESS_THAN_SIGN:{this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case P.GREATER_THAN_SIGN:{this.state=L.SCRIPT_DATA,this._emitChars(">");break}case P.NULL:{this._err(J.unexpectedNullCharacter),this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Lt);break}case P.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===P.SOLIDUS?(this.state=L.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Er.SCRIPT,!1)&&cO(this.preprocessor.peek(Er.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Er.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=L.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=L.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:break;case P.SOLIDUS:case P.GREATER_THAN_SIGN:case P.EOF:{this.state=L.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case P.EQUALS_SIGN:{this._err(J.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=L.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=L.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:case P.SOLIDUS:case P.GREATER_THAN_SIGN:case P.EOF:{this._leaveAttrName(),this.state=L.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case P.EQUALS_SIGN:{this._leaveAttrName(),this.state=L.BEFORE_ATTRIBUTE_VALUE;break}case P.QUOTATION_MARK:case P.APOSTROPHE:case P.LESS_THAN_SIGN:{this._err(J.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case P.NULL:{this._err(J.unexpectedNullCharacter),this.currentAttr.name+=Lt;break}default:this.currentAttr.name+=String.fromCodePoint(lf(e)?I0(e):e)}}_stateAfterAttributeName(e){switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:break;case P.SOLIDUS:{this.state=L.SELF_CLOSING_START_TAG;break}case P.EQUALS_SIGN:{this.state=L.BEFORE_ATTRIBUTE_VALUE;break}case P.GREATER_THAN_SIGN:{this.state=L.DATA,this.emitCurrentTagToken();break}case P.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=L.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:break;case P.QUOTATION_MARK:{this.state=L.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case P.APOSTROPHE:{this.state=L.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case P.GREATER_THAN_SIGN:{this._err(J.missingAttributeValue),this.state=L.DATA,this.emitCurrentTagToken();break}default:this.state=L.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case P.QUOTATION_MARK:{this.state=L.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case P.AMPERSAND:{this._startCharacterReference();break}case P.NULL:{this._err(J.unexpectedNullCharacter),this.currentAttr.value+=Lt;break}case P.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case P.APOSTROPHE:{this.state=L.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case P.AMPERSAND:{this._startCharacterReference();break}case P.NULL:{this._err(J.unexpectedNullCharacter),this.currentAttr.value+=Lt;break}case P.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:{this._leaveAttrValue(),this.state=L.BEFORE_ATTRIBUTE_NAME;break}case P.AMPERSAND:{this._startCharacterReference();break}case P.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=L.DATA,this.emitCurrentTagToken();break}case P.NULL:{this._err(J.unexpectedNullCharacter),this.currentAttr.value+=Lt;break}case P.QUOTATION_MARK:case P.APOSTROPHE:case P.LESS_THAN_SIGN:case P.EQUALS_SIGN:case P.GRAVE_ACCENT:{this._err(J.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case P.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:{this._leaveAttrValue(),this.state=L.BEFORE_ATTRIBUTE_NAME;break}case P.SOLIDUS:{this._leaveAttrValue(),this.state=L.SELF_CLOSING_START_TAG;break}case P.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=L.DATA,this.emitCurrentTagToken();break}case P.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this._err(J.missingWhitespaceBetweenAttributes),this.state=L.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case P.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=L.DATA,this.emitCurrentTagToken();break}case P.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this._err(J.unexpectedSolidusInTag),this.state=L.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case P.GREATER_THAN_SIGN:{this.state=L.DATA,this.emitCurrentComment(n);break}case P.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case P.NULL:{this._err(J.unexpectedNullCharacter),n.data+=Lt;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Er.DASH_DASH,!0)?(this._createCommentToken(Er.DASH_DASH.length+1),this.state=L.COMMENT_START):this._consumeSequenceIfMatch(Er.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Er.DOCTYPE.length+1),this.state=L.DOCTYPE):this._consumeSequenceIfMatch(Er.CDATA_START,!0)?this.inForeignNode?this.state=L.CDATA_SECTION:(this._err(J.cdataInHtmlContent),this._createCommentToken(Er.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=L.BOGUS_COMMENT):this._ensureHibernation()||(this._err(J.incorrectlyOpenedComment),this._createCommentToken(2),this.state=L.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case P.HYPHEN_MINUS:{this.state=L.COMMENT_START_DASH;break}case P.GREATER_THAN_SIGN:{this._err(J.abruptClosingOfEmptyComment),this.state=L.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=L.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case P.HYPHEN_MINUS:{this.state=L.COMMENT_END;break}case P.GREATER_THAN_SIGN:{this._err(J.abruptClosingOfEmptyComment),this.state=L.DATA,this.emitCurrentComment(n);break}case P.EOF:{this._err(J.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=L.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case P.HYPHEN_MINUS:{this.state=L.COMMENT_END_DASH;break}case P.LESS_THAN_SIGN:{n.data+="<",this.state=L.COMMENT_LESS_THAN_SIGN;break}case P.NULL:{this._err(J.unexpectedNullCharacter),n.data+=Lt;break}case P.EOF:{this._err(J.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case P.EXCLAMATION_MARK:{n.data+="!",this.state=L.COMMENT_LESS_THAN_SIGN_BANG;break}case P.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=L.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===P.HYPHEN_MINUS?this.state=L.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=L.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===P.HYPHEN_MINUS?this.state=L.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=L.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==P.GREATER_THAN_SIGN&&e!==P.EOF&&this._err(J.nestedComment),this.state=L.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case P.HYPHEN_MINUS:{this.state=L.COMMENT_END;break}case P.EOF:{this._err(J.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=L.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case P.GREATER_THAN_SIGN:{this.state=L.DATA,this.emitCurrentComment(n);break}case P.EXCLAMATION_MARK:{this.state=L.COMMENT_END_BANG;break}case P.HYPHEN_MINUS:{n.data+="-";break}case P.EOF:{this._err(J.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=L.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case P.HYPHEN_MINUS:{n.data+="--!",this.state=L.COMMENT_END_DASH;break}case P.GREATER_THAN_SIGN:{this._err(J.incorrectlyClosedComment),this.state=L.DATA,this.emitCurrentComment(n);break}case P.EOF:{this._err(J.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=L.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:{this.state=L.BEFORE_DOCTYPE_NAME;break}case P.GREATER_THAN_SIGN:{this.state=L.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case P.EOF:{this._err(J.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingWhitespaceBeforeDoctypeName),this.state=L.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(lf(e))this._createDoctypeToken(String.fromCharCode(I0(e))),this.state=L.DOCTYPE_NAME;else switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:break;case P.NULL:{this._err(J.unexpectedNullCharacter),this._createDoctypeToken(Lt),this.state=L.DOCTYPE_NAME;break}case P.GREATER_THAN_SIGN:{this._err(J.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=L.DATA;break}case P.EOF:{this._err(J.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=L.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:{this.state=L.AFTER_DOCTYPE_NAME;break}case P.GREATER_THAN_SIGN:{this.state=L.DATA,this.emitCurrentDoctype(n);break}case P.NULL:{this._err(J.unexpectedNullCharacter),n.name+=Lt;break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(lf(e)?I0(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:break;case P.GREATER_THAN_SIGN:{this.state=L.DATA,this.emitCurrentDoctype(n);break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Er.PUBLIC,!1)?this.state=L.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Er.SYSTEM,!1)?this.state=L.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(J.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=L.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:{this.state=L.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case P.QUOTATION_MARK:{this._err(J.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=L.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case P.APOSTROPHE:{this._err(J.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=L.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case P.GREATER_THAN_SIGN:{this._err(J.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=L.DATA,this.emitCurrentDoctype(n);break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=L.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:break;case P.QUOTATION_MARK:{n.publicId="",this.state=L.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case P.APOSTROPHE:{n.publicId="",this.state=L.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case P.GREATER_THAN_SIGN:{this._err(J.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=L.DATA,this.emitCurrentDoctype(n);break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=L.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case P.QUOTATION_MARK:{this.state=L.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case P.NULL:{this._err(J.unexpectedNullCharacter),n.publicId+=Lt;break}case P.GREATER_THAN_SIGN:{this._err(J.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=L.DATA;break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case P.APOSTROPHE:{this.state=L.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case P.NULL:{this._err(J.unexpectedNullCharacter),n.publicId+=Lt;break}case P.GREATER_THAN_SIGN:{this._err(J.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=L.DATA;break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:{this.state=L.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case P.GREATER_THAN_SIGN:{this.state=L.DATA,this.emitCurrentDoctype(n);break}case P.QUOTATION_MARK:{this._err(J.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=L.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case P.APOSTROPHE:{this._err(J.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=L.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=L.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:break;case P.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=L.DATA;break}case P.QUOTATION_MARK:{n.systemId="",this.state=L.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case P.APOSTROPHE:{n.systemId="",this.state=L.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=L.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:{this.state=L.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case P.QUOTATION_MARK:{this._err(J.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=L.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case P.APOSTROPHE:{this._err(J.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=L.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case P.GREATER_THAN_SIGN:{this._err(J.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=L.DATA,this.emitCurrentDoctype(n);break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=L.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:break;case P.QUOTATION_MARK:{n.systemId="",this.state=L.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case P.APOSTROPHE:{n.systemId="",this.state=L.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case P.GREATER_THAN_SIGN:{this._err(J.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=L.DATA,this.emitCurrentDoctype(n);break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=L.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case P.QUOTATION_MARK:{this.state=L.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case P.NULL:{this._err(J.unexpectedNullCharacter),n.systemId+=Lt;break}case P.GREATER_THAN_SIGN:{this._err(J.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=L.DATA;break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case P.APOSTROPHE:{this.state=L.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case P.NULL:{this._err(J.unexpectedNullCharacter),n.systemId+=Lt;break}case P.GREATER_THAN_SIGN:{this._err(J.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=L.DATA;break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case P.SPACE:case P.LINE_FEED:case P.TABULATION:case P.FORM_FEED:break;case P.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=L.DATA;break}case P.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=L.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case P.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=L.DATA;break}case P.NULL:{this._err(J.unexpectedNullCharacter);break}case P.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case P.RIGHT_SQUARE_BRACKET:{this.state=L.CDATA_SECTION_BRACKET;break}case P.EOF:{this._err(J.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===P.RIGHT_SQUARE_BRACKET?this.state=L.CDATA_SECTION_END:(this._emitChars("]"),this.state=L.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case P.GREATER_THAN_SIGN:{this.state=L.DATA;break}case P.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=L.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(P.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&lO(this.preprocessor.peek(1))?L.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){lO(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===P.SEMICOLON&&this._err(J.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const rF=new Set([k.DD,k.DT,k.LI,k.OPTGROUP,k.OPTION,k.P,k.RB,k.RP,k.RT,k.RTC]),uO=new Set([...rF,k.CAPTION,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]),ox=new Set([k.APPLET,k.CAPTION,k.HTML,k.MARQUEE,k.OBJECT,k.TABLE,k.TD,k.TEMPLATE,k.TH]),t0e=new Set([...ox,k.OL,k.UL]),n0e=new Set([...ox,k.BUTTON]),dO=new Set([k.ANNOTATION_XML,k.MI,k.MN,k.MO,k.MS,k.MTEXT]),hO=new Set([k.DESC,k.FOREIGN_OBJECT,k.TITLE]),r0e=new Set([k.TR,k.TEMPLATE,k.HTML]),s0e=new Set([k.TBODY,k.TFOOT,k.THEAD,k.TEMPLATE,k.HTML]),i0e=new Set([k.TABLE,k.TEMPLATE,k.HTML]),o0e=new Set([k.TD,k.TH]);class a0e{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=k.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===k.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===se.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const s=this._indexOf(e)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==se.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(aC,se.HTML)}popUntilTableCellPopped(){this.popUntilPopped(o0e,se.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(i0e,se.HTML)}clearBackToTableBodyContext(){this.clearBackTo(s0e,se.HTML)}clearBackToTableRowContext(){this.clearBackTo(r0e,se.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===k.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===k.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case se.HTML:{if(s===e)return!0;if(n.has(s))return!1;break}case se.SVG:{if(hO.has(s))return!1;break}case se.MATHML:{if(dO.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,ox)}hasInListItemScope(e){return this.hasInDynamicScope(e,t0e)}hasInButtonScope(e){return this.hasInDynamicScope(e,n0e)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case se.HTML:{if(aC.has(n))return!0;if(ox.has(n))return!1;break}case se.SVG:{if(hO.has(n))return!1;break}case se.MATHML:{if(dO.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===se.HTML)switch(this.tagIDs[n]){case e:return!0;case k.TABLE:case k.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===se.HTML)switch(this.tagIDs[e]){case k.TBODY:case k.THEAD:case k.TFOOT:return!0;case k.TABLE:case k.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===se.HTML)switch(this.tagIDs[n]){case e:return!0;case k.OPTION:case k.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&rF.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&uO.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&uO.has(this.currentTagId);)this.pop()}}const Fw=3;var Ui;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(Ui||(Ui={}));const fO={type:Ui.Marker};class l0e{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],s=n.length,i=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===Ui.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===i&&this.treeAdapter.getNamespaceURI(c)===o){const d=this.treeAdapter.getAttrList(c);d.length===s&&r.push({idx:a,attrs:d})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<Fw)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<Fw)return;const s=new Map(n.map(o=>[o.name,o.value]));let i=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>s.get(l.name)===l.value)&&(i+=1,i>=Fw&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(fO)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:Ui.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Ui.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(fO);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===Ui.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===Ui.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===Ui.Element&&n.element===e)}}const wa={createDocument(){return{nodeName:"#document",mode:Ts.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const s=t.childNodes.find(i=>i.nodeName==="#documentType");if(s)s.name=e,s.publicId=n,s.systemId=r;else{const i={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};wa.appendChild(t,i)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(wa.isTextNode(n)){n.value+=e;return}}wa.appendChild(t,wa.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&wa.isTextNode(r)?r.value+=e:wa.insertBefore(t,wa.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},sF="html",c0e="about:legacy-compat",u0e="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",iF=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],d0e=[...iF,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],h0e=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),oF=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],f0e=[...oF,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function pO(t,e){return e.some(n=>t.startsWith(n))}function p0e(t){return t.name===sF&&t.publicId===null&&(t.systemId===null||t.systemId===c0e)}function m0e(t){if(t.name!==sF)return Ts.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===u0e)return Ts.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),h0e.has(n))return Ts.QUIRKS;let r=e===null?d0e:iF;if(pO(n,r))return Ts.QUIRKS;if(r=e===null?oF:f0e,pO(n,r))return Ts.LIMITED_QUIRKS}return Ts.NO_QUIRKS}const mO={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},g0e="definitionurl",b0e="definitionURL",x0e=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),y0e=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:se.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:se.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:se.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:se.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:se.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:se.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:se.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:se.XML}],["xml:space",{prefix:"xml",name:"space",namespace:se.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:se.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:se.XMLNS}]]),v0e=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),w0e=new Set([k.B,k.BIG,k.BLOCKQUOTE,k.BODY,k.BR,k.CENTER,k.CODE,k.DD,k.DIV,k.DL,k.DT,k.EM,k.EMBED,k.H1,k.H2,k.H3,k.H4,k.H5,k.H6,k.HEAD,k.HR,k.I,k.IMG,k.LI,k.LISTING,k.MENU,k.META,k.NOBR,k.OL,k.P,k.PRE,k.RUBY,k.S,k.SMALL,k.SPAN,k.STRONG,k.STRIKE,k.SUB,k.SUP,k.TABLE,k.TT,k.U,k.UL,k.VAR]);function k0e(t){const e=t.tagID;return e===k.FONT&&t.attrs.some(({name:r})=>r===xc.COLOR||r===xc.SIZE||r===xc.FACE)||w0e.has(e)}function aF(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===g0e){t.attrs[e].name=b0e;break}}function lF(t){for(let e=0;e<t.attrs.length;e++){const n=x0e.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function UN(t){for(let e=0;e<t.attrs.length;e++){const n=y0e.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function E0e(t){const e=v0e.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=x1(t.tagName))}function C0e(t,e){return e===se.MATHML&&(t===k.MI||t===k.MO||t===k.MN||t===k.MS||t===k.MTEXT)}function S0e(t,e,n){if(e===se.MATHML&&t===k.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===xc.ENCODING){const s=n[r].value.toLowerCase();return s===mO.TEXT_HTML||s===mO.APPLICATION_XML}}return e===se.SVG&&(t===k.FOREIGN_OBJECT||t===k.DESC||t===k.TITLE)}function T0e(t,e,n,r){return(!r||r===se.HTML)&&S0e(t,e,n)||(!r||r===se.MATHML)&&C0e(t,e)}const N0e="hidden",_0e=8,A0e=3;var F;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(F||(F={}));const j0e={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},cF=new Set([k.TABLE,k.TBODY,k.TFOOT,k.THEAD,k.TR]),gO={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:wa,onParseError:null};class uF{constructor(e,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=F.INITIAL,this.originalInsertionMode=F.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...gO,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new e0e(this.options,this),this.activeFormattingElements=new l0e(this.treeAdapter),this.fragmentContextID=r?x1(this.treeAdapter.getTagName(r)):k.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new a0e(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...gO,...n};e??(e=r.treeAdapter.createElement(Y.TEMPLATE,se.HTML,[]));const s=r.treeAdapter.createElement("documentmock",se.HTML,[]),i=new this(r,s,e);return i.fragmentContextID===k.TEMPLATE&&i.tmplInsertionModeStack.unshift(F.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var s;if(!this.onParseError)return;const i=(s=e.location)!==null&&s!==void 0?s:j0e,o={code:n,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:r?i.startLine:i.endLine,endCol:r?i.startCol:i.endCol,endOffset:r?i.startOffset:i.endOffset};this.onParseError(o)}onItemPush(e,n,r){var s,i;(i=(s=this.treeAdapter).onItemPush)===null||i===void 0||i.call(s,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,e,this.openElements.current),n){let i,o;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,o=this.fragmentContextID):{current:i,currentTagId:o}=this.openElements,this._setContextModes(i,o)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===se.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,se.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=F.TEXT}switchToPlaintextParsing(){this.insertionMode=F.TEXT,this.originalInsertionMode=F.IN_BODY,this.tokenizer.state=Mr.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===Y.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==se.HTML))switch(this.fragmentContextID){case k.TITLE:case k.TEXTAREA:{this.tokenizer.state=Mr.RCDATA;break}case k.STYLE:case k.XMP:case k.IFRAME:case k.NOEMBED:case k.NOFRAMES:case k.NOSCRIPT:{this.tokenizer.state=Mr.RAWTEXT;break}case k.SCRIPT:{this.tokenizer.state=Mr.SCRIPT_DATA;break}case k.PLAINTEXT:{this.tokenizer.state=Mr.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,se.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,se.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(Y.HTML,se.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,k.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(n),i=r?s.lastIndexOf(r):s.length,o=s[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:c,endOffset:d}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:c,endOffset:d})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(e),i=n.type===tt.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===k.SVG&&this.treeAdapter.getTagName(n)===Y.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===se.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===k.MGLYPH||e.tagID===k.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,se.HTML)}_processToken(e){switch(e.type){case tt.CHARACTER:{this.onCharacter(e);break}case tt.NULL_CHARACTER:{this.onNullCharacter(e);break}case tt.COMMENT:{this.onComment(e);break}case tt.DOCTYPE:{this.onDoctype(e);break}case tt.START_TAG:{this._processStartTag(e);break}case tt.END_TAG:{this.onEndTag(e);break}case tt.EOF:{this.onEof(e);break}case tt.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const s=this.treeAdapter.getNamespaceURI(n),i=this.treeAdapter.getAttrList(n);return T0e(e,s,i,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===Ui.Marker||this.openElements.contains(s.element)),r=n===-1?e-1:n-1;for(let s=r;s>=0;s--){const i=this.activeFormattingElements.entries[s];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=F.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(k.P),this.openElements.popUntilTagNamePopped(k.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case k.TR:{this.insertionMode=F.IN_ROW;return}case k.TBODY:case k.THEAD:case k.TFOOT:{this.insertionMode=F.IN_TABLE_BODY;return}case k.CAPTION:{this.insertionMode=F.IN_CAPTION;return}case k.COLGROUP:{this.insertionMode=F.IN_COLUMN_GROUP;return}case k.TABLE:{this.insertionMode=F.IN_TABLE;return}case k.BODY:{this.insertionMode=F.IN_BODY;return}case k.FRAMESET:{this.insertionMode=F.IN_FRAMESET;return}case k.SELECT:{this._resetInsertionModeForSelect(e);return}case k.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case k.HTML:{this.insertionMode=this.headElement?F.AFTER_HEAD:F.BEFORE_HEAD;return}case k.TD:case k.TH:{if(e>0){this.insertionMode=F.IN_CELL;return}break}case k.HEAD:{if(e>0){this.insertionMode=F.IN_HEAD;return}break}}this.insertionMode=F.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===k.TEMPLATE)break;if(r===k.TABLE){this.insertionMode=F.IN_SELECT_IN_TABLE;return}}this.insertionMode=F.IN_SELECT}_isElementCausesFosterParenting(e){return cF.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case k.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===se.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case k.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return Jme[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){obe(this,e);return}switch(this.insertionMode){case F.INITIAL:{Hh(this,e);break}case F.BEFORE_HTML:{Nf(this,e);break}case F.BEFORE_HEAD:{_f(this,e);break}case F.IN_HEAD:{Af(this,e);break}case F.IN_HEAD_NO_SCRIPT:{jf(this,e);break}case F.AFTER_HEAD:{Of(this,e);break}case F.IN_BODY:case F.IN_CAPTION:case F.IN_CELL:case F.IN_TEMPLATE:{hF(this,e);break}case F.TEXT:case F.IN_SELECT:case F.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case F.IN_TABLE:case F.IN_TABLE_BODY:case F.IN_ROW:{Hw(this,e);break}case F.IN_TABLE_TEXT:{xF(this,e);break}case F.IN_COLUMN_GROUP:{ax(this,e);break}case F.AFTER_BODY:{lx(this,e);break}case F.AFTER_AFTER_BODY:{Ig(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){ibe(this,e);return}switch(this.insertionMode){case F.INITIAL:{Hh(this,e);break}case F.BEFORE_HTML:{Nf(this,e);break}case F.BEFORE_HEAD:{_f(this,e);break}case F.IN_HEAD:{Af(this,e);break}case F.IN_HEAD_NO_SCRIPT:{jf(this,e);break}case F.AFTER_HEAD:{Of(this,e);break}case F.TEXT:{this._insertCharacters(e);break}case F.IN_TABLE:case F.IN_TABLE_BODY:case F.IN_ROW:{Hw(this,e);break}case F.IN_COLUMN_GROUP:{ax(this,e);break}case F.AFTER_BODY:{lx(this,e);break}case F.AFTER_AFTER_BODY:{Ig(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){lC(this,e);return}switch(this.insertionMode){case F.INITIAL:case F.BEFORE_HTML:case F.BEFORE_HEAD:case F.IN_HEAD:case F.IN_HEAD_NO_SCRIPT:case F.AFTER_HEAD:case F.IN_BODY:case F.IN_TABLE:case F.IN_CAPTION:case F.IN_COLUMN_GROUP:case F.IN_TABLE_BODY:case F.IN_ROW:case F.IN_CELL:case F.IN_SELECT:case F.IN_SELECT_IN_TABLE:case F.IN_TEMPLATE:case F.IN_FRAMESET:case F.AFTER_FRAMESET:{lC(this,e);break}case F.IN_TABLE_TEXT:{Uh(this,e);break}case F.AFTER_BODY:{L0e(this,e);break}case F.AFTER_AFTER_BODY:case F.AFTER_AFTER_FRAMESET:{B0e(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case F.INITIAL:{$0e(this,e);break}case F.BEFORE_HEAD:case F.IN_HEAD:case F.IN_HEAD_NO_SCRIPT:case F.AFTER_HEAD:{this._err(e,J.misplacedDoctype);break}case F.IN_TABLE_TEXT:{Uh(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,J.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?abe(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case F.INITIAL:{Hh(this,e);break}case F.BEFORE_HTML:{F0e(this,e);break}case F.BEFORE_HEAD:{U0e(this,e);break}case F.IN_HEAD:{Si(this,e);break}case F.IN_HEAD_NO_SCRIPT:{W0e(this,e);break}case F.AFTER_HEAD:{G0e(this,e);break}case F.IN_BODY:{ir(this,e);break}case F.IN_TABLE:{Vd(this,e);break}case F.IN_TABLE_TEXT:{Uh(this,e);break}case F.IN_CAPTION:{zge(this,e);break}case F.IN_COLUMN_GROUP:{WN(this,e);break}case F.IN_TABLE_BODY:{w1(this,e);break}case F.IN_ROW:{k1(this,e);break}case F.IN_CELL:{qge(this,e);break}case F.IN_SELECT:{wF(this,e);break}case F.IN_SELECT_IN_TABLE:{Yge(this,e);break}case F.IN_TEMPLATE:{Jge(this,e);break}case F.AFTER_BODY:{Xge(this,e);break}case F.IN_FRAMESET:{Zge(this,e);break}case F.AFTER_FRAMESET:{tbe(this,e);break}case F.AFTER_AFTER_BODY:{rbe(this,e);break}case F.AFTER_AFTER_FRAMESET:{sbe(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?lbe(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case F.INITIAL:{Hh(this,e);break}case F.BEFORE_HTML:{H0e(this,e);break}case F.BEFORE_HEAD:{z0e(this,e);break}case F.IN_HEAD:{V0e(this,e);break}case F.IN_HEAD_NO_SCRIPT:{q0e(this,e);break}case F.AFTER_HEAD:{Y0e(this,e);break}case F.IN_BODY:{v1(this,e);break}case F.TEXT:{Mge(this,e);break}case F.IN_TABLE:{Bp(this,e);break}case F.IN_TABLE_TEXT:{Uh(this,e);break}case F.IN_CAPTION:{Vge(this,e);break}case F.IN_COLUMN_GROUP:{Wge(this,e);break}case F.IN_TABLE_BODY:{cC(this,e);break}case F.IN_ROW:{vF(this,e);break}case F.IN_CELL:{Gge(this,e);break}case F.IN_SELECT:{kF(this,e);break}case F.IN_SELECT_IN_TABLE:{Kge(this,e);break}case F.IN_TEMPLATE:{Qge(this,e);break}case F.AFTER_BODY:{CF(this,e);break}case F.IN_FRAMESET:{ebe(this,e);break}case F.AFTER_FRAMESET:{nbe(this,e);break}case F.AFTER_AFTER_BODY:{Ig(this,e);break}}}onEof(e){switch(this.insertionMode){case F.INITIAL:{Hh(this,e);break}case F.BEFORE_HTML:{Nf(this,e);break}case F.BEFORE_HEAD:{_f(this,e);break}case F.IN_HEAD:{Af(this,e);break}case F.IN_HEAD_NO_SCRIPT:{jf(this,e);break}case F.AFTER_HEAD:{Of(this,e);break}case F.IN_BODY:case F.IN_TABLE:case F.IN_CAPTION:case F.IN_COLUMN_GROUP:case F.IN_TABLE_BODY:case F.IN_ROW:case F.IN_CELL:case F.IN_SELECT:case F.IN_SELECT_IN_TABLE:{gF(this,e);break}case F.TEXT:{Rge(this,e);break}case F.IN_TABLE_TEXT:{Uh(this,e);break}case F.IN_TEMPLATE:{EF(this,e);break}case F.AFTER_BODY:case F.IN_FRAMESET:case F.AFTER_FRAMESET:case F.AFTER_AFTER_BODY:case F.AFTER_AFTER_FRAMESET:{VN(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===P.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case F.IN_HEAD:case F.IN_HEAD_NO_SCRIPT:case F.AFTER_HEAD:case F.TEXT:case F.IN_COLUMN_GROUP:case F.IN_SELECT:case F.IN_SELECT_IN_TABLE:case F.IN_FRAMESET:case F.AFTER_FRAMESET:{this._insertCharacters(e);break}case F.IN_BODY:case F.IN_CAPTION:case F.IN_CELL:case F.IN_TEMPLATE:case F.AFTER_BODY:case F.AFTER_AFTER_BODY:case F.AFTER_AFTER_FRAMESET:{dF(this,e);break}case F.IN_TABLE:case F.IN_TABLE_BODY:case F.IN_ROW:{Hw(this,e);break}case F.IN_TABLE_TEXT:{bF(this,e);break}}}}function O0e(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):mF(t,e),n}function I0e(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const s=t.openElements.items[r];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[r])&&(n=s)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function M0e(t,e,n){let r=e,s=t.openElements.getCommonAncestor(e);for(let i=0,o=s;o!==n;i++,o=s){s=t.openElements.getCommonAncestor(o);const a=t.activeFormattingElements.getElementEntry(o),l=a&&i>=A0e;!a||l?(l&&t.activeFormattingElements.removeEntry(a),t.openElements.remove(o)):(o=R0e(t,a),r===e&&(t.activeFormattingElements.bookmark=a),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(o,r),r=o)}return r}function R0e(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function P0e(t,e,n){const r=t.treeAdapter.getTagName(e),s=x1(r);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(n);else{const i=t.treeAdapter.getNamespaceURI(e);s===k.TEMPLATE&&i===se.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function D0e(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:s}=n,i=t.treeAdapter.createElement(s.tagName,r,s.attrs);t._adoptNodes(e,i),t.treeAdapter.appendChild(e,i),t.activeFormattingElements.insertElementAfterBookmark(i,s),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,i,s.tagID)}function zN(t,e){for(let n=0;n<_0e;n++){const r=O0e(t,e);if(!r)break;const s=I0e(t,r);if(!s)break;t.activeFormattingElements.bookmark=r;const i=M0e(t,s,r.element),o=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(i),o&&P0e(t,o,i),D0e(t,s,r)}}function lC(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function L0e(t,e){t._appendCommentNode(e,t.openElements.items[0])}function B0e(t,e){t._appendCommentNode(e,t.document)}function VN(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const i=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(i);o&&!o.endTag&&t._setEndLocation(i,e)}}}}function $0e(t,e){t._setDocumentType(e);const n=e.forceQuirks?Ts.QUIRKS:m0e(e);p0e(e)||t._err(e,J.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=F.BEFORE_HTML}function Hh(t,e){t._err(e,J.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Ts.QUIRKS),t.insertionMode=F.BEFORE_HTML,t._processToken(e)}function F0e(t,e){e.tagID===k.HTML?(t._insertElement(e,se.HTML),t.insertionMode=F.BEFORE_HEAD):Nf(t,e)}function H0e(t,e){const n=e.tagID;(n===k.HTML||n===k.HEAD||n===k.BODY||n===k.BR)&&Nf(t,e)}function Nf(t,e){t._insertFakeRootElement(),t.insertionMode=F.BEFORE_HEAD,t._processToken(e)}function U0e(t,e){switch(e.tagID){case k.HTML:{ir(t,e);break}case k.HEAD:{t._insertElement(e,se.HTML),t.headElement=t.openElements.current,t.insertionMode=F.IN_HEAD;break}default:_f(t,e)}}function z0e(t,e){const n=e.tagID;n===k.HEAD||n===k.BODY||n===k.HTML||n===k.BR?_f(t,e):t._err(e,J.endTagWithoutMatchingOpenElement)}function _f(t,e){t._insertFakeElement(Y.HEAD,k.HEAD),t.headElement=t.openElements.current,t.insertionMode=F.IN_HEAD,t._processToken(e)}function Si(t,e){switch(e.tagID){case k.HTML:{ir(t,e);break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:{t._appendElement(e,se.HTML),e.ackSelfClosing=!0;break}case k.TITLE:{t._switchToTextParsing(e,Mr.RCDATA);break}case k.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Mr.RAWTEXT):(t._insertElement(e,se.HTML),t.insertionMode=F.IN_HEAD_NO_SCRIPT);break}case k.NOFRAMES:case k.STYLE:{t._switchToTextParsing(e,Mr.RAWTEXT);break}case k.SCRIPT:{t._switchToTextParsing(e,Mr.SCRIPT_DATA);break}case k.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=F.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(F.IN_TEMPLATE);break}case k.HEAD:{t._err(e,J.misplacedStartTagForHeadElement);break}default:Af(t,e)}}function V0e(t,e){switch(e.tagID){case k.HEAD:{t.openElements.pop(),t.insertionMode=F.AFTER_HEAD;break}case k.BODY:case k.BR:case k.HTML:{Af(t,e);break}case k.TEMPLATE:{eu(t,e);break}default:t._err(e,J.endTagWithoutMatchingOpenElement)}}function eu(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==k.TEMPLATE&&t._err(e,J.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(k.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,J.endTagWithoutMatchingOpenElement)}function Af(t,e){t.openElements.pop(),t.insertionMode=F.AFTER_HEAD,t._processToken(e)}function W0e(t,e){switch(e.tagID){case k.HTML:{ir(t,e);break}case k.BASEFONT:case k.BGSOUND:case k.HEAD:case k.LINK:case k.META:case k.NOFRAMES:case k.STYLE:{Si(t,e);break}case k.NOSCRIPT:{t._err(e,J.nestedNoscriptInHead);break}default:jf(t,e)}}function q0e(t,e){switch(e.tagID){case k.NOSCRIPT:{t.openElements.pop(),t.insertionMode=F.IN_HEAD;break}case k.BR:{jf(t,e);break}default:t._err(e,J.endTagWithoutMatchingOpenElement)}}function jf(t,e){const n=e.type===tt.EOF?J.openElementsLeftAfterEof:J.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=F.IN_HEAD,t._processToken(e)}function G0e(t,e){switch(e.tagID){case k.HTML:{ir(t,e);break}case k.BODY:{t._insertElement(e,se.HTML),t.framesetOk=!1,t.insertionMode=F.IN_BODY;break}case k.FRAMESET:{t._insertElement(e,se.HTML),t.insertionMode=F.IN_FRAMESET;break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{t._err(e,J.abandonedHeadElementChild),t.openElements.push(t.headElement,k.HEAD),Si(t,e),t.openElements.remove(t.headElement);break}case k.HEAD:{t._err(e,J.misplacedStartTagForHeadElement);break}default:Of(t,e)}}function Y0e(t,e){switch(e.tagID){case k.BODY:case k.HTML:case k.BR:{Of(t,e);break}case k.TEMPLATE:{eu(t,e);break}default:t._err(e,J.endTagWithoutMatchingOpenElement)}}function Of(t,e){t._insertFakeElement(Y.BODY,k.BODY),t.insertionMode=F.IN_BODY,y1(t,e)}function y1(t,e){switch(e.type){case tt.CHARACTER:{hF(t,e);break}case tt.WHITESPACE_CHARACTER:{dF(t,e);break}case tt.COMMENT:{lC(t,e);break}case tt.START_TAG:{ir(t,e);break}case tt.END_TAG:{v1(t,e);break}case tt.EOF:{gF(t,e);break}}}function dF(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function hF(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function K0e(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function J0e(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function Q0e(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,se.HTML),t.insertionMode=F.IN_FRAMESET)}function X0e(t,e){t.openElements.hasInButtonScope(k.P)&&t._closePElement(),t._insertElement(e,se.HTML)}function Z0e(t,e){t.openElements.hasInButtonScope(k.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&aC.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,se.HTML)}function ege(t,e){t.openElements.hasInButtonScope(k.P)&&t._closePElement(),t._insertElement(e,se.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function tge(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(k.P)&&t._closePElement(),t._insertElement(e,se.HTML),n||(t.formElement=t.openElements.current))}function nge(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const s=t.openElements.tagIDs[r];if(n===k.LI&&s===k.LI||(n===k.DD||n===k.DT)&&(s===k.DD||s===k.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==k.ADDRESS&&s!==k.DIV&&s!==k.P&&t._isSpecialElement(t.openElements.items[r],s))break}t.openElements.hasInButtonScope(k.P)&&t._closePElement(),t._insertElement(e,se.HTML)}function rge(t,e){t.openElements.hasInButtonScope(k.P)&&t._closePElement(),t._insertElement(e,se.HTML),t.tokenizer.state=Mr.PLAINTEXT}function sge(t,e){t.openElements.hasInScope(k.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(k.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,se.HTML),t.framesetOk=!1}function ige(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(Y.A);n&&(zN(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,se.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function oge(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,se.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function age(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(k.NOBR)&&(zN(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,se.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function lge(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,se.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function cge(t,e){t.treeAdapter.getDocumentMode(t.document)!==Ts.QUIRKS&&t.openElements.hasInButtonScope(k.P)&&t._closePElement(),t._insertElement(e,se.HTML),t.framesetOk=!1,t.insertionMode=F.IN_TABLE}function fF(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,se.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function pF(t){const e=tF(t,xc.TYPE);return e!=null&&e.toLowerCase()===N0e}function uge(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,se.HTML),pF(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function dge(t,e){t._appendElement(e,se.HTML),e.ackSelfClosing=!0}function hge(t,e){t.openElements.hasInButtonScope(k.P)&&t._closePElement(),t._appendElement(e,se.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function fge(t,e){e.tagName=Y.IMG,e.tagID=k.IMG,fF(t,e)}function pge(t,e){t._insertElement(e,se.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Mr.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=F.TEXT}function mge(t,e){t.openElements.hasInButtonScope(k.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Mr.RAWTEXT)}function gge(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Mr.RAWTEXT)}function bO(t,e){t._switchToTextParsing(e,Mr.RAWTEXT)}function bge(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,se.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===F.IN_TABLE||t.insertionMode===F.IN_CAPTION||t.insertionMode===F.IN_TABLE_BODY||t.insertionMode===F.IN_ROW||t.insertionMode===F.IN_CELL?F.IN_SELECT_IN_TABLE:F.IN_SELECT}function xge(t,e){t.openElements.currentTagId===k.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,se.HTML)}function yge(t,e){t.openElements.hasInScope(k.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,se.HTML)}function vge(t,e){t.openElements.hasInScope(k.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(k.RTC),t._insertElement(e,se.HTML)}function wge(t,e){t._reconstructActiveFormattingElements(),aF(e),UN(e),e.selfClosing?t._appendElement(e,se.MATHML):t._insertElement(e,se.MATHML),e.ackSelfClosing=!0}function kge(t,e){t._reconstructActiveFormattingElements(),lF(e),UN(e),e.selfClosing?t._appendElement(e,se.SVG):t._insertElement(e,se.SVG),e.ackSelfClosing=!0}function xO(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,se.HTML)}function ir(t,e){switch(e.tagID){case k.I:case k.S:case k.B:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.SMALL:case k.STRIKE:case k.STRONG:{oge(t,e);break}case k.A:{ige(t,e);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{Z0e(t,e);break}case k.P:case k.DL:case k.OL:case k.UL:case k.DIV:case k.DIR:case k.NAV:case k.MAIN:case k.MENU:case k.ASIDE:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.DETAILS:case k.ADDRESS:case k.ARTICLE:case k.SEARCH:case k.SECTION:case k.SUMMARY:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{X0e(t,e);break}case k.LI:case k.DD:case k.DT:{nge(t,e);break}case k.BR:case k.IMG:case k.WBR:case k.AREA:case k.EMBED:case k.KEYGEN:{fF(t,e);break}case k.HR:{hge(t,e);break}case k.RB:case k.RTC:{yge(t,e);break}case k.RT:case k.RP:{vge(t,e);break}case k.PRE:case k.LISTING:{ege(t,e);break}case k.XMP:{mge(t,e);break}case k.SVG:{kge(t,e);break}case k.HTML:{K0e(t,e);break}case k.BASE:case k.LINK:case k.META:case k.STYLE:case k.TITLE:case k.SCRIPT:case k.BGSOUND:case k.BASEFONT:case k.TEMPLATE:{Si(t,e);break}case k.BODY:{J0e(t,e);break}case k.FORM:{tge(t,e);break}case k.NOBR:{age(t,e);break}case k.MATH:{wge(t,e);break}case k.TABLE:{cge(t,e);break}case k.INPUT:{uge(t,e);break}case k.PARAM:case k.TRACK:case k.SOURCE:{dge(t,e);break}case k.IMAGE:{fge(t,e);break}case k.BUTTON:{sge(t,e);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{lge(t,e);break}case k.IFRAME:{gge(t,e);break}case k.SELECT:{bge(t,e);break}case k.OPTION:case k.OPTGROUP:{xge(t,e);break}case k.NOEMBED:case k.NOFRAMES:{bO(t,e);break}case k.FRAMESET:{Q0e(t,e);break}case k.TEXTAREA:{pge(t,e);break}case k.NOSCRIPT:{t.options.scriptingEnabled?bO(t,e):xO(t,e);break}case k.PLAINTEXT:{rge(t,e);break}case k.COL:case k.TH:case k.TD:case k.TR:case k.HEAD:case k.FRAME:case k.TBODY:case k.TFOOT:case k.THEAD:case k.CAPTION:case k.COLGROUP:break;default:xO(t,e)}}function Ege(t,e){if(t.openElements.hasInScope(k.BODY)&&(t.insertionMode=F.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function Cge(t,e){t.openElements.hasInScope(k.BODY)&&(t.insertionMode=F.AFTER_BODY,CF(t,e))}function Sge(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function Tge(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(k.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(k.FORM):n&&t.openElements.remove(n))}function Nge(t){t.openElements.hasInButtonScope(k.P)||t._insertFakeElement(Y.P,k.P),t._closePElement()}function _ge(t){t.openElements.hasInListItemScope(k.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(k.LI),t.openElements.popUntilTagNamePopped(k.LI))}function Age(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function jge(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function Oge(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function Ige(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(Y.BR,k.BR),t.openElements.pop(),t.framesetOk=!1}function mF(t,e){const n=e.tagName,r=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const i=t.openElements.items[s],o=t.openElements.tagIDs[s];if(r===o&&(r!==k.UNKNOWN||t.treeAdapter.getTagName(i)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(i,o))break}}function v1(t,e){switch(e.tagID){case k.A:case k.B:case k.I:case k.S:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.NOBR:case k.SMALL:case k.STRIKE:case k.STRONG:{zN(t,e);break}case k.P:{Nge(t);break}case k.DL:case k.UL:case k.OL:case k.DIR:case k.DIV:case k.NAV:case k.PRE:case k.MAIN:case k.MENU:case k.ASIDE:case k.BUTTON:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.ADDRESS:case k.ARTICLE:case k.DETAILS:case k.SEARCH:case k.SECTION:case k.SUMMARY:case k.LISTING:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{Sge(t,e);break}case k.LI:{_ge(t);break}case k.DD:case k.DT:{Age(t,e);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{jge(t);break}case k.BR:{Ige(t);break}case k.BODY:{Ege(t,e);break}case k.HTML:{Cge(t,e);break}case k.FORM:{Tge(t);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{Oge(t,e);break}case k.TEMPLATE:{eu(t,e);break}default:mF(t,e)}}function gF(t,e){t.tmplInsertionModeStack.length>0?EF(t,e):VN(t,e)}function Mge(t,e){var n;e.tagID===k.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function Rge(t,e){t._err(e,J.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function Hw(t,e){if(t.openElements.currentTagId!==void 0&&cF.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=F.IN_TABLE_TEXT,e.type){case tt.CHARACTER:{xF(t,e);break}case tt.WHITESPACE_CHARACTER:{bF(t,e);break}}else vm(t,e)}function Pge(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,se.HTML),t.insertionMode=F.IN_CAPTION}function Dge(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,se.HTML),t.insertionMode=F.IN_COLUMN_GROUP}function Lge(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(Y.COLGROUP,k.COLGROUP),t.insertionMode=F.IN_COLUMN_GROUP,WN(t,e)}function Bge(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,se.HTML),t.insertionMode=F.IN_TABLE_BODY}function $ge(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(Y.TBODY,k.TBODY),t.insertionMode=F.IN_TABLE_BODY,w1(t,e)}function Fge(t,e){t.openElements.hasInTableScope(k.TABLE)&&(t.openElements.popUntilTagNamePopped(k.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function Hge(t,e){pF(e)?t._appendElement(e,se.HTML):vm(t,e),e.ackSelfClosing=!0}function Uge(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,se.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function Vd(t,e){switch(e.tagID){case k.TD:case k.TH:case k.TR:{$ge(t,e);break}case k.STYLE:case k.SCRIPT:case k.TEMPLATE:{Si(t,e);break}case k.COL:{Lge(t,e);break}case k.FORM:{Uge(t,e);break}case k.TABLE:{Fge(t,e);break}case k.TBODY:case k.TFOOT:case k.THEAD:{Bge(t,e);break}case k.INPUT:{Hge(t,e);break}case k.CAPTION:{Pge(t,e);break}case k.COLGROUP:{Dge(t,e);break}default:vm(t,e)}}function Bp(t,e){switch(e.tagID){case k.TABLE:{t.openElements.hasInTableScope(k.TABLE)&&(t.openElements.popUntilTagNamePopped(k.TABLE),t._resetInsertionMode());break}case k.TEMPLATE:{eu(t,e);break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:vm(t,e)}}function vm(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,y1(t,e),t.fosterParentingEnabled=n}function bF(t,e){t.pendingCharacterTokens.push(e)}function xF(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function Uh(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)vm(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const yF=new Set([k.CAPTION,k.COL,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]);function zge(t,e){const n=e.tagID;yF.has(n)?t.openElements.hasInTableScope(k.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(k.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=F.IN_TABLE,Vd(t,e)):ir(t,e)}function Vge(t,e){const n=e.tagID;switch(n){case k.CAPTION:case k.TABLE:{t.openElements.hasInTableScope(k.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(k.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=F.IN_TABLE,n===k.TABLE&&Bp(t,e));break}case k.BODY:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:v1(t,e)}}function WN(t,e){switch(e.tagID){case k.HTML:{ir(t,e);break}case k.COL:{t._appendElement(e,se.HTML),e.ackSelfClosing=!0;break}case k.TEMPLATE:{Si(t,e);break}default:ax(t,e)}}function Wge(t,e){switch(e.tagID){case k.COLGROUP:{t.openElements.currentTagId===k.COLGROUP&&(t.openElements.pop(),t.insertionMode=F.IN_TABLE);break}case k.TEMPLATE:{eu(t,e);break}case k.COL:break;default:ax(t,e)}}function ax(t,e){t.openElements.currentTagId===k.COLGROUP&&(t.openElements.pop(),t.insertionMode=F.IN_TABLE,t._processToken(e))}function w1(t,e){switch(e.tagID){case k.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,se.HTML),t.insertionMode=F.IN_ROW;break}case k.TH:case k.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(Y.TR,k.TR),t.insertionMode=F.IN_ROW,k1(t,e);break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=F.IN_TABLE,Vd(t,e));break}default:Vd(t,e)}}function cC(t,e){const n=e.tagID;switch(e.tagID){case k.TBODY:case k.TFOOT:case k.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=F.IN_TABLE);break}case k.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=F.IN_TABLE,Bp(t,e));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:case k.TR:break;default:Bp(t,e)}}function k1(t,e){switch(e.tagID){case k.TH:case k.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,se.HTML),t.insertionMode=F.IN_CELL,t.activeFormattingElements.insertMarker();break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{t.openElements.hasInTableScope(k.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=F.IN_TABLE_BODY,w1(t,e));break}default:Vd(t,e)}}function vF(t,e){switch(e.tagID){case k.TR:{t.openElements.hasInTableScope(k.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=F.IN_TABLE_BODY);break}case k.TABLE:{t.openElements.hasInTableScope(k.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=F.IN_TABLE_BODY,cC(t,e));break}case k.TBODY:case k.TFOOT:case k.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(k.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=F.IN_TABLE_BODY,cC(t,e));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:break;default:Bp(t,e)}}function qge(t,e){const n=e.tagID;yF.has(n)?(t.openElements.hasInTableScope(k.TD)||t.openElements.hasInTableScope(k.TH))&&(t._closeTableCell(),k1(t,e)):ir(t,e)}function Gge(t,e){const n=e.tagID;switch(n){case k.TD:case k.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=F.IN_ROW);break}case k.TABLE:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),vF(t,e));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:break;default:v1(t,e)}}function wF(t,e){switch(e.tagID){case k.HTML:{ir(t,e);break}case k.OPTION:{t.openElements.currentTagId===k.OPTION&&t.openElements.pop(),t._insertElement(e,se.HTML);break}case k.OPTGROUP:{t.openElements.currentTagId===k.OPTION&&t.openElements.pop(),t.openElements.currentTagId===k.OPTGROUP&&t.openElements.pop(),t._insertElement(e,se.HTML);break}case k.HR:{t.openElements.currentTagId===k.OPTION&&t.openElements.pop(),t.openElements.currentTagId===k.OPTGROUP&&t.openElements.pop(),t._appendElement(e,se.HTML),e.ackSelfClosing=!0;break}case k.INPUT:case k.KEYGEN:case k.TEXTAREA:case k.SELECT:{t.openElements.hasInSelectScope(k.SELECT)&&(t.openElements.popUntilTagNamePopped(k.SELECT),t._resetInsertionMode(),e.tagID!==k.SELECT&&t._processStartTag(e));break}case k.SCRIPT:case k.TEMPLATE:{Si(t,e);break}}}function kF(t,e){switch(e.tagID){case k.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===k.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===k.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===k.OPTGROUP&&t.openElements.pop();break}case k.OPTION:{t.openElements.currentTagId===k.OPTION&&t.openElements.pop();break}case k.SELECT:{t.openElements.hasInSelectScope(k.SELECT)&&(t.openElements.popUntilTagNamePopped(k.SELECT),t._resetInsertionMode());break}case k.TEMPLATE:{eu(t,e);break}}}function Yge(t,e){const n=e.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?(t.openElements.popUntilTagNamePopped(k.SELECT),t._resetInsertionMode(),t._processStartTag(e)):wF(t,e)}function Kge(t,e){const n=e.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(k.SELECT),t._resetInsertionMode(),t.onEndTag(e)):kF(t,e)}function Jge(t,e){switch(e.tagID){case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{Si(t,e);break}case k.CAPTION:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{t.tmplInsertionModeStack[0]=F.IN_TABLE,t.insertionMode=F.IN_TABLE,Vd(t,e);break}case k.COL:{t.tmplInsertionModeStack[0]=F.IN_COLUMN_GROUP,t.insertionMode=F.IN_COLUMN_GROUP,WN(t,e);break}case k.TR:{t.tmplInsertionModeStack[0]=F.IN_TABLE_BODY,t.insertionMode=F.IN_TABLE_BODY,w1(t,e);break}case k.TD:case k.TH:{t.tmplInsertionModeStack[0]=F.IN_ROW,t.insertionMode=F.IN_ROW,k1(t,e);break}default:t.tmplInsertionModeStack[0]=F.IN_BODY,t.insertionMode=F.IN_BODY,ir(t,e)}}function Qge(t,e){e.tagID===k.TEMPLATE&&eu(t,e)}function EF(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(k.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):VN(t,e)}function Xge(t,e){e.tagID===k.HTML?ir(t,e):lx(t,e)}function CF(t,e){var n;if(e.tagID===k.HTML){if(t.fragmentContext||(t.insertionMode=F.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===k.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else lx(t,e)}function lx(t,e){t.insertionMode=F.IN_BODY,y1(t,e)}function Zge(t,e){switch(e.tagID){case k.HTML:{ir(t,e);break}case k.FRAMESET:{t._insertElement(e,se.HTML);break}case k.FRAME:{t._appendElement(e,se.HTML),e.ackSelfClosing=!0;break}case k.NOFRAMES:{Si(t,e);break}}}function ebe(t,e){e.tagID===k.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==k.FRAMESET&&(t.insertionMode=F.AFTER_FRAMESET))}function tbe(t,e){switch(e.tagID){case k.HTML:{ir(t,e);break}case k.NOFRAMES:{Si(t,e);break}}}function nbe(t,e){e.tagID===k.HTML&&(t.insertionMode=F.AFTER_AFTER_FRAMESET)}function rbe(t,e){e.tagID===k.HTML?ir(t,e):Ig(t,e)}function Ig(t,e){t.insertionMode=F.IN_BODY,y1(t,e)}function sbe(t,e){switch(e.tagID){case k.HTML:{ir(t,e);break}case k.NOFRAMES:{Si(t,e);break}}}function ibe(t,e){e.chars=Lt,t._insertCharacters(e)}function obe(t,e){t._insertCharacters(e),t.framesetOk=!1}function SF(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==se.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function abe(t,e){if(k0e(e))SF(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===se.MATHML?aF(e):r===se.SVG&&(E0e(e),lF(e)),UN(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function lbe(t,e){if(e.tagID===k.P||e.tagID===k.BR){SF(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===se.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(r);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(n);break}}}Y.AREA,Y.BASE,Y.BASEFONT,Y.BGSOUND,Y.BR,Y.COL,Y.EMBED,Y.FRAME,Y.HR,Y.IMG,Y.INPUT,Y.KEYGEN,Y.LINK,Y.META,Y.PARAM,Y.SOURCE,Y.TRACK,Y.WBR;function cbe(t,e){return uF.parse(t,e)}function ube(t,e,n){typeof t=="string"&&(n=e,e=t,t=null);const r=uF.getFragmentParser(t,n);return r.tokenizer.write(e,!0),r.getFragment()}function If(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?yO(t.position):"start"in t||"end"in t?yO(t):"line"in t||"column"in t?uC(t):""}function uC(t){return vO(t&&t.line)+":"+vO(t&&t.column)}function yO(t){return uC(t&&t.start)+"-"+uC(t&&t.end)}function vO(t){return t&&typeof t=="number"?t:1}class kr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},o=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof e=="string"?s=e:!i.cause&&e&&(o=!0,s=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?i.ruleId=r:(i.source=r.slice(0,l),i.ruleId=r.slice(l+1))}if(!i.place&&i.ancestors&&i.ancestors){const l=i.ancestors[i.ancestors.length-1];l&&(i.place=l.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=a?a.line:void 0,this.name=If(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}kr.prototype.file="";kr.prototype.name="";kr.prototype.reason="";kr.prototype.message="";kr.prototype.stack="";kr.prototype.column=void 0;kr.prototype.line=void 0;kr.prototype.ancestors=void 0;kr.prototype.cause=void 0;kr.prototype.fatal=void 0;kr.prototype.place=void 0;kr.prototype.ruleId=void 0;kr.prototype.source=void 0;const Li={basename:dbe,dirname:hbe,extname:fbe,join:pbe,sep:"/"};function dbe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');wm(t);let n=0,r=-1,s=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else o<0&&(i=!0,o=s+1),a>-1&&(t.codePointAt(s)===e.codePointAt(a--)?a<0&&(r=s):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function hbe(t){if(wm(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function fbe(t){wm(t);let e=t.length,n=-1,r=0,s=-1,i=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function pbe(...t){let e=-1,n;for(;++e<t.length;)wm(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":mbe(n)}function mbe(t){wm(t);const e=t.codePointAt(0)===47;let n=gbe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function gbe(t,e){let n="",r=0,s=-1,i=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=o,i=0;continue}}else if(n.length>0){n="",r=0,s=o,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,o):n=t.slice(s+1,o),r=o-s-1;s=o,i=0}else a===46&&i>-1?i++:i=-1}return n}function wm(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const bbe={cwd:xbe};function xbe(){return"/"}function dC(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function ybe(t){if(typeof t=="string")t=new URL(t);else if(!dC(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return vbe(t)}function vbe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Uw=["history","path","basename","stem","extname","dirname"];class hC{constructor(e){let n;e?dC(e)?n={path:e}:typeof e=="string"||wbe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":bbe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Uw.length;){const i=Uw[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Uw.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Li.basename(this.path):void 0}set basename(e){Vw(e,"basename"),zw(e,"basename"),this.path=Li.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Li.dirname(this.path):void 0}set dirname(e){wO(this.basename,"dirname"),this.path=Li.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Li.extname(this.path):void 0}set extname(e){if(zw(e,"extname"),wO(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Li.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){dC(e)&&(e=ybe(e)),Vw(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Li.basename(this.path,this.extname):void 0}set stem(e){Vw(e,"stem"),zw(e,"stem"),this.path=Li.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new kr(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function zw(t,e){if(t&&t.includes(Li.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Li.sep+"`")}function Vw(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function wO(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function wbe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const kbe={abandonedHeadElementChild:{reason:"Unexpected metadata element after head",description:"Unexpected element after head. Expected the element before `</head>`",url:!1},abruptClosingOfEmptyComment:{reason:"Unexpected abruptly closed empty comment",description:"Unexpected `>` or `->`. Expected `-->` to close comments"},abruptDoctypePublicIdentifier:{reason:"Unexpected abruptly closed public identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the public identifier"},abruptDoctypeSystemIdentifier:{reason:"Unexpected abruptly closed system identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the identifier identifier"},absenceOfDigitsInNumericCharacterReference:{reason:"Unexpected non-digit at start of numeric character reference",description:"Unexpected `%c`. Expected `[0-9]` for decimal references or `[0-9a-fA-F]` for hexadecimal references"},cdataInHtmlContent:{reason:"Unexpected CDATA section in HTML",description:"Unexpected `<![CDATA[` in HTML. Remove it, use a comment, or encode special characters instead"},characterReferenceOutsideUnicodeRange:{reason:"Unexpected too big numeric character reference",description:"Unexpectedly high character reference. Expected character references to be at most hexadecimal 10ffff (or decimal 1114111)"},closingOfElementWithOpenChildElements:{reason:"Unexpected closing tag with open child elements",description:"Unexpectedly closing tag. Expected other tags to be closed first",url:!1},controlCharacterInInputStream:{reason:"Unexpected control character",description:"Unexpected control character `%x`. Expected a non-control code point, 0x00, or ASCII whitespace"},controlCharacterReference:{reason:"Unexpected control character reference",description:"Unexpectedly control character in reference. Expected a non-control code point, 0x00, or ASCII whitespace"},disallowedContentInNoscriptInHead:{reason:"Disallowed content inside `<noscript>` in `<head>`",description:"Unexpected text character `%c`. Only use text in `<noscript>`s in `<body>`",url:!1},duplicateAttribute:{reason:"Unexpected duplicate attribute",description:"Unexpectedly double attribute. Expected attributes to occur only once"},endTagWithAttributes:{reason:"Unexpected attribute on closing tag",description:"Unexpected attribute. Expected `>` instead"},endTagWithTrailingSolidus:{reason:"Unexpected slash at end of closing tag",description:"Unexpected `%c-1`. Expected `>` instead"},endTagWithoutMatchingOpenElement:{reason:"Unexpected unopened end tag",description:"Unexpected end tag. Expected no end tag or another end tag",url:!1},eofBeforeTagName:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected tag name instead"},eofInCdata:{reason:"Unexpected end of file in CDATA",description:"Unexpected end of file. Expected `]]>` to close the CDATA"},eofInComment:{reason:"Unexpected end of file in comment",description:"Unexpected end of file. Expected `-->` to close the comment"},eofInDoctype:{reason:"Unexpected end of file in doctype",description:"Unexpected end of file. Expected a valid doctype (such as `<!doctype html>`)"},eofInElementThatCanContainOnlyText:{reason:"Unexpected end of file in element that can only contain text",description:"Unexpected end of file. Expected text or a closing tag",url:!1},eofInScriptHtmlCommentLikeText:{reason:"Unexpected end of file in comment inside script",description:"Unexpected end of file. Expected `-->` to close the comment"},eofInTag:{reason:"Unexpected end of file in tag",description:"Unexpected end of file. Expected `>` to close the tag"},incorrectlyClosedComment:{reason:"Incorrectly closed comment",description:"Unexpected `%c-1`. Expected `-->` to close the comment"},incorrectlyOpenedComment:{reason:"Incorrectly opened comment",description:"Unexpected `%c`. Expected `<!--` to open the comment"},invalidCharacterSequenceAfterDoctypeName:{reason:"Invalid sequence after doctype name",description:"Unexpected sequence at `%c`. Expected `public` or `system`"},invalidFirstCharacterOfTagName:{reason:"Invalid first character in tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},misplacedDoctype:{reason:"Misplaced doctype",description:"Unexpected doctype. Expected doctype before head",url:!1},misplacedStartTagForHeadElement:{reason:"Misplaced `<head>` start tag",description:"Unexpected start tag `<head>`. Expected `<head>` directly after doctype",url:!1},missingAttributeValue:{reason:"Missing attribute value",description:"Unexpected `%c-1`. Expected an attribute value or no `%c-1` instead"},missingDoctype:{reason:"Missing doctype before other content",description:"Expected a `<!doctype html>` before anything else",url:!1},missingDoctypeName:{reason:"Missing doctype name",description:"Unexpected doctype end at `%c`. Expected `html` instead"},missingDoctypePublicIdentifier:{reason:"Missing public identifier in doctype",description:"Unexpected `%c`. Expected identifier for `public` instead"},missingDoctypeSystemIdentifier:{reason:"Missing system identifier in doctype",description:'Unexpected `%c`. Expected identifier for `system` instead (suggested: `"about:legacy-compat"`)'},missingEndTagName:{reason:"Missing name in end tag",description:"Unexpected `%c`. Expected an ASCII letter instead"},missingQuoteBeforeDoctypePublicIdentifier:{reason:"Missing quote before public identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingQuoteBeforeDoctypeSystemIdentifier:{reason:"Missing quote before system identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingSemicolonAfterCharacterReference:{reason:"Missing semicolon after character reference",description:"Unexpected `%c`. Expected `;` instead"},missingWhitespaceAfterDoctypePublicKeyword:{reason:"Missing whitespace after public identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceAfterDoctypeSystemKeyword:{reason:"Missing whitespace after system identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBeforeDoctypeName:{reason:"Missing whitespace before doctype name",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenAttributes:{reason:"Missing whitespace between attributes",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:{reason:"Missing whitespace between public and system identifiers in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},nestedComment:{reason:"Unexpected nested comment",description:"Unexpected `<!--`. Expected `-->`"},nestedNoscriptInHead:{reason:"Unexpected nested `<noscript>` in `<head>`",description:"Unexpected `<noscript>`. Expected a closing tag or a meta element",url:!1},nonConformingDoctype:{reason:"Unexpected non-conforming doctype declaration",description:'Expected `<!doctype html>` or `<!doctype html system "about:legacy-compat">`',url:!1},nonVoidHtmlElementStartTagWithTrailingSolidus:{reason:"Unexpected trailing slash on start tag of non-void element",description:"Unexpected `/`. Expected `>` instead"},noncharacterCharacterReference:{reason:"Unexpected noncharacter code point referenced by character reference",description:"Unexpected code point. Do not use noncharacters in HTML"},noncharacterInInputStream:{reason:"Unexpected noncharacter character",description:"Unexpected code point `%x`. Do not use noncharacters in HTML"},nullCharacterReference:{reason:"Unexpected NULL character referenced by character reference",description:"Unexpected code point. Do not use NULL characters in HTML"},openElementsLeftAfterEof:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected closing tag instead",url:!1},surrogateCharacterReference:{reason:"Unexpected surrogate character referenced by character reference",description:"Unexpected code point. Do not use lone surrogate characters in HTML"},surrogateInInputStream:{reason:"Unexpected surrogate character",description:"Unexpected code point `%x`. Do not use lone surrogate characters in HTML"},unexpectedCharacterAfterDoctypeSystemIdentifier:{reason:"Invalid character after system identifier in doctype",description:"Unexpected character at `%c`. Expected `>`"},unexpectedCharacterInAttributeName:{reason:"Unexpected character in attribute name",description:"Unexpected `%c`. Expected whitespace, `/`, `>`, `=`, or probably an ASCII letter"},unexpectedCharacterInUnquotedAttributeValue:{reason:"Unexpected character in unquoted attribute value",description:"Unexpected `%c`. Quote the attribute value to include it"},unexpectedEqualsSignBeforeAttributeName:{reason:"Unexpected equals sign before attribute name",description:"Unexpected `%c`. Add an attribute name before it"},unexpectedNullCharacter:{reason:"Unexpected NULL character",description:"Unexpected code point `%x`. Do not use NULL characters in HTML"},unexpectedQuestionMarkInsteadOfTagName:{reason:"Unexpected question mark instead of tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},unexpectedSolidusInTag:{reason:"Unexpected slash in tag",description:"Unexpected `%c-1`. Expected it followed by `>` or in a quoted attribute value"},unknownNamedCharacterReference:{reason:"Unexpected unknown named character reference",description:"Unexpected character reference. Expected known named character references"}},Ebe="https://html.spec.whatwg.org/multipage/parsing.html#parse-error-",Cbe=/-[a-z]/g,Sbe=/%c(?:([-+])(\d+))?/g,Tbe=/%x/g,Nbe={2:!0,1:!1,0:null},_be={};function Abe(t,e){const n=e||_be,r=n.onerror,s=t instanceof hC?t:new hC(t),i=n.fragment?ube:cbe,o=String(s),a=i(o,{sourceCodeLocationInfo:!0,onParseError:n.onerror?l:null,scriptingEnabled:!1});return Ime(a,{file:s,space:n.space,verbose:n.verbose});function l(c){const d=c.code,h=jbe(d),f=n[h],p=f??!0,m=typeof p=="number"?p:p?1:0;if(m){const x=kbe[h],b=new kr(g(x.reason),{place:{start:{line:c.startLine,column:c.startCol,offset:c.startOffset},end:{line:c.endLine,column:c.endCol,offset:c.endOffset}},ruleId:d,source:"hast-util-from-html"});s.path&&(b.file=s.path,b.name=s.path+":"+b.name),b.fatal=Nbe[m],b.note=g(x.description),b.url=x.url===!1?void 0:Ebe+d,r(b)}function g(x){return x.replace(Sbe,b).replace(Tbe,v);function b(w,S,E){const C=(E?Number.parseInt(E,10):0)*(S==="-"?-1:1),T=o.charAt(c.startOffset+C);return Ibe(T)}function v(){return Mbe(o.charCodeAt(c.startOffset))}}}}function jbe(t){return t.replace(Cbe,Obe)}function Obe(t){return t.charAt(1).toUpperCase()}function Ibe(t){return t==="`"?"` ` `":t}function Mbe(t){return"0x"+t.toString(16).toUpperCase()}function Rbe(t){const e=this,{emitParseErrors:n,...r}={...e.data("settings"),...t};e.parser=s;function s(i,o){return Abe(i,{...r,onerror:n?function(a){o.path&&(a.name=o.path+":"+a.name,a.file=o.path),o.messages.push(a)}:void 0})}}const TF=-1,E1=0,Mf=1,cx=2,qN=3,GN=4,YN=5,KN=6,NF=7,_F=8,kO=typeof self=="object"?self:globalThis,Pbe=(t,e)=>{const n=(s,i)=>(t.set(i,s),s),r=s=>{if(t.has(s))return t.get(s);const[i,o]=e[s];switch(i){case E1:case TF:return n(o,s);case Mf:{const a=n([],s);for(const l of o)a.push(r(l));return a}case cx:{const a=n({},s);for(const[l,c]of o)a[r(l)]=r(c);return a}case qN:return n(new Date(o),s);case GN:{const{source:a,flags:l}=o;return n(new RegExp(a,l),s)}case YN:{const a=n(new Map,s);for(const[l,c]of o)a.set(r(l),r(c));return a}case KN:{const a=n(new Set,s);for(const l of o)a.add(r(l));return a}case NF:{const{name:a,message:l}=o;return n(new kO[a](l),s)}case _F:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new kO[i](o),s)};return r},EO=t=>Pbe(new Map,t)(0),bu="",{toString:Dbe}={},{keys:Lbe}=Object,zh=t=>{const e=typeof t;if(e!=="object"||!t)return[E1,e];const n=Dbe.call(t).slice(8,-1);switch(n){case"Array":return[Mf,bu];case"Object":return[cx,bu];case"Date":return[qN,bu];case"RegExp":return[GN,bu];case"Map":return[YN,bu];case"Set":return[KN,bu];case"DataView":return[Mf,n]}return n.includes("Array")?[Mf,n]:n.includes("Error")?[NF,n]:[cx,n]},M0=([t,e])=>t===E1&&(e==="function"||e==="symbol"),Bbe=(t,e,n,r)=>{const s=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},i=o=>{if(n.has(o))return n.get(o);let[a,l]=zh(o);switch(a){case E1:{let d=o;switch(l){case"bigint":a=_F,d=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return s([TF],o)}return s([a,d],o)}case Mf:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),s([l,[...f]],o)}const d=[],h=s([a,d],o);for(const f of o)d.push(i(f));return h}case cx:{if(l)switch(l){case"BigInt":return s([l,o.toString()],o);case"Boolean":case"Number":case"String":return s([l,o.valueOf()],o)}if(e&&"toJSON"in o)return i(o.toJSON());const d=[],h=s([a,d],o);for(const f of Lbe(o))(t||!M0(zh(o[f])))&&d.push([i(f),i(o[f])]);return h}case qN:return s([a,o.toISOString()],o);case GN:{const{source:d,flags:h}=o;return s([a,{source:d,flags:h}],o)}case YN:{const d=[],h=s([a,d],o);for(const[f,p]of o)(t||!(M0(zh(f))||M0(zh(p))))&&d.push([i(f),i(p)]);return h}case KN:{const d=[],h=s([a,d],o);for(const f of o)(t||!M0(zh(f)))&&d.push(i(f));return h}}const{message:c}=o;return s([a,{name:l,message:c}],o)};return i},CO=(t,{json:e,lossy:n}={})=>{const r=[];return Bbe(!(e||n),!!e,new Map,r)(t),r},Wd=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?EO(CO(t,e)):structuredClone(t):(t,e)=>EO(CO(t,e)),JN=function(t,e,n,r,s){const i=Ti(e);return AF(t)?i.call(s,t,n,r):!1},Ti=function(t){if(t==null)return Hbe;if(typeof t=="string")return Fbe(t);if(typeof t=="object")return $be(t);if(typeof t=="function")return QN(t);throw new Error("Expected function, string, or array as `test`")};function $be(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Ti(t[n]);return QN(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function Fbe(t){return QN(e);function e(n){return n.tagName===t}}function QN(t){return e;function e(n,r,s){return!!(AF(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function Hbe(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function AF(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const jF=Ti(function(t){return t.tagName==="audio"||t.tagName==="canvas"||t.tagName==="embed"||t.tagName==="iframe"||t.tagName==="img"||t.tagName==="math"||t.tagName==="object"||t.tagName==="picture"||t.tagName==="svg"||t.tagName==="video"}),Ube=/[ \t\n\f\r]/g;function km(t){return typeof t=="object"?t.type==="text"?SO(t.value):!1:SO(t)}function SO(t){return t.replace(Ube,"")===""}const gh=function(t){if(t==null)return qbe;if(typeof t=="function")return C1(t);if(typeof t=="object")return Array.isArray(t)?zbe(t):Vbe(t);if(typeof t=="string")return Wbe(t);throw new Error("Expected function, string, or object as test")};function zbe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=gh(t[n]);return C1(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function Vbe(t){const e=t;return C1(n);function n(r){const s=r;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function Wbe(t){return C1(e);function e(n){return n&&n.type===t}}function C1(t){return e;function e(n,r,s){return!!(Gbe(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function qbe(){return!0}function Gbe(t){return t!==null&&typeof t=="object"&&"type"in t}const Ybe=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],Kbe=["button","input","select","textarea"],Jbe=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],Qbe={},XN=gh(["comment","doctype"]);function Xbe(t,e){OF(t,{collapse:ixe((e||Qbe).newlines?rxe:sxe),whitespace:"normal"})}function OF(t,e){if("children"in t){const n={...e};return(t.type==="root"||RF(t))&&(n.before=!0,n.after=!0),n.whitespace=oxe(t,e),exe(t,n)}if(t.type==="text"){if(e.whitespace==="normal")return Zbe(t,e);e.whitespace==="nowrap"&&(t.value=e.collapse(t.value))}return{ignore:XN(t),stripAtStart:!1,remove:!1}}function Zbe(t,e){const n=e.collapse(t.value),r={ignore:!1,stripAtStart:!1,remove:!1};let s=0,i=n.length;return e.before&&TO(n.charAt(0))&&s++,s!==i&&TO(n.charAt(i-1))&&(e.after?i--:r.stripAtStart=!0),s===i?r.remove=!0:t.value=n.slice(s,i),r}function exe(t,e){let n=e.before;const r=e.after,s=t.children;let i=s.length,o=-1;for(;++o<i;){const a=OF(s[o],{...e,after:IF(s,o,r),before:n});a.remove?(s.splice(o,1),o--,i--):a.ignore||(n=a.stripAtStart),MF(s[o])&&(n=!1)}return{ignore:!1,stripAtStart:!!(n||r),remove:!1}}function IF(t,e,n){for(;++e<t.length;){const r=t[e];let s=txe(r);if(s===void 0&&"children"in r&&!nxe(r)&&(s=IF(r.children,-1)),typeof s=="boolean")return s}return n}function txe(t){if(t.type==="element"){if(MF(t))return!1;if(RF(t))return!0}else if(t.type==="text"){if(!km(t))return!1}else if(!XN(t))return!1}function MF(t){return jF(t)||JN(t,Kbe)}function RF(t){return JN(t,Ybe)}function nxe(t){return!!(t.type==="element"&&t.properties.hidden)||XN(t)||JN(t,Jbe)}function TO(t){return t===" "||t===`
`}function rxe(t){const e=/\r?\n|\r/.exec(t);return e?e[0]:" "}function sxe(){return" "}function ixe(t){return e;function e(n){return String(n).replace(/[\t\n\v\f\r ]+/g,t)}}function oxe(t,e){if("tagName"in t&&t.properties)switch(t.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return t.properties.wrap?"pre-wrap":"pre";case"td":case"th":return t.properties.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}return e.whitespace}function axe(t){return function(e){Xbe(e,t)}}const PF=[],lxe=!0,ux=!1,DF="skip";function LF(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const i=gh(s),o=r?-1:1;a(t,void 0,[])();function a(l,c,d){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=PF,m,g,x;if((!e||i(l,c,d[d.length-1]||void 0))&&(p=cxe(n(l,d)),p[0]===ux))return p;if("children"in l&&l.children){const b=l;if(b.children&&p[0]!==DF)for(g=(r?b.children.length:-1)+o,x=d.concat(b);g>-1&&g<b.children.length;){const v=b.children[g];if(m=a(v,g,x)(),m[0]===ux)return m;g=typeof m[1]=="number"?m[1]:g+o}}return p}}}function cxe(t){return Array.isArray(t)?t:typeof t=="number"?[lxe,t]:t==null?PF:[t]}function Uc(t,e,n,r){let s,i,o;typeof e=="function"&&typeof n!="function"?(i=void 0,o=e,s=n):(i=e,o=n,s=r),LF(t,i,a,s);function a(l,c){const d=c[c.length-1],h=d?d.children.indexOf(l):void 0;return o(l,h,d)}}const BF=FF("end"),$F=FF("start");function FF(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function HF(t){const e=$F(t),n=BF(t);if(e&&n)return{start:e,end:n}}function uxe(t,e){const n=e.properties||{},r=t.all(e),s={type:"link",url:t.resolve(String(n.href||"")||null),title:n.title?String(n.title):null,children:r};return t.patch(e,s),s}function dxe(t,e){t.baseFound||(t.frozenBaseUrl=String(e.properties&&e.properties.href||"")||void 0,t.baseFound=!0)}function hxe(t,e){const n={type:"blockquote",children:t.toFlow(t.all(e))};return t.patch(e,n),n}function fxe(t,e){const n={type:"break"};return t.patch(e,n),n}const NO=function(t,e,n){const r=gh(n);if(!t||!t.type||!t.children)throw new Error("Expected parent node");if(typeof e=="number"){if(e<0||e===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(e=t.children.indexOf(e),e<0)throw new Error("Expected child node or index");for(;++e<t.children.length;)if(r(t.children[e],e,t))return t.children[e]},_O=/\n/g,AO=/[\t ]+/g,fC=Ti("br"),jO=Ti(vxe),pxe=Ti("p"),OO=Ti("tr"),mxe=Ti(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",yxe,wxe]),UF=Ti(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function Em(t,e){const n={},r="children"in t?t.children:[],s=UF(t),i=WF(t,{whitespace:n.whitespace||"normal"}),o=[];(t.type==="text"||t.type==="comment")&&o.push(...VF(t,{breakBefore:!0,breakAfter:!0}));let a=-1;for(;++a<r.length;)o.push(...zF(r[a],t,{whitespace:i,breakBefore:a?void 0:s,breakAfter:a<r.length-1?fC(r[a+1]):s}));const l=[];let c;for(a=-1;++a<o.length;){const d=o[a];typeof d=="number"?c!==void 0&&d>c&&(c=d):d&&(c!==void 0&&c>-1&&l.push(`
`.repeat(c)||" "),c=-1,l.push(d))}return l.join("")}function zF(t,e,n){return t.type==="element"?gxe(t,e,n):t.type==="text"?n.whitespace==="normal"?VF(t,n):bxe(t):[]}function gxe(t,e,n){const r=WF(t,n),s=t.children||[];let i=-1,o=[];if(mxe(t))return o;let a,l;for(fC(t)||OO(t)&&NO(e,t,OO)?l=`
`:pxe(t)?(a=2,l=2):UF(t)&&(a=1,l=1);++i<s.length;)o=o.concat(zF(s[i],t,{whitespace:r,breakBefore:i?void 0:a,breakAfter:i<s.length-1?fC(s[i+1]):l}));return jO(t)&&NO(e,t,jO)&&o.push("	"),a&&o.unshift(a),l&&o.push(l),o}function VF(t,e){const n=String(t.value),r=[],s=[];let i=0;for(;i<=n.length;){_O.lastIndex=i;const l=_O.exec(n),c=l&&"index"in l?l.index:n.length;r.push(xxe(n.slice(i,c).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),i===0?e.breakBefore:!0,c===n.length?e.breakAfter:!0)),i=c+1}let o=-1,a;for(;++o<r.length;)r[o].charCodeAt(r[o].length-1)===8203||o<r.length-1&&r[o+1].charCodeAt(0)===8203?(s.push(r[o]),a=void 0):r[o]?(typeof a=="number"&&s.push(a),s.push(r[o]),a=0):(o===0||o===r.length-1)&&s.push(0);return s}function bxe(t){return[String(t.value)]}function xxe(t,e,n){const r=[];let s=0,i;for(;s<t.length;){AO.lastIndex=s;const o=AO.exec(t);i=o?o.index:t.length,!s&&!i&&o&&!e&&r.push(""),s!==i&&r.push(t.slice(s,i)),s=o?i+o[0].length:i}return s!==i&&!n&&r.push(""),r.join(" ")}function WF(t,e){if(t.type==="element"){const n=t.properties||{};switch(t.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}}return e.whitespace}function yxe(t){return!!(t.properties||{}).hidden}function vxe(t){return t.tagName==="td"||t.tagName==="th"}function wxe(t){return t.tagName==="dialog"&&!(t.properties||{}).open}function kxe(t){const e=String(t);let n=e.length;for(;n>0;){const r=e.codePointAt(n-1);if(r!==void 0&&(r===10||r===13))n--;else break}return e.slice(0,n)}const Ww="language-";function R0(t,e){const n=e.children;let r=-1,s,i;if(e.tagName==="pre")for(;++r<n.length;){const a=n[r];if(a.type==="element"&&a.tagName==="code"&&a.properties&&a.properties.className&&Array.isArray(a.properties.className)){s=a.properties.className;break}}if(s){for(r=-1;++r<s.length;)if(String(s[r]).slice(0,Ww.length)===Ww){i=String(s[r]).slice(Ww.length);break}}const o={type:"code",lang:i||null,meta:null,value:kxe(Em(e))};return t.patch(e,o),o}function Exe(t,e){const n={type:"html",value:"<!--"+e.value+"-->"};return t.patch(e,n),n}function qw(t,e){const r={type:"delete",children:t.all(e)};return t.patch(e,r),r}function ZN(t){let e=-1;if(t.length>1){for(;++e<t.length;)if(t[e].spread)return!0}return!1}function Cxe(t,e){const n=[],r=[];let s=-1;for(;++s<e.children.length;){const a=e.children[s];a.type==="element"&&a.tagName==="div"?n.push(...a.children):n.push(a)}let i={definitions:[],titles:[]};for(s=-1;++s<n.length;){const a=n[s];if(a.type==="element"&&a.tagName==="dt"){const l=n[s-1];l&&l.type==="element"&&l.tagName==="dd"&&(r.push(i),i={definitions:[],titles:[]}),i.titles.push(a)}else i.definitions.push(a)}r.push(i),s=-1;const o=[];for(;++s<r.length;){const a=[...IO(t,r[s].titles),...IO(t,r[s].definitions)];a.length>0&&o.push({type:"listItem",spread:a.length>1,checked:null,children:a})}if(o.length>0){const a={type:"list",ordered:!1,start:null,spread:ZN(o),children:o};return t.patch(e,a),a}}function IO(t,e){const n=t.all({type:"root",children:e}),r=t.toSpecificContent(n,Sxe);return r.length===0?[]:r.length===1?r[0].children:[{type:"list",ordered:!1,start:null,spread:ZN(r),children:r}]}function Sxe(){return{type:"listItem",spread:!1,checked:null,children:[]}}function P0(t,e){const r={type:"emphasis",children:t.all(e)};return t.patch(e,r),r}function e_(t){let e=0,n=t.length;for(;e<n&&t[e].type==="break";)e++;for(;n>e&&t[n-1].type==="break";)n--;return e===0&&n===t.length?t:t.slice(e,n)}function xu(t,e){const n=Number(e.tagName.charAt(1))||1,r=e_(t.all(e)),s={type:"heading",depth:n,children:r};return t.patch(e,s),s}function Txe(t,e){const n={type:"thematicBreak"};return t.patch(e,n),n}function Nxe(t,e){const n=e.properties||{},r=String(n.src||""),s=String(n.title||"");if(r&&s){const i={type:"link",title:null,url:t.resolve(r),children:[{type:"text",value:s}]};return t.patch(e,i),i}}function MO(t,e){const n=e.properties||{},r={type:"image",url:t.resolve(String(n.src||"")||null),title:n.title?String(n.title):null,alt:n.alt?String(n.alt):""};return t.patch(e,r),r}function Vh(t,e){const n={type:"inlineCode",value:Em(e)};return t.patch(e,n),n}function qF(t,e){const n=[],r=[],s=e||t.properties||{},i=GF(t),o=Math.min(Number.parseInt(String(s.size),10),0)||(s.multiple?4:1);let a=-1;for(;++a<i.length;){const d=i[a];d&&d.properties&&d.properties.selected&&n.push(d)}const l=n.length>0?n:i,c=Math.min(l.length,o);for(a=-1;++a<c;){const d=l[a],h=d.properties||{},f=Em(d),p=f||String(h.label||""),m=String(h.value||"")||f;r.push([m,p===m?void 0:p])}return r}function GF(t){const e=[];let n=-1;for(;++n<t.children.length;){const r=t.children[n];"children"in r&&Array.isArray(r.children)&&e.push(...GF(r)),r.type==="element"&&r.tagName==="option"&&(!r.properties||!r.properties.disabled)&&e.push(r)}return e}const _xe="[x]",Axe="[ ]";function jxe(t,e){const n=e.properties||{},r=String(n.value||n.placeholder||"");if(n.disabled||n.type==="hidden"||n.type==="file")return;if(n.type==="checkbox"||n.type==="radio"){const l={type:"text",value:n.checked?t.options.checked||_xe:t.options.unchecked||Axe};return t.patch(e,l),l}if(n.type==="image"){const l=n.alt||r;if(l){const c={type:"image",url:t.resolve(String(n.src||"")||null),title:String(n.title||"")||null,alt:String(l)};return t.patch(e,c),c}return}let s=[];if(r)s=[[r,void 0]];else if(n.type!=="button"&&n.type!=="file"&&n.type!=="password"&&n.type!=="reset"&&n.type!=="submit"&&n.list){const l=String(n.list),c=t.elementById.get(l);c&&c.tagName==="datalist"&&(s=qF(c,n))}if(s.length===0)return;if(n.type==="password"&&(s[0]=["".repeat(s[0][0].length),void 0]),n.type==="email"||n.type==="url"){const l=[];let c=-1;for(;++c<s.length;){const d=t.resolve(s[c][0]),h={type:"link",title:null,url:n.type==="email"?"mailto:"+d:d,children:[{type:"text",value:s[c][1]||d}]};l.push(h),c!==s.length-1&&l.push({type:"text",value:", "})}return l}const i=[];let o=-1;for(;++o<s.length;)i.push(s[o][1]?s[o][1]+" ("+s[o][0]+")":s[o][0]);const a={type:"text",value:i.join(", ")};return t.patch(e,a),a}const Oxe={}.hasOwnProperty;function Ixe(t,e){const n=t.type==="element"&&Oxe.call(t.properties,e)&&t.properties[e];return n!=null&&n!==!1}const Mxe=new Set(["pingback","prefetch","stylesheet"]);function Rxe(t){if(t.type!=="element"||t.tagName!=="link")return!1;if(t.properties.itemProp)return!0;const e=t.properties.rel;let n=-1;if(!Array.isArray(e)||e.length===0)return!1;for(;++n<e.length;)if(!Mxe.has(String(e[n])))return!1;return!0}const Pxe=Ti(["a","abbr","area","b","bdi","bdo","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","keygen","label","map","mark","meter","noscript","output","progress","q","ruby","s","samp","script","select","small","span","strong","sub","sup","template","textarea","time","u","var","wbr"]),Dxe=Ti("meta");function YF(t){return!!(t.type==="text"||Pxe(t)||jF(t)||Rxe(t)||Dxe(t)&&Ixe(t,"itemProp"))}function Gw(t,e){const{rest:n,checkbox:r}=JF(e),s=r?!!r.properties.checked:null,i=KF(n),o=t.toFlow(t.all(n)),a={type:"listItem",spread:i,checked:s,children:o};return t.patch(e,a),a}function KF(t){let e=-1,n=!1;for(;++e<t.children.length;){const r=t.children[e];if(r.type==="element"){if(YF(r))continue;if(r.tagName==="p"||n||KF(r))return!0;n=!0}}return!1}function JF(t){const e=t.children[0];if(e&&e.type==="element"&&e.tagName==="input"&&e.properties&&(e.properties.type==="checkbox"||e.properties.type==="radio")){const n={...t,children:t.children.slice(1)};return{checkbox:e,rest:n}}if(e&&e.type==="element"&&e.tagName==="p"){const{checkbox:n,rest:r}=JF(e);if(n){const s={...t,children:[r,...t.children.slice(1)]};return{checkbox:n,rest:s}}}return{checkbox:void 0,rest:t}}function Yw(t,e){const n=e.tagName==="ol",r=t.toSpecificContent(t.all(e),Lxe);let s=null;n&&(s=e.properties&&e.properties.start?Number.parseInt(String(e.properties.start),10):1);const i={type:"list",ordered:n,start:s,spread:ZN(r),children:r};return t.patch(e,i),i}function Lxe(){return{type:"listItem",spread:!1,checked:null,children:[]}}const Bxe={};function S1(t,e){const n=Bxe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return QF(t,r,s)}function QF(t,e,n){if($xe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return RO(t.children,e,n)}return Array.isArray(t)?RO(t,e,n):""}function RO(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=QF(t[s],e,n);return r.join("")}function $xe(t){return!!(t&&typeof t=="object")}const XF=gh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function T1(t){let e=-1;for(;++e<t.length;){const n=t[e];if(!tH(n)||"children"in n&&T1(n.children))return!0}return!1}function ZF(t){return eH(t,e,function(n){return n});function e(n){return n.every(function(r){return r.type==="text"?km(r.value):!1})?[]:[{type:"paragraph",children:e_(n)}]}}function Fxe(t){return eH(t.children,e,n);function e(r){const s=Kw(t);return s.children=r,[s]}function n(r){if("children"in r&&"children"in t){const s=Kw(t),i=Kw(r);return s.children=r.children,i.children.push(s),i}return{...r}}}function eH(t,e,n){const r=Hxe(t),s=[];let i=[],o=-1;for(;++o<r.length;){const a=r[o];tH(a)?i.push(a):(i.length>0&&(s.push(...e(i)),i=[]),s.push(n(a)))}return i.length>0&&(s.push(...e(i)),i=[]),s}function Hxe(t){const e=[];let n=-1;for(;++n<t.length;){const r=t[n];(r.type==="delete"||r.type==="link")&&T1(r.children)?e.push(...Fxe(r)):e.push(r)}return e}function tH(t){const e=t.data&&t.data.hName;return e?YF({type:"element",tagName:e,properties:{},children:[]}):XF(t)}function Kw(t){return Wd({...t,children:[]})}function PO(t,e){const n=e.properties||{},r=e.tagName==="video"?String(n.poster||""):"";let s=String(n.src||""),i=-1,o=!1,a=t.all(e);if(Uc({type:"root",children:a},function(h){if(h.type==="link")return o=!0,ux}),o||T1(a))return a;for(;!s&&++i<e.children.length;){const h=e.children[i];h.type==="element"&&h.tagName==="source"&&h.properties&&(s=String(h.properties.src||""))}if(r){const h={type:"image",title:null,url:t.resolve(r),alt:S1(a)};t.patch(e,h),a=[h]}const c=a,d={type:"link",title:n.title?String(n.title):null,url:t.resolve(s),children:c};return t.patch(e,d),d}function DO(t,e){const n=e_(t.all(e));if(n.length>0){const r={type:"paragraph",children:n};return t.patch(e,r),r}}const Uxe=['"'];function zxe(t,e){const n=t.options.quotes||Uxe;t.qNesting++;const r=t.all(e);t.qNesting--;const s=n[t.qNesting%n.length],i=r[0],o=r[r.length-1],a=s.charAt(0),l=s.length>1?s.charAt(1):s;return i&&i.type==="text"?i.value=a+i.value:r.unshift({type:"text",value:a}),o&&o.type==="text"?o.value+=l:r.push({type:"text",value:l}),r}function Vxe(t,e){let n=t.all(e);(t.options.document||T1(n))&&(n=ZF(n));const r={type:"root",children:n};return t.patch(e,r),r}function Wxe(t,e){const n=qF(e);let r=-1;const s=[];for(;++r<n.length;){const i=n[r];s.push(i[1]?i[1]+" ("+i[0]+")":i[0])}if(s.length>0){const i={type:"text",value:s.join(", ")};return t.patch(e,i),i}}function LO(t,e){const r={type:"strong",children:t.all(e)};return t.patch(e,r),r}function BO(t,e){const r={type:"tableCell",children:t.all(e)};if(t.patch(e,r),e.properties){const s=e.properties.rowSpan,i=e.properties.colSpan;if(s||i){const o=r.data||(r.data={});s&&(o.hastUtilToMdastTemporaryRowSpan=s),i&&(o.hastUtilToMdastTemporaryColSpan=i)}}return r}function qxe(t,e){const r={type:"tableRow",children:t.toSpecificContent(t.all(e),Gxe)};return t.patch(e,r),r}function Gxe(){return{type:"tableCell",children:[]}}function Yxe(t,e){if(t.inTable){const c={type:"text",value:Em(e)};return t.patch(e,c),c}t.inTable=!0;const{align:n,headless:r}=Kxe(e),s=t.toSpecificContent(t.all(e),$O);r&&s.unshift($O());let i=-1;for(;++i<s.length;){const c=s[i],d=t.toSpecificContent(c.children,Jxe);c.children=d}let o=1;for(i=-1;++i<s.length;){const c=s[i].children;let d=-1;for(;++d<c.length;){const h=c[d];if(h.data){const f=h.data,p=Number.parseInt(String(f.hastUtilToMdastTemporaryColSpan),10)||1,m=Number.parseInt(String(f.hastUtilToMdastTemporaryRowSpan),10)||1;if(p>1||m>1){let g=i-1;for(;++g<i+m;){let x=d-1;for(;++x<d+p&&s[g];){const b=[];(g!==i||x!==d)&&b.push({type:"tableCell",children:[]}),s[g].children.splice(x,0,...b)}}}"hastUtilToMdastTemporaryColSpan"in h.data&&delete h.data.hastUtilToMdastTemporaryColSpan,"hastUtilToMdastTemporaryRowSpan"in h.data&&delete h.data.hastUtilToMdastTemporaryRowSpan,Object.keys(h.data).length===0&&delete h.data}}c.length>o&&(o=c.length)}for(i=-1;++i<s.length;){const c=s[i].children;let d=c.length-1;for(;++d<o;)c.push({type:"tableCell",children:[]})}let a=n.length-1;for(;++a<o;)n.push(null);t.inTable=!1;const l={type:"table",align:n,children:s};return t.patch(e,l),l}function Kxe(t){const e={align:[null],headless:!0};let n=0,r=0;return Uc(t,function(s){if(s.type==="element"){if(s.tagName==="table"&&t!==s)return DF;if((s.tagName==="th"||s.tagName==="td")&&s.properties){if(!e.align[r]){const i=String(s.properties.align||"")||null;(i==="center"||i==="left"||i==="right"||i===null)&&(e.align[r]=i)}e.headless&&n<2&&s.tagName==="th"&&(e.headless=!1),r++}else s.tagName==="thead"?e.headless=!1:s.tagName==="tr"&&(n++,r=0)}}),e}function Jxe(){return{type:"tableCell",children:[]}}function $O(){return{type:"tableRow",children:[]}}function Qxe(t,e){const n={type:"text",value:e.value};return t.patch(e,n),n}function Xxe(t,e){const n={type:"text",value:Em(e)};return t.patch(e,n),n}function Zxe(t,e){const n={type:"text",value:""};return t.patch(e,n),n}const eye={comment:Exe,doctype:Ue,root:Vxe,text:Qxe},tye={applet:Ue,area:Ue,basefont:Ue,bgsound:Ue,caption:Ue,col:Ue,colgroup:Ue,command:Ue,content:Ue,datalist:Ue,dialog:Ue,element:Ue,embed:Ue,frame:Ue,frameset:Ue,isindex:Ue,keygen:Ue,link:Ue,math:Ue,menu:Ue,menuitem:Ue,meta:Ue,nextid:Ue,noembed:Ue,noframes:Ue,optgroup:Ue,option:Ue,param:Ue,script:Ue,shadow:Ue,source:Ue,spacer:Ue,style:Ue,svg:Ue,template:Ue,title:Ue,track:Ue,abbr:He,acronym:He,bdi:He,bdo:He,big:He,blink:He,button:He,canvas:He,cite:He,data:He,details:He,dfn:He,font:He,ins:He,label:He,map:He,marquee:He,meter:He,nobr:He,noscript:He,object:He,output:He,progress:He,rb:He,rbc:He,rp:He,rt:He,rtc:He,ruby:He,slot:He,small:He,span:He,sup:He,sub:He,tbody:He,tfoot:He,thead:He,time:He,address:nn,article:nn,aside:nn,body:nn,center:nn,div:nn,fieldset:nn,figcaption:nn,figure:nn,form:nn,footer:nn,header:nn,hgroup:nn,html:nn,legend:nn,main:nn,multicol:nn,nav:nn,picture:nn,section:nn,a:uxe,audio:PO,b:LO,base:dxe,blockquote:hxe,br:fxe,code:Vh,dir:Yw,dl:Cxe,dt:Gw,dd:Gw,del:qw,em:P0,h1:xu,h2:xu,h3:xu,h4:xu,h5:xu,h6:xu,hr:Txe,i:P0,iframe:Nxe,img:MO,image:MO,input:jxe,kbd:Vh,li:Gw,listing:R0,mark:P0,ol:Yw,p:DO,plaintext:R0,pre:R0,q:zxe,s:qw,samp:Vh,select:Wxe,strike:qw,strong:LO,summary:DO,table:Yxe,td:BO,textarea:Xxe,th:BO,tr:qxe,tt:Vh,u:P0,ul:Yw,var:Vh,video:PO,wbr:Zxe,xmp:R0};function He(t,e){return t.all(e)}function nn(t,e){return t.toFlow(t.all(e))}function Ue(){}const FO={}.hasOwnProperty;function nye(t){return{all:rye,baseFound:!1,elementById:new Map,frozenBaseUrl:void 0,handlers:{...tye,...t.handlers},inTable:!1,nodeHandlers:{...eye,...t.nodeHandlers},one:sye,options:t,patch:iye,qNesting:0,resolve:oye,toFlow:aye,toSpecificContent:lye}}function rye(t){const e=t.children||[],n=[];let r=-1;for(;++r<e.length;){const s=e[r],i=this.one(s,t);Array.isArray(i)?n.push(...i):i&&n.push(i)}return n}function sye(t,e){if(t.type==="element"){if(t.properties&&t.properties.dataMdast==="ignore")return;if(FO.call(this.handlers,t.tagName))return this.handlers[t.tagName](this,t,e)||void 0}else if(FO.call(this.nodeHandlers,t.type))return this.nodeHandlers[t.type](this,t,e)||void 0;if("value"in t&&typeof t.value=="string"){const n={type:"text",value:t.value};return this.patch(t,n),n}if("children"in t)return this.all(t)}function iye(t,e){t.position&&(e.position=HF(t))}function oye(t){const e=this.frozenBaseUrl;return t==null?"":e?String(new URL(t,e)):t}function aye(t){return ZF(t)}function lye(t,e){const n=e(),r=[];let s=[],i=-1;for(;++i<t.length;){const a=t[i];if(o(a))s.length>0&&(a.children.unshift(...s),s=[]),r.push(a);else{const l=a;s.push(l)}}if(s.length>0){let a=r[r.length-1];a||(a=e(),r.push(a)),a.children.push(...s),s=[]}return r;function o(a){return a.type===n.type}}const cye={};function HO(t,e){const n=Wd(t),r=e||cye,s=axe({newlines:r.newlines===!0}),i=nye(r);let o;s(n),Uc(n,function(l){if(l&&l.type==="element"&&l.properties){const c=String(l.properties.id||"")||void 0;c&&!i.elementById.has(c)&&i.elementById.set(c,l)}});const a=i.one(n,void 0);return a?Array.isArray(a)?o={type:"root",children:a}:o=a:o={type:"root",children:[]},Uc(o,function(l,c,d){if(l.type==="text"&&c!==void 0&&d){const h=d.children[c-1];if(h&&h.type===l.type)return h.value+=l.value,d.children.splice(c,1),h.position&&l.position&&(h.position.end=l.position.end),c-1;if(l.value=l.value.replace(/[\t ]*(\r?\n|\r)[\t ]*/,"$1"),d&&(d.type==="heading"||d.type==="paragraph"||d.type==="root")&&(c||(l.value=l.value.replace(/^[\t ]+/,"")),c===d.children.length-1&&(l.value=l.value.replace(/[\t ]+$/,""))),!l.value)return d.children.splice(c,1),c}}),o}const UO={document:!0};function uye(t,e){return t&&"run"in t?async function(n,r){const s=HO(n,{...UO,...e});await t.run(s,r)}:function(n){return HO(n,{...UO,...t})}}function dx(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}const ur=jl(/[A-Za-z]/),Xn=jl(/[\dA-Za-z]/),dye=jl(/[#-'*+\--9=?A-Z^-~]/);function hx(t){return t!==null&&(t<32||t===127)}const pC=jl(/\d/),hye=jl(/[\dA-Fa-f]/),fye=jl(/[!-/:-@[-`{-~]/);function Te(t){return t!==null&&t<-2}function xt(t){return t!==null&&(t<0||t===32)}function Ge(t){return t===-2||t===-1||t===32}const N1=jl(new RegExp("\\p{P}|\\p{S}","u")),zc=jl(/\s/);function jl(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function pye(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function mye(t,e,n){const s=gh((n||{}).ignore||[]),i=gye(e);let o=-1;for(;++o<i.length;)LF(t,"text",a);function a(c,d){let h=-1,f;for(;++h<d.length;){const p=d[h],m=f?f.children:void 0;if(s(p,m?m.indexOf(p):void 0,f))return;f=p}if(f)return l(c,d)}function l(c,d){const h=d[d.length-1],f=i[o][0],p=i[o][1];let m=0;const x=h.children.indexOf(c);let b=!1,v=[];f.lastIndex=0;let w=f.exec(c.value);for(;w;){const S=w.index,E={index:w.index,input:w.input,stack:[...d,c]};let C=p(...w,E);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?f.lastIndex=S+1:(m!==S&&v.push({type:"text",value:c.value.slice(m,S)}),Array.isArray(C)?v.push(...C):C&&v.push(C),m=S+w[0].length,b=!0),!f.global)break;w=f.exec(c.value)}return b?(m<c.value.length&&v.push({type:"text",value:c.value.slice(m)}),h.children.splice(x,1,...v)):v=[c],x+v.length}}function gye(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([bye(s[0]),xye(s[1])])}return e}function bye(t){return typeof t=="string"?new RegExp(pye(t),"g"):t}function xye(t){return typeof t=="function"?t:function(){return t}}const Jw="phrasing",Qw=["autolink","link","image","label"];function yye(){return{transforms:[Tye],enter:{literalAutolink:wye,literalAutolinkEmail:Xw,literalAutolinkHttp:Xw,literalAutolinkWww:Xw},exit:{literalAutolink:Sye,literalAutolinkEmail:Cye,literalAutolinkHttp:kye,literalAutolinkWww:Eye}}}function vye(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Jw,notInConstruct:Qw},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Jw,notInConstruct:Qw},{character:":",before:"[ps]",after:"\\/",inConstruct:Jw,notInConstruct:Qw}]}}function wye(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Xw(t){this.config.enter.autolinkProtocol.call(this,t)}function kye(t){this.config.exit.autolinkProtocol.call(this,t)}function Eye(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Cye(t){this.config.exit.autolinkEmail.call(this,t)}function Sye(t){this.exit(t)}function Tye(t){mye(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Nye],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),_ye]],{ignore:["link","linkReference"]})}function Nye(t,e,n,r,s){let i="";if(!nH(s)||(/^w/i.test(e)&&(n=e+n,e="",i="http://"),!Aye(n)))return!1;const o=jye(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:i+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function _ye(t,e,n,r){return!nH(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Aye(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function jye(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=dx(t,"(");let i=dx(t,")");for(;r!==-1&&s>i;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[t,n]}function nH(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||zc(n)||N1(n))&&(!e||n!==47)}function di(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}rH.peek=$ye;function Oye(){this.buffer()}function Iye(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Mye(){this.buffer()}function Rye(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Pye(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=di(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Dye(t){this.exit(t)}function Lye(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=di(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Bye(t){this.exit(t)}function $ye(){return"["}function rH(t,e,n,r){const s=n.createTracker(r);let i=s.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return i+=s.move(n.safe(n.associationId(t),{after:"]",before:i})),a(),o(),i+=s.move("]"),i}function Fye(){return{enter:{gfmFootnoteCallString:Oye,gfmFootnoteCall:Iye,gfmFootnoteDefinitionLabelString:Mye,gfmFootnoteDefinition:Rye},exit:{gfmFootnoteCallString:Pye,gfmFootnoteCall:Dye,gfmFootnoteDefinitionLabelString:Lye,gfmFootnoteDefinition:Bye}}}function Hye(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:rH},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,i,o){const a=i.createTracker(o);let l=a.move("[^");const c=i.enter("footnoteDefinition"),d=i.enter("label");return l+=a.move(i.safe(i.associationId(r),{before:l,after:"]"})),d(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+i.indentLines(i.containerFlow(r,a.current()),e?sH:Uye))),c(),l}}function Uye(t,e,n){return e===0?t:sH(t,e,n)}function sH(t,e,n){return(n?"":"    ")+t}const zye=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];iH.peek=Yye;function Vye(){return{canContainEols:["delete"],enter:{strikethrough:qye},exit:{strikethrough:Gye}}}function Wye(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:zye}],handlers:{delete:iH}}}function qye(t){this.enter({type:"delete",children:[]},t)}function Gye(t){this.exit(t)}function iH(t,e,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let o=s.move("~~");return o+=n.containerPhrasing(t,{...s.current(),before:o,after:"~"}),o+=s.move("~~"),i(),o}function Yye(){return"~"}function Kye(t){return t.length}function Jye(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||Kye,i=[],o=[],a=[],l=[];let c=0,d=-1;for(;++d<t.length;){const g=[],x=[];let b=-1;for(t[d].length>c&&(c=t[d].length);++b<t[d].length;){const v=Qye(t[d][b]);if(n.alignDelimiters!==!1){const w=s(v);x[b]=w,(l[b]===void 0||w>l[b])&&(l[b]=w)}g.push(v)}o[d]=g,a[d]=x}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<c;)i[h]=zO(r[h]);else{const g=zO(r);for(;++h<c;)i[h]=g}h=-1;const f=[],p=[];for(;++h<c;){const g=i[h];let x="",b="";g===99?(x=":",b=":"):g===108?x=":":g===114&&(b=":");let v=n.alignDelimiters===!1?1:Math.max(1,l[h]-x.length-b.length);const w=x+"-".repeat(v)+b;n.alignDelimiters!==!1&&(v=x.length+v+b.length,v>l[h]&&(l[h]=v),p[h]=v),f[h]=w}o.splice(1,0,f),a.splice(1,0,p),d=-1;const m=[];for(;++d<o.length;){const g=o[d],x=a[d];h=-1;const b=[];for(;++h<c;){const v=g[h]||"";let w="",S="";if(n.alignDelimiters!==!1){const E=l[h]-(x[h]||0),C=i[h];C===114?w=" ".repeat(E):C===99?E%2?(w=" ".repeat(E/2+.5),S=" ".repeat(E/2-.5)):(w=" ".repeat(E/2),S=w):S=" ".repeat(E)}n.delimiterStart!==!1&&!h&&b.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||h)&&b.push(" "),n.alignDelimiters!==!1&&b.push(w),b.push(v),n.alignDelimiters!==!1&&b.push(S),n.padding!==!1&&b.push(" "),(n.delimiterEnd!==!1||h!==c-1)&&b.push("|")}m.push(n.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return m.join(`
`)}function Qye(t){return t==null?"":String(t)}function zO(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}const VO={}.hasOwnProperty;function oH(t,e){const n=e||{};function r(s,...i){let o=r.invalid;const a=r.handlers;if(s&&VO.call(s,t)){const l=String(s[t]);o=VO.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,s,...i)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Xye={}.hasOwnProperty;function aH(t,e){let n=-1,r;if(e.extensions)for(;++n<e.extensions.length;)aH(t,e.extensions[n]);for(r in e)if(Xye.call(e,r))switch(r){case"extensions":break;case"unsafe":{WO(t[r],e[r]);break}case"join":{WO(t[r],e[r]);break}case"handlers":{Zye(t[r],e[r]);break}default:t.options[r]=e[r]}return t}function WO(t,e){e&&t.push(...e)}function Zye(t,e){e&&Object.assign(t,e)}function e1e(t,e,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const o=n.indentLines(n.containerFlow(t,i.current()),t1e);return s(),o}function t1e(t,e,n){return">"+(n?"":" ")+t}function lH(t,e){return qO(t,e.inConstruct,!0)&&!qO(t,e.notInConstruct,!1)}function qO(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function GO(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&lH(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function n1e(t,e){const n=String(t);let r=n.indexOf(e),s=r,i=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++i>o&&(o=i):i=1,s=r+e.length,r=n.indexOf(e,s);return o}function mC(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function r1e(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function s1e(t,e,n,r){const s=r1e(n),i=t.value||"",o=s==="`"?"GraveAccent":"Tilde";if(mC(t,n)){const h=n.enter("codeIndented"),f=n.indentLines(i,i1e);return h(),f}const a=n.createTracker(r),l=s.repeat(Math.max(n1e(i,s)+1,3)),c=n.enter("codeFenced");let d=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);d+=a.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);d+=a.move(" "),d+=a.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...a.current()})),h()}return d+=a.move(`
`),i&&(d+=a.move(i+`
`)),d+=a.move(l),c(),d}function i1e(t,e,n){return(n?"":"    ")+t}function t_(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function o1e(t,e,n,r){const s=t_(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(t.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),o(),c}function a1e(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function gl(t){return"&#x"+t.toString(16).toUpperCase()+";"}function qd(t){if(t===null||xt(t)||zc(t))return 1;if(N1(t))return 2}function fx(t,e,n){const r=qd(t),s=qd(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}cH.peek=l1e;function cH(t,e,n,r){const s=a1e(n),i=n.enter("emphasis"),o=n.createTracker(r),a=o.move(s);let l=o.move(n.containerPhrasing(t,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),d=fx(r.before.charCodeAt(r.before.length-1),c,s);d.inside&&(l=gl(c)+l.slice(1));const h=l.charCodeAt(l.length-1),f=fx(r.after.charCodeAt(0),h,s);f.inside&&(l=l.slice(0,-1)+gl(h));const p=o.move(s);return i(),n.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},a+l+p}function l1e(t,e,n){return n.options.emphasis||"*"}function uH(t,e){let n=!1;return Uc(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,ux}),!!((!t.depth||t.depth<3)&&S1(t)&&(e.options.setext||n))}function c1e(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),i=n.createTracker(r);if(uH(t,n)){const d=n.enter("headingSetext"),h=n.enter("phrasing"),f=n.containerPhrasing(t,{...i.current(),before:`
`,after:`
`});return h(),d(),f+`
`+(s===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(s),a=n.enter("headingAtx"),l=n.enter("phrasing");i.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(c)&&(c=gl(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}dH.peek=u1e;function dH(t){return t.value||""}function u1e(){return"<"}hH.peek=d1e;function hH(t,e,n,r){const s=t_(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(t.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),c+=l.move(")"),o(),c}function d1e(){return"!"}fH.peek=h1e;function fH(t,e,n,r){const s=t.referenceType,i=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=d,i(),s==="full"||!c||c!==h?l+=a.move(h+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function h1e(){return"!"}pH.peek=f1e;function pH(t,e,n){let r=t.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const o=n.unsafe[i],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return s+r+s}function f1e(){return"`"}function mH(t,e){const n=S1(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}gH.peek=p1e;function gH(t,e,n,r){const s=t_(n),i=s==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(mH(t,n)){const d=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=d,h}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${i}`),c+=o.move(" "+s),c+=o.move(n.safe(t.title,{before:c,after:s,...o.current()})),c+=o.move(s),l()),c+=o.move(")"),a(),c}function p1e(t,e,n){return mH(t,n)?"<":"["}bH.peek=m1e;function bH(t,e,n,r){const s=t.referenceType,i=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=d,i(),s==="full"||!c||c!==h?l+=a.move(h+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function m1e(){return"["}function n_(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function g1e(t){const e=n_(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function b1e(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function xH(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function x1e(t,e,n,r){const s=n.enter("list"),i=n.bulletCurrent;let o=t.ordered?b1e(n):n_(n);const a=t.ordered?o==="."?")":".":g1e(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),xH(n)===o&&d){let h=-1;for(;++h<t.children.length;){const f=t.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=i,s(),c}function y1e(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function v1e(t,e,n,r){const s=y1e(n);let i=n.bulletCurrent||n_(n);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let o=i.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(i+" ".repeat(o-i.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),d);return l(),c;function d(h,f,p){return f?(p?"":" ".repeat(o))+h:(p?i:i+" ".repeat(o-i.length))+h}}function w1e(t,e,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),o=n.containerPhrasing(t,r);return i(),s(),o}function k1e(t,e,n,r){return(t.children.some(function(o){return XF(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function E1e(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}yH.peek=C1e;function yH(t,e,n,r){const s=E1e(n),i=n.enter("strong"),o=n.createTracker(r),a=o.move(s+s);let l=o.move(n.containerPhrasing(t,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),d=fx(r.before.charCodeAt(r.before.length-1),c,s);d.inside&&(l=gl(c)+l.slice(1));const h=l.charCodeAt(l.length-1),f=fx(r.after.charCodeAt(0),h,s);f.inside&&(l=l.slice(0,-1)+gl(h));const p=o.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},a+l+p}function C1e(t,e,n){return n.options.strong||"*"}function S1e(t,e,n,r){return n.safe(t.value,r)}function T1e(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function N1e(t,e,n){const r=(xH(n)+(n.options.ruleSpaces?" ":"")).repeat(T1e(n));return n.options.ruleSpaces?r.slice(0,-1):r}const r_={blockquote:e1e,break:GO,code:s1e,definition:o1e,emphasis:cH,hardBreak:GO,heading:c1e,html:dH,image:hH,imageReference:fH,inlineCode:pH,link:gH,linkReference:bH,list:x1e,listItem:v1e,paragraph:w1e,root:k1e,strong:yH,text:S1e,thematicBreak:N1e},_1e=[A1e];function A1e(t,e,n,r){if(e.type==="code"&&mC(e,r)&&(t.type==="list"||t.type===e.type&&mC(t,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===e.type||e.type==="definition"||e.type==="heading"&&uH(e,r))?void 0:n.spread?1:0}const Fl=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],j1e=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Fl},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Fl},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Fl},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Fl},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Fl},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Fl},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Fl},{atBreak:!0,character:"~"}],YO=document.createElement("i");function s_(t){const e="&"+t+";";YO.innerHTML=e;const n=YO.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function vH(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const O1e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function wH(t){return t.replace(O1e,I1e)}function I1e(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return vH(n.slice(i?2:1),i?16:10)}return s_(n)||t}function M1e(t){return t.label||!t.identifier?t.label||"":wH(t.identifier)}function R1e(t){if(!t._compiled){const e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function P1e(t,e,n){const r=e.indexStack,s=t.children||[],i=[];let o=-1,a=n.before,l;r.push(-1);let c=e.createTracker(n);for(;++o<s.length;){const d=s[o];let h;if(r[r.length-1]=o,o+1<s.length){let m=e.handle.handlers[s[o+1].type];m&&m.peek&&(m=m.peek),h=m?m(s[o+1],t,e,{before:"",after:"",...c.current()}).charAt(0):""}else h=n.after;i.length>0&&(a==="\r"||a===`
`)&&d.type==="html"&&(i[i.length-1]=i[i.length-1].replace(/(\r?\n|\r)$/," "),a=" ",c=e.createTracker(n),c.move(i.join("")));let f=e.handle(d,t,e,{...c.current(),after:h,before:a});l&&l===f.slice(0,1)&&(f=gl(l.charCodeAt(0))+f.slice(1));const p=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,l=void 0,p&&(i.length>0&&p.before&&a===i[i.length-1].slice(-1)&&(i[i.length-1]=i[i.length-1].slice(0,-1)+gl(a.charCodeAt(0))),p.after&&(l=h)),c.move(f),i.push(f),a=f.slice(-1)}return r.pop(),i.join("")}function D1e(t,e,n){const r=e.indexStack,s=t.children||[],i=e.createTracker(n),o=[];let a=-1;for(r.push(-1);++a<s.length;){const l=s[a];r[r.length-1]=a,o.push(i.move(e.handle(l,t,e,{before:`
`,after:`
`,...i.current()}))),l.type!=="list"&&(e.bulletLastUsed=void 0),a<s.length-1&&o.push(i.move(L1e(l,s[a+1],t,e)))}return r.pop(),o.join("")}function L1e(t,e,n,r){let s=r.join.length;for(;s--;){const i=r.join[s](t,e,n,r);if(i===!0||i===1)break;if(typeof i=="number")return`
`.repeat(1+i);if(i===!1)return`

<!---->

`}return`

`}const B1e=/\r?\n|\r/g;function $1e(t,e){const n=[];let r=0,s=0,i;for(;i=B1e.exec(t);)o(t.slice(r,i.index)),n.push(i[0]),r=i.index+i[0].length,s++;return o(t.slice(r)),n.join("");function o(a){n.push(e(a,s,!a))}}function F1e(t,e,n){const r=(n.before||"")+(e||"")+(n.after||""),s=[],i=[],o={};let a=-1;for(;++a<t.unsafe.length;){const d=t.unsafe[a];if(!lH(t.stack,d))continue;const h=t.compilePattern(d);let f;for(;f=h.exec(r);){const p="before"in d||!!d.atBreak,m="after"in d,g=f.index+(p?f[1].length:0);s.includes(g)?(o[g].before&&!p&&(o[g].before=!1),o[g].after&&!m&&(o[g].after=!1)):(s.push(g),o[g]={before:p,after:m})}}s.sort(H1e);let l=n.before?n.before.length:0;const c=r.length-(n.after?n.after.length:0);for(a=-1;++a<s.length;){const d=s[a];d<l||d>=c||d+1<c&&s[a+1]===d+1&&o[d].after&&!o[d+1].before&&!o[d+1].after||s[a-1]===d-1&&o[d].before&&!o[d-1].before&&!o[d-1].after||(l!==d&&i.push(KO(r.slice(l,d),"\\")),l=d,/[!-/:-@[-`{-~]/.test(r.charAt(d))&&(!n.encode||!n.encode.includes(r.charAt(d)))?i.push("\\"):(i.push(gl(r.charCodeAt(d))),l++))}return i.push(KO(r.slice(l,c),n.after)),i.join("")}function H1e(t,e){return t-e}function KO(t,e){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],s=[],i=t+e;let o=-1,a=0,l;for(;l=n.exec(i);)r.push(l.index);for(;++o<r.length;)a!==r[o]&&s.push(t.slice(a,r[o])),s.push("\\"),a=r[o];return s.push(t.slice(a)),s.join("")}function U1e(t){const e=t||{},n=e.now||{};let r=e.lineShift||0,s=n.line||1,i=n.column||1;return{move:l,current:o,shift:a};function o(){return{now:{line:s,column:i},lineShift:r}}function a(c){r+=c}function l(c){const d=c||"",h=d.split(/\r?\n|\r/g),f=h[h.length-1];return s+=h.length-1,i=h.length===1?i+f.length:1+f.length+r,d}}function z1e(t,e){const n=e||{},r={associationId:M1e,containerPhrasing:G1e,containerFlow:Y1e,createTracker:U1e,compilePattern:R1e,enter:i,handlers:{...r_},handle:void 0,indentLines:$1e,indexStack:[],join:[..._1e],options:{},safe:K1e,stack:[],unsafe:[...j1e]};aH(r,n),r.options.tightDefinitions&&r.join.push(q1e),r.handle=oH("type",{invalid:V1e,unknown:W1e,handlers:r.handlers});let s=r.handle(t,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return s&&s.charCodeAt(s.length-1)!==10&&s.charCodeAt(s.length-1)!==13&&(s+=`
`),s;function i(o){return r.stack.push(o),a;function a(){r.stack.pop()}}}function V1e(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function W1e(t){const e=t;throw new Error("Cannot handle unknown node `"+e.type+"`")}function q1e(t,e){if(t.type==="definition"&&t.type===e.type)return 0}function G1e(t,e){return P1e(t,this,e)}function Y1e(t,e){return D1e(t,this,e)}function K1e(t,e){return F1e(this,t,e)}function J1e(){return{enter:{table:Q1e,tableData:JO,tableHeader:JO,tableRow:Z1e},exit:{codeText:eve,table:X1e,tableData:Zw,tableHeader:Zw,tableRow:Zw}}}function Q1e(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function X1e(t){this.exit(t),this.data.inTable=void 0}function Z1e(t){this.enter({type:"tableRow",children:[]},t)}function Zw(t){this.exit(t)}function JO(t){this.enter({type:"tableCell",children:[]},t)}function eve(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,tve));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function tve(t,e){return e==="|"?e:t}function nve(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(p,m,g,x){return c(d(p,g,x),p.align)}function a(p,m,g,x){const b=h(p,g,x),v=c([b]);return v.slice(0,v.indexOf(`
`))}function l(p,m,g,x){const b=g.enter("tableCell"),v=g.enter("phrasing"),w=g.containerPhrasing(p,{...x,before:i,after:i});return v(),b(),w}function c(p,m){return Jye(p,{align:m,alignDelimiters:r,padding:n,stringLength:s})}function d(p,m,g){const x=p.children;let b=-1;const v=[],w=m.enter("table");for(;++b<x.length;)v[b]=h(x[b],m,g);return w(),v}function h(p,m,g){const x=p.children;let b=-1;const v=[],w=m.enter("tableRow");for(;++b<x.length;)v[b]=l(x[b],p,m,g);return w(),v}function f(p,m,g){let x=r_.inlineCode(p,m,g);return g.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function rve(){return{exit:{taskListCheckValueChecked:QO,taskListCheckValueUnchecked:QO,paragraph:ive}}}function sve(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:ove}}}function QO(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function ive(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let i=-1,o;for(;++i<s.length;){const a=s[i];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function ove(t,e,n,r){const s=t.children[0],i=typeof t.checked=="boolean"&&s&&s.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);i&&a.move(o);let l=r_.listItem(t,e,n,{...r,...a.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(d){return d+o}}function ave(){return[yye(),Fye(),Vye(),J1e(),rve()]}function lve(t){return{extensions:[vye(),Hye(t),Wye(),nve(t),sve()]}}function ls(t,e,n,r){const s=t.length;let i=0,o;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(e,0),t.splice(...o),i+=1e4,e+=1e4}function Ns(t,e){return t.length>0?(ls(t,t.length,0,e),t):e}const XO={}.hasOwnProperty;function kH(t){const e={};let n=-1;for(;++n<t.length;)cve(e,t[n]);return e}function cve(t,e){let n;for(n in e){const s=(XO.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let o;if(i)for(o in i){XO.call(s,o)||(s[o]=[]);const a=i[o];uve(s[o],Array.isArray(a)?a:a?[a]:[])}}}function uve(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ls(t,0,0,r)}const dve={tokenize:bve,partial:!0},EH={tokenize:xve,partial:!0},CH={tokenize:yve,partial:!0},SH={tokenize:vve,partial:!0},hve={tokenize:wve,partial:!0},TH={name:"wwwAutolink",tokenize:mve,previous:_H},NH={name:"protocolAutolink",tokenize:gve,previous:AH},aa={name:"emailAutolink",tokenize:pve,previous:jH},bo={};function fve(){return{text:bo}}let Hl=48;for(;Hl<123;)bo[Hl]=aa,Hl++,Hl===58?Hl=65:Hl===91&&(Hl=97);bo[43]=aa;bo[45]=aa;bo[46]=aa;bo[95]=aa;bo[72]=[aa,NH];bo[104]=[aa,NH];bo[87]=[aa,TH];bo[119]=[aa,TH];function pve(t,e,n){const r=this;let s,i;return o;function o(h){return!gC(h)||!jH.call(r,r.previous)||i_(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return gC(h)?(t.consume(h),a):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check(hve,d,c)(h):h===45||h===95||Xn(h)?(i=!0,t.consume(h),l):d(h)}function c(h){return t.consume(h),s=!0,l}function d(h){return i&&s&&ur(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function mve(t,e,n){const r=this;return s;function s(o){return o!==87&&o!==119||!_H.call(r,r.previous)||i_(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(dve,t.attempt(EH,t.attempt(CH,i),n),n)(o))}function i(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function gve(t,e,n){const r=this;let s="",i=!1;return o;function o(h){return(h===72||h===104)&&AH.call(r,r.previous)&&!i_(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(h),t.consume(h),a):n(h)}function a(h){if(ur(h)&&s.length<5)return s+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const f=s.toLowerCase();if(f==="http"||f==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),i?c:(i=!0,l)):n(h)}function c(h){return h===null||hx(h)||xt(h)||zc(h)||N1(h)?n(h):t.attempt(EH,t.attempt(CH,d),n)(h)}function d(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function bve(t,e,n){let r=0;return s;function s(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),s):o===46&&r===3?(t.consume(o),i):n(o)}function i(o){return o===null?n(o):e(o)}}function xve(t,e,n){let r,s,i;return o;function o(c){return c===46||c===95?t.check(SH,l,a)(c):c===null||xt(c)||zc(c)||c!==45&&N1(c)?l(c):(i=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(s=r,r=void 0),t.consume(c),o}function l(c){return s||r||!i?n(c):e(c)}}function yve(t,e){let n=0,r=0;return s;function s(o){return o===40?(n++,t.consume(o),s):o===41&&r<n?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(SH,e,i)(o):o===null||xt(o)||zc(o)?e(o):(t.consume(o),s)}function i(o){return o===41&&r++,t.consume(o),s}}function vve(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),i):a===93?(t.consume(a),s):a===60||a===null||xt(a)||zc(a)?e(a):n(a)}function s(a){return a===null||a===40||a===91||xt(a)||zc(a)?e(a):r(a)}function i(a){return ur(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):ur(a)?(t.consume(a),o):n(a)}}function wve(t,e,n){return r;function r(i){return t.consume(i),s}function s(i){return Xn(i)?n(i):e(i)}}function _H(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||xt(t)}function AH(t){return!ur(t)}function jH(t){return!(t===47||gC(t))}function gC(t){return t===43||t===45||t===46||t===95||Xn(t)}function i_(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function bh(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const i=t.charCodeAt(n);let o="";if(i===37&&Xn(t.charCodeAt(n+1))&&Xn(t.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const a=t.charCodeAt(n+1);i<56320&&a>56319&&a<57344?(o=String.fromCharCode(i,a),s=1):o=""}else o=String.fromCharCode(i);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function _1(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const i=t[s].resolveAll;i&&!r.includes(i)&&(e=i(e,n),r.push(i))}return e}const bC={name:"attention",resolveAll:kve,tokenize:Eve};function kve(t,e){let n=-1,r,s,i,o,a,l,c,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},f={...t[n][1].start};ZO(h,-l),ZO(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},i={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Ns(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Ns(c,[["enter",s,e],["enter",o,e],["exit",o,e],["enter",i,e]]),c=Ns(c,_1(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Ns(c,[["exit",i,e],["enter",a,e],["exit",a,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,c=Ns(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,ls(t,r-1,n-r+3,c),n=r+c.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Eve(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=qd(r);let i;return o;function o(l){return i=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===i)return t.consume(l),a;const c=t.exit("attentionSequence"),d=qd(l),h=!d||d===2&&s||n.includes(l),f=!s||s===2&&d||n.includes(r);return c._open=!!(i===42?h:h&&(s||!f)),c._close=!!(i===42?f:f&&(d||!h)),e(l)}}function ZO(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Cve={name:"autolink",tokenize:Sve};function Sve(t,e,n){let r=0;return s;function s(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(p){return ur(p)?(t.consume(p),o):p===64?n(p):c(p)}function o(p){return p===43||p===45||p===46||Xn(p)?(r=1,a(p)):c(p)}function a(p){return p===58?(t.consume(p),r=0,l):(p===43||p===45||p===46||Xn(p))&&r++<32?(t.consume(p),a):(r=0,c(p))}function l(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||hx(p)?n(p):(t.consume(p),l)}function c(p){return p===64?(t.consume(p),d):dye(p)?(t.consume(p),c):n(p)}function d(p){return Xn(p)?h(p):n(p)}function h(p){return p===46?(t.consume(p),r=0,d):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):f(p)}function f(p){if((p===45||Xn(p))&&r++<63){const m=p===45?f:h;return t.consume(p),m}return n(p)}}function Ze(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(l){return Ge(l)?(t.enter(n),a(l)):e(l)}function a(l){return Ge(l)&&i++<s?(t.consume(l),a):(t.exit(n),e(l))}}const Cm={partial:!0,tokenize:Tve};function Tve(t,e,n){return r;function r(i){return Ge(i)?Ze(t,s,"linePrefix")(i):s(i)}function s(i){return i===null||Te(i)?e(i):n(i)}}const OH={continuation:{tokenize:_ve},exit:Ave,name:"blockQuote",tokenize:Nve};function Nve(t,e,n){const r=this;return s;function s(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),i}return n(o)}function i(o){return Ge(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function _ve(t,e,n){const r=this;return s;function s(o){return Ge(o)?Ze(t,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return t.attempt(OH,e,n)(o)}}function Ave(t){t.exit("blockQuote")}const IH={name:"characterEscape",tokenize:jve};function jve(t,e,n){return r;function r(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),s}function s(i){return fye(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}const MH={name:"characterReference",tokenize:Ove};function Ove(t,e,n){const r=this;let s=0,i,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),i=31,o=Xn,d(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,o=hye,d):(t.enter("characterReferenceValue"),i=7,o=pC,d(h))}function d(h){if(h===59&&s){const f=t.exit("characterReferenceValue");return o===Xn&&!s_(r.sliceSerialize(f))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&s++<i?(t.consume(h),d):n(h)}}const eI={partial:!0,tokenize:Mve},tI={concrete:!0,name:"codeFenced",tokenize:Ive};function Ive(t,e,n){const r=this,s={partial:!0,tokenize:E};let i=0,o=0,a;return l;function l(C){return c(C)}function c(C){const T=r.events[r.events.length-1];return i=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(C)}function d(C){return C===a?(o++,t.consume(C),d):o<3?n(C):(t.exit("codeFencedFenceSequence"),Ge(C)?Ze(t,h,"whitespace")(C):h(C))}function h(C){return C===null||Te(C)?(t.exit("codeFencedFence"),r.interrupt?e(C):t.check(eI,g,S)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||Te(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(C)):Ge(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ze(t,p,"whitespace")(C)):C===96&&C===a?n(C):(t.consume(C),f)}function p(C){return C===null||Te(C)?h(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),m(C))}function m(C){return C===null||Te(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(C)):C===96&&C===a?n(C):(t.consume(C),m)}function g(C){return t.attempt(s,S,x)(C)}function x(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),b}function b(C){return i>0&&Ge(C)?Ze(t,v,"linePrefix",i+1)(C):v(C)}function v(C){return C===null||Te(C)?t.check(eI,g,S)(C):(t.enter("codeFlowValue"),w(C))}function w(C){return C===null||Te(C)?(t.exit("codeFlowValue"),v(C)):(t.consume(C),w)}function S(C){return t.exit("codeFenced"),e(C)}function E(C,T,_){let O=0;return N;function N(B){return C.enter("lineEnding"),C.consume(B),C.exit("lineEnding"),R}function R(B){return C.enter("codeFencedFence"),Ge(B)?Ze(C,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):M(B)}function M(B){return B===a?(C.enter("codeFencedFenceSequence"),W(B)):_(B)}function W(B){return B===a?(O++,C.consume(B),W):O>=o?(C.exit("codeFencedFenceSequence"),Ge(B)?Ze(C,D,"whitespace")(B):D(B)):_(B)}function D(B){return B===null||Te(B)?(C.exit("codeFencedFence"),T(B)):_(B)}}}function Mve(t,e,n){const r=this;return s;function s(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i)}function i(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const ek={name:"codeIndented",tokenize:Pve},Rve={partial:!0,tokenize:Dve};function Pve(t,e,n){const r=this;return s;function s(c){return t.enter("codeIndented"),Ze(t,i,"linePrefix",5)(c)}function i(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Te(c)?t.attempt(Rve,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Te(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function Dve(t,e,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):Te(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):Ze(t,i,"linePrefix",5)(o)}function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Te(o)?s(o):n(o)}}const Lve={name:"codeText",previous:$ve,resolve:Bve,tokenize:Fve};function Bve(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function $ve(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Fve(t,e,n){let r=0,s,i;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(i=t.enter("codeTextSequence"),s=0,d(h)):Te(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||Te(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function d(h){return h===96?(t.consume(h),s++,d):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(i.type="codeTextData",c(h))}}class Hve{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Wh(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Wh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Wh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Wh(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Wh(this.left,n.reverse())}}}function Wh(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function RH(t){const e={};let n=-1,r,s,i,o,a,l,c;const d=new Hve(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,i=0,i<l.length&&l[i][1].type==="lineEndingBlank"&&(i+=2),i<l.length&&l[i][1].type==="content"))for(;++i<l.length&&l[i][1].type!=="content";)l[i][1].type==="chunkText"&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Uve(d,n)),n=e[n],c=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(o=d.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},a=d.slice(s,n),a.unshift(r),d.splice(s,n-s+1,a))}}return ls(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function Uve(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const i=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let d,h,f=-1,p=n,m=0,g=0;const x=[g];for(;p;){for(;t.get(++s)[1]!==p;);i.push(s),p._tokenizer||(d=r.sliceStream(p),p.next||d.push(null),h&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(g=f+1,x.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):x.pop(),f=x.length;f--;){const b=a.slice(x[f],x[f+1]),v=i.pop();l.push([v,v+b.length-1]),t.splice(v,2,b)}for(l.reverse(),f=-1;++f<l.length;)c[m+l[f][0]]=m+l[f][1],m+=l[f][1]-l[f][0]-1;return c}const zve={resolve:Wve,tokenize:qve},Vve={partial:!0,tokenize:Gve};function Wve(t){return RH(t),t}function qve(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(a)}function s(a){return a===null?i(a):Te(a)?t.check(Vve,o,i)(a):(t.consume(a),s)}function i(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function Gve(t,e,n){const r=this;return s;function s(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Ze(t,i,"linePrefix")}function i(o){if(o===null||Te(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function PH(t,e,n,r,s,i,o,a,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return h;function h(b){return b===60?(t.enter(r),t.enter(s),t.enter(i),t.consume(b),t.exit(i),f):b===null||b===32||b===41||hx(b)?n(b):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),g(b))}function f(b){return b===62?(t.enter(i),t.consume(b),t.exit(i),t.exit(s),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===62?(t.exit("chunkString"),t.exit(a),f(b)):b===null||b===60||Te(b)?n(b):(t.consume(b),b===92?m:p)}function m(b){return b===60||b===62||b===92?(t.consume(b),p):p(b)}function g(b){return!d&&(b===null||b===41||xt(b))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(b)):d<c&&b===40?(t.consume(b),d++,g):b===41?(t.consume(b),d--,g):b===null||b===32||b===40||hx(b)?n(b):(t.consume(b),b===92?x:g)}function x(b){return b===40||b===41||b===92?(t.consume(b),g):g(b)}}function DH(t,e,n,r,s,i){const o=this;let a=0,l;return c;function c(p){return t.enter(r),t.enter(s),t.consume(p),t.exit(s),t.enter(i),d}function d(p){return a>999||p===null||p===91||p===93&&!l||p===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(t.exit(i),t.enter(s),t.consume(p),t.exit(s),t.exit(r),e):Te(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||Te(p)||a++>999?(t.exit("chunkString"),d(p)):(t.consume(p),l||(l=!Ge(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(t.consume(p),a++,h):h(p)}}function LH(t,e,n,r,s,i){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(r),t.enter(s),t.consume(f),t.exit(s),o=f===40?41:f,l):n(f)}function l(f){return f===o?(t.enter(s),t.consume(f),t.exit(s),t.exit(r),e):(t.enter(i),c(f))}function c(f){return f===o?(t.exit(i),l(o)):f===null?n(f):Te(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),Ze(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===o||f===null||Te(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?h:d)}function h(f){return f===o||f===92?(t.consume(f),d):d(f)}}function Rf(t,e){let n;return r;function r(s){return Te(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Ge(s)?Ze(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const Yve={name:"definition",tokenize:Jve},Kve={partial:!0,tokenize:Qve};function Jve(t,e,n){const r=this;let s;return i;function i(p){return t.enter("definition"),o(p)}function o(p){return DH.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function a(p){return s=di(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),l):n(p)}function l(p){return xt(p)?Rf(t,c)(p):c(p)}function c(p){return PH(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function d(p){return t.attempt(Kve,h,h)(p)}function h(p){return Ge(p)?Ze(t,f,"whitespace")(p):f(p)}function f(p){return p===null||Te(p)?(t.exit("definition"),r.parser.defined.push(s),e(p)):n(p)}}function Qve(t,e,n){return r;function r(a){return xt(a)?Rf(t,s)(a):n(a)}function s(a){return LH(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function i(a){return Ge(a)?Ze(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Te(a)?e(a):n(a)}}const Xve={name:"hardBreakEscape",tokenize:Zve};function Zve(t,e,n){return r;function r(i){return t.enter("hardBreakEscape"),t.consume(i),s}function s(i){return Te(i)?(t.exit("hardBreakEscape"),e(i)):n(i)}}const ewe={name:"headingAtx",resolve:twe,tokenize:nwe};function twe(t,e){let n=t.length-2,r=3,s,i;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},i={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ls(t,r,n-r+1,[["enter",s,e],["enter",i,e],["exit",i,e],["exit",s,e]])),t}function nwe(t,e,n){let r=0;return s;function s(d){return t.enter("atxHeading"),i(d)}function i(d){return t.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(t.consume(d),o):d===null||xt(d)?(t.exit("atxHeadingSequence"),a(d)):n(d)}function a(d){return d===35?(t.enter("atxHeadingSequence"),l(d)):d===null||Te(d)?(t.exit("atxHeading"),e(d)):Ge(d)?Ze(t,a,"whitespace")(d):(t.enter("atxHeadingText"),c(d))}function l(d){return d===35?(t.consume(d),l):(t.exit("atxHeadingSequence"),a(d))}function c(d){return d===null||d===35||xt(d)?(t.exit("atxHeadingText"),a(d)):(t.consume(d),c)}}const rwe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],nI=["pre","script","style","textarea"],swe={concrete:!0,name:"htmlFlow",resolveTo:awe,tokenize:lwe},iwe={partial:!0,tokenize:uwe},owe={partial:!0,tokenize:cwe};function awe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function lwe(t,e,n){const r=this;let s,i,o,a,l;return c;function c(I){return d(I)}function d(I){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(I),h}function h(I){return I===33?(t.consume(I),f):I===47?(t.consume(I),i=!0,g):I===63?(t.consume(I),s=3,r.interrupt?e:j):ur(I)?(t.consume(I),o=String.fromCharCode(I),x):n(I)}function f(I){return I===45?(t.consume(I),s=2,p):I===91?(t.consume(I),s=5,a=0,m):ur(I)?(t.consume(I),s=4,r.interrupt?e:j):n(I)}function p(I){return I===45?(t.consume(I),r.interrupt?e:j):n(I)}function m(I){const q="CDATA[";return I===q.charCodeAt(a++)?(t.consume(I),a===q.length?r.interrupt?e:M:m):n(I)}function g(I){return ur(I)?(t.consume(I),o=String.fromCharCode(I),x):n(I)}function x(I){if(I===null||I===47||I===62||xt(I)){const q=I===47,G=o.toLowerCase();return!q&&!i&&nI.includes(G)?(s=1,r.interrupt?e(I):M(I)):rwe.includes(o.toLowerCase())?(s=6,q?(t.consume(I),b):r.interrupt?e(I):M(I)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(I):i?v(I):w(I))}return I===45||Xn(I)?(t.consume(I),o+=String.fromCharCode(I),x):n(I)}function b(I){return I===62?(t.consume(I),r.interrupt?e:M):n(I)}function v(I){return Ge(I)?(t.consume(I),v):N(I)}function w(I){return I===47?(t.consume(I),N):I===58||I===95||ur(I)?(t.consume(I),S):Ge(I)?(t.consume(I),w):N(I)}function S(I){return I===45||I===46||I===58||I===95||Xn(I)?(t.consume(I),S):E(I)}function E(I){return I===61?(t.consume(I),C):Ge(I)?(t.consume(I),E):w(I)}function C(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),l=I,T):Ge(I)?(t.consume(I),C):_(I)}function T(I){return I===l?(t.consume(I),l=null,O):I===null||Te(I)?n(I):(t.consume(I),T)}function _(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||xt(I)?E(I):(t.consume(I),_)}function O(I){return I===47||I===62||Ge(I)?w(I):n(I)}function N(I){return I===62?(t.consume(I),R):n(I)}function R(I){return I===null||Te(I)?M(I):Ge(I)?(t.consume(I),R):n(I)}function M(I){return I===45&&s===2?(t.consume(I),$):I===60&&s===1?(t.consume(I),V):I===62&&s===4?(t.consume(I),U):I===63&&s===3?(t.consume(I),j):I===93&&s===5?(t.consume(I),z):Te(I)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(iwe,H,W)(I)):I===null||Te(I)?(t.exit("htmlFlowData"),W(I)):(t.consume(I),M)}function W(I){return t.check(owe,D,H)(I)}function D(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),B}function B(I){return I===null||Te(I)?W(I):(t.enter("htmlFlowData"),M(I))}function $(I){return I===45?(t.consume(I),j):M(I)}function V(I){return I===47?(t.consume(I),o="",A):M(I)}function A(I){if(I===62){const q=o.toLowerCase();return nI.includes(q)?(t.consume(I),U):M(I)}return ur(I)&&o.length<8?(t.consume(I),o+=String.fromCharCode(I),A):M(I)}function z(I){return I===93?(t.consume(I),j):M(I)}function j(I){return I===62?(t.consume(I),U):I===45&&s===2?(t.consume(I),j):M(I)}function U(I){return I===null||Te(I)?(t.exit("htmlFlowData"),H(I)):(t.consume(I),U)}function H(I){return t.exit("htmlFlow"),e(I)}}function cwe(t,e,n){const r=this;return s;function s(o){return Te(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):n(o)}function i(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function uwe(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(Cm,e,n)}}const dwe={name:"htmlText",tokenize:hwe};function hwe(t,e,n){const r=this;let s,i,o;return a;function a(j){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(j),l}function l(j){return j===33?(t.consume(j),c):j===47?(t.consume(j),E):j===63?(t.consume(j),w):ur(j)?(t.consume(j),_):n(j)}function c(j){return j===45?(t.consume(j),d):j===91?(t.consume(j),i=0,m):ur(j)?(t.consume(j),v):n(j)}function d(j){return j===45?(t.consume(j),p):n(j)}function h(j){return j===null?n(j):j===45?(t.consume(j),f):Te(j)?(o=h,V(j)):(t.consume(j),h)}function f(j){return j===45?(t.consume(j),p):h(j)}function p(j){return j===62?$(j):j===45?f(j):h(j)}function m(j){const U="CDATA[";return j===U.charCodeAt(i++)?(t.consume(j),i===U.length?g:m):n(j)}function g(j){return j===null?n(j):j===93?(t.consume(j),x):Te(j)?(o=g,V(j)):(t.consume(j),g)}function x(j){return j===93?(t.consume(j),b):g(j)}function b(j){return j===62?$(j):j===93?(t.consume(j),b):g(j)}function v(j){return j===null||j===62?$(j):Te(j)?(o=v,V(j)):(t.consume(j),v)}function w(j){return j===null?n(j):j===63?(t.consume(j),S):Te(j)?(o=w,V(j)):(t.consume(j),w)}function S(j){return j===62?$(j):w(j)}function E(j){return ur(j)?(t.consume(j),C):n(j)}function C(j){return j===45||Xn(j)?(t.consume(j),C):T(j)}function T(j){return Te(j)?(o=T,V(j)):Ge(j)?(t.consume(j),T):$(j)}function _(j){return j===45||Xn(j)?(t.consume(j),_):j===47||j===62||xt(j)?O(j):n(j)}function O(j){return j===47?(t.consume(j),$):j===58||j===95||ur(j)?(t.consume(j),N):Te(j)?(o=O,V(j)):Ge(j)?(t.consume(j),O):$(j)}function N(j){return j===45||j===46||j===58||j===95||Xn(j)?(t.consume(j),N):R(j)}function R(j){return j===61?(t.consume(j),M):Te(j)?(o=R,V(j)):Ge(j)?(t.consume(j),R):O(j)}function M(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),s=j,W):Te(j)?(o=M,V(j)):Ge(j)?(t.consume(j),M):(t.consume(j),D)}function W(j){return j===s?(t.consume(j),s=void 0,B):j===null?n(j):Te(j)?(o=W,V(j)):(t.consume(j),W)}function D(j){return j===null||j===34||j===39||j===60||j===61||j===96?n(j):j===47||j===62||xt(j)?O(j):(t.consume(j),D)}function B(j){return j===47||j===62||xt(j)?O(j):n(j)}function $(j){return j===62?(t.consume(j),t.exit("htmlTextData"),t.exit("htmlText"),e):n(j)}function V(j){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),A}function A(j){return Ge(j)?Ze(t,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):z(j)}function z(j){return t.enter("htmlTextData"),o(j)}}const o_={name:"labelEnd",resolveAll:gwe,resolveTo:bwe,tokenize:xwe},fwe={tokenize:ywe},pwe={tokenize:vwe},mwe={tokenize:wwe};function gwe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&ls(t,0,t.length,n),t}function bwe(t,e){let n=t.length,r=0,s,i,o,a;for(;n--;)if(s=t[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const l={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[i][1].start},end:{...t[o][1].end}},d={type:"labelText",start:{...t[i+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Ns(a,t.slice(i+1,i+r+3)),a=Ns(a,[["enter",d,e]]),a=Ns(a,_1(e.parser.constructs.insideSpan.null,t.slice(i+r+4,o-3),e)),a=Ns(a,[["exit",d,e],t[o-2],t[o-1],["exit",c,e]]),a=Ns(a,t.slice(o+1)),a=Ns(a,[["exit",l,e]]),ls(t,i,t.length,a),t}function xwe(t,e,n){const r=this;let s=r.events.length,i,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return a;function a(f){return i?i._inactive?h(f):(o=r.parser.defined.includes(di(r.sliceSerialize({start:i.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):n(f)}function l(f){return f===40?t.attempt(fwe,d,o?d:h)(f):f===91?t.attempt(pwe,d,o?c:h)(f):o?d(f):h(f)}function c(f){return t.attempt(mwe,d,h)(f)}function d(f){return e(f)}function h(f){return i._balanced=!0,n(f)}}function ywe(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),s}function s(h){return xt(h)?Rf(t,i)(h):i(h)}function i(h){return h===41?d(h):PH(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return xt(h)?Rf(t,l)(h):d(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?LH(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function c(h){return xt(h)?Rf(t,d)(h):d(h)}function d(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function vwe(t,e,n){const r=this;return s;function s(a){return DH.call(r,t,i,o,"reference","referenceMarker","referenceString")(a)}function i(a){return r.parser.defined.includes(di(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function wwe(t,e,n){return r;function r(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),s}function s(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}const kwe={name:"labelStartImage",resolveAll:o_.resolveAll,tokenize:Ewe};function Ewe(t,e,n){const r=this;return s;function s(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),i}function i(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const Cwe={name:"labelStartLink",resolveAll:o_.resolveAll,tokenize:Swe};function Swe(t,e,n){const r=this;return s;function s(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const tk={name:"lineEnding",tokenize:Twe};function Twe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Ze(t,e,"linePrefix")}}const Mg={name:"thematicBreak",tokenize:Nwe};function Nwe(t,e,n){let r=0,s;return i;function i(c){return t.enter("thematicBreak"),o(c)}function o(c){return s=c,a(c)}function a(c){return c===s?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Te(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===s?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Ge(c)?Ze(t,a,"whitespace")(c):a(c))}}const Cr={continuation:{tokenize:Owe},exit:Mwe,name:"list",tokenize:jwe},_we={partial:!0,tokenize:Rwe},Awe={partial:!0,tokenize:Iwe};function jwe(t,e,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return a;function a(p){const m=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:pC(p)){if(r.containerState.type||(r.containerState.type=m,t.enter(m,{_container:!0})),m==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(Mg,n,c)(p):c(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(p)}return n(p)}function l(p){return pC(p)&&++o<10?(t.consume(p),l):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),c(p)):n(p)}function c(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(Cm,r.interrupt?n:d,t.attempt(_we,f,h))}function d(p){return r.containerState.initialBlankLine=!0,i++,f(p)}function h(p){return Ge(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=i+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function Owe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Cm,s,i);function s(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ze(t,e,"listItemIndent",r.containerState.size+1)(a)}function i(a){return r.containerState.furtherBlankLines||!Ge(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(Awe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ze(t,t.attempt(Cr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Iwe(t,e,n){const r=this;return Ze(t,s,"listItemIndent",r.containerState.size+1);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(i):n(i)}}function Mwe(t){t.exit(this.containerState.type)}function Rwe(t,e,n){const r=this;return Ze(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=r.events[r.events.length-1];return!Ge(i)&&o&&o[1].type==="listItemPrefixWhitespace"?e(i):n(i)}}const rI={name:"setextUnderline",resolveTo:Pwe,tokenize:Dwe};function Pwe(t,e){let n=t.length,r,s,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",i?(t.splice(s,0,["enter",o,e]),t.splice(i+1,0,["exit",t[r][1],e]),t[r][1].end={...t[i][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function Dwe(t,e,n){const r=this;let s;return i;function i(c){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),s=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===s?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Ge(c)?Ze(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Te(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const Lwe={tokenize:Wwe,partial:!0};function Bwe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Uwe,continuation:{tokenize:zwe},exit:Vwe}},text:{91:{name:"gfmFootnoteCall",tokenize:Hwe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:$we,resolveTo:Fwe}}}}function $we(t,e,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;s--;){const l=r.events[s][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=di(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!i.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function Fwe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function Hwe(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(i>999||h===93&&!o||h===null||h===91||xt(h))return n(h);if(h===93){t.exit("chunkString");const f=t.exit("gfmFootnoteCallString");return s.includes(di(r.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return xt(h)||(o=!0),i++,t.consume(h),h===92?d:c}function d(h){return h===91||h===92||h===93?(t.consume(h),i++,c):c(h)}}function Uwe(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,o=0,a;return l;function l(m){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(m){return m===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(m)}function d(m){if(o>999||m===93&&!a||m===null||m===91||xt(m))return n(m);if(m===93){t.exit("chunkString");const g=t.exit("gfmFootnoteDefinitionLabelString");return i=di(r.sliceSerialize(g)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return xt(m)||(a=!0),o++,t.consume(m),m===92?h:d}function h(m){return m===91||m===92||m===93?(t.consume(m),o++,d):d(m)}function f(m){return m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),s.includes(i)||s.push(i),Ze(t,p,"gfmFootnoteDefinitionWhitespace")):n(m)}function p(m){return e(m)}}function zwe(t,e,n){return t.check(Cm,e,t.attempt(Lwe,e,n))}function Vwe(t){t.exit("gfmFootnoteDefinition")}function Wwe(t,e,n){const r=this;return Ze(t,s,"gfmFootnoteDefinitionIndent",5);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(i):n(i)}}function qwe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",d,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",h,a]],p=a.parser.constructs.insideSpan.null;p&&ls(f,f.length,0,_1(p,o.slice(c+1,l),a)),ls(f,f.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",d,a]]),ls(o,c-1,l-c+3,f),l=c+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function i(o,a,l){const c=this.previous,d=this.events;let h=0;return f;function f(m){return c===126&&d[d.length-1][1].type!=="characterEscape"?l(m):(o.enter("strikethroughSequenceTemporary"),p(m))}function p(m){const g=qd(c);if(m===126)return h>1?l(m):(o.consume(m),h++,p);if(h<2&&!n)return l(m);const x=o.exit("strikethroughSequenceTemporary"),b=qd(m);return x._open=!b||b===2&&!!g,x._close=!g||g===2&&!!b,a(m)}}}class Gwe{constructor(){this.map=[]}add(e,n,r){Ywe(this,e,n,r)}consume(e){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const i of s)e.push(i);s=r.pop()}this.map.length=0}}function Ywe(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function Kwe(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function Jwe(){return{flow:{null:{name:"table",tokenize:Qwe,resolveAll:Xwe}}}}function Qwe(t,e,n){const r=this;let s=0,i=0,o;return a;function a(N){let R=r.events.length-1;for(;R>-1;){const D=r.events[R][1].type;if(D==="lineEnding"||D==="linePrefix")R--;else break}const M=R>-1?r.events[R][1].type:null,W=M==="tableHead"||M==="tableRow"?C:l;return W===C&&r.parser.lazy[r.now().line]?n(N):W(N)}function l(N){return t.enter("tableHead"),t.enter("tableRow"),c(N)}function c(N){return N===124||(o=!0,i+=1),d(N)}function d(N){return N===null?n(N):Te(N)?i>1?(i=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),p):n(N):Ge(N)?Ze(t,d,"whitespace")(N):(i+=1,o&&(o=!1,s+=1),N===124?(t.enter("tableCellDivider"),t.consume(N),t.exit("tableCellDivider"),o=!0,d):(t.enter("data"),h(N)))}function h(N){return N===null||N===124||xt(N)?(t.exit("data"),d(N)):(t.consume(N),N===92?f:h)}function f(N){return N===92||N===124?(t.consume(N),h):h(N)}function p(N){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(N):(t.enter("tableDelimiterRow"),o=!1,Ge(N)?Ze(t,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):m(N))}function m(N){return N===45||N===58?x(N):N===124?(o=!0,t.enter("tableCellDivider"),t.consume(N),t.exit("tableCellDivider"),g):E(N)}function g(N){return Ge(N)?Ze(t,x,"whitespace")(N):x(N)}function x(N){return N===58?(i+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(N),t.exit("tableDelimiterMarker"),b):N===45?(i+=1,b(N)):N===null||Te(N)?S(N):E(N)}function b(N){return N===45?(t.enter("tableDelimiterFiller"),v(N)):E(N)}function v(N){return N===45?(t.consume(N),v):N===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(N),t.exit("tableDelimiterMarker"),w):(t.exit("tableDelimiterFiller"),w(N))}function w(N){return Ge(N)?Ze(t,S,"whitespace")(N):S(N)}function S(N){return N===124?m(N):N===null||Te(N)?!o||s!==i?E(N):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(N)):E(N)}function E(N){return n(N)}function C(N){return t.enter("tableRow"),T(N)}function T(N){return N===124?(t.enter("tableCellDivider"),t.consume(N),t.exit("tableCellDivider"),T):N===null||Te(N)?(t.exit("tableRow"),e(N)):Ge(N)?Ze(t,T,"whitespace")(N):(t.enter("data"),_(N))}function _(N){return N===null||N===124||xt(N)?(t.exit("data"),T(N)):(t.consume(N),N===92?O:_)}function O(N){return N===92||N===124?(t.consume(N),_):_(N)}}function Xwe(t,e){let n=-1,r=!0,s=0,i=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,d,h;const f=new Gwe;for(;++n<t.length;){const p=t[n],m=p[1];p[0]==="enter"?m.type==="tableHead"?(a=!1,l!==0&&(sI(f,e,l,c,d),d=void 0,l=0),c={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[["enter",c,e]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,h=void 0,i=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,d={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[["enter",d,e]])),s=m.type==="tableDelimiterRow"?2:d?3:1):s&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],h=D0(f,e,i,s,void 0,h),i=[0,0,0,0]),o[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(o[0]=o[1],h=D0(f,e,i,s,void 0,h)),i=o,o=[i[1],n,0,0])):m.type==="tableHead"?(a=!0,l=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(l=n,i[1]!==0?(o[0]=o[1],h=D0(f,e,i,s,n,h)):o[1]!==0&&(h=D0(f,e,o,s,n,h)),s=0):s&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&sI(f,e,l,c,d),f.consume(e.events),n=-1;++n<e.events.length;){const p=e.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=Kwe(e.events,n))}return t}function D0(t,e,n,r,s,i){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(i.end=Object.assign({},Ou(e.events,n[0])),t.add(n[0],0,[["exit",i,e]]));const l=Ou(e.events,n[1]);if(i={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",i,e]]),n[2]!==0){const c=Ou(e.events,n[2]),d=Ou(e.events,n[3]),h={type:a,start:Object.assign({},c),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const f=e.events[n[2]],p=e.events[n[3]];if(f[1].end=Object.assign({},p[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,g=n[3]-n[2]-1;t.add(m,g,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return s!==void 0&&(i.end=Object.assign({},Ou(e.events,s)),t.add(s,0,[["exit",i,e]]),i=void 0),i}function sI(t,e,n,r,s){const i=[],o=Ou(e.events,n);s&&(s.end=Object.assign({},o),i.push(["exit",s,e])),r.end=Object.assign({},o),i.push(["exit",r,e]),t.add(n+1,0,i)}function Ou(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const Zwe={name:"tasklistCheck",tokenize:tke};function eke(){return{text:{91:Zwe}}}function tke(t,e,n){const r=this;return s;function s(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),i)}function i(l){return xt(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Te(l)?e(l):Ge(l)?t.check({tokenize:nke},e,n)(l):n(l)}}function nke(t,e,n){return Ze(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function rke(t){return kH([fve(),Bwe(),qwe(t),Jwe(),eke()])}const ske={};function BH(t){const e=this,n=t||ske,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(rke(n)),i.push(ave()),o.push(lve(n))}function ike(t){const e=this;e.compiler=n;function n(r){return z1e(r,{...e.data("settings"),...t,extensions:e.data("toMarkdownExtensions")||[]})}}function iI(t){if(t)throw t}var Rg=Object.prototype.hasOwnProperty,$H=Object.prototype.toString,oI=Object.defineProperty,aI=Object.getOwnPropertyDescriptor,lI=function(e){return typeof Array.isArray=="function"?Array.isArray(e):$H.call(e)==="[object Array]"},cI=function(e){if(!e||$H.call(e)!=="[object Object]")return!1;var n=Rg.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Rg.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var s;for(s in e);return typeof s>"u"||Rg.call(e,s)},uI=function(e,n){oI&&n.name==="__proto__"?oI(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},dI=function(e,n){if(n==="__proto__")if(Rg.call(e,n)){if(aI)return aI(e,n).value}else return;return e[n]},oke=function t(){var e,n,r,s,i,o,a=arguments[0],l=1,c=arguments.length,d=!1;for(typeof a=="boolean"&&(d=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=dI(a,n),s=dI(e,n),a!==s&&(d&&s&&(cI(s)||(i=lI(s)))?(i?(i=!1,o=r&&lI(r)?r:[]):o=r&&cI(r)?r:{},uI(a,{name:n,newValue:t(d,o,s)})):typeof s<"u"&&uI(a,{name:n,newValue:s}));return a};const nk=qp(oke);function xC(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function ake(){const t=[],e={run:n,use:r};return e;function n(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...s);function a(l,...c){const d=t[++i];let h=-1;if(l){o(l);return}for(;++h<s.length;)(c[h]===null||c[h]===void 0)&&(c[h]=s[h]);s=c,d?lke(d,a)(...c):o(null,...c)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function lke(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(s);try{l=t.apply(this,o)}catch(c){const d=c;if(a&&n)throw d;return s(d)}a||(l&&l.then&&typeof l.then=="function"?l.then(i,s):l instanceof Error?s(l):i(l))}function s(o,...a){n||(n=!0,e(o,...a))}function i(o){s(null,o)}}const cke=function(t){const r=this.constructor.prototype,s=r[t],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},uke={}.hasOwnProperty;class a_ extends cke{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ake()}copy(){const e=new a_;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(nk(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(ik("data",this.frozen),this.namespace[e]=n,this):uke.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ik("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=L0(e),r=this.parser||this.Parser;return rk("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),rk("process",this.parser||this.Parser),sk("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,o){const a=L0(e),l=r.parse(a);r.run(l,a,function(d,h,f){if(d||!h||!f)return c(d);const p=h,m=r.stringify(p,f);hke(m)?f.value=m:f.result=m,c(d,f)});function c(d,h){d||!h?o(d):i?i(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),rk("processSync",this.parser||this.Parser),sk("processSync",this.compiler||this.Compiler),this.process(e,s),fI("processSync","process",n),r;function s(i,o){n=!0,iI(i),r=o}}run(e,n,r){hI(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(o,a){const l=L0(n);s.run(e,l,c);function c(d,h,f){const p=h||e;d?a(d):o?o(p):r(void 0,p,f)}}}runSync(e,n){let r=!1,s;return this.run(e,n,i),fI("runSync","run",r),s;function i(o,a){iI(o),s=a,r=!0}}stringify(e,n){this.freeze();const r=L0(n),s=this.compiler||this.Compiler;return sk("stringify",s),hI(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(ik("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...h]=c;l(d,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(s.settings=nk(!0,s.settings,c.settings))}function a(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const h=c[d];i(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,d){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===c){f=h;break}if(f===-1)r.push([c,...d]);else if(d.length>0){let[p,...m]=d;const g=r[f][1];xC(g)&&xC(p)&&(p=nk(!0,g,p)),r[f]=[c,p,...m]}}}}const FH=new a_().freeze();function rk(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function sk(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function ik(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function hI(t){if(!xC(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function fI(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function L0(t){return dke(t)?t:new hC(t)}function dke(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function hke(t){return typeof t=="string"||fke(t)}function fke(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}function pke(t,e){return HH(t,{})||{type:"root",children:[]}}function HH(t,e){const n=mke(t,e);return n&&e.afterTransform&&e.afterTransform(t,n),n}function mke(t,e){switch(t.nodeType){case 1:return yke(t,e);case 3:return bke(t);case 8:return xke(t);case 9:return pI(t,e);case 10:return gke();case 11:return pI(t,e);default:return}}function pI(t,e){return{type:"root",children:UH(t,e)}}function gke(){return{type:"doctype"}}function bke(t){return{type:"text",value:t.nodeValue||""}}function xke(t){return{type:"comment",value:t.nodeValue||""}}function yke(t,e){const n=t.namespaceURI,r=n===jg.svg?K$:Y$,s=n===jg.html?t.tagName.toLowerCase():t.tagName,i=n===jg.html&&s==="template"?t.content:t,o=t.getAttributeNames(),a={};let l=-1;for(;++l<o.length;)a[o[l]]=t.getAttribute(o[l])||"";return r(s,a,UH(i,e))}function UH(t,e){const n=t.childNodes,r=[];let s=-1;for(;++s<n.length;){const i=HH(n[s],e);i!==void 0&&r.push(i)}return r}var vke=Object.defineProperty,wke=(t,e,n)=>e in t?vke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ct=(t,e,n)=>wke(t,typeof e!="symbol"?e+"":e,n);function zH(t){const e=Array.from(t.classList).filter(n=>!n.startsWith("bn-"))||[];e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function VH(t,e,n,r){var s;let i;if(e)if(typeof e=="string")i=mi([e],t.pmSchema);else if(Array.isArray(e))i=mi(e,t.pmSchema);else if(e.type==="tableContent")i=e1(e,t.pmSchema);else throw new lo(e.type);else throw new Error("blockContent is required");const o=((r==null?void 0:r.document)??document).createDocumentFragment();for(const a of i)if(a.type.name!=="text"&&t.schema.inlineContentSchema[a.type.name]){const l=t.schema.inlineContentSpecs[a.type.name].implementation;if(l){const c=XT(a,t.schema.inlineContentSchema,t.schema.styleSchema),d=l.toExternalHTML?l.toExternalHTML(c,t):l.render.call({renderType:"dom",props:void 0},c,()=>{},t);if(d){if(o.appendChild(d.dom),d.contentDOM){const h=n.serializeFragment(a.content,r);d.contentDOM.dataset.editable="",d.contentDOM.appendChild(h)}continue}}}else if(a.type.name==="text"){let l=document.createTextNode(a.textContent);for(const c of a.marks.toReversed())if(c.type.name in t.schema.styleSpecs){const d=(t.schema.styleSpecs[c.type.name].implementation.toExternalHTML??t.schema.styleSpecs[c.type.name].implementation.render)(c.attrs.stringValue,t);d.contentDOM.appendChild(l),l=d.dom}else{const d=c.type.spec.toDOM(c,!0),h=us.renderSpec(document,d);h.contentDOM.appendChild(l),l=h.dom}o.appendChild(l)}else{const l=n.serializeFragment(Q.from([a]),r);o.appendChild(l)}return o.childNodes.length===1&&((s=o.firstChild)==null?void 0:s.nodeType)===1&&zH(o.firstChild),o}function kke(t,e,n,r,s,i,o){var a,l,c,d,h,f,p,m,g;const x=(o==null?void 0:o.document)??document,b=e.pmSchema.nodes.blockContainer,v=n.props||{};for(const[O,N]of Object.entries(e.schema.blockSchema[n.type].propSchema))!(O in v)&&N.default!==void 0&&(v[O]=N.default);const w=(l=(a=b.spec)==null?void 0:a.toDOM)==null?void 0:l.call(a,b.create({id:n.id,...v})),S=Array.from(w.dom.attributes),E=e.blockImplementations[n.type].implementation,C=((c=E.toExternalHTML)==null?void 0:c.call({},{...n,props:v},e))||E.render.call({},{...n,props:v},e),T=x.createDocumentFragment();if(C.dom.classList.contains("bn-block-content")){const O=[...S,...Array.from(C.dom.attributes)].filter(N=>N.name.startsWith("data")&&N.name!=="data-content-type"&&N.name!=="data-file-block"&&N.name!=="data-node-view-wrapper"&&N.name!=="data-node-type"&&N.name!=="data-id"&&N.name!=="data-editable");for(const N of O)C.dom.firstChild.setAttribute(N.name,N.value);zH(C.dom.firstChild),T.append(...Array.from(C.dom.childNodes))}else T.append(C.dom);if(C.contentDOM&&n.content){const O=VH(e,n.content,r,o);C.contentDOM.appendChild(O)}let _;if(s.has(n.type)?_="OL":i.has(n.type)&&(_="UL"),_){if(((d=t.lastChild)==null?void 0:d.nodeName)!==_){const O=x.createElement(_);_==="OL"&&"start"in v&&v.start&&(v==null?void 0:v.start)!==1&&O.setAttribute("start",v.start+""),t.append(O)}t.lastChild.appendChild(T)}else t.append(T);if(n.children&&n.children.length>0){const O=x.createDocumentFragment();if(WH(O,e,n.children,r,s,i,o),((h=t.lastChild)==null?void 0:h.nodeName)==="UL"||((f=t.lastChild)==null?void 0:f.nodeName)==="OL")for(;((p=O.firstChild)==null?void 0:p.nodeName)==="UL"||((m=O.firstChild)==null?void 0:m.nodeName)==="OL";)t.lastChild.lastChild.appendChild(O.firstChild);e.pmSchema.nodes[n.type].isInGroup("blockContent")?t.append(O):(g=C.contentDOM)==null||g.append(O)}}const WH=(t,e,n,r,s,i,o)=>{for(const a of n)kke(t,e,a,r,s,i,o)},Eke=(t,e,n,r,s,i)=>{const o=((i==null?void 0:i.document)??document).createDocumentFragment();return WH(o,t,e,n,r,s,i),o},A1=(t,e)=>{const n=us.fromSchema(t);return{exportBlocks:(r,s)=>{const i=Eke(e,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem","toggleListItem"]),s),o=document.createElement("div");return o.append(i),o.innerHTML},exportInlineContent:(r,s)=>{const i=VH(e,r,n,s),o=document.createElement("div");return o.append(i.cloneNode(!0)),o.innerHTML}}};function Cke(t,e){if(e===0)return;const n=t.resolve(e);for(let r=n.depth;r>0;r--){const s=n.node(r);if(ON(s))return s.attrs.id}}function Ske(t){return t.getMeta("paste")?{type:"paste"}:t.getMeta("uiEvent")==="drop"?{type:"drop"}:t.getMeta("history$")?{type:t.getMeta("history$").redo?"redo":"undo"}:t.getMeta("y-sync$")?t.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"}:{type:"local"}}function mI(t){const e="__root__",n={},r={},s=tn(t);return t.descendants((i,o)=>{if(!ON(i))return!0;const a=Cke(t,o),l=a??e;r[l]||(r[l]=[]);const c=Ut(i,s);return n[i.attrs.id]={block:c,parentId:a},r[l].push(i.attrs.id),!0}),{byId:n,childrenByParent:r}}function Tke(t,e){const n=new Set;if(!t||!e)return n;const r=new Set(t),s=e.filter(g=>r.has(g)),i=t.filter(g=>s.includes(g));if(i.length<=1||s.length<=1)return n;const o={};for(let g=0;g<i.length;g++)o[i[g]]=g;const a=s.map(g=>o[g]),l=a.length,c=[],d=[],h=new Array(l).fill(-1),f=(g,x)=>{let b=0,v=g.length;for(;b<v;){const w=b+v>>>1;g[w]<x?b=w+1:v=w}return b};for(let g=0;g<l;g++){const x=a[g],b=f(c,x);b>0&&(h[g]=d[b-1]),b===c.length?(c.push(x),d.push(g)):(c[b]=x,d[b]=g)}const p=new Set;let m=d[d.length-1]??-1;for(;m!==-1;)p.add(m),m=h[m];for(let g=0;g<s.length;g++)p.has(g)||n.add(s[g]);return n}function qH(t,e=[]){const n=Ske(t),r=Gy(t.before,[t,...e]),s=mI(r.before),i=mI(r.doc),o=[],a=new Set;Object.keys(i.byId).filter(p=>!(p in s.byId)).forEach(p=>{o.push({type:"insert",block:i.byId[p].block,source:n,prevBlock:void 0}),a.add(p)}),Object.keys(s.byId).filter(p=>!(p in i.byId)).forEach(p=>{o.push({type:"delete",block:s.byId[p].block,source:n,prevBlock:void 0}),a.add(p)}),Object.keys(i.byId).filter(p=>p in s.byId).forEach(p=>{var m,g;const x=s.byId[p],b=i.byId[p];x.parentId!==b.parentId?(o.push({type:"move",block:b.block,prevBlock:x.block,source:n,prevParent:x.parentId?(m=s.byId[x.parentId])==null?void 0:m.block:void 0,currentParent:b.parentId?(g=i.byId[b.parentId])==null?void 0:g.block:void 0}),a.add(p)):ime({...x.block,children:void 0},{...b.block,children:void 0})||(o.push({type:"update",block:b.block,prevBlock:x.block,source:n}),a.add(p))});const l=s.childrenByParent,c=i.childrenByParent,d="__root__",h=new Set([...Object.keys(l),...Object.keys(c)]),f=new Set;return h.forEach(p=>{const m=Tke(l[p],c[p]);m.size!==0&&m.forEach(g=>{var x,b;const v=s.byId[g],w=i.byId[g];!v||!w||v.parentId!==w.parentId||a.has(g)||(v.parentId??d)!==p||f.has(g)||(f.add(g),o.push({type:"move",block:w.block,prevBlock:v.block,source:n,prevParent:v.parentId?(x=s.byId[v.parentId])==null?void 0:x.block:void 0,currentParent:w.parentId?(b=i.byId[w.parentId])==null?void 0:b.block:void 0}),a.add(g))})}),o}const GH=it(()=>{const t=[];return{key:"blockChange",prosemirrorPlugins:[new Ie({key:new We("blockChange"),filterTransaction:e=>{let n;return t.reduce((r,s)=>r===!1?r:s({getChanges(){return n||(n=qH(e),n)},tr:e})!==!1,!0)}})],subscribe(e){return t.push(e),()=>{t.splice(t.indexOf(e),1)}}}});function gI(t){const e=t.charAt(0)==="#"?t.substring(1,7):t,n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16),i=[n/255,r/255,s/255].map(o=>o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4));return .2126*i[0]+.7152*i[1]+.0722*i[2]<=.179}function Nke(t){const e=document.createElement("span");e.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${t.color}; color: ${gI(t.color)?"white":"black"}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${t.color}; color: ${gI(t.color)?"white":"black"}`),r.insertBefore(document.createTextNode(t.name),null),n.insertBefore(r,null),e.insertBefore(document.createTextNode(""),null),e.insertBefore(n,null),e.insertBefore(document.createTextNode(""),null),e}const yC=it(({options:t})=>{const e=new Map,n=t.provider&&"awareness"in t.provider&&typeof t.provider.awareness=="object"?t.provider.awareness:void 0;return n&&("setLocalStateField"in n&&typeof n.setLocalStateField=="function"&&n.setLocalStateField("user",t.user),"on"in n&&typeof n.on=="function"&&t.showCursorLabels!=="always"&&n.on("change",({updated:r})=>{for(const s of r){const i=e.get(s);i&&(i.element.setAttribute("data-active",""),i.hideTimeout&&clearTimeout(i.hideTimeout),e.set(s,{element:i.element,hideTimeout:setTimeout(()=>{i.element.removeAttribute("data-active")},2e3)}))}})),{key:"yCursor",prosemirrorPlugins:[n?Uhe(n,{selectionBuilder:y$,cursorBuilder(r,s){let i=e.get(s);if(!i){const o=(t.renderCursor??Nke)(r);t.showCursorLabels!=="always"&&(o.addEventListener("mouseenter",()=>{const a=e.get(s);a.element.setAttribute("data-active",""),a.hideTimeout&&(clearTimeout(a.hideTimeout),e.set(s,{element:a.element,hideTimeout:void 0}))}),o.addEventListener("mouseleave",()=>{const a=e.get(s);e.set(s,{element:a.element,hideTimeout:setTimeout(()=>{a.element.removeAttribute("data-active")},2e3)})})),i={element:o,hideTimeout:void 0},e.set(s,i)}return i.element}}):void 0].filter(Boolean),dependsOn:["ySync"],updateUser(r){n==null||n.setLocalStateField("user",r)}}}),Pg=it(({options:t})=>({key:"ySync",prosemirrorPlugins:[The(t.fragment)],runsBefore:["default"]})),Dg=it(()=>({key:"yUndo",prosemirrorPlugins:[Khe()],dependsOn:["yCursor","ySync"],undoCommand:Whe,redoCommand:qhe}));function _ke(t,e){const n=t.doc;if(t._item===null){const r=Array.from(n.share.keys()).find(s=>n.share.get(s)===t);if(r==null)throw new Error("type does not exist in other ydoc");return e.get(r,t.constructor)}else{const r=t._item,s=e.store.clients.get(r.id.client)??[],i=zs(s,r.id.clock);return s[i].content.type}}const Ake=it(({editor:t,options:e})=>{let n;const r=Al({isForked:!1});return{key:"yForkDoc",store:r,fork(){if(n)return;const s=e.fragment;if(!s)throw new Error("No fragment to fork from");const i=new _l;w5(i,k5(s.doc));const o=_ke(s,i);n={undoStack:Ji.getState(t.prosemirrorState).undoManager.undoStack,originalFragment:s,forkedFragment:o},t.unregisterExtension([Dg,yC,Pg]);const a={...e,fragment:o};t.registerExtension([Pg(a),Dg()]),r.setState({isForked:!0})},merge({keepChanges:s}){if(!n)return;t.unregisterExtension(["ySync","yCursor","yUndo"]);const{originalFragment:i,forkedFragment:o,undoStack:a}=n;if(t.registerExtension([Pg(e),yC(e),Dg()]),Ji.getState(t.prosemirrorState).undoManager.undoStack=a,s){const l=k5(o.doc,rde(i.doc));w5(i.doc,l,t)}n=void 0,r.setState({isForked:!1})}}}),YH=(t,e)=>{e(t),t.forEach(n=>{n instanceof Ln&&YH(n,e)})},jke=(t,e)=>{const n=new Map;return t.forEach(r=>{r instanceof Ln&&YH(r,s=>{if(s.nodeName==="blockContainer"&&s.hasAttribute("id")){const i=s.getAttribute("textColor"),o=s.getAttribute("backgroundColor"),a={textColor:i===st.textColor.default?void 0:i,backgroundColor:o===st.backgroundColor.default?void 0:o};(a.textColor||a.backgroundColor)&&n.set(s.getAttribute("id"),a)}})}),n.size===0?!1:(e.doc.descendants((r,s)=>{if(r.type.name==="blockContainer"&&n.has(r.attrs.id)){const i=e.doc.nodeAt(s+1);if(!i)throw new Error("No element found");e.setNodeMarkup(s+1,void 0,{...i.attrs,...n.get(r.attrs.id)})}}),!0)},Oke=[jke],Ike=it(({options:t})=>{let e=!1;const n=new We("schemaMigration");return{key:"schemaMigration",prosemirrorPlugins:[new Ie({key:n,appendTransaction:(r,s,i)=>{if(e||!r.some(a=>a.getMeta("y-sync$"))||r.every(a=>!a.docChanged)||!t.fragment.firstChild)return;const o=i.tr;for(const a of Oke)a(t.fragment,o);if(e=!0,!!o.docChanged)return o}})]}}),Mke=it(({editor:t,options:e})=>({key:"dropCursor",prosemirrorPlugins:[(e.dropCursor??P$)({width:5,color:"#ddeeff",editor:t})]})),bl=it(({editor:t})=>{const e=Al(!1),n=()=>t.transact(r=>{var s;if(r.selection.empty||r.selection instanceof ve&&(r.selection.node.type.spec.content==="inline*"||((s=r.selection.node.firstChild)==null?void 0:s.type.spec.content)==="inline*")||r.selection instanceof xe&&r.doc.textBetween(r.selection.from,r.selection.to).length===0)return!1;let i=!1;return r.selection.content().content.descendants(o=>(o.type.spec.code&&(i=!0),!i)),!i});return{key:"formattingToolbar",store:e,mount({dom:r,signal:s}){let i=!1;const o=t.onChange(()=>{i||e.setState(n())}),a=t.onSelectionChange(()=>{i||e.setState(n())});r.addEventListener("pointerdown",()=>{i=!0,e.setState(!1)},{signal:s}),t.prosemirrorView.root.addEventListener("pointerup",()=>{i=!1,t.isFocused()&&e.setState(n())},{signal:s,capture:!0}),r.addEventListener("pointercancel",()=>{i=!1},{signal:s,capture:!0}),s.addEventListener("abort",()=>{o(),a()})}}}),Rke=it(()=>({key:"history",prosemirrorPlugins:[B$()],undoCommand:LN,redoCommand:BN})),Sm=it(({editor:t})=>{function e(s){let i=t.prosemirrorView.nodeDOM(s);for(;i&&i.parentElement;){if(i.nodeName==="A")return i;i=i.parentElement}return null}function n(s,i){return t.transact(o=>{const a=o.doc.resolve(s),l=a.marks().find(d=>d.type.name===i);if(!l)return;const c=Wy(a,l.type);if(c)return{range:c,mark:l,get text(){return o.doc.textBetween(c.from,c.to)},get position(){return VT(t.prosemirrorView,c.from,c.to).toJSON()}}})}function r(){return t.transact(s=>{const i=s.selection;if(i.empty)return n(i.anchor,"link")})}return{key:"linkToolbar",getLinkAtSelection:r,getLinkElementAtPos:e,getMarkAtPos:n,getLinkAtElement(s){return t.transact(()=>{const i=t.prosemirrorView.posAtDOM(s,0)+1;return n(i,"link")})},editLink(s,i,o=t.transact(a=>a.selection.anchor)){t.transact(a=>{const l=tn(a),{range:c}=n(o+1,"link")||{range:{from:a.selection.from,to:a.selection.to}};c&&(a.insertText(i,c.from,c.to),a.addMark(c.from,c.from+i.length,l.mark("link",{href:s})))}),t.prosemirrorView.focus()},deleteLink(s=t.transact(i=>i.selection.anchor)){t.transact(i=>{const o=tn(i),{range:a}=n(s+1,"link")||{range:{from:i.selection.from,to:i.selection.to}};a&&i.removeMark(a.from,a.to,o.marks.link).setMeta("preventAutolink",!0)}),t.prosemirrorView.focus()}}}),KH=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],JH="https",Pke=new We("node-selection-keyboard"),Dke=it(()=>({key:"nodeSelectionKeyboard",prosemirrorPlugins:[new Ie({key:Pke,props:{handleKeyDown:(t,e)=>{if("node"in t.state.selection){if(e.ctrlKey||e.metaKey)return!1;if(e.key.length===1)return e.preventDefault(),!0;if(e.key==="Enter"&&!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey){const n=t.state.tr;return t.dispatch(n.insert(t.state.tr.selection.$to.after(),t.state.schema.nodes.paragraph.createChecked()).setSelection(new xe(n.doc.resolve(t.state.tr.selection.$to.after()+1)))),!0}}return!1}}})]})),Lke=new We("blocknote-placeholder"),Bke=it(({editor:t,options:e})=>{const n=e.placeholders;return{key:"placeholder",prosemirrorPlugins:[new Ie({key:Lke,view:r=>{const s=`placeholder-selector-${I7()}`;r.dom.classList.add(s);const i=document.createElement("style"),o=t._tiptapEditor.options.injectNonce;o&&i.setAttribute("nonce",o),r.root instanceof window.ShadowRoot?r.root.append(i):r.root.head.appendChild(i);const a=i.sheet,l=(c="")=>`.${s} .bn-block-content${c} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:c,emptyDocument:d,...h}=n||{};for(const[m,g]of Object.entries(h)){const x=`[data-content-type="${m}"]`;a.insertRule(`${l(x)} { content: ${JSON.stringify(g)}; }`)}a.insertRule(`${l("[data-is-only-empty-block]")} { content: ${JSON.stringify(d)}; }`),a.insertRule(`${l("[data-is-empty-and-focused]")} { content: ${JSON.stringify(c)}; }`)}catch(c){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",c)}return{destroy:()=>{r.root instanceof window.ShadowRoot?r.root.removeChild(i):r.root.head.removeChild(i)}}},props:{decorations:r=>{const{doc:s,selection:i}=r;if(!t.isEditable||!i.empty||i.$from.parent.type.spec.code)return;const o=[];r.doc.content.size===6&&o.push(at.node(2,4,{"data-is-only-empty-block":"true"}));const a=i.$anchor,l=a.parent;if(l.content.size===0){const c=a.before();o.push(at.node(c,c+l.nodeSize,{"data-is-empty-and-focused":"true"}))}return Re.create(s,o)}}})]}}),bI=new We("previous-blocks"),$ke={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"},Fke=it(()=>{let t;return{key:"previousBlockType",prosemirrorPlugins:[new Ie({key:bI,view(e){return{update:async(n,r)=>{var s;((s=this.key)==null?void 0:s.getState(n.state).updatedBlocks.size)>0&&(t=setTimeout(()=>{n.dispatch(n.state.tr.setMeta(bI,{clearUpdate:!0}))},0))},destroy:()=>{t&&clearTimeout(t)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(e,n,r,s){if(n.currentTransactionOldBlockAttrs={},n.updatedBlocks.clear(),!e.docChanged||r.doc.eq(s.doc))return n;const i={},o=U4(r.doc,c=>c.attrs.id),a=new Map(o.map(c=>[c.node.attrs.id,c])),l=U4(s.doc,c=>c.attrs.id);for(const c of l){const d=a.get(c.node.attrs.id),h=d==null?void 0:d.node.firstChild,f=c.node.firstChild;if(d&&h&&f){const p={index:f.attrs.index,level:f.attrs.level,type:f.type.name,depth:s.doc.resolve(c.pos).depth},m={index:h.attrs.index,level:h.attrs.level,type:h.type.name,depth:r.doc.resolve(d.pos).depth};i[c.node.attrs.id]=m,n.currentTransactionOldBlockAttrs[c.node.attrs.id]=m,JSON.stringify(m)!==JSON.stringify(p)&&(m["depth-change"]=m.depth-p.depth,n.updatedBlocks.add(c.node.attrs.id))}}return n.prevTransactionOldBlockAttrs=i,n}},props:{decorations(e){const n=this.getState(e);if(n.updatedBlocks.size===0)return;const r=[];return e.doc.descendants((s,i)=>{if(!s.attrs.id||!n.updatedBlocks.has(s.attrs.id))return;const o=n.currentTransactionOldBlockAttrs[s.attrs.id],a={};for(const[c,d]of Object.entries(o))a["data-prev-"+$ke[c]]=d||"none";const l=at.node(i,i+s.nodeSize,{...a});r.push(l)}),Re.create(e.doc,r)}}})]}});function QH(t,e){for(var n,r;t&&t.parentElement&&t.parentElement!==e.dom&&((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}function Hke(){const t=e=>{let n=e.children.length;for(let r=0;r<n;r++){const s=e.children[r];if(s.type==="element"&&(t(s),s.tagName==="u"))if(s.children.length>0){e.children.splice(r,1,...s.children);const i=s.children.length-1;n+=i,r+=i}else e.children.splice(r,1),n--,r--}};return t}function Uke(){const t=e=>{var n;if(e.children&&"length"in e.children&&e.children.length)for(let r=e.children.length-1;r>=0;r--){const s=e.children[r],i=r+1<e.children.length?e.children[r+1]:void 0;s.type==="element"&&s.tagName==="input"&&((n=s.properties)==null?void 0:n.type)==="checkbox"&&(i==null?void 0:i.type)==="element"&&i.tagName==="p"?(i.tagName="span",i.children.splice(0,0,pke(document.createTextNode(" ")))):t(s)}};return t}function zke(){return t=>{Uc(t,"element",(e,n,r)=>{var s,i,o,a;if(r&&e.tagName==="video"){const l=((s=e.properties)==null?void 0:s.src)||((i=e.properties)==null?void 0:i["data-url"])||"",c=((o=e.properties)==null?void 0:o.title)||((a=e.properties)==null?void 0:a["data-name"])||"";r.children[n]={type:"text",value:`![${c}](${l})`}}})}}function l_(t){return FH().use(Rbe,{fragment:!0}).use(zke).use(Hke).use(Uke).use(uye).use(BH).use(ike,{handlers:{text:e=>e.value}}).processSync(t).value}function Vke(t,e,n,r){const s=A1(e,n).exportBlocks(t,r);return l_(s)}function XH(t){const e=[];return t.descendants(n=>{var r,s;const i=tn(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((s=n.firstChild)==null||s.forEach(o=>{e.push(Ut(o,i))}),!1):n.type.isInGroup("bnBlock")?(e.push(Ut(n,i)),!1):!0}),e}class yc extends Ne{constructor(e,n){super(e,n),ct(this,"nodes");const r=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(s,i,o)=>{if(o!==null&&o.eq(r))return this.nodes.push(s),!1})}static create(e,n,r=n){return new yc(e.resolve(n),e.resolve(r))}content(){return new ue(Q.from(this.nodes),0,0)}eq(e){if(!(e instanceof yc)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}map(e,n){const r=n.mapResult(this.from),s=n.mapResult(this.to);return s.deleted?Ne.near(e.resolve(r.pos)):r.deleted?Ne.near(e.resolve(s.pos)):new yc(e.resolve(r.pos),e.resolve(s.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}}Ne.jsonID("multiple-node",yc);let ti;function Wke(t,e){let n,r;const s=e.resolve(t.from).node().type.spec.group==="blockContent",i=e.resolve(t.to).node().type.spec.group==="blockContent",o=Math.min(t.$anchor.depth,t.$head.depth);if(s&&i){const a=t.$from.start(o-1),l=t.$to.end(o-1);n=e.resolve(a-1).pos,r=e.resolve(l+1).pos}else n=t.from,r=t.to;return{from:n,to:r}}function xI(t,e,n=e){e===n&&(n+=t.state.doc.resolve(e+1).node().nodeSize);const r=t.domAtPos(e).node.cloneNode(!0),s=t.domAtPos(e).node,i=(d,h)=>Array.prototype.indexOf.call(d.children,h),o=i(s,t.domAtPos(e+1).node.parentElement),a=i(s,t.domAtPos(n-1).node.parentElement);for(let d=s.childElementCount-1;d>=0;d--)(d>a||d<o)&&r.removeChild(r.children[d]);ZH(t.root),ti=r;const l=ti.getElementsByTagName("iframe");for(let d=0;d<l.length;d++){const h=l[d],f=h.parentElement;f&&f.removeChild(h)}const c=t.dom.className.split(" ").filter(d=>d!=="ProseMirror"&&d!=="bn-root"&&d!=="bn-editor").join(" ");ti.className=ti.className+" bn-drag-preview "+c,t.root instanceof ShadowRoot?t.root.appendChild(ti):t.root.body.appendChild(ti)}function ZH(t){ti!==void 0&&(t instanceof ShadowRoot?t.removeChild(ti):t.body.removeChild(ti),ti=void 0)}function qke(t,e,n){if(!t.dataTransfer||n.headless)return;const r=n.prosemirrorView,s=xr(e.id,r.state.doc);if(!s)throw new Error(`Block with ID ${e.id} not found`);const i=s.posBeforeNode;if(i!=null){const o=r.state.selection,a=r.state.doc,{from:l,to:c}=Wke(o,a),d=l<=i&&i<c,h=o.$anchor.node()!==o.$head.node()||o instanceof yc;d&&h?(r.dispatch(r.state.tr.setSelection(yc.create(a,l,c))),xI(r,l,c)):(r.dispatch(r.state.tr.setSelection(ve.create(r.state.doc,i))),xI(r,i));const f=r.state.selection.content(),p=n.pmSchema,m=r.serializeForClipboard(f).dom.innerHTML,g=A1(p,n),x=XH(f.content),b=g.exportBlocks(x,{}),v=l_(b);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",m),t.dataTransfer.setData("text/html",b),t.dataTransfer.setData("text/plain",v),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(ti,0,0)}}const yI=250;function vC(t,e,n=!0){const r=t.root.elementsFromPoint(e.left,e.top);for(const s of r)if(t.dom.contains(s))return n&&s.closest("[data-node-type=columnList]")?vC(t,{left:e.left+50,top:e.top},!1):QH(s,t)}function Gke(t,e){if(!e.dom.firstChild)return;const n=e.dom.firstChild.getBoundingClientRect(),r={left:Math.min(Math.max(n.left+10,t.x),n.right-10),top:t.y},s=vC(e,r);if(!s)return;const i=s.node.getBoundingClientRect();return vC(e,{left:i.right-10,top:t.y},!1)}class Yke{constructor(e,n,r){ct(this,"state"),ct(this,"emitUpdate"),ct(this,"mousePos"),ct(this,"hoveredBlock"),ct(this,"menuFrozen",!1),ct(this,"isDragOrigin",!1),ct(this,"updateState",s=>{this.state=s,this.emitUpdate(this.state)}),ct(this,"updateStateFromMousePos",()=>{var s,i,o,a,l;if(this.menuFrozen||!this.mousePos)return;const c=this.findClosestEditorElement({clientX:this.mousePos.x,clientY:this.mousePos.y});if((c==null?void 0:c.element)!==this.pmView.dom||c.distance>yI){(s=this.state)!=null&&s.show&&(this.state.show=!1,this.updateState(this.state));return}const d=Gke(this.mousePos,this.pmView);if(!d||!this.editor.isEditable){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.updateState(this.state));return}if(!((o=this.state)!=null&&o.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===d.id)&&(this.hoveredBlock=d.node,this.editor.isEditable)){const h=d.node.getBoundingClientRect(),f=d.node.closest("[data-node-type=column]");this.state={show:!0,referencePos:new DOMRect(f?f.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,h.y,h.width,h.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))},this.updateState(this.state)}}),ct(this,"onDragStart",s=>{var i;const o=(i=s.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!o||this.pmView.dragging)return;const a=document.createElement("div");a.innerHTML=o;const l=ui.fromSchema(this.pmView.state.schema).parse(a,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new ue(l.content,0,0),move:!0}}),ct(this,"findClosestEditorElement",s=>{const i=Array.from(this.pmView.root.querySelectorAll(".bn-editor"));if(i.length===0)return null;let o=i[0],a=Number.MAX_VALUE;return i.forEach(l=>{const c=l.querySelector(".bn-block-group").getBoundingClientRect(),d=s.clientX<c.left?c.left-s.clientX:s.clientX>c.right?s.clientX-c.right:0,h=s.clientY<c.top?c.top-s.clientY:s.clientY>c.bottom?s.clientY-c.bottom:0,f=Math.sqrt(Math.pow(d,2)+Math.pow(h,2));f<a&&(a=f,o=l)}),{element:o,distance:a}}),ct(this,"onDragOver",s=>{if(s.synthetic)return;const i=this.getDragEventContext(s);if(!i||!i.isDropPoint){this.closeDropCursor();return}i.isDropPoint&&!i.isDropWithinEditorBounds&&this.dispatchSyntheticEvent(s)}),ct(this,"closeDropCursor",()=>{const s=new Event("dragleave",{bubbles:!1});s.synthetic=!0,this.pmView.dom.dispatchEvent(s)}),ct(this,"getDragEventContext",s=>{var i;const o=!((i=s.dataTransfer)!=null&&i.types.includes("blocknote/html"))&&!!this.pmView.dragging,a=!!this.isDragOrigin,l=o||a,c=this.findClosestEditorElement(s);if(!c||c.distance>yI)return;const d=c.element===this.pmView.dom,h=d&&c.distance===0;if(!(!d&&!l))return{isDropPoint:d,isDropWithinEditorBounds:h,isDragOrigin:l}}),ct(this,"onDrop",s=>{if(s.synthetic)return;const i=this.getDragEventContext(s);if(!i){this.closeDropCursor();return}const{isDropPoint:o,isDropWithinEditorBounds:a,isDragOrigin:l}=i;if(!a&&o&&this.dispatchSyntheticEvent(s),o){if(this.pmView.dragging)return;this.pmView.dispatch(this.pmView.state.tr.setSelection(xe.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.anchor)));return}else if(l){setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0);return}}),ct(this,"onDragEnd",s=>{s.synthetic||(this.pmView.dragging=null)}),ct(this,"onKeyDown",s=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),ct(this,"onMouseMove",s=>{var i;if(this.menuFrozen)return;this.mousePos={x:s.clientX,y:s.clientY};const o=this.pmView.dom.getBoundingClientRect(),a=this.mousePos.x>o.left&&this.mousePos.x<o.right&&this.mousePos.y>o.top&&this.mousePos.y<o.bottom,l=this.pmView.dom.parentElement;if(a&&s&&s.target&&!(l===s.target||l.contains(s.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");r(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0)}dispatchSyntheticEvent(e){const n=new Event(e.type,e),r=this.pmView.dom.firstChild.getBoundingClientRect();n.clientX=e.clientX,n.clientY=e.clientY,n.clientX=Math.min(Math.max(e.clientX,r.left),r.left+r.width),n.clientY=Math.min(Math.max(e.clientY,r.top),r.top+r.height),n.dataTransfer=e.dataTransfer,n.preventDefault=()=>e.preventDefault(),n.synthetic=!0,this.pmView.dom.dispatchEvent(n)}update(e,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0)}}const Kke=new We("SideMenuPlugin"),yi=it(({editor:t})=>{let e;const n=Al(void 0);return{key:"sideMenu",store:n,prosemirrorPlugins:[new Ie({key:Kke,view:r=>(e=new Yke(t,r,s=>{n.setState({...s})}),e)})],blockDragStart(r,s){e&&(e.isDragOrigin=!0),qke(r,s,t)},blockDragEnd(){ZH(t.prosemirrorView.root),e&&(e.isDragOrigin=!1),t.blur()},freezeMenu(){e.menuFrozen=!0,e.state.show=!0,e.emitUpdate(e.state)},unfreezeMenu(){e.menuFrozen=!1,e.state.show=!1,e.emitUpdate(e.state)}}});let _r;function vI(t){_r||(_r=document.createElement("div"),_r.innerHTML="_",_r.style.opacity="0",_r.style.height="1px",_r.style.width="1px",t instanceof Document?t.body.appendChild(_r):t.appendChild(_r))}function Jke(t){_r&&(t instanceof Document?t.body.removeChild(_r):t.removeChild(_r),_r=void 0)}function B0(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function Qke(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const n=e.parentNode;if(!n||!(n instanceof Element))return;e=n}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function Xke(t,e){const n=e.querySelectorAll(t);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}let Zke=class{constructor(e,n,r){ct(this,"state"),ct(this,"emitUpdate"),ct(this,"tableId"),ct(this,"tablePos"),ct(this,"tableElement"),ct(this,"menuFrozen",!1),ct(this,"mouseState","up"),ct(this,"prevWasEditable",null),ct(this,"viewMousedownHandler",()=>{this.mouseState="down"}),ct(this,"mouseUpHandler",s=>{this.mouseState="up",this.mouseMoveHandler(s)}),ct(this,"mouseMoveHandler",s=>{var i,o,a,l,c,d,h;if(this.menuFrozen||this.mouseState==="selecting"||!(s.target instanceof Element)||!this.pmView.dom.contains(s.target))return;const f=Qke(s.target);if((f==null?void 0:f.type)==="cell"&&this.mouseState==="down"&&!((i=this.state)!=null&&i.draggingState)){this.mouseState="selecting",(o=this.state)!=null&&o.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!f||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!f.tbodyNode)return;const p=f.tbodyNode.getBoundingClientRect(),m=QH(f.domNode,this.pmView);if(!m)return;this.tableElement=m.node;let g;const x=this.editor.transact(w=>xr(m.id,w.doc));if(!x)throw new Error(`Block with ID ${m.id} not found`);const b=Ut(x.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(It(this.editor,"table")&&(this.tablePos=x.posBeforeNode+1,g=b),!g)return;this.tableId=m.id;const v=(l=f.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if((f==null?void 0:f.type)==="wrapper"){const w=s.clientY>=p.bottom-1&&s.clientY<p.bottom+20,S=s.clientX>=p.right-1&&s.clientX<p.right+20,E=s.clientX>p.right||s.clientY>p.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:w,showAddOrRemoveColumnsButton:S,referencePosTable:p,block:g,widgetContainer:v,colIndex:E||(c=this.state)==null?void 0:c.colIndex,rowIndex:E||(d=this.state)==null?void 0:d.rowIndex,referencePosCell:E||(h=this.state)==null?void 0:h.referencePosCell}}else{const w=B0(f.domNode),S=B0(f.domNode.parentElement),E=f.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===m.id&&this.state.rowIndex===S&&this.state.colIndex===w)return;this.state={show:!0,showAddOrRemoveColumnsButton:w===g.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:S===g.content.rows.length-1,referencePosTable:p,block:g,draggingState:void 0,referencePosCell:E,colIndex:w,rowIndex:S,widgetContainer:v}}return this.emitUpdate(),!1}),ct(this,"dragOverHandler",s=>{var i;if(((i=this.state)==null?void 0:i.draggingState)===void 0)return;s.preventDefault(),s.dataTransfer.dropEffect="move",Xke(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const o={left:Math.min(Math.max(s.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(s.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(o.left,o.top).filter(g=>g.tagName==="TD"||g.tagName==="TH");if(a.length===0)return;const l=a[0];let c=!1;const d=B0(l.parentElement),h=B0(l),f=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,p=(this.state.draggingState.draggedCellOrientation==="row"?d:h)!==f;(this.state.rowIndex!==d||this.state.colIndex!==h)&&(this.state.rowIndex=d,this.state.colIndex=h,this.state.referencePosCell=l.getBoundingClientRect(),c=!0);const m=this.state.draggingState.draggedCellOrientation==="row"?o.top:o.left;this.state.draggingState.mousePos!==m&&(this.state.draggingState.mousePos=m,c=!0),c&&this.emitUpdate(),p&&this.editor.transact(g=>g.setMeta(cf,!0))}),ct(this,"dropHandler",s=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");s.preventDefault();const{draggingState:i,colIndex:o,rowIndex:a}=this.state,l=this.state.block.content.columnWidths;if(i.draggedCellOrientation==="row"){if(!L7(this.state.block,i.originalIndex,a))return!1;const c=zae(this.state.block,i.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:c}})}else{if(!B7(this.state.block,i.originalIndex,o))return!1;const c=Uae(this.state.block,i.originalIndex,o),[d]=l.splice(i.originalIndex,1);l.splice(o,0,d),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:l,rows:c}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((e=this.tableElement)!=null&&e.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=ZT(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const s=this.tableElement.querySelector("tbody");if(!s)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const i=s.children[this.state.rowIndex].children[this.state.colIndex];i?this.state.referencePosCell=i.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=s.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}};const cf=new We("TableHandlesPlugin"),_t=it(({editor:t})=>{let e;const n=Al(void 0);return{key:"tableHandles",store:n,prosemirrorPlugins:[new Ie({key:cf,view:r=>(e=new Zke(t,r,s=>{n.setState(s.block?{...s,draggingState:s.draggingState?{...s.draggingState}:void 0}:void 0)}),e),props:{decorations:r=>{if(e===void 0||e.state===void 0||e.state.draggingState===void 0||e.tablePos===void 0)return;const s=e.state.draggingState.draggedCellOrientation==="row"?e.state.rowIndex:e.state.colIndex;if(s===void 0)return;const i=[],{block:o,draggingState:a}=e.state,{originalIndex:l,draggedCellOrientation:c}=a;if(s===l||!o||c==="row"&&!L7(o,l,s)||c==="col"&&!B7(o,l,s))return Re.create(r.doc,i);const d=r.doc.resolve(e.tablePos+1);return e.state.draggingState.draggedCellOrientation==="row"?N2(e.state.block,s).forEach(({row:h,col:f})=>{const p=r.doc.resolve(d.posAtIndex(h)+1),m=r.doc.resolve(p.posAtIndex(f)+1),g=m.node(),x=m.pos+(s>l?g.nodeSize-2:0);i.push(at.widget(x,()=>{const b=document.createElement("div");return b.className="bn-table-drop-cursor",b.style.left="0",b.style.right="0",s>l?b.style.bottom="-2px":b.style.top="-3px",b.style.height="4px",b}))}):_2(e.state.block,s).forEach(({row:h,col:f})=>{const p=r.doc.resolve(d.posAtIndex(h)+1),m=r.doc.resolve(p.posAtIndex(f)+1),g=m.node(),x=m.pos+(s>l?g.nodeSize-2:0);i.push(at.widget(x,()=>{const b=document.createElement("div");return b.className="bn-table-drop-cursor",b.style.top="0",b.style.bottom="0",s>l?b.style.right="-2px":b.style.left="-3px",b.style.width="4px",b}))}),Re.create(r.doc,i)}}})],colDragStart(r){if(e===void 0||e.state===void 0||e.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");e.state.draggingState={draggedCellOrientation:"col",originalIndex:e.state.colIndex,mousePos:r.clientX},e.emitUpdate(),t.transact(s=>s.setMeta(cf,{draggedCellOrientation:e.state.draggingState.draggedCellOrientation,originalIndex:e.state.colIndex,newIndex:e.state.colIndex,tablePos:e.tablePos})),!t.headless&&(vI(t.prosemirrorView.root),r.dataTransfer.setDragImage(_r,0,0),r.dataTransfer.effectAllowed="move")},rowDragStart(r){if(e.state===void 0||e.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");e.state.draggingState={draggedCellOrientation:"row",originalIndex:e.state.rowIndex,mousePos:r.clientY},e.emitUpdate(),t.transact(s=>s.setMeta(cf,{draggedCellOrientation:e.state.draggingState.draggedCellOrientation,originalIndex:e.state.rowIndex,newIndex:e.state.rowIndex,tablePos:e.tablePos})),!t.headless&&(vI(t.prosemirrorView.root),r.dataTransfer.setDragImage(_r,0,0),r.dataTransfer.effectAllowed="copyMove")},dragEnd(){if(e.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");e.state.draggingState=void 0,e.emitUpdate(),t.transact(r=>r.setMeta(cf,null)),!t.headless&&Jke(t.prosemirrorView.root)},freezeHandles(){e.menuFrozen=!0},unfreezeHandles(){e.menuFrozen=!1},getCellsAtRowHandle(r,s){return N2(r,s)},getCellsAtColumnHandle(r,s){return _2(r,s)},setCellSelection(r,s,i=s){if(!e)throw new Error("Table handles view not initialized");const o=r.doc.resolve(e.tablePos+1),a=r.doc.resolve(o.posAtIndex(s.row)+1),l=r.doc.resolve(a.posAtIndex(s.col)),c=r.doc.resolve(o.posAtIndex(i.row)+1),d=r.doc.resolve(c.posAtIndex(i.col)),h=r.tr;return h.setSelection(new pt(l,d)),r.apply(h)},addRowOrColumn(r,s){t.exec((i,o)=>{const a=this.setCellSelection(i,s.orientation==="row"?{row:r,col:0}:{row:0,col:r});return s.orientation==="row"?s.side==="above"?mle(a,o):gle(a,o):s.side==="left"?ule(a,o):dle(a,o)})},removeRowOrColumn(r,s){return s==="row"?t.exec((i,o)=>{const a=this.setCellSelection(i,{row:r,col:0});return xle(a,o)}):t.exec((i,o)=>{const a=this.setCellSelection(i,{row:0,col:r});return fle(a,o)})},mergeCells(r){return t.exec((s,i)=>{const o=r?this.setCellSelection(s,r.relativeStartCell,r.relativeEndCell):s;return vle(o,i)})},splitCell(r){return t.exec((s,i)=>{const o=r?this.setCellSelection(s,r):s;return wle(o,i)})},getCellSelection(){return t.transact(r=>{const s=r.selection;let i=s.$from,o=s.$to;if(nC(s)){const{ranges:g}=s;g.forEach(x=>{i=x.$from.min(i??x.$from),o=x.$to.max(o??x.$to)})}else if(i=r.doc.resolve(s.$from.pos-s.$from.parentOffset-1),o=r.doc.resolve(s.$to.pos-s.$to.parentOffset-1),i.pos===0||o.pos===0)return;const a=r.doc.resolve(i.pos-i.parentOffset-1),l=r.doc.resolve(o.pos-o.parentOffset-1),c=r.doc.resolve(a.pos-a.parentOffset-1),d=i.index(a.depth),h=a.index(c.depth),f=o.index(l.depth),p=l.index(c.depth),m=[];for(let g=h;g<=p;g++)for(let x=d;x<=f;x++)m.push({row:g,col:x});return{from:{row:h,col:d},to:{row:p,col:f},cells:m}})},getMergeDirection(r){return t.transact(s=>{const i=nC(s.selection)?s.selection:void 0;if(!i||!r||i.ranges.length<=1)return;const o=this.getCellSelection();if(o)return qae(o.from,o.to,r)?"vertical":"horizontal"})},cropEmptyRowsOrColumns(r,s){return Vae(r,s)},addRowsOrColumns(r,s,i){return Wae(r,s,i)}}}),wI=new We("trailingNode"),eEe=it(()=>({key:"trailingNode",prosemirrorPlugins:[new Ie({key:wI,appendTransaction:(t,e,n)=>{const{doc:r,tr:s,schema:i}=n,o=wI.getState(n),a=r.content.size-2,l=i.nodes.blockContainer,c=i.nodes.paragraph;if(o)return s.insert(a,l.create(void 0,c.create()))},state:{init:(t,e)=>{},apply:(t,e)=>{if(!t.docChanged)return e;let n=t.doc.lastChild;if(!n||n.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(n=n.lastChild,!n||n.type.name!=="blockContainer")return!0;const r=n.firstChild;if(!r)throw new Error("Expected blockContent");return n.nodeSize>4||r.type.spec.content!=="inline*"}}})]}));var tEe=Object.defineProperty,nEe=(t,e,n)=>e in t?tEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,To=(t,e,n)=>nEe(t,typeof e!="symbol"?e+"":e,n);function rEe(t){const e=iEe(t);let{roots:n,nonRoots:r}=kI(e);const s=[];for(;n.size;){s.push(n);const i=new Set;for(const o of n){const a=t.get(o);if(a)for(const l of a){const c=e.get(l);if(c===void 0)continue;const d=c-1;e.set(l,d),d===0&&i.add(l)}}n=i}if(r=kI(e).nonRoots,r.size)throw new Error(`Cycle(s) detected; toposort only works on acyclic graphs. Cyclic nodes: ${Array.from(r).join(", ")}`);return s}function sEe(t){const e=oEe(t);return rEe(e)}function iEe(t){const e=new Map;for(const[n,r]of t.entries()){e.has(n)||e.set(n,0);for(const s of r){const i=e.get(s)??0;e.set(s,i+1)}}return e}function kI(t){const e=new Set,n=new Set;for(const[r,s]of t.entries())s===0?e.add(r):n.add(r);return{roots:e,nonRoots:n}}function oEe(t){const e=new Map;for(const[n,r]of t.entries()){e.has(n)||e.set(n,new Set);for(const s of r)e.has(s)||e.set(s,new Set),e.get(s).add(n)}return e}function aEe(){return new Map}function EI(t,e,n){return t.has(e)||t.set(e,new Set),t.get(e).add(n),t}function eU(t){const e=aEe();for(const s of t)Array.isArray(s.runsBefore)&&s.runsBefore.length>0?s.runsBefore.forEach(i=>{EI(e,s.key,i)}):EI(e,"default",s.key);const n=sEe(e),r=n.findIndex(s=>s.has("default"));return s=>91+(n.findIndex(i=>i.has(s))+r)*10}function CI(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}class lEe{constructor(e){To(this,"BlockNoteEditor","only for types"),To(this,"Block","only for types"),To(this,"PartialBlock","only for types"),To(this,"inlineContentSpecs"),To(this,"styleSpecs"),To(this,"blockSpecs"),To(this,"blockSchema"),To(this,"inlineContentSchema"),To(this,"styleSchema"),this.opts=e;const{blockSpecs:n,inlineContentSpecs:r,styleSpecs:s,blockSchema:i,inlineContentSchema:o,styleSchema:a}=this.init();this.blockSpecs=n,this.styleSpecs=s,this.styleSchema=a,this.inlineContentSpecs=r,this.blockSchema=i,this.inlineContentSchema=o}init(){const e=eU(Object.entries({...this.opts.blockSpecs,...this.opts.inlineContentSpecs,...this.opts.styleSpecs}).map(([i,o])=>{var a;return{key:i,runsBefore:((a=o.implementation)==null?void 0:a.runsBefore)??[]}})),n=Object.fromEntries(Object.entries(this.opts.blockSpecs).map(([i,o])=>[i,Lfe(o.config,o.implementation,o.extensions,e(i))])),r=Object.fromEntries(Object.entries(this.opts.inlineContentSpecs).map(([i,o])=>{var a;return typeof o.config!="object"?[i,o]:[i,{...o,implementation:{...o.implementation,node:(a=o.implementation)==null?void 0:a.node.extend({priority:e(i)})}}]})),s=Object.fromEntries(Object.entries(this.opts.styleSpecs).map(([i,o])=>{var a;return[i,{...o,implementation:{...o.implementation,mark:(a=o.implementation)==null?void 0:a.mark.extend({priority:e(i)})}}]}));return{blockSpecs:n,blockSchema:Object.fromEntries(Object.entries(n).map(([i,o])=>[i,o.config])),inlineContentSpecs:CI(r),styleSpecs:CI(s),inlineContentSchema:k$(r),styleSchema:C$(s)}}extend(e){Object.assign(this.opts.blockSpecs,e.blockSpecs),Object.assign(this.opts.inlineContentSpecs,e.inlineContentSpecs),Object.assign(this.opts.styleSpecs,e.styleSpecs);const{blockSpecs:n,inlineContentSpecs:r,styleSpecs:s,blockSchema:i,inlineContentSchema:o,styleSchema:a}=this.init();return this.blockSpecs=n,this.styleSpecs=s,this.styleSchema=a,this.inlineContentSpecs=r,this.blockSchema=i,this.inlineContentSchema=o,this}}let tU=class nU extends lEe{static create(e){return new nU({blockSpecs:(e==null?void 0:e.blockSpecs)??eme,inlineContentSpecs:(e==null?void 0:e.inlineContentSpecs)??R$,styleSpecs:(e==null?void 0:e.styleSpecs)??DN})}};var cEe=Object.defineProperty,uEe=(t,e,n)=>e in t?cEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dEe=(t,e,n)=>uEe(t,e+"",n);let c_=class{constructor(){dEe(this,"callbacks",{})}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),()=>this.off(e,n)}emit(e,...n){const r=this.callbacks[e];r&&r.forEach(s=>s.apply(this,n))}off(e,n){const r=this.callbacks[e];r&&(n?this.callbacks[e]=r.filter(s=>s!==n):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}};const hEe={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},heading_4:{title:"Heading 4",subtext:"Minor subsection heading",aliases:["h4","heading4","subheading4"],group:"Subheadings"},heading_5:{title:"Heading 5",subtext:"Small subsection heading",aliases:["h5","heading5","subheading5"],group:"Subheadings"},heading_6:{title:"Heading 6",subtext:"Lowest-level heading",aliases:["h6","heading6","subheading6"],group:"Subheadings"},toggle_heading:{title:"Toggle Heading 1",subtext:"Toggleable top-level heading",aliases:["h","heading1","h1","collapsable"],group:"Subheadings"},toggle_heading_2:{title:"Toggle Heading 2",subtext:"Toggleable key section heading",aliases:["h2","heading2","subheading","collapsable"],group:"Subheadings"},toggle_heading_3:{title:"Toggle Heading 3",subtext:"Toggleable subsection and group heading",aliases:["h3","heading3","subheading","collapsable"],group:"Subheadings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},toggle_list:{title:"Toggle List",subtext:"List with hideable sub-items",aliases:["li","list","toggleList","toggle list","collapsable list"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"},divider:{title:"Divider",subtext:"Visually divide blocks",aliases:["divider","hr","line","horizontal rule"],group:"Basic blocks"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",toggleListItem:"Toggle",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{add_button_text:{image:"Add image",video:"Add video",audio:"Add audio",file:"Add file"}},toggle_blocks:{add_block_button:"Empty toggle. Click to add a block."},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{edited:"edited",save_button_text:"Save",cancel_button_text:"Cancel",actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:t=>`${t} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};class tu{constructor(e,n,r={}){ko(this,"match");ko(this,"handler");ko(this,"undoable");ko(this,"inCode");ko(this,"inCodeMark");this.match=e,this.match=e,this.handler=typeof n=="string"?fEe(n):n,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function fEe(t){return function(e,n,r,s){let i=t;if(n[1]){let o=n[0].lastIndexOf(n[1]);i+=n[0].slice(o+n[1].length),r+=o;let a=r-s;a>0&&(i=n[0].slice(o-a,o)+i,r=s)}return e.tr.insertText(i,r,s)}}const pEe=500;function mEe({rules:t}){let e=new Ie({state:{init(){return null},apply(n,r){let s=n.getMeta(this);return s||(n.selectionSet||n.docChanged?null:r)}},props:{handleTextInput(n,r,s,i){return SI(n,r,s,i,t,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&SI(n,r.pos,r.pos,"",t,e)})}}},isInputRules:!0});return e}function SI(t,e,n,r,s,i){if(t.composing)return!1;const o=t.state.tr.insertText(r,e,n),a=o.mapping.map(e),l=o.mapping.map(n);let c=null,d=o.doc.resolve(a),h=d.parent.textBetween(Math.max(0,d.parentOffset-pEe),d.parentOffset,null,"");for(let f=0;f<s.length;f++){let p=s[f];if(!p.inCodeMark&&d.marks().some(x=>x.type.spec.code))continue;if(d.parent.type.spec.code){if(!p.inCode)continue}else if(p.inCode==="only")continue;let m=p.match.exec(h);if(!m||m[0].length<r.length)continue;c??(c=t.state.apply(o));let g=p.handler(c,m,a-m[0].length,l);if(g)return t.dispatch(o),t.dispatch(pme(t.state.tr)),p.undoable&&g.setMeta(i,{transform:g,from:a,to:l,text:r}),t.dispatch(g),!0}return!1}new tu(/--$/,"",{inCodeMark:!1});new tu(/\.\.\.$/,"",{inCodeMark:!1});new tu(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new tu(/"$/,"",{inCodeMark:!1});new tu(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new tu(/'$/,"",{inCodeMark:!1});class Yt extends Ne{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Yt.valid(r)?new Yt(r):Ne.near(r)}content(){return ue.empty}eq(e){return e instanceof Yt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Yt(e.resolve(n.pos))}getBookmark(){return new u_(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!gEe(e)||!bEe(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Yt.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=n;let l=e.doc.resolve(s);if(Yt.valid(l))return l}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!ve.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let a=e.doc.resolve(s);if(Yt.valid(a))return a}return null}}}Yt.prototype.visible=!1;Yt.findFrom=Yt.findGapCursorFrom;Ne.jsonID("gapcursor",Yt);class u_{constructor(e){this.pos=e}map(e){return new u_(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Yt.valid(n)?new Yt(n):Ne.near(n)}}function rU(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function gEe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||rU(s.type))return!0;if(s.inlineContent)return!1}}return!0}function bEe(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||rU(s.type))return!0;if(s.inlineContent)return!1}}return!0}function xEe(){return new Ie({props:{decorations:kEe,createSelectionBetween(t,e,n){return e.pos==n.pos&&Yt.valid(n)?new Yt(n):null},handleClick:vEe,handleKeyDown:yEe,handleDOMEvents:{beforeinput:wEe}}})}const yEe=RT({ArrowLeft:$0("horiz",-1),ArrowRight:$0("horiz",1),ArrowUp:$0("vert",-1),ArrowDown:$0("vert",1)});function $0(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof xe){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Yt.findGapCursorFrom(a,e,l);return c?(s&&s(r.tr.setSelection(new Yt(c))),!0):!1}}function vEe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Yt.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&ve.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Yt(r))),!0)}function wEe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Yt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=Q.empty;for(let o=r.length-1;o>=0;o--)s=Q.from(r[o].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new ue(s,0,0));return i.setSelection(xe.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function kEe(t){if(!(t.selection instanceof Yt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Re.create(t.doc,[at.widget(t.selection.head,e,{key:"gapcursor"})])}ut.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Ie({key:new We("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>s){const o=i-s,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),i=this.storage.characters({node:e.doc});if(i<=r||s>r&&i>r&&i<=s)return!0;if(s>r&&i>r&&i>s||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=i-r,c=a-l,d=a;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>r)}})]}});ut.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[P$(this.options)]}});ut.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ie({key:new We("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,i=[];if(!n||!r)return Re.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(s>=c&&s<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(s>=c&&s<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(at.node(c,c+l.nodeSize,{class:this.options.className}))}),Re.create(t,i)}}})]}});var EEe=ut.create({name:"gapCursor",addProseMirrorPlugins(){return[xEe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=mt(Ee(t,"allowGapCursor",n)))!=null?e:null}}});ut.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ie({key:new We("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const i=this.editor.isEmpty;return t.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,c=!o.isLeaf&&Ky(o);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];i&&d.push(this.options.emptyEditorClass);const h=at.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});s.push(h)}return this.options.includeChildren}),Re.create(t,s)}}})]}});ut.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Ie({key:new We("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||p7(n.selection)||t.view.dragging?null:Re.create(n.doc,[at.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function TI({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}ut.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new We(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new Ie({key:e,appendTransaction:(s,i,o)=>{const{doc:a,tr:l,schema:c}=o,d=e.getState(o),h=a.content.size,f=c.nodes[n];if(d)return l.insert(h,f.create())},state:{init:(s,i)=>{const o=i.tr.doc.lastChild;return!TI({node:o,types:r})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const o=s.doc.lastChild;return!TI({node:o,types:r})}}})]}});ut.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>LN(t,e),redo:()=>({state:t,dispatch:e})=>BN(t,e)}},addProseMirrorPlugins(){return[B$(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}});const CEe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",SEe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",wC="numeric",kC="ascii",EC="alpha",Pf="asciinumeric",uf="alphanumeric",CC="domain",sU="emoji",TEe="scheme",NEe="slashscheme",ok="whitespace";function _Ee(t,e){return t in e||(e[t]=[]),e[t]}function ac(t,e,n){e[wC]&&(e[Pf]=!0,e[uf]=!0),e[kC]&&(e[Pf]=!0,e[EC]=!0),e[Pf]&&(e[uf]=!0),e[EC]&&(e[uf]=!0),e[uf]&&(e[CC]=!0),e[sU]&&(e[CC]=!0);for(const r in e){const s=_Ee(r,n);s.indexOf(t)<0&&s.push(t)}}function AEe(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function jr(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}jr.groups={};jr.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||jr.groups;let s;return e&&e.j?s=e:(s=new jr(e),n&&r&&ac(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||jr.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,a=s.go(t);if(a?(o=new jr,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new jr,i){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(AEe(o.t,r),n);ac(i,l,r)}else n&&ac(i,n,r);o.t=i}return s.j[t]=o,o}};const $e=(t,e,n,r,s)=>t.ta(e,n,r,s),Wt=(t,e,n,r,s)=>t.tr(e,n,r,s),NI=(t,e,n,r,s)=>t.ts(e,n,r,s),le=(t,e,n,r,s)=>t.tt(e,n,r,s),jo="WORD",SC="UWORD",iU="ASCIINUMERICAL",oU="ALPHANUMERICAL",$p="LOCALHOST",TC="TLD",NC="UTLD",Lg="SCHEME",Iu="SLASH_SCHEME",d_="NUM",_C="WS",h_="NL",Df="OPENBRACE",Lf="CLOSEBRACE",px="OPENBRACKET",mx="CLOSEBRACKET",gx="OPENPAREN",bx="CLOSEPAREN",xx="OPENANGLEBRACKET",yx="CLOSEANGLEBRACKET",vx="FULLWIDTHLEFTPAREN",wx="FULLWIDTHRIGHTPAREN",kx="LEFTCORNERBRACKET",Ex="RIGHTCORNERBRACKET",Cx="LEFTWHITECORNERBRACKET",Sx="RIGHTWHITECORNERBRACKET",Tx="FULLWIDTHLESSTHAN",Nx="FULLWIDTHGREATERTHAN",_x="AMPERSAND",Ax="APOSTROPHE",jx="ASTERISK",Ta="AT",Ox="BACKSLASH",Ix="BACKTICK",Mx="CARET",Ra="COLON",f_="COMMA",Rx="DOLLAR",Bi="DOT",Px="EQUALS",p_="EXCLAMATION",ws="HYPHEN",Bf="PERCENT",Dx="PIPE",Lx="PLUS",Bx="POUND",$f="QUERY",m_="QUOTE",aU="FULLWIDTHMIDDLEDOT",g_="SEMI",$i="SLASH",Ff="TILDE",$x="UNDERSCORE",lU="EMOJI",Fx="SYM";var cU=Object.freeze({__proto__:null,ALPHANUMERICAL:oU,AMPERSAND:_x,APOSTROPHE:Ax,ASCIINUMERICAL:iU,ASTERISK:jx,AT:Ta,BACKSLASH:Ox,BACKTICK:Ix,CARET:Mx,CLOSEANGLEBRACKET:yx,CLOSEBRACE:Lf,CLOSEBRACKET:mx,CLOSEPAREN:bx,COLON:Ra,COMMA:f_,DOLLAR:Rx,DOT:Bi,EMOJI:lU,EQUALS:Px,EXCLAMATION:p_,FULLWIDTHGREATERTHAN:Nx,FULLWIDTHLEFTPAREN:vx,FULLWIDTHLESSTHAN:Tx,FULLWIDTHMIDDLEDOT:aU,FULLWIDTHRIGHTPAREN:wx,HYPHEN:ws,LEFTCORNERBRACKET:kx,LEFTWHITECORNERBRACKET:Cx,LOCALHOST:$p,NL:h_,NUM:d_,OPENANGLEBRACKET:xx,OPENBRACE:Df,OPENBRACKET:px,OPENPAREN:gx,PERCENT:Bf,PIPE:Dx,PLUS:Lx,POUND:Bx,QUERY:$f,QUOTE:m_,RIGHTCORNERBRACKET:Ex,RIGHTWHITECORNERBRACKET:Sx,SCHEME:Lg,SEMI:g_,SLASH:$i,SLASH_SCHEME:Iu,SYM:Fx,TILDE:Ff,TLD:TC,UNDERSCORE:$x,UTLD:NC,UWORD:SC,WORD:jo,WS:_C});const No=/[a-z]/,qh=new RegExp("\\p{L}","u"),ak=new RegExp("\\p{Emoji}","u"),_o=/\d/,lk=/\s/,_I="\r",ck=`
`,jEe="",OEe="",uk="";let F0=null,H0=null;function IEe(t=[]){const e={};jr.groups=e;const n=new jr;F0==null&&(F0=AI(CEe)),H0==null&&(H0=AI(SEe)),le(n,"'",Ax),le(n,"{",Df),le(n,"}",Lf),le(n,"[",px),le(n,"]",mx),le(n,"(",gx),le(n,")",bx),le(n,"<",xx),le(n,">",yx),le(n,"",vx),le(n,"",wx),le(n,"",kx),le(n,"",Ex),le(n,"",Cx),le(n,"",Sx),le(n,"",Tx),le(n,"",Nx),le(n,"&",_x),le(n,"*",jx),le(n,"@",Ta),le(n,"`",Ix),le(n,"^",Mx),le(n,":",Ra),le(n,",",f_),le(n,"$",Rx),le(n,".",Bi),le(n,"=",Px),le(n,"!",p_),le(n,"-",ws),le(n,"%",Bf),le(n,"|",Dx),le(n,"+",Lx),le(n,"#",Bx),le(n,"?",$f),le(n,'"',m_),le(n,"/",$i),le(n,";",g_),le(n,"~",Ff),le(n,"_",$x),le(n,"\\",Ox),le(n,"",aU);const r=Wt(n,_o,d_,{[wC]:!0});Wt(r,_o,r);const s=Wt(r,No,iU,{[Pf]:!0}),i=Wt(r,qh,oU,{[uf]:!0}),o=Wt(n,No,jo,{[kC]:!0});Wt(o,_o,s),Wt(o,No,o),Wt(s,_o,s),Wt(s,No,s);const a=Wt(n,qh,SC,{[EC]:!0});Wt(a,No),Wt(a,_o,i),Wt(a,qh,a),Wt(i,_o,i),Wt(i,No),Wt(i,qh,i);const l=le(n,ck,h_,{[ok]:!0}),c=le(n,_I,_C,{[ok]:!0}),d=Wt(n,lk,_C,{[ok]:!0});le(n,uk,d),le(c,ck,l),le(c,uk,d),Wt(c,lk,d),le(d,_I),le(d,ck),Wt(d,lk,d),le(d,uk,d);const h=Wt(n,ak,lU,{[sU]:!0});le(h,"#"),Wt(h,ak,h),le(h,jEe,h);const f=le(h,OEe);le(f,"#"),Wt(f,ak,h);const p=[[No,o],[_o,s]],m=[[No,null],[qh,a],[_o,i]];for(let g=0;g<F0.length;g++)ma(n,F0[g],TC,jo,p);for(let g=0;g<H0.length;g++)ma(n,H0[g],NC,SC,m);ac(TC,{tld:!0,ascii:!0},e),ac(NC,{utld:!0,alpha:!0},e),ma(n,"file",Lg,jo,p),ma(n,"mailto",Lg,jo,p),ma(n,"http",Iu,jo,p),ma(n,"https",Iu,jo,p),ma(n,"ftp",Iu,jo,p),ma(n,"ftps",Iu,jo,p),ac(Lg,{scheme:!0,ascii:!0},e),ac(Iu,{slashscheme:!0,ascii:!0},e),t=t.sort((g,x)=>g[0]>x[0]?1:-1);for(let g=0;g<t.length;g++){const x=t[g][0],v=t[g][1]?{[TEe]:!0}:{[NEe]:!0};x.indexOf("-")>=0?v[CC]=!0:No.test(x)?_o.test(x)?v[Pf]=!0:v[kC]=!0:v[wC]=!0,NI(n,x,x,v)}return NI(n,"localhost",$p,{ascii:!0}),n.jd=new jr(Fx),{start:n,tokens:Object.assign({groups:e},cU)}}function uU(t,e){const n=MEe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let a=t,l=null,c=0,d=null,h=-1,f=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(h=0,f=0,d=a):h>=0&&(h+=n[o].length,f++),c+=n[o].length,i+=n[o].length,o++;i-=h,o-=f,c-=h,s.push({t:d.t,v:e.slice(i-c,i),s:i-c,e:i})}return s}function MEe(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function ma(t,e,n,r,s){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new jr(r),i.jr=s.slice(),t.j[l]=i),t=i}return i=new jr(n),i.jr=s.slice(),t.j[e[o-1]]=i,i}function AI(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let i=0;for(;s.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(t[r]),r++}return e}const Fp={defaultProtocol:"http",events:null,format:jI,formatHref:jI,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function b_(t,e=null){let n=Object.assign({},Fp);t&&(n=Object.assign(n,t instanceof b_?t.o:t));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}b_.prototype={o:Fp,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Fp[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function jI(t){return t}function dU(t,e){this.t="token",this.v=t,this.tk=e}dU.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Fp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),i=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),h=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),d&&Object.assign(o,d),{tagName:s,attributes:o,content:i,eventListeners:h}}};function j1(t,e){class n extends dU{constructor(s,i){super(s,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const OI=j1("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),II=j1("text"),REe=j1("nl"),U0=j1("url",{isLink:!0,toHref(t=Fp.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==$p&&t[1].t===Ra}}),vs=t=>new jr(t);function PEe({groups:t}){const e=t.domain.concat([_x,jx,Ta,Ox,Ix,Mx,Rx,Px,ws,d_,Bf,Dx,Lx,Bx,$i,Fx,Ff,$x]),n=[Ax,Ra,f_,Bi,p_,Bf,$f,m_,g_,xx,yx,Df,Lf,mx,px,gx,bx,vx,wx,kx,Ex,Cx,Sx,Tx,Nx],r=[_x,Ax,jx,Ox,Ix,Mx,Rx,Px,ws,Df,Lf,Bf,Dx,Lx,Bx,$f,$i,Fx,Ff,$x],s=vs(),i=le(s,Ff);$e(i,r,i),$e(i,t.domain,i);const o=vs(),a=vs(),l=vs();$e(s,t.domain,o),$e(s,t.scheme,a),$e(s,t.slashscheme,l),$e(o,r,i),$e(o,t.domain,o);const c=le(o,Ta);le(i,Ta,c),le(a,Ta,c),le(l,Ta,c);const d=le(i,Bi);$e(d,r,i),$e(d,t.domain,i);const h=vs();$e(c,t.domain,h),$e(h,t.domain,h);const f=le(h,Bi);$e(f,t.domain,h);const p=vs(OI);$e(f,t.tld,p),$e(f,t.utld,p),le(c,$p,p);const m=le(h,ws);le(m,ws,m),$e(m,t.domain,h),$e(p,t.domain,h),le(p,Bi,f),le(p,ws,m);const g=le(p,Ra);$e(g,t.numeric,OI);const x=le(o,ws),b=le(o,Bi);le(x,ws,x),$e(x,t.domain,o),$e(b,r,i),$e(b,t.domain,o);const v=vs(U0);$e(b,t.tld,v),$e(b,t.utld,v),$e(v,t.domain,o),$e(v,r,i),le(v,Bi,b),le(v,ws,x),le(v,Ta,c);const w=le(v,Ra),S=vs(U0);$e(w,t.numeric,S);const E=vs(U0),C=vs();$e(E,e,E),$e(E,n,C),$e(C,e,E),$e(C,n,C),le(v,$i,E),le(S,$i,E);const T=le(a,Ra),_=le(l,Ra),O=le(_,$i),N=le(O,$i);$e(a,t.domain,o),le(a,Bi,b),le(a,ws,x),$e(l,t.domain,o),le(l,Bi,b),le(l,ws,x),$e(T,t.domain,E),le(T,$i,E),le(T,$f,E),$e(N,t.domain,E),$e(N,e,E),le(N,$i,E);const R=[[Df,Lf],[px,mx],[gx,bx],[xx,yx],[vx,wx],[kx,Ex],[Cx,Sx],[Tx,Nx]];for(let M=0;M<R.length;M++){const[W,D]=R[M],B=le(E,W);le(C,W,B),le(B,D,E);const $=vs(U0);$e(B,e,$);const V=vs();$e(B,n),$e($,e,$),$e($,n,V),$e(V,e,$),$e(V,n,V),le($,D,E),le(V,D,E)}return le(s,$p,v),le(s,h_,REe),{start:s,tokens:cU}}function DEe(t,e,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let a=t,l=null,c=null,d=0,h=null,f=-1;for(;s<r&&!(l=a.go(n[s].t));)o.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,s++,d++;if(f<0)s-=d,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(dk(II,e,o)),o=[]),s-=f,d-=f;const p=h.t,m=n.slice(s-d,s);i.push(dk(p,e,m))}}return o.length>0&&i.push(dk(II,e,o)),i}function dk(t,e,n){const r=n[0].s,s=n[n.length-1].e,i=e.slice(r,s);return new t(i,n)}const LEe=typeof console<"u"&&console&&console.warn||(()=>{}),BEe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Mt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function $Ee(){return jr.groups={},Mt.scanner=null,Mt.parser=null,Mt.tokenQueue=[],Mt.pluginQueue=[],Mt.customSchemes=[],Mt.initialized=!1,Mt}function MI(t,e=!1){if(Mt.initialized&&LEe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${BEe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Mt.customSchemes.push([t,e])}function FEe(){Mt.scanner=IEe(Mt.customSchemes);for(let t=0;t<Mt.tokenQueue.length;t++)Mt.tokenQueue[t][1]({scanner:Mt.scanner});Mt.parser=PEe(Mt.scanner.tokens);for(let t=0;t<Mt.pluginQueue.length;t++)Mt.pluginQueue[t][1]({scanner:Mt.scanner,parser:Mt.parser});return Mt.initialized=!0,Mt}function x_(t){return Mt.initialized||FEe(),DEe(Mt.parser.start,t,uU(Mt.scanner.start,t))}x_.scan=uU;function hU(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new b_(n),s=x_(t),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}var y_="[\0- -\u2029]",HEe=new RegExp(y_),UEe=new RegExp(`${y_}$`),zEe=new RegExp(y_,"g");function VEe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function WEe(t){return new Ie({key:new We("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,a=Gy(n.doc,[...e]);if(UT(a).forEach(({newRange:c})=>{const d=a7(r.doc,c,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=r.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=r.doc.textBetween(c.from,c.to," "," ");if(!UEe.test(p))return;h=d[0],f=r.doc.textBetween(h.pos,c.to,void 0," ")}if(h&&f){const p=f.split(HEe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=h.pos+f.lastIndexOf(m);if(!m)return!1;const x=x_(m).map(b=>b.toObject(t.defaultProtocol));if(!VEe(x))return!1;x.filter(b=>b.isLink).map(b=>({...b,from:g+b.start+1,to:g+b.end+1})).filter(b=>r.schema.marks.code?!r.doc.rangeHasMark(b.from,b.to,r.schema.marks.code):!0).filter(b=>t.validate(b.value)).filter(b=>t.shouldAutoLink(b.value)).forEach(b=>{zT(b.from,b.to,r.doc).some(v=>v.mark.type===t.type)||o.addMark(b.from,b.to,t.type.create({href:b.href}))})}}),!!o.steps.length)return o}})}function qEe(t){return new Ie({key:new We("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let h=r.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;a=f.find(p=>p.nodeName==="A")}if(!a)return o;const l=f7(e.state,t.type.name),c=(s=a==null?void 0:a.href)!=null?s:l.href,d=(i=a==null?void 0:a.target)!=null?i:l.target;a&&c&&(window.open(c,d),o=!0)}return o}}})}function GEe(t){return new Ie({key:new We("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const c=hU(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||s!==void 0&&!s(c.href)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function Ul(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(zEe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var YEe=qs.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){MI(t);return}MI(t.scheme,t.optionalSlashes)})},onDestroy(){$Ee()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Ul(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Ul(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Ul(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ds(this.options.HTMLAttributes,t),0]:["a",ds(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Ul(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Ul(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ic({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=hU(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!Ul(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(WEe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Ul(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(qEe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(GEe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),KEe=Ei.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""});const RI=new We("blocknote-show-selection"),Hx=it(({editor:t})=>{const e=Al({enabled:!1},{onUpdate(){t.transact(n=>n.setMeta(RI,{}))}});return{key:"showSelection",store:e,prosemirrorPlugins:[new Ie({key:RI,props:{decorations:n=>{const{doc:r,selection:s}=n;if(!e.state.enabled)return Re.empty;const i=at.inline(s.from,s.to,{"data-show-selection":"true"});return Re.create(r,[i])}}})],showSelection(n){e.setState({enabled:n})}}}),JEe={tokenize:QEe};function QEe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Ze(t,e,"linePrefix")}function s(a){return t.enter("paragraph"),i(a)}function i(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Te(a)?(t.consume(a),t.exit("chunkText"),i):(t.consume(a),o)}}const XEe={tokenize:ZEe},PI={tokenize:e2e};function ZEe(t){const e=this,n=[];let r=0,s,i,o;return a;function a(w){if(r<n.length){const S=n[r];return e.containerState=S[1],t.attempt(S[0].continuation,l,c)(w)}return c(w)}function l(w){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&v();const S=e.events.length;let E=S,C;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){C=e.events[E][1].end;break}b(r);let T=S;for(;T<e.events.length;)e.events[T][1].end={...C},T++;return ls(e.events,E+1,0,e.events.slice(S)),e.events.length=T,c(w)}return a(w)}function c(w){if(r===n.length){if(!s)return f(w);if(s.currentConstruct&&s.currentConstruct.concrete)return m(w);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(PI,d,h)(w)}function d(w){return s&&v(),b(r),f(w)}function h(w){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,m(w)}function f(w){return e.containerState={},t.attempt(PI,p,m)(w)}function p(w){return r++,n.push([e.currentConstruct,e.containerState]),f(w)}function m(w){if(w===null){s&&v(),b(0),t.consume(w);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),g(w)}function g(w){if(w===null){x(t.exit("chunkFlow"),!0),b(0),t.consume(w);return}return Te(w)?(t.consume(w),x(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(w),g)}function x(w,S){const E=e.sliceStream(w);if(S&&E.push(null),w.previous=i,i&&(i.next=w),i=w,s.defineSkip(w.start),s.write(E),e.parser.lazy[w.start.line]){let C=s.events.length;for(;C--;)if(s.events[C][1].start.offset<o&&(!s.events[C][1].end||s.events[C][1].end.offset>o))return;const T=e.events.length;let _=T,O,N;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){if(O){N=e.events[_][1].end;break}O=!0}for(b(r),C=T;C<e.events.length;)e.events[C][1].end={...N},C++;ls(e.events,_+1,0,e.events.slice(T)),e.events.length=C}}function b(w){let S=n.length;for(;S-- >w;){const E=n[S];e.containerState=E[1],E[0].exit.call(e,t)}n.length=w}function v(){s.write([null]),i=void 0,s=void 0,e.containerState._closeFlow=void 0}}function e2e(t,e,n){return Ze(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const t2e={tokenize:n2e};function n2e(t){const e=this,n=t.attempt(Cm,r,t.attempt(this.parser.constructs.flowInitial,s,Ze(t,t.attempt(this.parser.constructs.flow,s,t.attempt(zve,s)),"linePrefix")));return n;function r(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const r2e={resolveAll:pU()},s2e=fU("string"),i2e=fU("text");function fU(t){return{resolveAll:pU(t==="text"?o2e:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],i=n.attempt(s,o,a);return o;function o(d){return c(d)?i(d):a(d)}function a(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return c(d)?(n.exit("data"),i(d)):(n.consume(d),l)}function c(d){if(d===null)return!0;const h=s[d];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function pU(t){return e;function e(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return t?t(n,r):n}}function o2e(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let i=s.length,o=-1,a=0,l;for(;i--;){const c=s[i];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){i++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:r.start._bufferIndex+o,_index:r.start._index+i,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const a2e={42:Cr,43:Cr,45:Cr,48:Cr,49:Cr,50:Cr,51:Cr,52:Cr,53:Cr,54:Cr,55:Cr,56:Cr,57:Cr,62:OH},l2e={91:Yve},c2e={[-2]:ek,[-1]:ek,32:ek},u2e={35:ewe,42:Mg,45:[rI,Mg],60:swe,61:rI,95:Mg,96:tI,126:tI},d2e={38:MH,92:IH},h2e={[-5]:tk,[-4]:tk,[-3]:tk,33:kwe,38:MH,42:bC,60:[Cve,dwe],91:Cwe,92:[Xve,IH],93:o_,95:bC,96:Lve},f2e={null:[bC,r2e]},p2e={null:[42,95]},m2e={null:[]},g2e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:p2e,contentInitial:l2e,disable:m2e,document:a2e,flow:u2e,flowInitial:c2e,insideSpan:f2e,string:d2e,text:h2e},Symbol.toStringTag,{value:"Module"}));function b2e(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let o=[],a=[];const l={attempt:T(E),check:T(C),consume:v,enter:w,exit:S,interrupt:T(C,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:m,parser:t,previous:null,sliceSerialize:f,sliceStream:p,write:h};let d=e.tokenize.call(c,l);return e.resolveAll&&i.push(e),c;function h(R){return o=Ns(o,R),x(),o[o.length-1]!==null?[]:(_(e,0),c.events=_1(i,c.events,c),c.events)}function f(R,M){return y2e(p(R),M)}function p(R){return x2e(o,R)}function m(){const{_bufferIndex:R,_index:M,line:W,column:D,offset:B}=r;return{_bufferIndex:R,_index:M,line:W,column:D,offset:B}}function g(R){s[R.line]=R.column,N()}function x(){let R;for(;r._index<o.length;){const M=o[r._index];if(typeof M=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<M.length;)b(M.charCodeAt(r._bufferIndex));else b(M)}}function b(R){d=d(R)}function v(R){Te(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,N()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=R}function w(R,M){const W=M||{};return W.type=R,W.start=m(),c.events.push(["enter",W,c]),a.push(W),W}function S(R){const M=a.pop();return M.end=m(),c.events.push(["exit",M,c]),M}function E(R,M){_(R,M.from)}function C(R,M){M.restore()}function T(R,M){return W;function W(D,B,$){let V,A,z,j;return Array.isArray(D)?H(D):"tokenize"in D?H([D]):U(D);function U(Z){return te;function te(fe){const K=fe!==null&&Z[fe],pe=fe!==null&&Z.null,ke=[...Array.isArray(K)?K:K?[K]:[],...Array.isArray(pe)?pe:pe?[pe]:[]];return H(ke)(fe)}}function H(Z){return V=Z,A=0,Z.length===0?$:I(Z[A])}function I(Z){return te;function te(fe){return j=O(),z=Z,Z.partial||(c.currentConstruct=Z),Z.name&&c.parser.constructs.disable.null.includes(Z.name)?G():Z.tokenize.call(M?Object.assign(Object.create(c),M):c,l,q,G)(fe)}}function q(Z){return R(z,j),B}function G(Z){return j.restore(),++A<V.length?I(V[A]):$}}}function _(R,M){R.resolveAll&&!i.includes(R)&&i.push(R),R.resolve&&ls(c.events,M,c.events.length-M,R.resolve(c.events.slice(M),c)),R.resolveTo&&(c.events=R.resolveTo(c.events,c))}function O(){const R=m(),M=c.previous,W=c.currentConstruct,D=c.events.length,B=Array.from(a);return{from:D,restore:$};function $(){r=R,c.previous=M,c.currentConstruct=W,c.events.length=D,a=B,N()}}function N(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function x2e(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,i=e.end._bufferIndex;let o;if(n===s)o=[t[n].slice(r,i)];else{if(o=t.slice(n,s),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}i>0&&o.push(t[s].slice(0,i))}return o}function y2e(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const i=t[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,r.push(o)}return r.join("")}function v2e(t){const r={constructs:kH([g2e,...(t||{}).extensions||[]]),content:s(JEe),defined:[],document:s(XEe),flow:s(t2e),lazy:{},string:s(s2e),text:s(i2e)};return r;function s(i){return o;function o(a){return b2e(r,i,a)}}}function w2e(t){for(;!RH(t););return t}const DI=/[\0\t\n\r]/g;function k2e(){let t=1,e="",n=!0,r;return s;function s(i,o,a){const l=[];let c,d,h,f,p;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),h=0,e="",n&&(i.charCodeAt(0)===65279&&h++,n=void 0);h<i.length;){if(DI.lastIndex=h,c=DI.exec(i),f=c&&c.index!==void 0?c.index:i.length,p=i.charCodeAt(f),!c){e=i.slice(h);break}if(p===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(i.slice(h,f)),t+=f-h),p){case 0:{l.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,l.push(-2);t++<d;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=f+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const mU={}.hasOwnProperty;function E2e(t,e,n){return typeof e!="string"&&(n=e,e=void 0),C2e(n)(w2e(v2e(n).document().write(k2e()(t,e,!0))))}function C2e(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(lr),autolinkProtocol:O,autolinkEmail:O,atxHeading:i(zn),blockQuote:i(pe),characterEscape:O,characterReference:O,codeFenced:i(ke),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(ke,o),codeText:i(me,o),codeTextData:O,data:O,codeFlowValue:O,definition:i(Pe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(Dt),hardBreakEscape:i(Gr),hardBreakTrailing:i(Gr),htmlFlow:i(yo,o),htmlFlowData:O,htmlText:i(yo,o),htmlTextData:O,image:i(vo),label:o,link:i(lr),listItem:i(Pm),listItemValue:f,listOrdered:i(la,h),listUnordered:i(la),paragraph:i(av),reference:I,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(zn),strong:i(lv),thematicBreak:i(uv)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:K,autolinkProtocol:fe,blockQuote:l(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:Z,characterReference:te,codeFenced:l(x),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:N,codeIndented:l(b),codeText:l(B),codeTextData:N,data:N,definition:l(),definitionDestinationString:S,definitionLabelString:v,definitionTitleString:w,emphasis:l(),hardBreakEscape:l(M),hardBreakTrailing:l(M),htmlFlow:l(W),htmlFlowData:N,htmlText:l(D),htmlTextData:N,image:l(V),label:z,labelText:A,lineEnding:R,link:l($),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:q,resourceDestinationString:j,resourceTitleString:U,resource:H,setextHeading:l(_),setextHeadingLineSequence:T,setextHeadingText:C,strong:l(),thematicBreak:l()}};gU(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ee){let oe={type:"root",children:[]};const Oe={stack:[oe],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:d,data:n},qe=[];let dt=-1;for(;++dt<ee.length;)if(ee[dt][1].type==="listOrdered"||ee[dt][1].type==="listUnordered")if(ee[dt][0]==="enter")qe.push(dt);else{const Yr=qe.pop();dt=s(ee,Yr,dt)}for(dt=-1;++dt<ee.length;){const Yr=e[ee[dt][0]];mU.call(Yr,ee[dt][1].type)&&Yr[ee[dt][1].type].call(Object.assign({sliceSerialize:ee[dt][2].sliceSerialize},Oe),ee[dt][1])}if(Oe.tokenStack.length>0){const Yr=Oe.tokenStack[Oe.tokenStack.length-1];(Yr[1]||LI).call(Oe,void 0,Yr[0])}for(oe.position={start:ga(ee.length>0?ee[0][1].start:{line:1,column:1,offset:0}),end:ga(ee.length>0?ee[ee.length-2][1].end:{line:1,column:1,offset:0})},dt=-1;++dt<e.transforms.length;)oe=e.transforms[dt](oe)||oe;return oe}function s(ee,oe,Oe){let qe=oe-1,dt=-1,Yr=!1,Oi,xs,ca,ua;for(;++qe<=Oe;){const Vn=ee[qe];switch(Vn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Vn[0]==="enter"?dt++:dt--,ua=void 0;break}case"lineEndingBlank":{Vn[0]==="enter"&&(Oi&&!ua&&!dt&&!ca&&(ca=qe),ua=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ua=void 0}if(!dt&&Vn[0]==="enter"&&Vn[1].type==="listItemPrefix"||dt===-1&&Vn[0]==="exit"&&(Vn[1].type==="listUnordered"||Vn[1].type==="listOrdered")){if(Oi){let wo=qe;for(xs=void 0;wo--;){const ys=ee[wo];if(ys[1].type==="lineEnding"||ys[1].type==="lineEndingBlank"){if(ys[0]==="exit")continue;xs&&(ee[xs][1].type="lineEndingBlank",Yr=!0),ys[1].type="lineEnding",xs=wo}else if(!(ys[1].type==="linePrefix"||ys[1].type==="blockQuotePrefix"||ys[1].type==="blockQuotePrefixWhitespace"||ys[1].type==="blockQuoteMarker"||ys[1].type==="listItemIndent"))break}ca&&(!xs||ca<xs)&&(Oi._spread=!0),Oi.end=Object.assign({},xs?ee[xs][1].start:Vn[1].end),ee.splice(xs||qe,0,["exit",Oi,Vn[2]]),qe++,Oe++}if(Vn[1].type==="listItemPrefix"){const wo={type:"listItem",_spread:!1,start:Object.assign({},Vn[1].start),end:void 0};Oi=wo,ee.splice(qe,0,["enter",wo,Vn[2]]),qe++,Oe++,ca=void 0,ua=!0}}}return ee[oe][1]._spread=Yr,Oe}function i(ee,oe){return Oe;function Oe(qe){a.call(this,ee(qe),qe),oe&&oe.call(this,qe)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ee,oe,Oe){this.stack[this.stack.length-1].children.push(ee),this.stack.push(ee),this.tokenStack.push([oe,Oe||void 0]),ee.position={start:ga(oe.start),end:void 0}}function l(ee){return oe;function oe(Oe){ee&&ee.call(this,Oe),c.call(this,Oe)}}function c(ee,oe){const Oe=this.stack.pop(),qe=this.tokenStack.pop();if(qe)qe[0].type!==ee.type&&(oe?oe.call(this,ee,qe[0]):(qe[1]||LI).call(this,ee,qe[0]));else throw new Error("Cannot close `"+ee.type+"` ("+If({start:ee.start,end:ee.end})+"): its not open");Oe.position.end=ga(ee.end)}function d(){return S1(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(ee){if(this.data.expectingFirstListItemValue){const oe=this.stack[this.stack.length-2];oe.start=Number.parseInt(this.sliceSerialize(ee),10),this.data.expectingFirstListItemValue=void 0}}function p(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.lang=ee}function m(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.meta=ee}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.value=ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.value=ee.replace(/(\r?\n|\r)$/g,"")}function v(ee){const oe=this.resume(),Oe=this.stack[this.stack.length-1];Oe.label=oe,Oe.identifier=di(this.sliceSerialize(ee)).toLowerCase()}function w(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.title=ee}function S(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.url=ee}function E(ee){const oe=this.stack[this.stack.length-1];if(!oe.depth){const Oe=this.sliceSerialize(ee).length;oe.depth=Oe}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function T(ee){const oe=this.stack[this.stack.length-1];oe.depth=this.sliceSerialize(ee).codePointAt(0)===61?1:2}function _(){this.data.setextHeadingSlurpLineEnding=void 0}function O(ee){const Oe=this.stack[this.stack.length-1].children;let qe=Oe[Oe.length-1];(!qe||qe.type!=="text")&&(qe=cv(),qe.position={start:ga(ee.start),end:void 0},Oe.push(qe)),this.stack.push(qe)}function N(ee){const oe=this.stack.pop();oe.value+=this.sliceSerialize(ee),oe.position.end=ga(ee.end)}function R(ee){const oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Oe=oe.children[oe.children.length-1];Oe.position.end=ga(ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(oe.type)&&(O.call(this,ee),N.call(this,ee))}function M(){this.data.atHardBreak=!0}function W(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.value=ee}function D(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.value=ee}function B(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.value=ee}function $(){const ee=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=oe,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function V(){const ee=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=oe,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function A(ee){const oe=this.sliceSerialize(ee),Oe=this.stack[this.stack.length-2];Oe.label=wH(oe),Oe.identifier=di(oe).toLowerCase()}function z(){const ee=this.stack[this.stack.length-1],oe=this.resume(),Oe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Oe.type==="link"){const qe=ee.children;Oe.children=qe}else Oe.alt=oe}function j(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.url=ee}function U(){const ee=this.resume(),oe=this.stack[this.stack.length-1];oe.title=ee}function H(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function q(ee){const oe=this.resume(),Oe=this.stack[this.stack.length-1];Oe.label=oe,Oe.identifier=di(this.sliceSerialize(ee)).toLowerCase(),this.data.referenceType="full"}function G(ee){this.data.characterReferenceType=ee.type}function Z(ee){const oe=this.sliceSerialize(ee),Oe=this.data.characterReferenceType;let qe;Oe?(qe=vH(oe,Oe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):qe=s_(oe);const dt=this.stack[this.stack.length-1];dt.value+=qe}function te(ee){const oe=this.stack.pop();oe.position.end=ga(ee.end)}function fe(ee){N.call(this,ee);const oe=this.stack[this.stack.length-1];oe.url=this.sliceSerialize(ee)}function K(ee){N.call(this,ee);const oe=this.stack[this.stack.length-1];oe.url="mailto:"+this.sliceSerialize(ee)}function pe(){return{type:"blockquote",children:[]}}function ke(){return{type:"code",lang:null,meta:null,value:""}}function me(){return{type:"inlineCode",value:""}}function Pe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Dt(){return{type:"emphasis",children:[]}}function zn(){return{type:"heading",depth:0,children:[]}}function Gr(){return{type:"break"}}function yo(){return{type:"html",value:""}}function vo(){return{type:"image",title:null,url:"",alt:null}}function lr(){return{type:"link",title:null,url:"",children:[]}}function la(ee){return{type:"list",ordered:ee.type==="listOrdered",start:null,spread:ee._spread,children:[]}}function Pm(ee){return{type:"listItem",spread:ee._spread,checked:null,children:[]}}function av(){return{type:"paragraph",children:[]}}function lv(){return{type:"strong",children:[]}}function cv(){return{type:"text",value:""}}function uv(){return{type:"thematicBreak"}}}function ga(t){return{line:t.line,column:t.column,offset:t.offset}}function gU(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?gU(t,r):S2e(t,r)}}function S2e(t,e){let n;for(n in e)if(mU.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function LI(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+If({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+If({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+If({start:e.start,end:e.end})+") is still open")}function T2e(t){const e=this;e.parser=n;function n(r){return E2e(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function N2e(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function _2e(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function A2e(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function j2e(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function O2e(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function I2e(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=bh(r.toLowerCase()),i=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=i+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function M2e(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function R2e(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function bU(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function P2e(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return bU(t,e);const s={src:bh(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,i),t.applyData(e,i)}function D2e(t,e){const n={src:bh(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function L2e(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function B2e(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return bU(t,e);const s={href:bh(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function $2e(t,e){const n={href:bh(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function F2e(t,e,n){const r=t.all(e),s=n?H2e(n):xU(e),i={},o=[];if(typeof e.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const d=r[a];(s||a!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?o.push(...d.children):o.push(d)}const l=r[r.length-1];l&&(s||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:i,children:o};return t.patch(e,c),t.applyData(e,c)}function H2e(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=xU(n[r])}return e}function xU(t){const e=t.spread;return e??t.children.length>1}function U2e(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,i),t.applyData(e,i)}function z2e(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function V2e(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function W2e(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function q2e(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=$F(e.children[1]),l=BF(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),s.push(o)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function G2e(t,e,n){const r=n?n.children:void 0,i=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],f={},p=o?o[l]:void 0;p&&(f.align=p);let m={type:"element",tagName:i,properties:f,children:[]};h&&(m.children=t.all(h),t.patch(h,m),m=t.applyData(h,m)),c.push(m)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,d),t.applyData(e,d)}function Y2e(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const BI=9,$I=32;function K2e(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const i=[];for(;r;)i.push(FI(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return i.push(FI(e.slice(s),s>0,!1)),i.join("")}function FI(t,e,n){let r=0,s=t.length;if(e){let i=t.codePointAt(r);for(;i===BI||i===$I;)r++,i=t.codePointAt(r)}if(n){let i=t.codePointAt(s-1);for(;i===BI||i===$I;)s--,i=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function J2e(t,e){const n={type:"text",value:K2e(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Q2e(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const AC={blockquote:N2e,break:_2e,code:A2e,delete:j2e,emphasis:O2e,footnoteReference:I2e,heading:M2e,html:R2e,imageReference:P2e,image:D2e,inlineCode:L2e,linkReference:B2e,link:$2e,listItem:F2e,list:U2e,paragraph:z2e,root:V2e,strong:W2e,table:q2e,tableCell:Y2e,tableRow:G2e,text:J2e,thematicBreak:Q2e,toml:z0,yaml:z0,definition:z0,footnoteDefinition:z0};function z0(){}function X2e(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Z2e(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function eCe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||X2e,r=t.options.footnoteBackLabel||Z2e,s=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const d=t.all(c),h=String(c.identifier).toUpperCase(),f=bh(h.toLowerCase());let p=0;const m=[],g=t.footnoteCounts.get(h);for(;g!==void 0&&++p<=g;){m.length>0&&m.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,p);typeof v=="string"&&(v={type:"text",value:v}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,p),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const x=d[d.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const v=x.children[x.children.length-1];v&&v.type==="text"?v.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...m)}else d.push(...m);const b={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(d,!0)};t.patch(c,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Wd(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const jC={}.hasOwnProperty,tCe={};function nCe(t,e){const n=e||tCe,r=new Map,s=new Map,i=new Map,o={...AC,...n.handlers},a={all:c,applyData:sCe,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:l,options:n,patch:rCe,wrap:oCe};return Uc(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:s,f=String(d.identifier).toUpperCase();h.has(f)||h.set(f,d)}}),a;function l(d,h){const f=d.type,p=a.handlers[f];if(jC.call(a.handlers,f)&&p)return p(a,d,h);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in d){const{children:g,...x}=d,b=Wd(x);return b.children=a.all(d),b}return Wd(d)}return(a.options.unknownHandler||iCe)(a,d,h)}function c(d){const h=[];if("children"in d){const f=d.children;let p=-1;for(;++p<f.length;){const m=a.one(f[p],d);if(m){if(p&&f[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=HI(m.value)),!Array.isArray(m)&&m.type==="element")){const g=m.children[0];g&&g.type==="text"&&(g.value=HI(g.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function rCe(t,e){t.position&&(e.position=HF(t))}function sCe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,i=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&i&&Object.assign(n.properties,Wd(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function iCe(t,e){const n=e.data||{},r="value"in e&&!(jC.call(n,"hProperties")||jC.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function oCe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function HI(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function UI(t,e){const n=nCe(t,e),r=n.one(t,void 0),s=eCe(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function aCe(t,e){return t&&"run"in t?async function(n,r){const s=UI(n,{file:r,...e});await t.run(s,r)}:function(n,r){return UI(n,{file:r,...t||e})}}const lCe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],cCe=/["&'<>`]/g,uCe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dCe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,hCe=/[|\\{}()[\]^$+*?.]/g,zI=new WeakMap;function fCe(t,e){if(t=t.replace(e.subset?pCe(e.subset):cCe,r),e.subset||e.escapeOnly)return t;return t.replace(uCe,n).replace(dCe,r);function n(s,i,o){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,o.charCodeAt(i+2),e)}function r(s,i,o){return e.format(s.charCodeAt(0),o.charCodeAt(i+1),e)}}function pCe(t){let e=zI.get(t);return e||(e=mCe(t),zI.set(t,e)),e}function mCe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(hCe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const gCe=/[\dA-Fa-f]/;function bCe(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!gCe.test(String.fromCharCode(e))?r:r+";"}const xCe=/\d/;function yCe(t,e,n){const r="&#"+String(t);return n&&e&&!xCe.test(String.fromCharCode(e))?r:r+";"}const vCe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],hk={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},wCe=["cent","copy","divide","gt","lt","not","para","times"],yU={}.hasOwnProperty,OC={};let V0;for(V0 in hk)yU.call(hk,V0)&&(OC[hk[V0]]=V0);const kCe=/[^\dA-Za-z]/;function ECe(t,e,n,r){const s=String.fromCharCode(t);if(yU.call(OC,s)){const i=OC[s],o="&"+i;return n&&vCe.includes(i)&&!wCe.includes(i)&&(!r||e&&e!==61&&kCe.test(String.fromCharCode(e)))?o:o+";"}return""}function CCe(t,e,n){let r=bCe(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=ECe(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const i=yCe(t,e,n.omitOptionalSemicolons);i.length<r.length&&(r=i)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function bd(t,e){return fCe(t,Object.assign({format:CCe},e))}const SCe=/^>|^->|<!--|-->|--!>|<!-$/g,TCe=[">"],NCe=["<",">"];function _Ce(t,e,n,r){return r.settings.bogusComments?"<?"+bd(t.value,Object.assign({},r.settings.characterReferences,{subset:TCe}))+">":"<!--"+t.value.replace(SCe,s)+"-->";function s(i){return bd(i,Object.assign({},r.settings.characterReferences,{subset:NCe}))}}function ACe(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}const bn=wU(1),vU=wU(-1),jCe=[];function wU(t){return e;function e(n,r,s){const i=n?n.children:jCe;let o=(r||0)+t,a=i[o];if(!s)for(;a&&km(a);)o+=t,a=i[o];return a}}const OCe={}.hasOwnProperty;function kU(t){return e;function e(n,r,s){return OCe.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const v_=kU({body:MCe,caption:fk,colgroup:fk,dd:LCe,dt:DCe,head:fk,html:ICe,li:PCe,optgroup:BCe,option:$Ce,p:RCe,rp:VI,rt:VI,tbody:HCe,td:WI,tfoot:UCe,th:WI,thead:FCe,tr:zCe});function fk(t,e,n){const r=bn(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&km(r.value.charAt(0)))}function ICe(t,e,n){const r=bn(n,e);return!r||r.type!=="comment"}function MCe(t,e,n){const r=bn(n,e);return!r||r.type!=="comment"}function RCe(t,e,n){const r=bn(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function PCe(t,e,n){const r=bn(n,e);return!r||r.type==="element"&&r.tagName==="li"}function DCe(t,e,n){const r=bn(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function LCe(t,e,n){const r=bn(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function VI(t,e,n){const r=bn(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function BCe(t,e,n){const r=bn(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function $Ce(t,e,n){const r=bn(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function FCe(t,e,n){const r=bn(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function HCe(t,e,n){const r=bn(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function UCe(t,e,n){return!bn(n,e)}function zCe(t,e,n){const r=bn(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function WI(t,e,n){const r=bn(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const VCe=kU({body:GCe,colgroup:YCe,head:qCe,html:WCe,tbody:KCe});function WCe(t){const e=bn(t,-1);return!e||e.type!=="comment"}function qCe(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function GCe(t){const e=bn(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&km(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function YCe(t,e,n){const r=vU(n,e),s=bn(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&v_(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function KCe(t,e,n){const r=vU(n,e),s=bn(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&v_(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const W0={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function JCe(t,e,n,r){const s=r.schema,i=s.space==="svg"?!1:r.settings.omitOptionalTags;let o=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;s.space==="html"&&t.tagName==="svg"&&(r.schema=ym);const c=QCe(r,t.properties),d=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,d&&(o=!1),(c||!i||!VCe(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),o&&(s.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(d),!o&&(!i||!v_(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function QCe(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const i=XCe(t,s,e[s]);i&&n.push(i)}}for(;++r<n.length;){const i=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&i!=='"'&&i!=="'"&&(n[r]+=" ")}return n.join("")}function XCe(t,e,n){const r=FN(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,i=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=bd(r.attribute,Object.assign({},t.settings.characterReferences,{subset:W0.name[s][i]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?kme:Cme)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=bd(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:W0.unquoted[s][i]}))),a!==n&&(t.settings.quoteSmart&&dx(n,o)>dx(n,t.alternative)&&(o=t.alternative),a=o+bd(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?W0.single:W0.double)[s][i],attribute:!0}))+o),l+(a&&"="+a))}const ZCe=["<","&"];function EU(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:bd(t.value,Object.assign({},r.settings.characterReferences,{subset:ZCe}))}function eSe(t,e,n,r){return r.settings.allowDangerousHtml?t.value:EU(t,e,n,r)}function tSe(t,e,n,r){return r.all(t)}const nSe=oH("type",{invalid:rSe,unknown:sSe,handlers:{comment:_Ce,doctype:ACe,element:JCe,raw:eSe,root:tSe,text:EU}});function rSe(t){throw new Error("Expected node, not `"+t+"`")}function sSe(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const iSe={},oSe={},aSe=[];function lSe(t,e){const n=e||iSe,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:cSe,all:uSe,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||lCe,characterReferences:n.characterReferences||oSe,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?ym:b1,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function cSe(t,e,n){return nSe(t,e,n,this)}function uSe(t){const e=[],n=t&&t.children||aSe;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function dSe(t){const e=this,n={...e.data("settings"),...t};e.compiler=r;function r(s){return lSe(s,n)}}var hSe=Object.defineProperty,fSe=(t,e,n)=>e in t?hSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,et=(t,e,n)=>fSe(t,typeof e!="symbol"?e+"":e,n);function pSe(t,e,n,r="before"){const s=typeof n=="string"?n:n.id,i=tn(t),o=e.map(c=>Jc(c,i)),a=xr(s,t.doc);if(!a)throw new Error(`Block with ID ${s} not found`);let l=a.posBeforeNode;return r==="after"&&(l+=a.node.nodeSize),t.step(new an(l,l,new ue(Q.from(o),0,0))),o.map(c=>Ut(c,i))}function IC(t){if(!t||t.type.name!=="column")throw new Error("Invalid columnPos: does not point to column node.");const e=t.firstChild;if(!e)throw new Error("Invalid column: does not have child node.");const n=e.firstChild;if(!n)throw new Error("Invalid blockContainer: does not have child node.");return t.childCount===1&&e.childCount===1&&n.type.name==="paragraph"&&n.content.content.length===0}function mSe(t,e){const n=t.doc.resolve(e),r=n.nodeAfter;if(!r||r.type.name!=="columnList")throw new Error("Invalid columnListPos: does not point to columnList node.");for(let s=r.childCount-1;s>=0;s--){const i=t.doc.resolve(n.pos+1).posAtIndex(s),o=t.doc.resolve(i).nodeAfter;if(!o||o.type.name!=="column")throw new Error("Invalid columnPos: does not point to column node.");IC(o)&&t.delete(i,i+o.nodeSize)}}function MC(t,e){mSe(t,e);const n=t.doc.resolve(e).nodeAfter;if(!n||n.type.name!=="columnList")throw new Error("Invalid columnListPos: does not point to columnList node.");if(n.childCount>2)return;if(n.childCount<2)throw new Error("Invalid columnList: contains fewer than two children.");const r=e+1,s=t.doc.resolve(r).nodeAfter,i=e+n.nodeSize-1,o=t.doc.resolve(i).nodeBefore;if(!s||!o)throw new Error("Invalid columnList: does not contain children.");const a=IC(s),l=IC(o);if(a&&l){t.delete(e,e+n.nodeSize);return}if(a){t.step(new en(e,e+n.nodeSize,i-o.nodeSize+1,i-1,ue.empty,0,!1));return}if(l){t.step(new en(e,e+n.nodeSize,r+1,r+s.nodeSize-1,ue.empty,0,!1));return}}function qI(t,e,n){const r=tn(t),s=n.map(d=>Jc(d,r)),i=new Set(e.map(d=>typeof d=="string"?d:d.id)),o=[],a=new Set,l=typeof e[0]=="string"?e[0]:e[0].id;let c=0;if(t.doc.descendants((d,h)=>{if(i.size===0)return!1;if(!d.type.isInGroup("bnBlock")||!i.has(d.attrs.id))return!0;if(o.push(Ut(d,r)),i.delete(d.attrs.id),n.length>0&&d.attrs.id===l){const g=t.doc.nodeSize;t.insert(h,s);const x=t.doc.nodeSize;c+=g-x}const f=t.doc.nodeSize,p=t.doc.resolve(h-c);p.node().type.name==="column"?a.add(p.before(-1)):p.node().type.name==="columnList"&&a.add(p.before()),p.node().type.name==="blockGroup"&&p.node(p.depth-1).type.name!=="doc"&&p.node().childCount===1?t.delete(p.before(),p.after()):t.delete(h-c,h-c+d.nodeSize);const m=t.doc.nodeSize;return c+=f-m,!1}),i.size>0){const d=[...i].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+d)}return a.forEach(d=>MC(t,d)),{insertedBlocks:s.map(d=>Ut(d,r)),removedBlocks:o}}function gSe(t,e,n,r,s){let i;if(e)if(typeof e=="string")i=mi([e],t.pmSchema,r);else if(Array.isArray(e))i=mi(e,t.pmSchema,r);else if(e.type==="tableContent")i=e1(e,t.pmSchema);else throw new lo(e.type);else throw new Error("blockContent is required");const o=((s==null?void 0:s.document)??document).createDocumentFragment();for(const a of i)if(a.type.name!=="text"&&t.schema.inlineContentSchema[a.type.name]){const l=t.schema.inlineContentSpecs[a.type.name].implementation;if(l){const c=XT(a,t.schema.inlineContentSchema,t.schema.styleSchema),d=l.render.call({renderType:"dom",props:void 0},c,()=>{},t);if(d){if(o.appendChild(d.dom),d.contentDOM){const h=n.serializeFragment(a.content,s);d.contentDOM.dataset.editable="",d.contentDOM.appendChild(h)}continue}}}else if(a.type.name==="text"){let l=document.createTextNode(a.textContent);for(const c of a.marks.toReversed())if(c.type.name in t.schema.styleSpecs){const d=t.schema.styleSpecs[c.type.name].implementation.render(c.attrs.stringValue,t);d.contentDOM.appendChild(l),l=d.dom}else{const d=c.type.spec.toDOM(c,!0),h=us.renderSpec(document,d);h.contentDOM.appendChild(l),l=h.dom}o.appendChild(l)}else{const l=n.serializeFragment(Q.from([a]),s);o.appendChild(l)}return o}function bSe(t,e,n,r){var s,i,o,a,l;const c=t.pmSchema.nodes.blockContainer,d=e.props||{};for(const[m,g]of Object.entries(t.schema.blockSchema[e.type].propSchema))!(m in d)&&g.default!==void 0&&(d[m]=g.default);const h=e.children||[],f=t.blockImplementations[e.type].implementation.render.call({renderType:"dom",props:void 0},{...e,props:d,children:h},t);if(f.contentDOM&&e.content){const m=gSe(t,e.content,n,e.type,r);f.contentDOM.appendChild(m)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const m=CU(t,e.children,n,r);(s=f.contentDOM)==null||s.append(m)}return f.dom}const p=(o=(i=c.spec)==null?void 0:i.toDOM)==null?void 0:o.call(i,c.create({id:e.id,...d}));return(a=p.contentDOM)==null||a.appendChild(f.dom),e.children&&e.children.length>0&&((l=p.contentDOM)==null||l.appendChild(SU(t,e.children,n,r))),p.dom}function CU(t,e,n,r){const s=((r==null?void 0:r.document)??document).createDocumentFragment();for(const i of e){const o=bSe(t,i,n,r);s.appendChild(o)}return s}const SU=(t,e,n,r)=>{var s;const i=t.pmSchema.nodes.blockGroup,o=i.spec.toDOM(i.create({})),a=CU(t,e,n,r);return(s=o.contentDOM)==null||s.appendChild(a),o.dom},xSe=(t,e)=>{const n=us.fromSchema(t);return{serializeBlocks:(r,s)=>SU(e,r,n,s).outerHTML}};function ySe(t){return t.transact(e=>{const n=dl(e.doc,e.selection.anchor);if(e.selection instanceof pt)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:e.selection.$headCell.pos-n.posBeforeNode};if(e.selection instanceof ve)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=dl(e.doc,e.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:e.selection.anchor-n.posBeforeNode,headOffset:e.selection.head-r.posBeforeNode}}})}function vSe(t,e){var n,r;const s=(n=xr(e.anchorBlockId,t.doc))==null?void 0:n.posBeforeNode;if(s===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let i;if(e.type==="cell")i=pt.create(t.doc,s+e.anchorCellOffset,s+e.headCellOffset);else if(e.type==="node")i=ve.create(t.doc,s+1);else{const o=(r=xr(e.headBlockId,t.doc))==null?void 0:r.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);i=xe.create(t.doc,s+e.anchorOffset,o+e.headOffset)}t.setSelection(i)}function RC(t){return t.map(e=>e.type==="columnList"?e.children.map(n=>RC(n.children)).flat():{...e,children:RC(e.children)}).flat()}function TU(t,e,n){t.transact(r=>{var s;const i=((s=t.getSelection())==null?void 0:s.blocks)||[t.getTextCursorPosition().block],o=ySe(t);t.removeBlocks(i),t.insertBlocks(RC(i),e,n),vSe(r,o)})}function NU(t){return!t||t.type!=="columnList"}function _U(t,e,n){let r,s;if(e?e.children.length>0?(r=e.children[e.children.length-1],s="after"):(r=e,s="before"):n&&(r=n,s="before"),!r||!s)return;const i=t.getParentBlock(r);return NU(i)?{referenceBlock:r,placement:s}:_U(t,s==="after"?r:t.getPrevBlock(r),i)}function AU(t,e,n){let r,s;if(e?e.children.length>0?(r=e.children[0],s="before"):(r=e,s="after"):n&&(r=n,s="after"),!r||!s)return;const i=t.getParentBlock(r);return NU(i)?{referenceBlock:r,placement:s}:AU(t,s==="before"?r:t.getNextBlock(r),i)}function wSe(t){t.transact(()=>{const e=t.getSelection(),n=(e==null?void 0:e.blocks[0])||t.getTextCursorPosition().block,r=_U(t,t.getPrevBlock(n),t.getParentBlock(n));r&&TU(t,r.referenceBlock,r.placement)})}function kSe(t){t.transact(()=>{const e=t.getSelection(),n=(e==null?void 0:e.blocks[(e==null?void 0:e.blocks.length)-1])||t.getTextCursorPosition().block,r=AU(t,t.getNextBlock(n),t.getParentBlock(n));r&&TU(t,r.referenceBlock,r.placement)})}function ESe(t,e,n){const{$from:r,$to:s}=t.selection,i=r.blockRange(s,p=>p.childCount>0&&(p.type.name==="blockGroup"||p.type.name==="column"));if(!i)return!1;const o=i.startIndex;if(o===0)return!1;const a=i.parent.child(o-1);if(a.type!==e)return!1;const l=a.lastChild&&a.lastChild.type===n,c=Q.from(l?e.create():null),d=new ue(Q.from(e.create(null,Q.from(n.create(null,c)))),l?3:1,0),h=i.start,f=i.end;return t.step(new en(h-(l?3:1),f,h,f,d,1,!0)).scrollIntoView(),!0}function jU(t){return t.transact(e=>ESe(e,t.pmSchema.nodes.blockContainer,t.pmSchema.nodes.blockGroup))}function CSe(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function SSe(t){return t.transact(e=>{const{bnBlock:n}=cm(e);return e.doc.resolve(n.beforePos).nodeBefore!==null})}function TSe(t){return t.transact(e=>{const{bnBlock:n}=cm(e);return e.doc.resolve(n.beforePos).depth>1})}function NSe(t,e){const n=typeof e=="string"?e:e.id,r=tn(t),s=xr(n,t);if(s)return Ut(s.node,r)}function _Se(t,e){const n=typeof e=="string"?e:e.id,r=xr(n,t),s=tn(t);if(!r)return;const i=t.resolve(r.posBeforeNode).nodeBefore;if(i)return Ut(i,s)}function ASe(t,e){const n=typeof e=="string"?e:e.id,r=xr(n,t),s=tn(t);if(!r)return;const i=t.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(i)return Ut(i,s)}function jSe(t,e){const n=typeof e=="string"?e:e.id,r=tn(t),s=xr(n,t);if(!s)return;const i=t.resolve(s.posBeforeNode),o=i.node(),a=i.node(-1),l=a.type.name!=="doc"?o.type.name==="blockGroup"?a:o:void 0;if(l)return Ut(l,r)}let OSe=class{constructor(e){this.editor=e}get document(){return this.editor.transact(e=>Fae(e.doc,this.editor.pmSchema))}getBlock(e){return this.editor.transact(n=>NSe(n.doc,e))}getPrevBlock(e){return this.editor.transact(n=>_Se(n.doc,e))}getNextBlock(e){return this.editor.transact(n=>ASe(n.doc,e))}getParentBlock(e){return this.editor.transact(n=>jSe(n.doc,e))}forEachBlock(e,n=!1){const r=this.document.slice();n&&r.reverse();function s(i){for(const o of i){if(e(o)===!1)return!1;const a=n?o.children.slice().reverse():o.children;if(!s(a))return!1}return!0}s(r)}insertBlocks(e,n,r="before"){return this.editor.transact(s=>pSe(s,e,n,r))}updateBlock(e,n){return this.editor.transact(r=>Ufe(r,e,n))}removeBlocks(e){return this.editor.transact(n=>qI(n,e,[]).removedBlocks)}replaceBlocks(e,n){return this.editor.transact(r=>qI(r,e,n))}canNestBlock(){return SSe(this.editor)}nestBlock(){jU(this.editor)}canUnnestBlock(){return TSe(this.editor)}unnestBlock(){CSe(this.editor)}moveBlocksUp(){return wSe(this.editor)}moveBlocksDown(){return kSe(this.editor)}},ISe=class extends c_{constructor(e){super(),this.editor=e,e.on("create",()=>{e._tiptapEditor.on("update",({transaction:n,appendedTransactions:r})=>{this.emit("onChange",{editor:e,transaction:n,appendedTransactions:r})}),e._tiptapEditor.on("selectionUpdate",({transaction:n})=>{this.emit("onSelectionChange",{editor:e,transaction:n})}),e._tiptapEditor.on("mount",()=>{this.emit("onMount",{editor:e})}),e._tiptapEditor.on("unmount",()=>{this.emit("onUnmount",{editor:e})})})}onChange(e,n=!0){const r=({transaction:s,appendedTransactions:i})=>{!n&&GI(s)||e(this.editor,{getChanges(){return qH(s,i)}})};return this.on("onChange",r),()=>{this.off("onChange",r)}}onSelectionChange(e,n=!1){const r=s=>{!n&&GI(s.transaction)||e(this.editor)};return this.on("onSelectionChange",r),()=>{this.off("onSelectionChange",r)}}onMount(e){return this.on("onMount",e),()=>{this.off("onMount",e)}}onUnmount(e){return this.on("onUnmount",e),()=>{this.off("onUnmount",e)}}};function GI(t){return!!t.getMeta("y-sync$")}function MSe(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function RSe(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function PSe(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const n=MSe(e),r=e.parentElement,s=Array.from(r.childNodes).slice(n+1);e.remove(),s.forEach(i=>{i.remove()}),r.insertAdjacentElement("afterend",e),s.reverse().forEach(i=>{if(RSe(i))return;const o=document.createElement("li");o.append(i),e.insertAdjacentElement("afterend",o)}),r.childNodes.length===0&&r.remove()})}function DSe(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var n,r;const s=e.previousElementSibling,i=document.createElement("div");s.insertAdjacentElement("afterend",i),i.append(s);const o=document.createElement("div");for(o.setAttribute("data-node-type","blockGroup"),i.append(o);((n=i.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=i.nextElementSibling)==null?void 0:r.nodeName)==="OL";)o.append(i.nextElementSibling)})}let YI=null;function LSe(){return YI||(YI=document.implementation.createHTMLDocument("title"))}function BSe(t){if(typeof t=="string"){const e=LSe().createElement("div");e.innerHTML=t,t=e}return PSe(t),DSe(t),t}function OU(t,e){const n=BSe(t),r=ui.fromSchema(e).parse(n,{topNode:e.nodes.blockGroup.create()}),s=[];for(let i=0;i<r.childCount;i++)s.push(Ut(r.child(i),e));return s}function $Se(t,e){const n=e.value?e.value:"",r={};e.lang&&(r["data-language"]=e.lang);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function FSe(t,e){var n;const r=String((e==null?void 0:e.url)||""),s=e!=null&&e.title?String(e.title):void 0;let i={type:"element",tagName:"video",properties:{src:r,"data-name":s,"data-url":r,controls:!0},children:[]};return(n=t.patch)==null||n.call(t,e,i),i=t.applyData?t.applyData(e,i):i,i}function IU(t){return FH().use(T2e).use(BH).use(aCe,{handlers:{...AC,image:(e,n)=>{const r=String((n==null?void 0:n.url)||"");return Ofe(r)?FSe(e,n):AC.image(e,n)},code:$Se,blockquote:(e,n)=>{const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(n),!1)};return e.patch(n,r),e.applyData(n,r)}}}).use(dSe).processSync(t).value}function HSe(t,e){const n=IU(t);return OU(n,e)}let USe=class{constructor(e){this.editor=e}blocksToHTMLLossy(e=this.editor.document){return A1(this.editor.pmSchema,this.editor).exportBlocks(e,{})}blocksToFullHTML(e=this.editor.document){return xSe(this.editor.pmSchema,this.editor).serializeBlocks(e,{})}tryParseHTMLToBlocks(e){return OU(e,this.editor.pmSchema)}blocksToMarkdownLossy(e=this.editor.document){return Vke(e,this.editor.pmSchema,this.editor,{})}tryParseMarkdownToBlocks(e){return HSe(e,this.editor.pmSchema)}pasteHTML(e,n=!1){var r;let s=e;if(!n){const i=this.tryParseHTMLToBlocks(e);s=this.blocksToFullHTML(i)}s&&((r=this.editor.prosemirrorView)==null||r.pasteHTML(s))}pasteText(e){var n;return(n=this.editor.prosemirrorView)==null?void 0:n.pasteText(e)}pasteMarkdown(e){const n=IU(e);return this.pasteHTML(n)}};const w_=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function zSe(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function VSe(t,e){const n=t.split("/"),r=e.split("/");if(n.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function KI(t,e,n,r="after"){let s;return Array.isArray(e.content)&&e.content.length===0?s=t.updateBlock(e,n).id:s=t.insertBlocks([n],e,r)[0].id,s}async function MU(t,e){var n;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(r===null)return;let s=null;for(const o of w_)if(r.types.includes(o)){s=o;break}if(s!=="Files")return;const i=r.items;if(i){t.preventDefault();for(let o=0;o<i.length;o++){let a="file";for(const c of Object.values(e.schema.blockSpecs))for(const d of((n=c.implementation.meta)==null?void 0:n.fileBlockAccept)||[]){const h=d.startsWith("."),f=i[o].getAsFile();if(f&&(!h&&f.type&&VSe(i[o].type,d)||h&&zSe("."+f.name.split(".").pop(),d))){a=c.config.type;break}}const l=i[o].getAsFile();if(l){const c={type:a,props:{name:l.name}};let d;if(t.type==="paste"){const p=e.getTextCursorPosition().block;d=KI(e,p,c)}else if(t.type==="drop"){const p={left:t.clientX,top:t.clientY},m=e.prosemirrorView.posAtCoords(p);if(!m)return;d=e.transact(g=>{var x;const b=dl(g.doc,m.pos),v=(x=e.domElement)==null?void 0:x.querySelector(`[data-id="${b.node.attrs.id}"]`),w=v==null?void 0:v.getBoundingClientRect();return KI(e,e.getBlock(b.node.attrs.id),c,w&&(w.top+w.bottom)/2>p.top?"before":"after")})}else return;const h=await e.uploadFile(l,d),f=typeof h=="string"?{props:{url:h}}:{...h};e.updateBlock(d,f)}}}}const WSe=t=>ut.create({name:"dropFile",addProseMirrorPlugins(){return[new Ie({props:{handleDOMEvents:{drop(e,n){if(!t.isEditable)return;let r=null;for(const s of w_)if(n.dataTransfer.types.includes(s)){r=s;break}return r===null?!0:r==="Files"?(MU(n,t),!0):!1}}}})]}}),qSe=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,GSe=/(_|__|\*|\*\*|~~|==|\+\+)(?!\s)(?:[^\s](?:.{0,62}[^\s])?|\S)(?=\1)/,YSe=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,KSe=/(?:\s|^)`(?!\s)(?:[^\s`](?:[^`]{0,46}[^\s`])?|[^\s`])`([^\w]|$)/,JSe=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,QSe=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,XSe=/\n{2} {0,3}-{2,48}\n{2}/,ZSe=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,eTe=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,tTe=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,nTe=/^\s*\|(.+\|)+\s*$/m,rTe=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,sTe=/^\s*\|(.+\|)+\s*$/m,iTe=t=>qSe.test(t)||GSe.test(t)||YSe.test(t)||KSe.test(t)||JSe.test(t)||QSe.test(t)||XSe.test(t)||ZSe.test(t)||eTe.test(t)||tTe.test(t)||nTe.test(t)||rTe.test(t)||sTe.test(t);async function oTe(t,e){const{schema:n}=e.state;if(!t.clipboardData)return!1;const r=t.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return e.pasteText(r),!0;const s=t.clipboardData.getData("vscode-editor-data"),i=s?JSON.parse(s):void 0,o=i==null?void 0:i.mode;return o?(e.pasteHTML(`<pre><code class="language-${o}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function aTe({event:t,editor:e,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var s;if(e.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(s=t.clipboardData)==null?void 0:s.getData("text/plain");if(a)return e.pasteText(a),!0}let i;for(const a of w_)if(t.clipboardData.types.includes(a)){i=a;break}if(!i)return!0;if(i==="vscode-editor-data")return oTe(t,e.prosemirrorView),!0;if(i==="Files")return MU(t,e),!0;const o=t.clipboardData.getData(i);if(i==="blocknote/html")return e.pasteHTML(o,!0),!0;if(i==="text/markdown")return e.pasteMarkdown(o),!0;if(n){const a=t.clipboardData.getData("text/plain");if(iTe(a))return e.pasteMarkdown(a),!0}return i==="text/html"?(e.pasteHTML(o),!0):r?(e.pasteMarkdown(o),!0):(e.pasteText(o),!0)}const lTe=(t,e)=>ut.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new Ie({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!t.isEditable)return e({event:r,editor:t,defaultPasteHandler:({prioritizeMarkdownOverHTML:s=!0,plainTextAsMarkdown:i=!0}={})=>aTe({event:r,editor:t,prioritizeMarkdownOverHTML:s,plainTextAsMarkdown:i})})}}}})]}});function cTe(t,e,n){var r;let s=!1;const i=t.state.selection instanceof pt;if(!i){const l=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,c=[];for(let d=0;d<l.childCount;d++)c.push(l.child(d));s=c.find(d=>d.type.isInGroup("bnBlock")||d.type.name==="blockGroup"||d.type.spec.group==="blockContent")===void 0,s&&(e=l)}let o;const a=A1(t.state.schema,n);if(i){((r=e.firstChild)==null?void 0:r.type.name)==="table"&&(e=e.firstChild.content);const l=P7(e,n.schema.inlineContentSchema,n.schema.styleSchema);o=`<table>${a.exportInlineContent(l,{})}</table>`}else if(s){const l=Zy(e,n.schema.inlineContentSchema,n.schema.styleSchema);o=a.exportInlineContent(l,{})}else{const l=XH(e);o=a.exportBlocks(l,{})}return o}function RU(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.transact(o=>o.setSelection(new ve(o.doc.resolve(t.state.selection.from-1))));const n=t.serializeForClipboard(t.state.selection.content()).dom.innerHTML,r=t.state.selection.content().content,s=cTe(t,r,e),i=l_(s);return{clipboardHTML:n,externalHTML:s,markdown:i}}const JI=()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!0;let e=t.focusNode;for(;e;){if(e instanceof HTMLElement&&e.getAttribute("contenteditable")==="false")return!0;e=e.parentElement}return!1},QI=(t,e,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:s,markdown:i}=RU(e,t);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",s),n.clipboardData.setData("text/plain",i)},uTe=t=>ut.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new Ie({props:{handleDOMEvents:{copy(e,n){return JI()||QI(t,e,n),!0},cut(e,n){return JI()||(QI(t,e,n),e.editable&&e.dispatch(e.state.tr.deleteSelection())),!0},dragstart(e,n){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.transact(o=>o.setSelection(new ve(o.doc.resolve(e.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:s,markdown:i}=RU(e,t);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",s),n.dataTransfer.setData("text/plain",i),!0}}}})]}}),dTe=ut.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["tableCell","tableHeader"],attributes:{backgroundColor:Wfe()}}]}}),hTe=Ei.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",ds(this.options.HTMLAttributes,t)]},renderText(){return`
`}}),PC=(t,e)=>{const n=t.resolve(e),r=n.index();if(r===0)return;const s=n.posAtIndex(r-1);return Xy(t.resolve(s))},PU=(t,e)=>{for(;e.childContainer;){const n=e.childContainer.node,r=t.resolve(e.childContainer.beforePos+1).posAtIndex(n.childCount-1);e=Xy(t.resolve(r))}return e},fTe=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",pTe=(t,e,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const s=t.doc.resolve(r.childContainer.beforePos+1),i=t.doc.resolve(r.childContainer.afterPos-1),o=s.blockRange(i);if(e){const a=t.doc.resolve(r.bnBlock.beforePos);t.tr.lift(o,a.depth)}}if(e){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},XI=t=>({state:e,dispatch:n})=>{const r=e.doc.resolve(t),s=Xy(r),i=PC(e.doc,s.bnBlock.beforePos);if(!i)return!1;const o=PU(e.doc,i);return fTe(o,s)?pTe(e,n,o,s):!1},mTe=ut.create({priority:50,addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({chain:r,commands:s})=>[()=>s.deleteSelection(),()=>s.undoInputRule(),()=>s.command(({state:i})=>{const o=Tr(i);if(!o.isBlockContainer)return!1;const a=i.selection.from===o.blockContent.beforePos+1,l=o.blockContent.node.type.name==="paragraph";return a&&!l?s.command(Ffe(o.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>s.command(({state:i})=>{const o=Tr(i);if(!o.isBlockContainer)return!1;const{blockContent:a}=o;return i.selection.from===a.beforePos+1?s.liftListItem("blockContainer"):!1}),()=>s.command(({state:i})=>{const o=Tr(i);if(!o.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=o,c=i.selection.from===l.beforePos+1,d=i.selection.empty,h=a.beforePos;return c&&d?r().command(XI(h)).scrollIntoView().run():!1}),()=>s.command(({state:i,tr:o,dispatch:a})=>{const l=Tr(i);if(!l.isBlockContainer||o.selection.from!==l.blockContent.beforePos+1)return!1;const c=o.doc.resolve(l.bnBlock.beforePos);if(c.nodeBefore||c.node().type.name!=="column")return!1;const d=o.doc.resolve(l.bnBlock.beforePos),h=o.doc.resolve(d.before()),f=h.before();if(a){const p=o.doc.slice(l.bnBlock.beforePos,l.bnBlock.afterPos).content;o.delete(l.bnBlock.beforePos,l.bnBlock.afterPos),h.index()===0?(MC(o,f),o.insert(f,p),o.setSelection(xe.near(o.doc.resolve(f)))):(o.insert(h.pos-1,p),o.setSelection(xe.near(o.doc.resolve(h.pos-1))),MC(o,f))}return!0}),()=>s.command(({state:i})=>{const o=Tr(i);if(!o.isBlockContainer)return!1;if(o.blockContent.node.childCount===0&&o.blockContent.node.type.spec.content==="inline*"){const a=PC(i.doc,o.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let l=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const c=o.bnBlock.beforePos-1-1-1-1-1;l=l.setTextSelection(c)}else if(a.blockContent.node.type.spec.content===""){const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setNodeSelection(c)}else{const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setTextSelection(c)}return l.deleteRange({from:o.bnBlock.beforePos,to:o.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>s.command(({state:i})=>{const o=Tr(i);if(!o.isBlockContainer)throw new Error("todo");const a=i.selection.from===o.blockContent.beforePos+1,l=i.selection.empty,c=PC(i.doc,o.bnBlock.beforePos);if(c&&a&&l){const d=PU(i.doc,c);if(!d.isBlockContainer)throw new Error("todo");if(d.blockContent.node.type.spec.content===""||d.blockContent.node.type.spec.content==="inline*"&&d.blockContent.node.childCount===0)return r().cut({from:o.bnBlock.beforePos,to:o.bnBlock.afterPos},d.bnBlock.afterPos).deleteRange({from:d.bnBlock.beforePos,to:d.bnBlock.afterPos}).run()}return!1})]),e=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:s})=>{const i=Tr(s);if(!i.isBlockContainer)return!1;const{bnBlock:o,blockContent:a,childContainer:l}=i,{depth:c}=s.doc.resolve(o.beforePos),d=o.afterPos===s.doc.nodeSize-3,h=s.selection.from===a.afterPos-1,f=s.selection.empty;if(!d&&h&&f&&l===void 0){let p=c,m=o.afterPos+1,g=s.doc.resolve(m).depth;for(;g<p;)p=g,m+=2,g=s.doc.resolve(m).depth;return r.command(XI(m-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:s,tr:i})=>[()=>s.command(({state:o})=>{const a=Tr(o);if(!a.isBlockContainer)return!1;const{bnBlock:l,blockContent:c}=a,{depth:d}=o.doc.resolve(l.beforePos),h=o.selection.$anchor.parentOffset===0,f=o.selection.anchor===o.selection.head,p=c.node.childCount===0,m=d>1;return h&&f&&p&&m?s.liftListItem("blockContainer"):!1}),()=>s.command(({state:o})=>{var a;const l=Tr(o),c=((a=this.options.editor.schema.blockSchema[l.blockNoteType].meta)==null?void 0:a.hardBreakShortcut)??"shift+enter";if(c==="none")return!1;if(c==="shift+enter"&&r||c==="enter"){const d=i.storedMarks||i.selection.$head.marks().filter(h=>this.editor.extensionManager.splittableMarks.includes(h.type.name));return i.insert(i.selection.head,i.doc.type.schema.nodes.hardBreak.create()).ensureMarks(d),!0}return!1}),()=>s.command(({state:o,dispatch:a})=>{const l=Tr(o);if(!l.isBlockContainer)return!1;const{bnBlock:c,blockContent:d}=l,h=o.selection.$anchor.parentOffset===0,f=o.selection.anchor===o.selection.head,p=d.node.childCount===0;if(h&&f&&p){const m=c.afterPos,g=m+2;if(a){const x=o.schema.nodes.blockContainer.createAndFill();o.tr.insert(m,x).scrollIntoView(),o.tr.setSelection(new xe(o.doc.resolve(g)))}return!0}return!1}),()=>s.command(({state:o,chain:a})=>{const l=Tr(o);if(!l.isBlockContainer)return!1;const{blockContent:c}=l,d=o.selection.$anchor.parentOffset===0;return c.node.childCount===0?!1:(a().deleteSelection().command(vpe(o.selection.from,d,d)).run(),!0)})]);return{Backspace:t,Delete:e,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,s;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.getExtension(bl))!=null&&r.store.state||((s=this.options.editor.getExtension(ii))==null?void 0:s.store.state)!==void 0)?!1:jU(this.options.editor)},"Shift-Tab":()=>{var r,s;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.getExtension(bl))!=null&&r.store.state||((s=this.options.editor.getExtension(ii))==null?void 0:s.store.state)!==void 0)?!1:this.editor.commands.liftListItem("blockContainer")},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}}),gTe=qs.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["ins",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),bTe=qs.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["del",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),xTe=qs.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(t){return t.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return[n?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}:!1}}]}}}),yTe=ut.create({name:"textAlignment",addGlobalAttributes(){return[{types:["tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),vTe=ut.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["table","tableCell","tableHeader"],attributes:{textColor:qfe()}}]}}),wTe={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},kTe=Ei.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[n,r]of Object.entries(wTe))t.getAttribute(r)&&(e[n]=t.getAttribute(r));return e}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:t}){var e;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[i,o]of Object.entries(t))i!=="class"&&n.setAttribute(i,o);const r={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},s=document.createElement("div");s.className=Kt("bn-block",r.class),s.setAttribute("data-node-type",this.name);for(const[i,o]of Object.entries(r))i!=="class"&&s.setAttribute(i,o);return n.appendChild(s),{dom:n,contentDOM:s}}}),ETe=Ei.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const n={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},r=document.createElement("div");r.className=Kt("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[s,i]of Object.entries(n))s!=="class"&&r.setAttribute(s,i);return{dom:r,contentDOM:r}}}),CTe=Ei.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"}),STe=it(({options:t})=>({key:"collaboration",blockNoteExtensions:[Ake(t),yC(t),Pg(t),Dg(),Ike(t)]}));let ZI=!1;function TTe(t,e){const n=[Au.ClipboardTextSerializer,Au.Commands,Au.Editable,Au.FocusEvents,Au.Tabindex,EEe,Qy.configure({types:["blockContainer","columnList","column"],setIdAttribute:e.setIdAttribute}),hTe,KEe,gTe,bTe,xTe,YEe.extend({inclusive:!1}).configure({defaultProtocol:JH,protocols:ZI?[]:KH}),...Object.values(t.schema.styleSpecs).map(r=>r.implementation.mark.configure({editor:t})),vTe,dTe,yTe,ut.create({name:"OverrideEscape",addKeyboardShortcuts:()=>({Escape:()=>{var r;return(r=t.getExtension(Bs))!=null&&r.shown()?!1:(t.blur(),!0)}})}),CTe,kTe.configure({editor:t,domAttributes:e.domAttributes}),mTe.configure({editor:t,tabBehavior:e.tabBehavior}),ETe.configure({domAttributes:e.domAttributes}),...Object.values(t.schema.inlineContentSpecs).filter(r=>r.config!=="link"&&r.config!=="text").map(r=>r.implementation.node.configure({editor:t})),...Object.values(t.schema.blockSpecs).flatMap(r=>[..."node"in r.implementation?[r.implementation.node.configure({editor:t,domAttributes:e.domAttributes})]:[]]),uTe(t),lTe(t,e.pasteHandler||(r=>r.defaultPasteHandler())),WSe(t)];return ZI=!0,n}function NTe(t,e){const n=[GH(),Mke(e),ii(e),bl(e),Sm(e),Dke(),Bke(e),Hx(e),yi(e),Bs(e),...e.trailingBlock!==!1?[eEe()]:[]];return e.collaboration?n.push(STe(e.collaboration)):n.push(Rke()),"table"in t.schema.blockSpecs&&n.push(_t(e)),e.animations!==!1&&n.push(Fke()),n}class _Te{constructor(e,n){et(this,"disabledExtensions",new Set),et(this,"extensions",[]),et(this,"abortMap",new Map),et(this,"extensionFactories",new Map),et(this,"extensionPlugins",new Map),this.editor=e,this.options=n,e.onMount(()=>{for(const r of this.extensions)if(r.mount){const s=new window.AbortController,i=r.mount({dom:e.prosemirrorView.dom,root:e.prosemirrorView.root,signal:s.signal});i&&s.signal.addEventListener("abort",()=>{i()}),this.abortMap.set(r,s)}}),e.onUnmount(()=>{for(const[r,s]of this.abortMap.entries())this.abortMap.delete(r),s.abort()}),this.disabledExtensions=new Set(n.disableExtensions||[]);for(const r of NTe(this.editor,this.options))this.addExtension(r);for(const r of this.options.extensions??[])this.addExtension(r);for(const r of Object.values(this.editor.schema.blockSpecs))for(const s of r.extensions??[])this.addExtension(s)}registerExtension(e){var n;const r=[].concat(e).filter(Boolean);if(!r.length){console.warn("No extensions found to register",e);return}const s=r.map(o=>this.addExtension(o)).filter(Boolean),i=new Set;for(const o of s)o!=null&&o.tiptapExtensions&&console.warn(`Extension ${o.key} has tiptap extensions, but these cannot be changed after initializing the editor. Please separate the extension into multiple extensions if you want to add them, or re-initialize the editor.`,o),(n=o==null?void 0:o.inputRules)!=null&&n.length&&console.warn(`Extension ${o.key} has input rules, but these cannot be changed after initializing the editor. Please separate the extension into multiple extensions if you want to add them, or re-initialize the editor.`,o),this.getProsemirrorPluginsFromExtension(o).plugins.forEach(a=>{i.add(a)});this.updatePlugins(o=>[...o,...i])}addExtension(e){let n;if(typeof e=="function"?n=e({editor:this.editor}):n=e,!(!n||this.disabledExtensions.has(n.key))){if(typeof e=="function"){const r=n[X2];typeof r=="function"&&this.extensionFactories.set(r,n)}if(this.extensions.push(n),n.blockNoteExtensions)for(const r of n.blockNoteExtensions)this.addExtension(r);return n}}resolveExtensions(e){const n=[];if(typeof e=="function"){const r=this.extensionFactories.get(e);r&&n.push(r)}else if(Array.isArray(e))for(const r of e)n.push(...this.resolveExtensions(r));else if(typeof e=="object"&&"key"in e)n.push(e);else if(typeof e=="string"){const r=this.extensions.find(s=>s.key===e);r&&n.push(r)}return n}unregisterExtension(e){var n;const r=this.resolveExtensions(e);if(!r.length){console.warn("No extensions found to unregister",e);return}let s=!1;const i=new Set;for(const o of r){this.extensions=this.extensions.filter(l=>l!==o),this.extensionFactories.forEach((l,c)=>{l===o&&this.extensionFactories.delete(c)}),(n=this.abortMap.get(o))==null||n.abort(),this.abortMap.delete(o);const a=this.extensionPlugins.get(o);a==null||a.forEach(l=>{i.add(l)}),this.extensionPlugins.delete(o),o.tiptapExtensions&&!s&&(s=!0,console.warn(`Extension ${o.key} has tiptap extensions, but they will not be removed. Please separate the extension into multiple extensions if you want to remove them, or re-initialize the editor.`,e))}this.updatePlugins(o=>o.filter(a=>!i.has(a)))}updatePlugins(e){const n=this.editor.prosemirrorState,r=n.reconfigure({plugins:e(n.plugins.slice())});this.editor.prosemirrorView.updateState(r)}getTiptapExtensions(){var e;const n=TTe(this.editor,this.options).filter(i=>!this.disabledExtensions.has(i.name)),r=eU(this.extensions),s=new Map;for(const i of this.extensions){i.tiptapExtensions&&n.push(...i.tiptapExtensions);const o=r(i.key),{plugins:a,inputRules:l}=this.getProsemirrorPluginsFromExtension(i);a.length&&n.push(ut.create({name:i.key,priority:o,addProseMirrorPlugins:()=>a})),l.length&&(s.has(o)||s.set(o,[]),s.get(o).push(...l))}n.push(ut.create({name:"blocknote-input-rules",addProseMirrorPlugins(){const i=[];return Array.from(s.keys()).sort().reverse().forEach(o=>{i.push(...s.get(o))}),[mEe({rules:i})]}}));for(const i of((e=this.options._tiptapOptions)==null?void 0:e.extensions)??[])n.push(i);return n}getProsemirrorPluginsFromExtension(e){var n,r,s;const i=[...e.prosemirrorPlugins??[]],o=[];return!((n=e.prosemirrorPlugins)!=null&&n.length)&&!Object.keys(e.keyboardShortcuts||{}).length&&!((r=e.inputRules)!=null&&r.length)?{plugins:i,inputRules:o}:(this.extensionPlugins.set(e,i),(s=e.inputRules)!=null&&s.length&&o.push(...e.inputRules.map(a=>new tu(a.find,(l,c,d,h)=>{const f=a.replace({match:c,range:{from:d,to:h},editor:this.editor});if(f){const p=this.editor.getTextCursorPosition();if(this.editor.schema.blockSchema[p.block.type].content!=="inline")return null;const m=cm(l.tr),g=l.tr.deleteRange(d,h);return f1(g,m.bnBlock.beforePos,f),g}return null}))),Object.keys(e.keyboardShortcuts||{}).length&&i.push(X9(Object.fromEntries(Object.entries(e.keyboardShortcuts).map(([a,l])=>[a,()=>l({editor:this.editor})])))),{plugins:i,inputRules:o})}getExtensions(){return new Map(this.extensions.map(e=>[e.key,e]))}getExtension(e){if(typeof e=="string")return this.extensions.find(r=>r.key===e)||void 0;if(typeof e=="function")return this.extensionFactories.get(e)||void 0;throw new Error(`Invalid extension type: ${typeof e}`)}hasExtension(e){return typeof e=="string"?this.extensions.some(n=>n.key===e):typeof e=="object"&&"key"in e?this.extensions.some(n=>n.key===e.key):typeof e=="function"?this.extensionFactories.has(e):!1}}function ATe(t,e){let{$from:n,$to:r}=e;if(n.pos>n.start()&&n.pos<t.content.size){const s=t.textBetween(n.pos,n.pos+1);if(/^[\w\p{P}]$/u.test(s)){const i=t.textBetween(n.start(),n.pos).match(/[\w\p{P}]+$/u);i&&(n=t.resolve(n.pos-i[0].length))}}if(r.pos<r.end()&&r.pos>0){const s=t.textBetween(r.pos-1,r.pos);if(/^[\w\p{P}]$/u.test(s)){const i=t.textBetween(r.pos,r.end()).match(/^[\w\p{P}]+/u);i&&(r=t.resolve(r.pos+i[0].length))}}return{$from:n,$to:r,from:n.pos,to:r.pos}}function jTe(t){const e=tn(t);if(t.selection.empty||"node"in t.selection)return;const n=t.doc.resolve(dl(t.doc,t.selection.from).posBeforeNode),r=t.doc.resolve(dl(t.doc,t.selection.to).posBeforeNode),s=(c,d)=>{const h=n.posAtIndex(c,d),f=t.doc.resolve(h).nodeAfter;if(!f)throw new Error(`Error getting selection - node not found at position ${h}`);return Ut(f,e)},i=[],o=n.sharedDepth(r.pos),a=n.index(o),l=r.index(o);if(n.depth>o){i.push(Ut(n.nodeAfter,e));for(let c=n.depth;c>o;c--)if(n.node(c).type.isInGroup("childContainer")){const d=n.index(c)+1,h=n.node(c).childCount;for(let f=d;f<h;f++)i.push(s(f,c))}}else i.push(s(a,o));for(let c=a+1;c<=l;c++)i.push(s(c,o));if(i.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${t.selection})`);return{blocks:i}}function OTe(t,e,n){const r=typeof e=="string"?e:e.id,s=typeof n=="string"?n:n.id,i=tn(t),o=um(i);if(r===s)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=xr(r,t.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const l=xr(s,t.doc);if(!l)throw new Error(`Block with ID ${s} not found`);const c=hl(a),d=hl(l),h=o.blockSchema[c.blockNoteType],f=o.blockSchema[d.blockNoteType];if(!c.isBlockContainer||h.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!d.isBlockContainer||f.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${s})`);let p,m;if(h.content==="table"){const g=Et.get(c.blockContent.node);p=c.blockContent.beforePos+g.positionAt(0,0,c.blockContent.node)+1+2}else p=c.blockContent.beforePos+1;if(f.content==="table"){const g=Et.get(d.blockContent.node),x=d.blockContent.beforePos+g.positionAt(g.height-1,g.width-1,d.blockContent.node)+1,b=t.doc.resolve(x).nodeAfter.nodeSize;m=x+b-2}else m=d.blockContent.afterPos-1;t.setSelection(xe.create(t.doc,p,m))}function ITe(t,e=!1){const n=tn(t),r=e?ATe(t.doc,t.selection):t.selection;let s=r.$from,i=r.$to;for(;i.parentOffset>=i.parent.nodeSize-2&&i.depth>0;)i=t.doc.resolve(i.pos+1);for(;i.parentOffset===0&&i.depth>0;)i=t.doc.resolve(i.pos-1);for(;s.parentOffset===0&&s.depth>0;)s=t.doc.resolve(s.pos-1);for(;s.parentOffset>=s.parent.nodeSize-2&&s.depth>0;)s=t.doc.resolve(s.pos+1);const o=Hae(t.doc.slice(s.pos,i.pos,!0),n);return{_meta:{startPos:s.pos,endPos:i.pos},...o}}function MTe(t){const{bnBlock:e}=cm(t),n=tn(t.doc),r=t.doc.resolve(e.beforePos),s=r.nodeBefore,i=t.doc.resolve(e.afterPos).nodeAfter;let o;return r.depth>1&&(o=r.node(),o.type.isInGroup("bnBlock")||(o=r.node(r.depth-1))),{block:Ut(e.node,n),prevBlock:s===null?void 0:Ut(s,n),nextBlock:i===null?void 0:Ut(i,n),parentBlock:o===void 0?void 0:Ut(o,n)}}function DU(t,e,n="start"){const r=typeof e=="string"?e:e.id,s=tn(t.doc),i=um(s),o=xr(r,t.doc);if(!o)throw new Error(`Block with ID ${r} not found`);const a=hl(o),l=i.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const c=a.blockContent;if(l==="none"){t.setSelection(ve.create(t.doc,c.beforePos));return}if(l==="inline")n==="start"?t.setSelection(xe.create(t.doc,c.beforePos+1)):t.setSelection(xe.create(t.doc,c.afterPos-1));else if(l==="table")n==="start"?t.setSelection(xe.create(t.doc,c.beforePos+4)):t.setSelection(xe.create(t.doc,c.afterPos-4));else throw new lo(l)}else{const c=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;DU(t,c.attrs.id,n)}}class RTe{constructor(e){this.editor=e}getSelection(){return this.editor.transact(e=>jTe(e))}getSelectionCutBlocks(e=!1){return this.editor.transact(n=>ITe(n,e))}setSelection(e,n){return this.editor.transact(r=>OTe(r,e,n))}getTextCursorPosition(){return this.editor.transact(e=>MTe(e))}setTextCursorPosition(e,n="start"){return this.editor.transact(r=>DU(r,e,n))}getSelectionBoundingBox(){if(!this.editor.prosemirrorView)return;const{selection:e}=this.editor.prosemirrorState,{ranges:n}=e,r=Math.min(...n.map(i=>i.$from.pos)),s=Math.max(...n.map(i=>i.$to.pos));if(p7(e)){const i=this.editor.prosemirrorView.nodeDOM(r);if(i)return i.getBoundingClientRect()}return VT(this.editor.prosemirrorView,r,s).toJSON()}}class PTe{constructor(e){et(this,"activeTransaction",null),et(this,"isInCan",!1),this.editor=e}can(e){try{return this.isInCan=!0,e()}finally{this.isInCan=!1}}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");if(this.isInCan)return this.canExec(e);const n=this.prosemirrorState,r=this.prosemirrorView;return e(n,s=>this.prosemirrorView.dispatch(s),r)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this.prosemirrorState,r=this.prosemirrorView;return e(n,void 0,r)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this.editor._tiptapEditor.state.tr;const n=e(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this.prosemirrorView.dispatch(r),n}finally{this.activeTransaction=null}}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this.editor._tiptapEditor.state}get prosemirrorView(){return this.editor._tiptapEditor.view}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}get isEditable(){if(!this.editor._tiptapEditor){if(!this.editor.headless)throw new Error("no editor, but also not headless?");return!1}return this.editor._tiptapEditor.isEditable===void 0?!0:this.editor._tiptapEditor.isEditable}set isEditable(e){if(!this.editor._tiptapEditor){if(!this.editor.headless)throw new Error("no editor, but also not headless?");return}this.editor._tiptapEditor.options.editable!==e&&this.editor._tiptapEditor.setEditable(e)}undo(){const e=this.editor.getExtension("yUndo");if(e)return this.exec(e.undoCommand);const n=this.editor.getExtension("history");if(n)return this.exec(n.undoCommand);throw new Error("No undo plugin found")}redo(){const e=this.editor.getExtension("yUndo");if(e)return this.exec(e.redoCommand);const n=this.editor.getExtension("history");if(n)return this.exec(n.redoCommand);throw new Error("No redo plugin found")}}function DTe(t,e,n,r={updateSelection:!0}){let{from:s,to:i}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},o=!0,a=!0,l="";if(n.forEach(c=>{c.check(),o&&c.isText&&c.marks.length===0?l+=c.text:o=!1,a=a?c.isBlock:!1}),s===i&&a){const{parent:c}=t.doc.resolve(s);c.isTextblock&&!c.type.spec.code&&!c.childCount&&(s-=1,i+=1)}return o?t.insertText(l,s,i):t.replaceWith(s,i,n),r.updateSelection&&s7(t,t.steps.length-1,-1),!0}class LTe{constructor(e){this.editor=e}insertInlineContent(e,{updateSelection:n=!1}={}){const r=mi(e,this.editor.pmSchema);this.editor.transact(s=>{DTe(s,{from:s.selection.from,to:s.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.editor.transact(e=>{const n={},r=e.selection.$to.marks();for(const s of r){const i=this.editor.schema.styleSchema[s.type.name];if(!i){s.type.name!=="link"&&!s.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",s.type.name);continue}i.propSchema==="boolean"?n[i.type]=!0:n[i.type]=s.attrs.stringValue}return n})}addStyles(e){for(const[n,r]of Object.entries(e)){const s=this.editor.schema.styleSchema[n];if(!s)throw new Error(`style ${n} not found in styleSchema`);if(s.propSchema==="boolean")this.editor._tiptapEditor.commands.setMark(n);else if(s.propSchema==="string")this.editor._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new lo(s.propSchema)}}removeStyles(e){for(const n of Object.keys(e))this.editor._tiptapEditor.commands.unsetMark(n)}toggleStyles(e){for(const[n,r]of Object.entries(e)){const s=this.editor.schema.styleSchema[n];if(!s)throw new Error(`style ${n} not found in styleSchema`);if(s.propSchema==="boolean")this.editor._tiptapEditor.commands.toggleMark(n);else if(s.propSchema==="string")this.editor._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new lo(s.propSchema)}}getSelectedText(){return this.editor.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this.editor._tiptapEditor.getAttributes("link").href}createLink(e,n){if(e==="")return;const r=this.editor.pmSchema.mark("link",{href:e});this.editor.transact(s=>{const{from:i,to:o}=s.selection;n?s.insertText(n,i,o).addMark(i,i+n.length,r):s.setSelection(xe.create(s.doc,o)).addMark(i,o,r)})}}function BTe(t,e){const n=[];return t.forEach((r,s,i)=>{i!==e&&n.push(r)}),Q.from(n)}function $Te(t,e){const n=[];for(let r=0;r<t.childCount;r++)if(t.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const s=n[n.length-1],i=s.copy(s.content.addToEnd(t.child(r)));n[n.length-1]=i}else{const s=e.nodes.table.createChecked(void 0,t.child(r));n.push(s)}else n.push(t.child(r));return t=Q.from(n),t}function FTe(t,e){let n=Q.from(t.content);if(n=$Te(n,e.state.schema),!HTe(n,e))return new ue(n,t.openStart,t.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const s=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const o=n.child(r+1).child(0).child(0);(o.type.name==="bulletListItem"||o.type.name==="numberedListItem"||o.type.name==="checkListItem")&&(s.push(n.child(r+1)),n=BTe(n,r+1))}const i=e.state.schema.nodes.blockContainer.createChecked(void 0,s);n=n.replaceChild(r,i)}return new ue(n,t.openStart,t.openEnd)}function HTe(t,e){var n,r;const s=t.childCount===1,i=((n=t.firstChild)==null?void 0:n.type.spec.content)==="inline*",o=((r=t.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(s){if(i)return!1;if(o){const a=Tr(e.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const UTe={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let zTe=class LU extends c_{constructor(e){var n,r,s,i,o,a,l,c,d,h;super(),et(this,"pmSchema"),et(this,"_tiptapEditor"),et(this,"elementRenderer",null),et(this,"blockCache",new WeakMap),et(this,"dictionary"),et(this,"schema"),et(this,"blockImplementations"),et(this,"inlineContentImplementations"),et(this,"styleImplementations"),et(this,"uploadFile"),et(this,"onUploadStartCallbacks",[]),et(this,"onUploadEndCallbacks",[]),et(this,"resolveFileUrl"),et(this,"settings"),et(this,"_blockManager"),et(this,"_eventManager"),et(this,"_exportManager"),et(this,"_extensionManager"),et(this,"_selectionManager"),et(this,"_stateManager"),et(this,"_styleManager"),et(this,"unregisterExtension",(...v)=>this._extensionManager.unregisterExtension(...v)),et(this,"registerExtension",(...v)=>this._extensionManager.registerExtension(...v)),et(this,"getExtension",(...v)=>this._extensionManager.getExtension(...v)),et(this,"mount",v=>{this._tiptapEditor.mount({mount:v})}),et(this,"unmount",()=>{this._tiptapEditor.unmount()}),this.options=e,this.dictionary=e.dictionary||hEe,this.settings={tables:{splitCells:((n=e==null?void 0:e.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=e==null?void 0:e.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((s=e==null?void 0:e.tables)==null?void 0:s.cellTextColor)??!1,headers:((i=e==null?void 0:e.tables)==null?void 0:i.headers)??!1}};const f={defaultStyles:!0,schema:e.schema||tU.create(),...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(this.schema=f.schema,this.blockImplementations=f.schema.blockSpecs,this.inlineContentImplementations=f.schema.inlineContentSpecs,this.styleImplementations=f.schema.styleSpecs,f.uploadFile){const v=f.uploadFile;this.uploadFile=async(w,S)=>{this.onUploadStartCallbacks.forEach(E=>E.apply(this,[S]));try{return await v(w,S)}finally{this.onUploadEndCallbacks.forEach(E=>E.apply(this,[S]))}}}this.resolveFileUrl=f.resolveFileUrl,this._eventManager=new ISe(this),this._extensionManager=new _Te(this,f);const p=this._extensionManager.getTiptapExtensions(),m=this._extensionManager.hasExtension("ySync")||this._extensionManager.hasExtension("liveblocksExtension");m&&f.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const g={...UTe,...f._tiptapOptions,element:null,autofocus:f.autofocus??!1,extensions:p,editorProps:{...(o=f._tiptapOptions)==null?void 0:o.editorProps,attributes:{tabIndex:"0",...(l=(a=f._tiptapOptions)==null?void 0:a.editorProps)==null?void 0:l.attributes,...(c=f.domAttributes)==null?void 0:c.editor,class:Kt("bn-editor",f.defaultStyles?"bn-default-styles":"",((h=(d=f.domAttributes)==null?void 0:d.editor)==null?void 0:h.class)||"")},transformPasted:FTe}};try{const v=f.initialContent||(m?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:Qy.options.generateID()}]);if(!Array.isArray(v)||v.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+v);const w=Moe(g.extensions),S=v.map(C=>Jc(C,w,this.schema.styleSchema).toJSON()),E=Fb({type:"doc",content:[{type:"blockGroup",content:S}]},w,g.parseOptions);this._tiptapEditor=new Eae({...g,content:E.toJSON()}),this.pmSchema=this._tiptapEditor.schema}catch(v){throw new Error("Error creating document from blocks passed as `initialContent`",{cause:v})}let x;const b=this.pmSchema.nodes.doc.createAndFill;this.pmSchema.nodes.doc.createAndFill=(...v)=>{if(x)return x;const w=b.apply(this.pmSchema.nodes.doc,v),S=JSON.parse(JSON.stringify(w.toJSON()));return S.content[0].content[0].attrs.id="initialBlockId",x=Uo.fromJSON(this.pmSchema,S),x},this.pmSchema.cached.blockNoteEditor=this,this._blockManager=new OSe(this),this._exportManager=new USe(this),this._selectionManager=new RTe(this),this._stateManager=new PTe(this),this._styleManager=new LTe(this),this.emit("create")}static create(e){return new LU(e??{})}get extensions(){return this._extensionManager.getExtensions()}exec(e){return this._stateManager.exec(e)}canExec(e){return this._stateManager.canExec(e)}transact(e){return this._stateManager.transact(e)}get prosemirrorState(){return this._stateManager.prosemirrorState}get prosemirrorView(){return this._stateManager.prosemirrorView}get domElement(){var e;if(!this.headless)return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return this.headless?!1:((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}get headless(){return!this._tiptapEditor.isInitialized}focus(){this.headless||this.prosemirrorView.focus()}blur(){var e;this.headless||(e=this.domElement)==null||e.blur()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const n=this.onUploadStartCallbacks.indexOf(e);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const n=this.onUploadEndCallbacks.indexOf(e);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this._blockManager.document}getBlock(e){return this._blockManager.getBlock(e)}getPrevBlock(e){return this._blockManager.getPrevBlock(e)}getNextBlock(e){return this._blockManager.getNextBlock(e)}getParentBlock(e){return this._blockManager.getParentBlock(e)}forEachBlock(e,n=!1){this._blockManager.forEachBlock(e,n)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}onBeforeChange(e){return this._extensionManager.getExtension(GH).subscribe(e)}getTextCursorPosition(){return this._selectionManager.getTextCursorPosition()}setTextCursorPosition(e,n="start"){return this._selectionManager.setTextCursorPosition(e,n)}getSelection(){return this._selectionManager.getSelection()}getSelectionCutBlocks(e=!1){return this._selectionManager.getSelectionCutBlocks(e)}setSelection(e,n){return this._selectionManager.setSelection(e,n)}get isEditable(){return this._stateManager.isEditable}set isEditable(e){this._stateManager.isEditable=e}insertBlocks(e,n,r="before"){return this._blockManager.insertBlocks(e,n,r)}updateBlock(e,n){return this._blockManager.updateBlock(e,n)}removeBlocks(e){return this._blockManager.removeBlocks(e)}replaceBlocks(e,n){return this._blockManager.replaceBlocks(e,n)}undo(){return this._stateManager.undo()}redo(){return this._stateManager.redo()}insertInlineContent(e,{updateSelection:n=!1}={}){this._styleManager.insertInlineContent(e,{updateSelection:n})}getActiveStyles(){return this._styleManager.getActiveStyles()}addStyles(e){this._styleManager.addStyles(e)}removeStyles(e){this._styleManager.removeStyles(e)}toggleStyles(e){this._styleManager.toggleStyles(e)}getSelectedText(){return this._styleManager.getSelectedText()}getSelectedLinkUrl(){return this._styleManager.getSelectedLinkUrl()}createLink(e,n){this._styleManager.createLink(e,n)}canNestBlock(){return this._blockManager.canNestBlock()}nestBlock(){this._blockManager.nestBlock()}canUnnestBlock(){return this._blockManager.canUnnestBlock()}unnestBlock(){this._blockManager.unnestBlock()}moveBlocksUp(){return this._blockManager.moveBlocksUp()}moveBlocksDown(){return this._blockManager.moveBlocksDown()}blocksToHTMLLossy(e=this.document){return this._exportManager.blocksToHTMLLossy(e)}blocksToFullHTML(e=this.document){return this._exportManager.blocksToFullHTML(e)}tryParseHTMLToBlocks(e){return this._exportManager.tryParseHTMLToBlocks(e)}blocksToMarkdownLossy(e=this.document){return this._exportManager.blocksToMarkdownLossy(e)}tryParseMarkdownToBlocks(e){return this._exportManager.tryParseMarkdownToBlocks(e)}onChange(e,n){return this._eventManager.onChange(e,n)}onSelectionChange(e,n){return this._eventManager.onSelectionChange(e,n)}onMount(e){this._eventManager.onMount(e)}onUnmount(e){this._eventManager.onUnmount(e)}getSelectionBoundingBox(){return this._selectionManager.getSelectionBoundingBox()}get isEmpty(){const e=this.document;return e.length===0||e.length===1&&e[0].type==="paragraph"&&e[0].content.length===0}pasteHTML(e,n=!1){this._exportManager.pasteHTML(e,n)}pasteText(e){return this._exportManager.pasteText(e)}pasteMarkdown(e){return this._exportManager.pasteMarkdown(e)}};const VTe="modulepreload",WTe=function(t){return"/"+t},eM={},Ux=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=WTe(l),l in eM)return;eM[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":VTe,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var qTe=Object.defineProperty,GTe=(t,e,n)=>e in t?qTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tM=(t,e,n)=>GTe(t,typeof e!="symbol"?e+"":e,n);const nM=qs.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:t=>!!t.getAttribute("data-orphan"),renderHTML:t=>t.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:t=>t.getAttribute("data-bn-thread-id"),renderHTML:t=>({"data-bn-thread-id":t.threadId}),default:""}}},renderHTML({HTMLAttributes:t}){return["span",ds(t,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(t){return t.name==="comment"?{blocknoteIgnore:!0}:{}}});let YTe=class extends c_{constructor(e){super(),tM(this,"userCache",new Map),tM(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const n=e.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const s of r)this.userCache.set(s.id,s);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}};const q0=new We("blocknote-comments");function KTe(t,e){const n=new Map;return t.descendants((r,s)=>{r.marks.forEach(i=>{if(i.type.name===e){const o=i.attrs.threadId;if(!o)return;const a=s,l=a+r.nodeSize,c=n.get(o)??{from:1/0,to:0};n.set(o,{from:Math.min(a,c.from),to:Math.max(l,c.to)})}})}),n}const Vs=it(({editor:t,options:{schema:e,threadStore:n,resolveUsers:r}})=>{if(!r)throw new Error("resolveUsers is required to be defined when using comments");if(!n)throw new Error("threadStore is required to be defined when using comments");const s=nM.name,i=new YTe(r),o=Al({pendingComment:!1,selectedThreadId:void 0,threadPositions:new Map},{onUpdate(){o.state.selectedThreadId!==o.prevState.selectedThreadId&&t.transact(l=>l.setMeta(q0,!0))}}),a=l=>{t.transact(c=>{c.doc.descendants((d,h)=>{d.marks.forEach(f=>{if(f.type.name===s){const p=f.type,m=f.attrs.threadId,g=l.get(m),x=!!(!g||g.resolved||g.deletedAt);if(x!==f.attrs.orphan){const b=Math.max(h,0),v=Math.min(h+d.nodeSize,c.doc.content.size-1,c.doc.content.size-1);c.removeMark(b,v,f),c.addMark(b,v,p.create({...f.attrs,orphan:x})),x&&o.state.selectedThreadId===m&&o.setState(w=>({...w,selectedThreadId:void 0}))}}})})})};return{key:"comments",store:o,prosemirrorPlugins:[new Ie({key:q0,state:{init(){return{decorations:Re.empty}},apply(l,c){const d=l.getMeta(q0);if(!l.docChanged&&!d)return c;const h=l.docChanged?KTe(l.doc,s):o.state.threadPositions;(h.size>0||o.state.threadPositions.size>0)&&o.setState(p=>({...p,threadPositions:h}));const f=[];if(o.state.selectedThreadId){const p=h.get(o.state.selectedThreadId);p&&f.push(at.inline(p.from,p.to,{class:"bn-thread-mark-selected"}))}return{decorations:Re.create(l.doc,f)}}},props:{decorations(l){var c;return((c=q0.getState(l))==null?void 0:c.decorations)??Re.empty},handleClick:(l,c,d)=>{if(d.button!==0)return;const h=l.state.doc.nodeAt(c);if(!h){o.setState(m=>({...m,selectedThreadId:void 0}));return}const f=h.marks.find(m=>m.type.name===s&&m.attrs.orphan!==!0),p=f==null?void 0:f.attrs.threadId;p!==o.state.selectedThreadId&&o.setState(m=>({...m,selectedThreadId:p}))}}})],threadStore:n,mount(){const l=n.subscribe(a);a(n.getThreads());const c=t.onSelectionChange(()=>{o.state.pendingComment&&o.setState(d=>({...d,pendingComment:!1}))});return()=>{l(),c()}},selectThread(l,c=!0){var d,h;if(o.state.selectedThreadId!==l&&(o.setState(f=>({...f,pendingComment:!1,selectedThreadId:l})),l&&c)){const f=o.state.threadPositions.get(l);if(!f)return;(h=(d=t.prosemirrorView)==null?void 0:d.domAtPos(f.from).node)==null||h.scrollIntoView({behavior:"smooth",block:"center"})}},startPendingComment(){var l;o.setState(c=>({...c,selectedThreadId:void 0,pendingComment:!0})),(l=t.getExtension(Hx))==null||l.showSelection(!0)},stopPendingComment(){var l;o.setState(c=>({...c,selectedThreadId:void 0,pendingComment:!1})),(l=t.getExtension(Hx))==null||l.showSelection(!1)},async createThread(l){const c=await n.createThread(l);if(n.addThreadToDocument){const d=t.prosemirrorView,h=d.state.selection,f=kt.getState(d.state),p={prosemirror:{head:h.head,anchor:h.anchor},yjs:f?nx(f.binding,d.state):void 0};await n.addThreadToDocument({threadId:c.id,selection:p})}else t._tiptapEditor.commands.setMark(s,{orphan:!1,threadId:c.id})},userStore:i,commentEditorSchema:e,tiptapExtensions:[nM]}});let pk;async function JTe(){return pk||(pk=(async()=>{const[t,e]=await Promise.all([Ux(()=>import("./module-BvCTiNll.js"),[]),Ux(()=>import("./native-B5Vb9Oiz.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),pk)}async function QTe(t,e){if(!("text"in t.schema.inlineContentSchema)||t.schema.inlineContentSchema.text!==rme.text)return[];const{emojiData:n,emojiMart:r}=await JTe();return(e.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(e)).map(s=>({id:s.skins[0].native,onItemClick:()=>t.insertInlineContent(s.skins[0].native+" ")}))}function O1(){return typeof window<"u"}function xh(t){return BU(t)?(t.nodeName||"").toLowerCase():"#document"}function Ur(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function xo(t){var e;return(e=(BU(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BU(t){return O1()?t instanceof Node||t instanceof Ur(t).Node:!1}function Ct(t){return O1()?t instanceof Element||t instanceof Ur(t).Element:!1}function hs(t){return O1()?t instanceof HTMLElement||t instanceof Ur(t).HTMLElement:!1}function zx(t){return!O1()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ur(t).ShadowRoot}const XTe=new Set(["inline","contents"]);function Tm(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ws(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!XTe.has(s)}const ZTe=new Set(["table","td","th"]);function eNe(t){return ZTe.has(xh(t))}const tNe=[":popover-open",":modal"];function I1(t){return tNe.some(e=>{try{return t.matches(e)}catch{return!1}})}const nNe=["transform","translate","scale","rotate","perspective"],rNe=["transform","translate","scale","rotate","perspective","filter"],sNe=["paint","layout","strict","content"];function k_(t){const e=M1(),n=Ct(t)?Ws(t):t;return nNe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||rNe.some(r=>(n.willChange||"").includes(r))||sNe.some(r=>(n.contain||"").includes(r))}function iNe(t){let e=Zo(t);for(;hs(e)&&!Go(e);){if(k_(e))return e;if(I1(e))return null;e=Zo(e)}return null}function M1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const oNe=new Set(["html","body","#document"]);function Go(t){return oNe.has(xh(t))}function Ws(t){return Ur(t).getComputedStyle(t)}function R1(t){return Ct(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Zo(t){if(xh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zx(t)&&t.host||xo(t);return zx(e)?e.host:e}function $U(t){const e=Zo(t);return Go(e)?t.ownerDocument?t.ownerDocument.body:t.body:hs(e)&&Tm(e)?e:$U(e)}function Yo(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=$U(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Ur(s);if(i){const a=DC(o);return e.concat(o,o.visualViewport||[],Tm(s)?s:[],a&&n?Yo(a):[])}return e.concat(s,Yo(s,[],n))}function DC(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const FU=["top","right","bottom","left"],rM=["start","end"],sM=FU.reduce((t,e)=>t.concat(e,e+"-"+rM[0],e+"-"+rM[1]),[]),vi=Math.min,Qn=Math.max,Vx=Math.round,G0=Math.floor,Xi=t=>({x:t,y:t}),aNe={left:"right",right:"left",bottom:"top",top:"bottom"},lNe={start:"end",end:"start"};function LC(t,e,n){return Qn(t,vi(e,n))}function wi(t,e){return typeof t=="function"?t(e):t}function fs(t){return t.split("-")[0]}function hi(t){return t.split("-")[1]}function E_(t){return t==="x"?"y":"x"}function C_(t){return t==="y"?"height":"width"}const cNe=new Set(["top","bottom"]);function oi(t){return cNe.has(fs(t))?"y":"x"}function S_(t){return E_(oi(t))}function HU(t,e,n){n===void 0&&(n=!1);const r=hi(t),s=S_(t),i=C_(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=qx(o)),[o,qx(o)]}function uNe(t){const e=qx(t);return[Wx(t),e,Wx(e)]}function Wx(t){return t.replace(/start|end/g,e=>lNe[e])}const iM=["left","right"],oM=["right","left"],dNe=["top","bottom"],hNe=["bottom","top"];function fNe(t,e,n){switch(t){case"top":case"bottom":return n?e?oM:iM:e?iM:oM;case"left":case"right":return e?dNe:hNe;default:return[]}}function pNe(t,e,n,r){const s=hi(t);let i=fNe(fs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Wx)))),i}function qx(t){return t.replace(/left|right|bottom|top/g,e=>aNe[e])}function mNe(t){return{top:0,right:0,bottom:0,left:0,...t}}function T_(t){return typeof t!="number"?mNe(t):{top:t,right:t,bottom:t,left:t}}function Gd(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function gNe(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function bNe(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function xNe(){return/apple/i.test(navigator.vendor)}function yNe(){return gNe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function vNe(){return bNe().includes("jsdom/")}const aM="data-floating-ui-focusable",wNe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function lM(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function Hp(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&zx(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function Mu(t){return"composedPath"in t?t.composedPath()[0]:t.target}function mk(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function kNe(t){return t.matches("html,body")}function lc(t){return(t==null?void 0:t.ownerDocument)||document}function ENe(t){return hs(t)&&t.matches(wNe)}function CNe(t){if(!t||vNe())return!0;try{return t.matches(":focus-visible")}catch{return!0}}function SNe(t){return t?t.hasAttribute(aM)?t:t.querySelector("["+aM+"]")||t:null}function Bg(t,e,n){return n===void 0&&(n=!0),t.filter(s=>{var i;return s.parentId===e&&(!n||((i=s.context)==null?void 0:i.open))}).flatMap(s=>[s,...Bg(t,s.id,n)])}function TNe(t){return"nativeEvent"in t}function BC(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}var NNe=typeof document<"u",_Ne=function(){},$s=NNe?y.useLayoutEffect:_Ne;const ANe={...Kp};function Va(t){const e=y.useRef(t);return $s(()=>{e.current=t}),e}const jNe=ANe.useInsertionEffect,ONe=jNe||(t=>t());function qi(t){const e=y.useRef(()=>{});return ONe(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function cM(t,e,n){let{reference:r,floating:s}=t;const i=oi(e),o=S_(e),a=C_(o),l=fs(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(hi(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const INe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=cM(c,r,l),f=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:x,fn:b}=a[g],{x:v,y:w,data:S,reset:E}=await b({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=v??d,h=w??h,p={...p,[x]:{...p[x],...S}},E&&m<=50&&(m++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(c=E.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):E.rects),{x:d,y:h}=cM(c,f,l)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function Yd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=wi(e,t),m=T_(p),x=a[f?h==="floating"?"reference":"floating":h],b=Gd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),S=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},E=Gd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:l}):v);return{top:(b.top-E.top+m.top)/S.y,bottom:(E.bottom-b.bottom+m.bottom)/S.y,left:(b.left-E.left+m.left)/S.x,right:(E.right-b.right+m.right)/S.x}}const MNe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=wi(t,e)||{};if(c==null)return{};const h=T_(d),f={x:n,y:r},p=S_(s),m=C_(p),g=await o.getDimensions(c),x=p==="y",b=x?"top":"left",v=x?"bottom":"right",w=x?"clientHeight":"clientWidth",S=i.reference[m]+i.reference[p]-f[p]-i.floating[m],E=f[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=C?C[w]:0;(!T||!await(o.isElement==null?void 0:o.isElement(C)))&&(T=a.floating[w]||i.floating[m]);const _=S/2-E/2,O=T/2-g[m]/2-1,N=vi(h[b],O),R=vi(h[v],O),M=N,W=T-g[m]-R,D=T/2-g[m]/2+_,B=LC(M,D,W),$=!l.arrow&&hi(s)!=null&&D!==B&&i.reference[m]/2-(D<M?N:R)-g[m]/2<0,V=$?D<M?D-M:D-W:0;return{[p]:f[p]+V,data:{[p]:B,centerOffset:D-B-V,...$&&{alignmentOffset:V}},reset:$}}});function RNe(t,e,n){return(t?[...n.filter(s=>hi(s)===t),...n.filter(s=>hi(s)!==t)]:n.filter(s=>fs(s)===s)).filter(s=>t?hi(s)===t||(e?Wx(s)!==s:!1):!0)}const PNe=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,s;const{rects:i,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:d=!1,alignment:h,allowedPlacements:f=sM,autoAlignment:p=!0,...m}=wi(t,e),g=h!==void 0||f===sM?RNe(h||null,p,f):f,x=await Yd(e,m),b=((n=o.autoPlacement)==null?void 0:n.index)||0,v=g[b];if(v==null)return{};const w=HU(v,i,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==v)return{reset:{placement:g[0]}};const S=[x[fs(v)],x[w[0]],x[w[1]]],E=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:v,overflows:S}],C=g[b+1];if(C)return{data:{index:b+1,overflows:E},reset:{placement:C}};const T=E.map(N=>{const R=hi(N.placement);return[N.placement,R&&d?N.overflows.slice(0,2).reduce((M,W)=>M+W,0):N.overflows[0],N.overflows]}).sort((N,R)=>N[1]-R[1]),O=((s=T.filter(N=>N[2].slice(0,hi(N[0])?2:3).every(R=>R<=0))[0])==null?void 0:s[0])||T[0][0];return O!==a?{data:{index:b+1,overflows:E},reset:{placement:O}}:{}}}},DNe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...x}=wi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=fs(s),v=oi(a),w=fs(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=f||(w||!g?[qx(a)]:uNe(a)),C=m!=="none";!f&&C&&E.push(...pNe(a,g,m,S));const T=[a,...E],_=await Yd(e,x),O=[];let N=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&O.push(_[b]),h){const D=HU(s,o,S);O.push(_[D[0]],_[D[1]])}if(N=[...N,{placement:s,overflows:O}],!O.every(D=>D<=0)){var R,M;const D=(((R=i.flip)==null?void 0:R.index)||0)+1,B=T[D];if(B&&(!(h==="alignment"?v!==oi(B):!1)||N.every(A=>oi(A.placement)===v?A.overflows[0]>0:!0)))return{data:{index:D,overflows:N},reset:{placement:B}};let $=(M=N.filter(V=>V.overflows[0]<=0).sort((V,A)=>V.overflows[1]-A.overflows[1])[0])==null?void 0:M.placement;if(!$)switch(p){case"bestFit":{var W;const V=(W=N.filter(A=>{if(C){const z=oi(A.placement);return z===v||z==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(z=>z>0).reduce((z,j)=>z+j,0)]).sort((A,z)=>A[1]-z[1])[0])==null?void 0:W[0];V&&($=V);break}case"initialPlacement":$=a;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function uM(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function dM(t){return FU.some(e=>t[e]>=0)}const LNe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=wi(t,e);switch(r){case"referenceHidden":{const i=await Yd(e,{...s,elementContext:"reference"}),o=uM(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:dM(o)}}}case"escaped":{const i=await Yd(e,{...s,altBoundary:!0}),o=uM(i,n.floating);return{data:{escapedOffsets:o,escaped:dM(o)}}}default:return{}}}}};function UU(t){const e=vi(...t.map(i=>i.left)),n=vi(...t.map(i=>i.top)),r=Qn(...t.map(i=>i.right)),s=Qn(...t.map(i=>i.bottom));return{x:e,y:n,width:r-e,height:s-n}}function BNe(t){const e=t.slice().sort((s,i)=>s.y-i.y),n=[];let r=null;for(let s=0;s<e.length;s++){const i=e[s];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(s=>Gd(UU(s)))}const $Ne=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:s,platform:i,strategy:o}=e,{padding:a=2,x:l,y:c}=wi(t,e),d=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),h=BNe(d),f=Gd(UU(d)),p=T_(a);function m(){if(h.length===2&&h[0].left>h[1].right&&l!=null&&c!=null)return h.find(x=>l>x.left-p.left&&l<x.right+p.right&&c>x.top-p.top&&c<x.bottom+p.bottom)||f;if(h.length>=2){if(oi(n)==="y"){const N=h[0],R=h[h.length-1],M=fs(n)==="top",W=N.top,D=R.bottom,B=M?N.left:R.left,$=M?N.right:R.right,V=$-B,A=D-W;return{top:W,bottom:D,left:B,right:$,width:V,height:A,x:B,y:W}}const x=fs(n)==="left",b=Qn(...h.map(N=>N.right)),v=vi(...h.map(N=>N.left)),w=h.filter(N=>x?N.left===v:N.right===b),S=w[0].top,E=w[w.length-1].bottom,C=v,T=b,_=T-C,O=E-S;return{top:S,bottom:E,left:C,right:T,width:_,height:O,x:C,y:S}}return f}const g=await i.getElementRects({reference:{getBoundingClientRect:m},floating:r.floating,strategy:o});return s.reference.x!==g.reference.x||s.reference.y!==g.reference.y||s.reference.width!==g.reference.width||s.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}},zU=new Set(["left","top"]);async function FNe(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=fs(n),a=hi(n),l=oi(n)==="y",c=zU.has(o)?-1:1,d=i&&l?-1:1,h=wi(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const HNe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await FNe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},UNe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:b,y:v}=x;return{x:b,y:v}}},...l}=wi(t,e),c={x:n,y:r},d=await Yd(e,l),h=oi(fs(s)),f=E_(h);let p=c[f],m=c[h];if(i){const x=f==="y"?"top":"left",b=f==="y"?"bottom":"right",v=p+d[x],w=p-d[b];p=LC(v,p,w)}if(o){const x=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=m+d[x],w=m-d[b];m=LC(v,m,w)}const g=a.fn({...e,[f]:p,[h]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},zNe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=wi(t,e),d={x:n,y:r},h=oi(s),f=E_(h);let p=d[f],m=d[h];const g=wi(a,e),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=f==="y"?"height":"width",S=i.reference[f]-i.floating[w]+x.mainAxis,E=i.reference[f]+i.reference[w]-x.mainAxis;p<S?p=S:p>E&&(p=E)}if(c){var b,v;const w=f==="y"?"width":"height",S=zU.has(fs(s)),E=i.reference[h]-i.floating[w]+(S&&((b=o.offset)==null?void 0:b[h])||0)+(S?0:x.crossAxis),C=i.reference[h]+i.reference[w]+(S?0:((v=o.offset)==null?void 0:v[h])||0)-(S?x.crossAxis:0);m<E?m=E:m>C&&(m=C)}return{[f]:p,[h]:m}}}},VNe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=wi(t,e),d=await Yd(e,c),h=fs(s),f=hi(s),p=oi(s)==="y",{width:m,height:g}=i.floating;let x,b;h==="top"||h==="bottom"?(x=h,b=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=h,x=f==="end"?"top":"bottom");const v=g-d.top-d.bottom,w=m-d.left-d.right,S=vi(g-d[x],v),E=vi(m-d[b],w),C=!e.middlewareData.shift;let T=S,_=E;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(_=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=v),C&&!f){const N=Qn(d.left,0),R=Qn(d.right,0),M=Qn(d.top,0),W=Qn(d.bottom,0);p?_=m-2*(N!==0||R!==0?N+R:Qn(d.left,d.right)):T=g-2*(M!==0||W!==0?M+W:Qn(d.top,d.bottom))}await l({...e,availableWidth:_,availableHeight:T});const O=await o.getDimensions(a.floating);return m!==O.width||g!==O.height?{reset:{rects:!0}}:{}}}};function VU(t){const e=Ws(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=hs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Vx(n)!==i||Vx(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function N_(t){return Ct(t)?t:t.contextElement}function xd(t){const e=N_(t);if(!hs(e))return Xi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=VU(e);let o=(i?Vx(n.width):n.width)/r,a=(i?Vx(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const WNe=Xi(0);function WU(t){const e=Ur(t);return!M1()||!e.visualViewport?WNe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qNe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ur(t)?!1:e}function Vc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=N_(t);let o=Xi(1);e&&(r?Ct(r)&&(o=xd(r)):o=xd(t));const a=qNe(i,n,r)?WU(i):Xi(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Ur(i),p=r&&Ct(r)?Ur(r):r;let m=f,g=DC(m);for(;g&&r&&p!==m;){const x=xd(g),b=g.getBoundingClientRect(),v=Ws(g),w=b.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,S=b.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,h*=x.y,l+=w,c+=S,m=Ur(g),g=DC(m)}}return Gd({width:d,height:h,x:l,y:c})}function P1(t,e){const n=R1(t).scrollLeft;return e?e.left+n:Vc(xo(t)).left+n}function qU(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-P1(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function GNe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=xo(r),a=e?I1(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Xi(1);const d=Xi(0),h=hs(r);if((h||!h&&!i)&&((xh(r)!=="body"||Tm(o))&&(l=R1(r)),hs(r))){const p=Vc(r);c=xd(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?qU(o,l):Xi(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function YNe(t){return Array.from(t.getClientRects())}function KNe(t){const e=xo(t),n=R1(t),r=t.ownerDocument.body,s=Qn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Qn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+P1(t);const a=-n.scrollTop;return Ws(r).direction==="rtl"&&(o+=Qn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const hM=25;function JNe(t,e){const n=Ur(t),r=xo(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=M1();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=P1(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,m=Math.abs(r.clientWidth-h.clientWidth-p);m<=hM&&(i-=m)}else c<=hM&&(i+=c);return{width:i,height:o,x:a,y:l}}const QNe=new Set(["absolute","fixed"]);function XNe(t,e){const n=Vc(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=hs(t)?xd(t):Xi(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function fM(t,e,n){let r;if(e==="viewport")r=JNe(t,n);else if(e==="document")r=KNe(xo(t));else if(Ct(e))r=XNe(e,n);else{const s=WU(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Gd(r)}function GU(t,e){const n=Zo(t);return n===e||!Ct(n)||Go(n)?!1:Ws(n).position==="fixed"||GU(n,e)}function ZNe(t,e){const n=e.get(t);if(n)return n;let r=Yo(t,[],!1).filter(a=>Ct(a)&&xh(a)!=="body"),s=null;const i=Ws(t).position==="fixed";let o=i?Zo(t):t;for(;Ct(o)&&!Go(o);){const a=Ws(o),l=k_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&QNe.has(s.position)||Tm(o)&&!l&&GU(t,o))?r=r.filter(d=>d!==o):s=a,o=Zo(o)}return e.set(t,r),r}function e_e(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?I1(e)?[]:ZNe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=fM(e,d,s);return c.top=Qn(h.top,c.top),c.right=vi(h.right,c.right),c.bottom=vi(h.bottom,c.bottom),c.left=Qn(h.left,c.left),c},fM(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function t_e(t){const{width:e,height:n}=VU(t);return{width:e,height:n}}function n_e(t,e,n){const r=hs(e),s=xo(e),i=n==="fixed",o=Vc(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Xi(0);function c(){l.x=P1(s)}if(r||!r&&!i)if((xh(e)!=="body"||Tm(s))&&(a=R1(e)),r){const p=Vc(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?qU(s,a):Xi(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function gk(t){return Ws(t).position==="static"}function pM(t,e){if(!hs(t)||Ws(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return xo(t)===n&&(n=n.ownerDocument.body),n}function YU(t,e){const n=Ur(t);if(I1(t))return n;if(!hs(t)){let s=Zo(t);for(;s&&!Go(s);){if(Ct(s)&&!gk(s))return s;s=Zo(s)}return n}let r=pM(t,e);for(;r&&eNe(r)&&gk(r);)r=pM(r,e);return r&&Go(r)&&gk(r)&&!k_(r)?n:r||iNe(t)||n}const r_e=async function(t){const e=this.getOffsetParent||YU,n=this.getDimensions,r=await n(t.floating);return{reference:n_e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function s_e(t){return Ws(t).direction==="rtl"}const i_e={convertOffsetParentRelativeRectToViewportRelativeRect:GNe,getDocumentElement:xo,getClippingRect:e_e,getOffsetParent:YU,getElementRects:r_e,getClientRects:YNe,getDimensions:t_e,getScale:xd,isElement:Ct,isRTL:s_e};function KU(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function o_e(t,e){let n=null,r;const s=xo(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const m=G0(h),g=G0(s.clientWidth-(d+f)),x=G0(s.clientHeight-(h+p)),b=G0(d),w={rootMargin:-m+"px "+-g+"px "+-x+"px "+-b+"px",threshold:Qn(0,vi(1,l))||1};let S=!0;function E(C){const T=C[0].intersectionRatio;if(T!==l){if(!S)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!KU(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(E,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,w)}n.observe(t)}return o(!0),i}function Gx(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=N_(t),d=s||i?[...c?Yo(c):[],...Yo(e)]:[];d.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const h=c&&a?o_e(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(b=>{let[v]=b;v&&v.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,g=l?Vc(t):null;l&&x();function x(){const b=Vc(t);g&&!KU(g,b)&&n(),g=b,m=requestAnimationFrame(x)}return n(),()=>{var b;d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(b=p)==null||b.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const a_e=HNe,l_e=PNe,c_e=UNe,u_e=DNe,d_e=VNe,h_e=LNe,mM=MNe,f_e=$Ne,p_e=zNe,m_e=(t,e,n)=>{const r=new Map,s={platform:i_e,...n},i={...s.platform,_c:r};return INe(t,e,{...s,platform:i})};var g_e=typeof document<"u",b_e=function(){},$g=g_e?y.useLayoutEffect:b_e;function Yx(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Yx(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Yx(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function JU(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function gM(t,e){const n=JU(t);return Math.round(e*n)/n}function bk(t){const e=y.useRef(t);return $g(()=>{e.current=t}),e}function x_e(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=y.useState(r);Yx(f,r)||p(r);const[m,g]=y.useState(null),[x,b]=y.useState(null),v=y.useCallback(A=>{A!==C.current&&(C.current=A,g(A))},[]),w=y.useCallback(A=>{A!==T.current&&(T.current=A,b(A))},[]),S=i||m,E=o||x,C=y.useRef(null),T=y.useRef(null),_=y.useRef(d),O=l!=null,N=bk(l),R=bk(s),M=bk(c),W=y.useCallback(()=>{if(!C.current||!T.current)return;const A={placement:e,strategy:n,middleware:f};R.current&&(A.platform=R.current),m_e(C.current,T.current,A).then(z=>{const j={...z,isPositioned:M.current!==!1};D.current&&!Yx(_.current,j)&&(_.current=j,eo.flushSync(()=>{h(j)}))})},[f,e,n,R,M]);$g(()=>{c===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(A=>({...A,isPositioned:!1})))},[c]);const D=y.useRef(!1);$g(()=>(D.current=!0,()=>{D.current=!1}),[]),$g(()=>{if(S&&(C.current=S),E&&(T.current=E),S&&E){if(N.current)return N.current(S,E,W);W()}},[S,E,W,N,O]);const B=y.useMemo(()=>({reference:C,floating:T,setReference:v,setFloating:w}),[v,w]),$=y.useMemo(()=>({reference:S,floating:E}),[S,E]),V=y.useMemo(()=>{const A={position:n,left:0,top:0};if(!$.floating)return A;const z=gM($.floating,d.x),j=gM($.floating,d.y);return a?{...A,transform:"translate("+z+"px, "+j+"px)",...JU($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:j}},[n,a,$.floating,d.x,d.y]);return y.useMemo(()=>({...d,update:W,refs:B,elements:$,floatingStyles:V}),[d,W,B,$,V])}const y_e=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?mM({element:r.current,padding:s}).fn(n):{}:r?mM({element:r,padding:s}).fn(n):{}}}},Fs=(t,e)=>({...a_e(t),options:[t,e]}),Ol=(t,e)=>({...c_e(t),options:[t,e]}),bM=(t,e)=>({...p_e(t),options:[t,e]}),ea=(t,e)=>({...u_e(t),options:[t,e]}),Up=(t,e)=>({...d_e(t),options:[t,e]}),QU=(t,e)=>({...l_e(t),options:[t,e]}),v_e=(t,e)=>({...h_e(t),options:[t,e]}),Hf=(t,e)=>({...f_e(t),options:[t,e]}),XU=(t,e)=>({...y_e(t),options:[t,e]});function w_e(t){const e=y.useRef(void 0),n=y.useCallback(r=>{const s=t.map(i=>{if(i!=null){if(typeof i=="function"){const o=i,a=o(r);return typeof a=="function"?a:()=>{o(null)}}return i.current=r,()=>{i.current=null}}});return()=>{s.forEach(i=>i==null?void 0:i())}},t);return y.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}const k_e="data-floating-ui-focusable",xM="active",yM="selected",E_e={...Kp};let vM=!1,C_e=0;const wM=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+C_e++;function S_e(){const[t,e]=y.useState(()=>vM?wM():void 0);return $s(()=>{t==null&&e(wM())},[]),y.useEffect(()=>{vM=!0},[]),t}const T_e=E_e.useId,ZU=T_e||S_e;function N_e(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const __e=y.createContext(null),A_e=y.createContext(null),__=()=>{var t;return((t=y.useContext(__e))==null?void 0:t.id)||null},A_=()=>y.useContext(A_e);function j_(t){return"data-floating-ui-"+t}function Nr(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}const kM=j_("safe-polygon");function Fg(t,e,n){if(n&&!BC(n))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const r=t();return typeof r=="number"?r:r==null?void 0:r[e]}return t==null?void 0:t[e]}function xk(t){return typeof t=="function"?t():t}function ez(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:o}=t,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:d=!1,restMs:h=0,move:f=!0}=e,p=A_(),m=__(),g=Va(c),x=Va(l),b=Va(n),v=Va(h),w=y.useRef(),S=y.useRef(-1),E=y.useRef(),C=y.useRef(-1),T=y.useRef(!0),_=y.useRef(!1),O=y.useRef(()=>{}),N=y.useRef(!1),R=qi(()=>{var V;const A=(V=s.current.openEvent)==null?void 0:V.type;return(A==null?void 0:A.includes("mouse"))&&A!=="mousedown"});y.useEffect(()=>{if(!a)return;function V(A){let{open:z}=A;z||(Nr(S),Nr(C),T.current=!0,N.current=!1)}return i.on("openchange",V),()=>{i.off("openchange",V)}},[a,i]),y.useEffect(()=>{if(!a||!g.current||!n)return;function V(z){R()&&r(!1,z,"hover")}const A=lc(o.floating).documentElement;return A.addEventListener("mouseleave",V),()=>{A.removeEventListener("mouseleave",V)}},[o.floating,n,r,a,g,R]);const M=y.useCallback(function(V,A,z){A===void 0&&(A=!0),z===void 0&&(z="hover");const j=Fg(x.current,"close",w.current);j&&!E.current?(Nr(S),S.current=window.setTimeout(()=>r(!1,V,z),j)):A&&(Nr(S),r(!1,V,z))},[x,r]),W=qi(()=>{O.current(),E.current=void 0}),D=qi(()=>{if(_.current){const V=lc(o.floating).body;V.style.pointerEvents="",V.removeAttribute(kM),_.current=!1}}),B=qi(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);y.useEffect(()=>{if(!a)return;function V(H){if(Nr(S),T.current=!1,d&&!BC(w.current)||xk(v.current)>0&&!Fg(x.current,"open"))return;const I=Fg(x.current,"open",w.current);I?S.current=window.setTimeout(()=>{b.current||r(!0,H,"hover")},I):n||r(!0,H,"hover")}function A(H){if(B()){D();return}O.current();const I=lc(o.floating);if(Nr(C),N.current=!1,g.current&&s.current.floatingContext){n||Nr(S),E.current=g.current({...s.current.floatingContext,tree:p,x:H.clientX,y:H.clientY,onClose(){D(),W(),B()||M(H,!0,"safe-polygon")}});const G=E.current;I.addEventListener("mousemove",G),O.current=()=>{I.removeEventListener("mousemove",G)};return}(w.current==="touch"?!Hp(o.floating,H.relatedTarget):!0)&&M(H)}function z(H){B()||s.current.floatingContext&&(g.current==null||g.current({...s.current.floatingContext,tree:p,x:H.clientX,y:H.clientY,onClose(){D(),W(),B()||M(H)}})(H))}function j(){Nr(S)}function U(H){B()||M(H,!1)}if(Ct(o.domReference)){const H=o.domReference,I=o.floating;return n&&H.addEventListener("mouseleave",z),f&&H.addEventListener("mousemove",V,{once:!0}),H.addEventListener("mouseenter",V),H.addEventListener("mouseleave",A),I&&(I.addEventListener("mouseleave",z),I.addEventListener("mouseenter",j),I.addEventListener("mouseleave",U)),()=>{n&&H.removeEventListener("mouseleave",z),f&&H.removeEventListener("mousemove",V),H.removeEventListener("mouseenter",V),H.removeEventListener("mouseleave",A),I&&(I.removeEventListener("mouseleave",z),I.removeEventListener("mouseenter",j),I.removeEventListener("mouseleave",U))}}},[o,a,t,d,f,M,W,D,r,n,b,p,x,g,s,B,v]),$s(()=>{var V;if(a&&n&&(V=g.current)!=null&&(V=V.__options)!=null&&V.blockPointerEvents&&R()){_.current=!0;const z=o.floating;if(Ct(o.domReference)&&z){var A;const j=lc(o.floating).body;j.setAttribute(kM,"");const U=o.domReference,H=p==null||(A=p.nodesRef.current.find(I=>I.id===m))==null||(A=A.context)==null?void 0:A.elements.floating;return H&&(H.style.pointerEvents=""),j.style.pointerEvents="none",U.style.pointerEvents="auto",z.style.pointerEvents="auto",()=>{j.style.pointerEvents="",U.style.pointerEvents="",z.style.pointerEvents=""}}}},[a,n,m,o,p,g,R]),$s(()=>{n||(w.current=void 0,N.current=!1,W(),D())},[n,W,D]),y.useEffect(()=>()=>{W(),Nr(S),Nr(C),D()},[a,o.domReference,W,D]);const $=y.useMemo(()=>{function V(A){w.current=A.pointerType}return{onPointerDown:V,onPointerEnter:V,onMouseMove(A){const{nativeEvent:z}=A;function j(){!T.current&&!b.current&&r(!0,z,"hover")}d&&!BC(w.current)||n||xk(v.current)===0||N.current&&A.movementX**2+A.movementY**2<2||(Nr(C),w.current==="touch"?j():(N.current=!0,C.current=window.setTimeout(j,xk(v.current))))}}},[d,r,n,b,v]);return y.useMemo(()=>a?{reference:$}:{},[a,$])}const $C=()=>{},tz=y.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:$C,setState:$C,isInstantPhase:!1}),j_e=()=>y.useContext(tz);function O_e(t){const{children:e,delay:n,timeoutMs:r=0}=t,[s,i]=y.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=y.useRef(null),a=y.useCallback(l=>{i({currentId:l})},[]);return $s(()=>{s.currentId?o.current===null?o.current=s.currentId:s.isInstantPhase||i({isInstantPhase:!0}):(s.isInstantPhase&&i({isInstantPhase:!1}),o.current=null)},[s.currentId,s.isInstantPhase]),u.jsx(tz.Provider,{value:y.useMemo(()=>({...s,setState:i,setCurrentId:a}),[s,a]),children:e})}function I_e(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:s}=t,{id:i,enabled:o=!0}=e,a=i??s,l=j_e(),{currentId:c,setCurrentId:d,initialDelay:h,setState:f,timeoutMs:p}=l;return $s(()=>{o&&c&&(f({delay:{open:1,close:Fg(h,"close")}}),c!==a&&r(!1))},[o,a,r,f,c,h]),$s(()=>{function m(){r(!1),f({delay:h,currentId:null})}if(o&&c&&!n&&c===a){if(p){const g=window.setTimeout(m,p);return()=>{clearTimeout(g)}}m()}},[o,n,f,c,a,r,h,p]),$s(()=>{o&&(d===$C||!n||d(a))},[o,n,d,a]),l}function yk(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&zx(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function M_e(t){return"composedPath"in t?t.composedPath()[0]:t.target}const R_e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},P_e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},EM=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function nz(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:s,dataRef:i}=t,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:f=!1,bubbles:p,capture:m}=e,g=A_(),x=qi(typeof l=="function"?l:()=>!1),b=typeof l=="function"?x:l,v=y.useRef(!1),{escapeKey:w,outsidePress:S}=EM(p),{escapeKey:E,outsidePress:C}=EM(m),T=y.useRef(!1),_=qi(D=>{var B;if(!n||!o||!a||D.key!=="Escape"||T.current)return;const $=(B=i.current.floatingContext)==null?void 0:B.nodeId,V=g?Bg(g.nodesRef.current,$):[];if(!w&&(D.stopPropagation(),V.length>0)){let A=!0;if(V.forEach(z=>{var j;if((j=z.context)!=null&&j.open&&!z.context.dataRef.current.__escapeKeyBubbles){A=!1;return}}),!A)return}r(!1,TNe(D)?D.nativeEvent:D,"escape-key")}),O=qi(D=>{var B;const $=()=>{var V;_(D),(V=Mu(D))==null||V.removeEventListener("keydown",$)};(B=Mu(D))==null||B.addEventListener("keydown",$)}),N=qi(D=>{var B;const $=i.current.insideReactTree;i.current.insideReactTree=!1;const V=v.current;if(v.current=!1,c==="click"&&V||$||typeof b=="function"&&!b(D))return;const A=Mu(D),z="["+j_("inert")+"]",j=lc(s.floating).querySelectorAll(z);let U=Ct(A)?A:null;for(;U&&!Go(U);){const G=Zo(U);if(Go(G)||!Ct(G))break;U=G}if(j.length&&Ct(A)&&!kNe(A)&&!Hp(A,s.floating)&&Array.from(j).every(G=>!Hp(U,G)))return;if(hs(A)&&W){const G=Go(A),Z=Ws(A),te=/auto|scroll/,fe=G||te.test(Z.overflowX),K=G||te.test(Z.overflowY),pe=fe&&A.clientWidth>0&&A.scrollWidth>A.clientWidth,ke=K&&A.clientHeight>0&&A.scrollHeight>A.clientHeight,me=Z.direction==="rtl",Pe=ke&&(me?D.offsetX<=A.offsetWidth-A.clientWidth:D.offsetX>A.clientWidth),Dt=pe&&D.offsetY>A.clientHeight;if(Pe||Dt)return}const H=(B=i.current.floatingContext)==null?void 0:B.nodeId,I=g&&Bg(g.nodesRef.current,H).some(G=>{var Z;return mk(D,(Z=G.context)==null?void 0:Z.elements.floating)});if(mk(D,s.floating)||mk(D,s.domReference)||I)return;const q=g?Bg(g.nodesRef.current,H):[];if(q.length>0){let G=!0;if(q.forEach(Z=>{var te;if((te=Z.context)!=null&&te.open&&!Z.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,D,"outside-press")}),R=qi(D=>{var B;const $=()=>{var V;N(D),(V=Mu(D))==null||V.removeEventListener(c,$)};(B=Mu(D))==null||B.addEventListener(c,$)});y.useEffect(()=>{if(!n||!o)return;i.current.__escapeKeyBubbles=w,i.current.__outsidePressBubbles=S;let D=-1;function B(j){r(!1,j,"ancestor-scroll")}function $(){window.clearTimeout(D),T.current=!0}function V(){D=window.setTimeout(()=>{T.current=!1},M1()?5:0)}const A=lc(s.floating);a&&(A.addEventListener("keydown",E?O:_,E),A.addEventListener("compositionstart",$),A.addEventListener("compositionend",V)),b&&A.addEventListener(c,C?R:N,C);let z=[];return f&&(Ct(s.domReference)&&(z=Yo(s.domReference)),Ct(s.floating)&&(z=z.concat(Yo(s.floating))),!Ct(s.reference)&&s.reference&&s.reference.contextElement&&(z=z.concat(Yo(s.reference.contextElement)))),z=z.filter(j=>{var U;return j!==((U=A.defaultView)==null?void 0:U.visualViewport)}),z.forEach(j=>{j.addEventListener("scroll",B,{passive:!0})}),()=>{a&&(A.removeEventListener("keydown",E?O:_,E),A.removeEventListener("compositionstart",$),A.removeEventListener("compositionend",V)),b&&A.removeEventListener(c,C?R:N,C),z.forEach(j=>{j.removeEventListener("scroll",B)}),window.clearTimeout(D)}},[i,s,a,b,c,n,r,f,o,w,S,_,E,O,N,C,R]),y.useEffect(()=>{i.current.insideReactTree=!1},[i,b,c]);const M=y.useMemo(()=>({onKeyDown:_,...d&&{[R_e[h]]:D=>{r(!1,D.nativeEvent,"reference-press")},...h!=="click"&&{onClick(D){r(!1,D.nativeEvent,"reference-press")}}}}),[_,r,d,h]),W=y.useMemo(()=>({onKeyDown:_,onMouseDown(){v.current=!0},onMouseUp(){v.current=!0},[P_e[c]]:()=>{i.current.insideReactTree=!0}}),[_,c,i]);return y.useMemo(()=>o?{reference:M,floating:W}:{},[o,M,W])}function D_e(t){const{open:e=!1,onOpenChange:n,elements:r}=t,s=ZU(),i=y.useRef({}),[o]=y.useState(()=>N_e()),a=__()!=null,[l,c]=y.useState(r.reference),d=qi((p,m,g)=>{i.current.openEvent=p?m:void 0,o.emit("openchange",{open:p,event:m,reason:g,nested:a}),n==null||n(p,m,g)}),h=y.useMemo(()=>({setPositionReference:c}),[]),f=y.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return y.useMemo(()=>({dataRef:i,open:e,onOpenChange:d,elements:f,events:o,floatingId:s,refs:h}),[e,d,f,o,s,h])}function D1(t){t===void 0&&(t={});const{nodeId:e}=t,n=D_e({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,s=r.elements,[i,o]=y.useState(null),[a,l]=y.useState(null),d=(s==null?void 0:s.domReference)||i,h=y.useRef(null),f=A_();$s(()=>{d&&(h.current=d)},[d]);const p=x_e({...t,elements:{...s,...a&&{reference:a}}}),m=y.useCallback(w=>{const S=Ct(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;l(S),p.refs.setReference(S)},[p.refs]),g=y.useCallback(w=>{(Ct(w)||w===null)&&(h.current=w,o(w)),(Ct(p.refs.reference.current)||p.refs.reference.current===null||w!==null&&!Ct(w))&&p.refs.setReference(w)},[p.refs]),x=y.useMemo(()=>({...p.refs,setReference:g,setPositionReference:m,domReference:h}),[p.refs,g,m]),b=y.useMemo(()=>({...p.elements,domReference:d}),[p.elements,d]),v=y.useMemo(()=>({...p,...r,refs:x,elements:b,nodeId:e}),[p,x,b,e,r]);return $s(()=>{r.dataRef.current.floatingContext=v;const w=f==null?void 0:f.nodesRef.current.find(S=>S.id===e);w&&(w.context=v)}),y.useMemo(()=>({...p,context:v,refs:x,elements:b}),[p,x,b,v])}function vk(){return yNe()&&xNe()}function L_e(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,dataRef:i,elements:o}=t,{enabled:a=!0,visibleOnly:l=!0}=e,c=y.useRef(!1),d=y.useRef(-1),h=y.useRef(!0);y.useEffect(()=>{if(!a)return;const p=Ur(o.domReference);function m(){!n&&hs(o.domReference)&&o.domReference===lM(lc(o.domReference))&&(c.current=!0)}function g(){h.current=!0}function x(){h.current=!1}return p.addEventListener("blur",m),vk()&&(p.addEventListener("keydown",g,!0),p.addEventListener("pointerdown",x,!0)),()=>{p.removeEventListener("blur",m),vk()&&(p.removeEventListener("keydown",g,!0),p.removeEventListener("pointerdown",x,!0))}},[o.domReference,n,a]),y.useEffect(()=>{if(!a)return;function p(m){let{reason:g}=m;(g==="reference-press"||g==="escape-key")&&(c.current=!0)}return s.on("openchange",p),()=>{s.off("openchange",p)}},[s,a]),y.useEffect(()=>()=>{Nr(d)},[]);const f=y.useMemo(()=>({onMouseLeave(){c.current=!1},onFocus(p){if(c.current)return;const m=Mu(p.nativeEvent);if(l&&Ct(m)){if(vk()&&!p.relatedTarget){if(!h.current&&!ENe(m))return}else if(!CNe(m))return}r(!0,p.nativeEvent,"focus")},onBlur(p){c.current=!1;const m=p.relatedTarget,g=p.nativeEvent,x=Ct(m)&&m.hasAttribute(j_("focus-guard"))&&m.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var b;const v=lM(o.domReference?o.domReference.ownerDocument:document);!m&&v===o.domReference||Hp((b=i.current.floatingContext)==null?void 0:b.refs.floating.current,v)||Hp(o.domReference,v)||x||r(!1,g,"focus")})}}),[i,o.domReference,r,l]);return y.useMemo(()=>a?{reference:f}:{},[a,f])}function wk(t,e,n){const r=new Map,s=n==="item";let i=t;if(s&&t){const{[xM]:o,[yM]:a,...l}=t;i=l}return{...n==="floating"&&{tabIndex:-1,[k_e]:""},...i,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[c,d]=l;if(!(s&&[xM,yM].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof d=="function"){var h;(h=r.get(c))==null||h.push(d),o[c]=function(){for(var f,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return(f=r.get(c))==null?void 0:f.map(x=>x(...m)).find(x=>x!==void 0)}}}else o[c]=d}),o),{})}}function rz(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),s=y.useCallback(a=>wk(a,t,"reference"),e),i=y.useCallback(a=>wk(a,t,"floating"),n),o=y.useCallback(a=>wk(a,t,"item"),r);return y.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:o}),[s,i,o])}const B_e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function $_e(t,e){var n,r;e===void 0&&(e={});const{open:s,elements:i,floatingId:o}=t,{enabled:a=!0,role:l="dialog"}=e,c=ZU(),d=((n=i.domReference)==null?void 0:n.id)||c,h=y.useMemo(()=>{var v;return((v=SNe(i.floating))==null?void 0:v.id)||o},[i.floating,o]),f=(r=B_e.get(l))!=null?r:l,m=__()!=null,g=y.useMemo(()=>f==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:s?h:void 0}:{"aria-expanded":s?"true":"false","aria-haspopup":f==="alertdialog"?"dialog":f,"aria-controls":s?h:void 0,...f==="listbox"&&{role:"combobox"},...f==="menu"&&{id:d},...f==="menu"&&m&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[f,h,m,s,d,l]),x=y.useMemo(()=>{const v={id:h,...f&&{role:f}};return f==="tooltip"||l==="label"?v:{...v,...f==="menu"&&{"aria-labelledby":d}}},[f,h,d,l]),b=y.useCallback(v=>{let{active:w,selected:S}=v;const E={role:"option",...w&&{id:h+"-fui-option"}};switch(l){case"select":case"combobox":return{...E,"aria-selected":S}}return{}},[h,l]);return y.useMemo(()=>a?{reference:g,floating:x,item:b}:{},[a,g,x,b])}const CM=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function yu(t,e){return typeof t=="function"?t(e):t}function F_e(t,e){const[n,r]=y.useState(t);return t&&!n&&r(!0),y.useEffect(()=>{if(!t&&n){const s=setTimeout(()=>r(!1),e);return()=>clearTimeout(s)}},[t,n,e]),n}function sz(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:s=250}=e,o=(typeof s=="number"?s:s.close)||0,[a,l]=y.useState("unmounted"),c=F_e(n,o);return!c&&a==="close"&&l("unmounted"),$s(()=>{if(r){if(n){l("initial");const d=requestAnimationFrame(()=>{eo.flushSync(()=>{l("open")})});return()=>{cancelAnimationFrame(d)}}l("close")}},[n,r]),{isMounted:c,status:a}}function H_e(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:s,common:i,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=y.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",h=(d?o:o.open)||0,f=(d?o:o.close)||0,[p,m]=y.useState(()=>({...yu(i,c),...yu(n,c)})),{isMounted:g,status:x}=sz(t,{duration:o}),b=Va(n),v=Va(r),w=Va(s),S=Va(i);return $s(()=>{const E=yu(b.current,c),C=yu(w.current,c),T=yu(S.current,c),_=yu(v.current,c)||Object.keys(E).reduce((O,N)=>(O[N]="",O),{});if(x==="initial"&&m(O=>({transitionProperty:O.transitionProperty,...T,...E})),x==="open"&&m({transitionProperty:Object.keys(_).map(CM).join(","),transitionDuration:h+"ms",...T,..._}),x==="close"){const O=C||E;m({transitionProperty:Object.keys(O).map(CM).join(","),transitionDuration:f+"ms",...T,...O})}},[f,w,b,v,S,h,x,c]),{isMounted:g,styles:p}}function iz(t,e,n){return n===void 0&&(n=!0),t.filter(s=>{var i;return s.parentId===e&&(!n||((i=s.context)==null?void 0:i.open))}).flatMap(s=>[s,...iz(t,s.id,n)])}function SM(t,e){const[n,r]=t;let s=!1;const i=e.length;for(let o=0,a=i-1;o<i;a=o++){const[l,c]=e[o]||[0,0],[d,h]=e[a]||[0,0];c>=r!=h>=r&&n<=(d-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function U_e(t,e){return t[0]>=e.x&&t[0]<=e.x+e.width&&t[1]>=e.y&&t[1]<=e.y+e.height}function z_e(t){t===void 0&&(t={});const{buffer:e=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=t,s={current:-1};let i=!1,o=null,a=null,l=typeof performance<"u"?performance.now():0;function c(h,f){const p=performance.now(),m=p-l;if(o===null||a===null||m===0)return o=h,a=f,l=p,null;const g=h-o,x=f-a,v=Math.sqrt(g*g+x*x)/m;return o=h,a=f,l=p,v}const d=h=>{let{x:f,y:p,placement:m,elements:g,onClose:x,nodeId:b,tree:v}=h;return function(S){function E(){Nr(s),x()}if(Nr(s),!g.domReference||!g.floating||m==null||f==null||p==null)return;const{clientX:C,clientY:T}=S,_=[C,T],O=M_e(S),N=S.type==="mouseleave",R=yk(g.floating,O),M=yk(g.domReference,O),W=g.domReference.getBoundingClientRect(),D=g.floating.getBoundingClientRect(),B=m.split("-")[0],$=f>D.right-D.width/2,V=p>D.bottom-D.height/2,A=U_e(_,W),z=D.width>W.width,j=D.height>W.height,U=(z?W:D).left,H=(z?W:D).right,I=(j?W:D).top,q=(j?W:D).bottom;if(R&&(i=!0,!N))return;if(M&&(i=!1),M&&!N){i=!0;return}if(N&&Ct(S.relatedTarget)&&yk(g.floating,S.relatedTarget)||v&&iz(v.nodesRef.current,b).length)return;if(B==="top"&&p>=W.bottom-1||B==="bottom"&&p<=W.top+1||B==="left"&&f>=W.right-1||B==="right"&&f<=W.left+1)return E();let G=[];switch(B){case"top":G=[[U,W.top+1],[U,D.bottom-1],[H,D.bottom-1],[H,W.top+1]];break;case"bottom":G=[[U,D.top+1],[U,W.bottom-1],[H,W.bottom-1],[H,D.top+1]];break;case"left":G=[[D.right-1,q],[D.right-1,I],[W.left+1,I],[W.left+1,q]];break;case"right":G=[[W.right-1,q],[W.right-1,I],[D.left+1,I],[D.left+1,q]];break}function Z(te){let[fe,K]=te;switch(B){case"top":{const pe=[z?fe+e/2:$?fe+e*4:fe-e*4,K+e+1],ke=[z?fe-e/2:$?fe+e*4:fe-e*4,K+e+1],me=[[D.left,$||z?D.bottom-e:D.top],[D.right,$?z?D.bottom-e:D.top:D.bottom-e]];return[pe,ke,...me]}case"bottom":{const pe=[z?fe+e/2:$?fe+e*4:fe-e*4,K-e],ke=[z?fe-e/2:$?fe+e*4:fe-e*4,K-e],me=[[D.left,$||z?D.top+e:D.bottom],[D.right,$?z?D.top+e:D.bottom:D.top+e]];return[pe,ke,...me]}case"left":{const pe=[fe+e+1,j?K+e/2:V?K+e*4:K-e*4],ke=[fe+e+1,j?K-e/2:V?K+e*4:K-e*4];return[...[[V||j?D.right-e:D.left,D.top],[V?j?D.right-e:D.left:D.right-e,D.bottom]],pe,ke]}case"right":{const pe=[fe-e,j?K+e/2:V?K+e*4:K-e*4],ke=[fe-e,j?K-e/2:V?K+e*4:K-e*4],me=[[V||j?D.left+e:D.right,D.top],[V?j?D.left+e:D.right:D.left+e,D.bottom]];return[pe,ke,...me]}}}if(!SM([C,T],G)){if(i&&!A)return E();if(!N&&r){const te=c(S.clientX,S.clientY);if(te!==null&&te<.1)return E()}SM([C,T],Z([f,p]))?!i&&r&&(s.current=window.setTimeout(E,40)):E()}}};return d.__options={blockPointerEvents:n},d}var oz={exports:{}},az={},lz={exports:{}},cz={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd=y;function V_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var W_e=typeof Object.is=="function"?Object.is:V_e,q_e=Kd.useState,G_e=Kd.useEffect,Y_e=Kd.useLayoutEffect,K_e=Kd.useDebugValue;function J_e(t,e){var n=e(),r=q_e({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Y_e(function(){s.value=n,s.getSnapshot=e,kk(s)&&i({inst:s})},[t,n,e]),G_e(function(){return kk(s)&&i({inst:s}),t(function(){kk(s)&&i({inst:s})})},[t]),K_e(n),n}function kk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!W_e(t,n)}catch{return!0}}function Q_e(t,e){return e()}var X_e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Q_e:J_e;cz.useSyncExternalStore=Kd.useSyncExternalStore!==void 0?Kd.useSyncExternalStore:X_e;lz.exports=cz;var Z_e=lz.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1=y,eAe=Z_e;function tAe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nAe=typeof Object.is=="function"?Object.is:tAe,rAe=eAe.useSyncExternalStore,sAe=L1.useRef,iAe=L1.useEffect,oAe=L1.useMemo,aAe=L1.useDebugValue;az.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=sAe(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=oAe(function(){function l(p){if(!c){if(c=!0,d=p,p=r(p),s!==void 0&&o.hasValue){var m=o.value;if(s(m,p))return h=m}return h=p}if(m=h,nAe(d,p))return m;var g=r(p);return s!==void 0&&s(m,g)?(d=p,m):(d=p,h=g)}var c=!1,d,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,s]);var a=rAe(t,i[0],i[1]);return iAe(function(){o.hasValue=!0,o.value=a},[a]),aAe(a),a};oz.exports=az;var lAe=oz.exports;function cAe(t,e=n=>n){return lAe.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,uAe)}function uAe(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!e.has(r)||!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();const n=TM(t);if(n.length!==TM(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}function TM(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}var dAe=Object.defineProperty,hAe=(t,e,n)=>e in t?dAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gh=(t,e,n)=>hAe(t,typeof e!="symbol"?e+"":e,n);const uz=y.createContext(void 0);function Ni(t){return y.useContext(uz)}const dz=y.createContext(void 0);function Ce(){return y.useContext(dz)}function Ae(t){const e=Ni();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function Be(){return Ni().editor.dictionary}const fAe=t=>{const e=Ce(),n=Be(),r=Ae(),s=r.getBlock(t.blockId),[i,o]=y.useState(""),a=y.useCallback(d=>{o(d.currentTarget.value)},[]),l=y.useCallback(d=>{d.key==="Enter"&&(d.preventDefault(),r.updateBlock(s.id,{props:{name:V5(i),url:i}}))},[r,s.id,i]),c=y.useCallback(()=>{r.updateBlock(s.id,{props:{name:V5(i),url:i}})},[r,s.id,i]);return u.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[u.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:i,onChange:a,onKeyDown:l,"data-test":"embed-input"}),u.jsx(e.FilePanel.Button,{className:"bn-button",onClick:c,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[s.type]||n.file_panel.embed.embed_button.file})]})},pAe=t=>{var e,n;const r=Ce(),s=Be(),{setLoading:i}=t,o=Ae(),a=o.getBlock(t.blockId),[l,c]=y.useState(!1);y.useEffect(()=>{l&&setTimeout(()=>{c(!1)},3e3)},[l]);const d=y.useCallback(p=>{if(p===null)return;async function m(g){if(i(!0),o.uploadFile!==void 0)try{let x=await o.uploadFile(g,t.blockId);typeof x=="string"&&(x={props:{name:g.name,url:x}}),o.updateBlock(t.blockId,x)}catch{c(!0)}finally{i(!1)}}m(p)},[t.blockId,o,i]),h=o.schema.blockSpecs[a.type],f=(n=(e=h.implementation.meta)==null?void 0:e.fileBlockAccept)!=null&&n.length?h.implementation.meta.fileBlockAccept.join(","):"*/*";return u.jsxs(r.FilePanel.TabPanel,{className:"bn-tab-panel",children:[u.jsx(r.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:f,placeholder:s.file_panel.upload.file_placeholder[a.type]||s.file_panel.upload.file_placeholder.file,value:null,onChange:d}),l&&u.jsx("div",{className:"bn-error-text",children:s.file_panel.upload.upload_error})]})},hz=t=>{const e=Ce(),n=Be(),r=Ae(),[s,i]=y.useState(!1),o=t.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:u.jsx(pAe,{blockId:t.blockId,setLoading:i})}]:[],{name:n.file_panel.embed.title,tabPanel:u.jsx(fAe,{blockId:t.blockId})}],[a,l]=y.useState(t.defaultOpenTab||o[0].name);return u.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:l,tabs:o,loading:s})};function mAe(t){let e=new DOMRect;const n="getBoundingClientRect"in t?()=>t.getBoundingClientRect():()=>t.element.getBoundingClientRect();return()=>"element"in t&&(t.cacheMountedBoundingClientRect??!0)?(t.element.isConnected&&(e=n()),e):n()}const Gi=t=>{var e,n,r;const{refs:s,floatingStyles:i,context:o}=D1({whileElementsMounted:Gx,...t.useFloatingOptions}),{isMounted:a,styles:l}=H_e(o,t.useTransitionStylesProps),{status:c}=sz(o,t.useTransitionStatusProps),d=nz(o,t.useDismissProps),h=ez(o,{enabled:!1,...t.useHoverProps}),{getFloatingProps:f}=rz([d,h]),p=y.useRef(""),m=y.useRef(null),g=w_e([m,s.setFloating]);if(y.useEffect(()=>{if(t.reference){const b="element"in t.reference?t.reference.element:void 0;b!==void 0&&s.setReference(b),s.setPositionReference({getBoundingClientRect:mAe(t.reference),contextElement:b})}},[t.reference,s]),y.useEffect(()=>{var b;(c==="initial"||c==="open")&&(b=m.current)!=null&&b.innerHTML&&(p.current=m.current.innerHTML)},[c,t.reference,t.children]),!a)return!1;const x={...t.elementProps,style:{display:"flex",...(e=t.elementProps)==null?void 0:e.style,zIndex:`calc(var(--bn-ui-base-z-index) + ${((r=(n=t.elementProps)==null?void 0:n.style)==null?void 0:r.zIndex)||0})`,...i,...l},...f()};return c==="close"?u.jsx("div",{ref:g,...x,dangerouslySetInnerHTML:{__html:p.current}}):u.jsx("div",{ref:g,...x,children:t.children})},fz=t=>{const{blockId:e,children:n,...r}=t,s=Ae(),i=y.useMemo(()=>s.transact(o=>{if(!e)return;const a=xr(e,o.doc);if(!a)return;const{node:l}=s.prosemirrorView.domAtPos(a.posBeforeNode+1);if(l instanceof Element)return{element:l}}),[s,e]);return u.jsx(Gi,{reference:i,...r,children:e!==void 0&&n})};function ot(t,e){const n=((e==null?void 0:e.editor)??Ae()).getExtension(t);if(!n)throw new Error("Extension not found",{cause:{plugin:t}});return n}function yt(t,e){const{store:n}=ot(t,e);if(!n)throw new Error("Store not found on plugin",{cause:{plugin:t}});return cAe(n,e==null?void 0:e.selector)}const gAe=t=>{const e=Ae(),n=ot(ii),r=yt(ii),s=y.useMemo(()=>({useFloatingOptions:{open:!!r,onOpenChange:(o,a,l)=>{o||n.closeMenu(),l==="escape-key"&&e.focus()},middleware:[Fs(10),ea()]},elementProps:{style:{zIndex:90}},...t.floatingUIOptions}),[r,e,n,t.floatingUIOptions]),i=t.filePanel||hz;return u.jsx(fz,{blockId:r,...s,children:r&&u.jsx(i,{blockId:r})})};function bAe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xAe=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],n.get(s[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(e[s]!==n[s])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const yAe=bAe(xAe);var pz={exports:{}},Ek={},NM={exports:{}},Ck={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _M;function vAe(){if(_M)return Ck;_M=1;var t=lt;function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function a(h,f){var p=f(),m=r({inst:{value:p,getSnapshot:f}}),g=m[0].inst,x=m[1];return i(function(){g.value=p,g.getSnapshot=f,l(g)&&x({inst:g})},[h,p,f]),s(function(){return l(g)&&x({inst:g}),h(function(){l(g)&&x({inst:g})})},[h]),o(p),p}function l(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!n(h,p)}catch{return!0}}function c(h,f){return f()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Ck.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,Ck}var AM;function wAe(){return AM||(AM=1,NM.exports=vAe()),NM.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jM;function kAe(){if(jM)return Ek;jM=1;var t=lt,e=wAe();function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,i=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Ek.useSyncExternalStoreWithSelector=function(c,d,h,f,p){var m=i(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=a(function(){function b(C){if(!v){if(v=!0,w=C,C=f(C),p!==void 0&&g.hasValue){var T=g.value;if(p(T,C))return S=T}return S=C}if(T=S,r(w,C))return T;var _=f(C);return p!==void 0&&p(T,_)?(w=C,T):(w=C,S=_)}var v=!1,w,S,E=h===void 0?null:h;return[function(){return b(d())},E===null?void 0:function(){return b(E())}]},[d,h,f,p]);var x=s(c,m[0],m[1]);return o(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},Ek}pz.exports=kAe();var EAe=pz.exports;const CAe=typeof window<"u"?y.useLayoutEffect:y.useEffect;class SAe{constructor(e){Gh(this,"transactionNumber",0),Gh(this,"lastTransactionNumber",0),Gh(this,"lastSnapshot"),Gh(this,"editor"),Gh(this,"subscribers",new Set),this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e,n){if(this.editor=e,this.editor){const r=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},s=this.editor._tiptapEditor,i={all:"transaction",selection:"selectionUpdate",change:"update"};return s.on(i[n],r),()=>{s.off(i[n],r)}}}}function _n(t){const e=Ni(),n=t.editor||(e==null?void 0:e.editor)||null,r=t.on||"all",[s]=y.useState(()=>new SAe(n)),i=EAe.useSyncExternalStoreWithSelector(s.subscribe,s.getSnapshot,s.getServerSnapshot,t.selector,t.equalityFn??yAe);return CAe(()=>s.watch(n,r),[n,s,r]),y.useDebugValue(i),i}const O_=t=>{const{position:e,children:n,...r}=t,{from:s,to:i}=e||{},o=Ae(),a=y.useMemo(()=>{var l;if(!(s===void 0||i===void 0))return{element:((l=o.domElement)==null?void 0:l.firstElementChild)||void 0,getBoundingClientRect:()=>VT(o.prosemirrorView,s,i??s)}},[o,s,i]);return u.jsx(Gi,{reference:a,...r,children:e!==void 0&&n})};var mz={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},OM=lt.createContext&&lt.createContext(mz),TAe=["attr","size","title"];function NAe(t,e){if(t==null)return{};var n=_Ae(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Ae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Kx(){return Kx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kx.apply(this,arguments)}function IM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IM(Object(n),!0).forEach(function(r){AAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AAe(t,e,n){return e=jAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jAe(t){var e=OAe(t,"string");return typeof e=="symbol"?e:e+""}function OAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gz(t){return t&&t.map((e,n)=>lt.createElement(e.tag,Jx({key:n},e.attr),gz(e.child)))}function Se(t){return e=>lt.createElement(IAe,Kx({attr:Jx({},t.attr)},e),gz(t.child))}function IAe(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=NAe(t,TAe),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),lt.createElement("svg",Kx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Jx(Jx({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&lt.createElement("title",null,i),t.children)};return OM!==void 0?lt.createElement(OM.Consumer,null,n=>e(n)):e(mz)}function MAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(t)}function bz(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(t)}function RAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(t)}function PAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function DAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function LAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function BAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function $Ae(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function FAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function HAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function UAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function MM(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function Qx(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function Xx(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function Zx(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function xz(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM22 8V16H23.5V18H22V20H20V18H14.5V16.66L19.5 8H22ZM20 11.133L17.19 16H20V11.133Z"},child:[]}]})(t)}function yz(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8V10H17.6769L17.2126 12.6358C17.5435 12.5472 17.8912 12.5 18.25 12.5C20.4591 12.5 22.25 14.2909 22.25 16.5C22.25 18.7091 20.4591 20.5 18.25 20.5C16.4233 20.5 14.8827 19.2756 14.4039 17.6027L16.3271 17.0519C16.5667 17.8881 17.3369 18.5 18.25 18.5C19.3546 18.5 20.25 17.6046 20.25 16.5C20.25 15.3954 19.3546 14.5 18.25 14.5C17.6194 14.5 17.057 14.7918 16.6904 15.2478L14.8803 14.3439L16 8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function vz(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.097 8L18.499 12.5C20.7091 12.5 22.5 14.2909 22.5 16.5C22.5 18.7091 20.7091 20.5 18.5 20.5C16.2909 20.5 14.5 18.7091 14.5 16.5C14.5 15.7636 14.699 15.0737 15.0461 14.4811L18.788 8H21.097ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5Z"},child:[]}]})(t)}function zAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function VAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function RM(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function WAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function qAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function wz(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function kz(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function Ez(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function Cz(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function GAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(t)}function YAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(t)}function Sz(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(t)}function KAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function JAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function I_(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function QAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function XAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function ZAe(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function e3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function t3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function Tz(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 18V20H2V18H22ZM2 3.5L10 8.5L2 13.5V3.5ZM22 11V13H12V11H22ZM22 4V6H12V4H22Z"},child:[]}]})(t)}function n3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function r3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function s3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(t)}function i3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function o3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function a3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function l3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function c3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(t)}function u3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11V13H19V11H5Z"},child:[]}]})(t)}function d3e(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function PM(t){return Se({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(t)}const h3e={bold:HAe,italic:WAe,underline:QAe,strike:KAe,code:PAe};function f3e(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const Y0=t=>{const e=Be(),n=Ce(),r=Ae(),s=_n({editor:r,selector:({editor:a})=>{var l;if(!(!a.isEditable||!f3e(t.basicTextStyle,a)||!(((l=a.getSelection())==null?void 0:l.blocks)||[a.getTextCursorPosition().block]).find(c=>c.content!==void 0)))return t.basicTextStyle in a.getActiveStyles()?{active:!0}:{active:!1}}}),i=y.useCallback(a=>{r.focus(),r.toggleStyles({[a]:!0})},[r,t]);if(s===void 0)return null;const o=h3e[t.basicTextStyle];return u.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>i(t.basicTextStyle),isSelected:s.active,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:ks(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:u.jsx(o,{})})},FC=t=>{const e=t.textColor||"default",n=t.backgroundColor||"default",r=t.size||16,s=y.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return u.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":e,style:s,children:"A"})},DM=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],B1=t=>{const e=Ce(),n=Be();return u.jsxs(u.Fragment,{children:[u.jsx(()=>t.text?u.jsxs(u.Fragment,{children:[u.jsx(e.Generic.Menu.Label,{children:n.color_picker.text_title}),DM.map(r=>u.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(r)},"data-test":"text-color-"+r,icon:u.jsx(FC,{textColor:r,size:t.iconSize}),checked:t.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),u.jsx(()=>t.background?u.jsxs(u.Fragment,{children:[u.jsx(e.Generic.Menu.Label,{children:n.color_picker.background_title}),DM.map(r=>u.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(r)},"data-test":"background-color-"+r,icon:u.jsx(FC,{backgroundColor:r,size:t.iconSize}),checked:t.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function K0(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const p3e=()=>{const t=Ce(),e=Be(),n=Ae(),r=K0("text",n),s=K0("background",n),i=_n({editor:n,selector:({editor:l})=>{var c;if(!l.isEditable||!(((c=l.getSelection())==null?void 0:c.blocks)||[l.getTextCursorPosition().block]).find(f=>f.content!==void 0))return;const d=K0("text",l),h=K0("background",l);if(!(!d&&!h))return{textColor:d?l.getActiveStyles().textColor||"default":void 0,backgroundColor:h?l.getActiveStyles().backgroundColor||"default":void 0}}}),o=y.useCallback(l=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");l==="default"?n.removeStyles({textColor:l}):n.addStyles({textColor:l}),setTimeout(()=>{n.focus()})},[n,r]),a=y.useCallback(l=>{if(!s)throw Error("Tried to set background color, but style does not exist in editor schema.");l==="default"?n.removeStyles({backgroundColor:l}):n.addStyles({backgroundColor:l}),setTimeout(()=>{n.focus()})},[s,n]);return i===void 0?null:u.jsxs(t.Generic.Menu.Root,{children:[u.jsx(t.Generic.Menu.Trigger,{children:u.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:u.jsx(FC,{textColor:i.textColor,backgroundColor:i.backgroundColor,size:20})})}),u.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:u.jsx(B1,{text:i.textColor?{color:i.textColor,setColor:o}:void 0,background:i.backgroundColor?{color:i.backgroundColor,setColor:a}:void 0})})]})},LM=t=>{for(const e of KH)if(t.startsWith(e))return t;return`${JH}://${t}`},Nz=t=>{const e=Ce(),n=Be(),{editLink:r}=ot(Sm),{url:s,text:i,showTextField:o}=t,[a,l]=y.useState(s),[c,d]=y.useState(i);y.useEffect(()=>{l(s),d(i)},[i,s]);const h=y.useCallback(g=>{var x,b;g.key==="Enter"&&(g.preventDefault(),r(LM(a),c,t.range.from),(x=t.setToolbarOpen)==null||x.call(t,!1),(b=t.setToolbarPositionFrozen)==null||b.call(t,!1))},[r,a,c,t]),f=y.useCallback(g=>l(g.currentTarget.value),[]),p=y.useCallback(g=>d(g.currentTarget.value),[]),m=y.useCallback(()=>{var g,x;r(LM(a),c,t.range.from),(g=t.setToolbarOpen)==null||g.call(t,!1),(x=t.setToolbarPositionFrozen)==null||x.call(t,!1)},[r,a,c,t]);return u.jsxs(e.Generic.Form.Root,{children:[u.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:u.jsx(wz,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:h,onChange:f,onSubmit:m}),o!==!1&&u.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:u.jsx(I_,{}),placeholder:n.link_toolbar.form.title_placeholder,value:c,onKeyDown:h,onChange:p,onSubmit:m})]})};function m3e(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const g3e=()=>{const t=Ae(),e=Ce(),n=Be(),r=ot(bl),{showSelection:s}=ot(Hx),[i,o]=y.useState(!1);y.useEffect(()=>(s(i),()=>s(!1)),[i,s]);const a=_n({editor:t,selector:({editor:l})=>{var c;if(!(!l.isEditable||!m3e(l)||nC(l.prosemirrorState.selection)||!(((c=l.getSelection())==null?void 0:c.blocks)||[l.getTextCursorPosition().block]).find(d=>d.content!==void 0)))return{url:l.getSelectedLinkUrl(),text:l.getSelectedText(),range:{from:l.prosemirrorState.selection.from,to:l.prosemirrorState.selection.to}}}});return y.useEffect(()=>{var l;const c=d=>{(d.ctrlKey||d.metaKey)&&d.key==="k"&&(o(!0),d.preventDefault())};return(l=t.domElement)==null||l.addEventListener("keydown",c),()=>{var d;(d=t.domElement)==null||d.removeEventListener("keydown",c)}},[t.domElement]),a===void 0?null:u.jsxs(e.Generic.Popover.Root,{open:i,children:[u.jsx(e.Generic.Popover.Trigger,{children:u.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:n.formatting_toolbar.link.tooltip,mainTooltip:n.formatting_toolbar.link.tooltip,secondaryTooltip:ks(n.formatting_toolbar.link.secondary_tooltip,n.generic.ctrl_shortcut),icon:u.jsx(wz,{}),onClick:()=>o(!0)})}),u.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:u.jsx(Nz,{url:a.url||"",text:a.text,range:a.range,showTextField:!1,setToolbarOpen:l=>r.store.setState(l)})})]})},b3e=()=>{const t=Be(),e=Ce(),n=Ae(),r=_n({editor:n,selector:({editor:l})=>{var c;if(!l.isEditable)return;const d=((c=l.getSelection())==null?void 0:c.blocks)||[l.getTextCursorPosition().block];if(d.length!==1)return;const h=d[0];if(Pr(h,l,h.type,{url:"string",caption:"string"}))return h}}),[s,i]=y.useState();y.useEffect(()=>{r!==void 0&&i(r.props.caption)},[r]);const o=y.useCallback(l=>i(l.currentTarget.value),[]),a=y.useCallback(l=>{r!==void 0&&It(n,r.type,{caption:"string"})&&l.key==="Enter"&&(l.preventDefault(),n.updateBlock(r.id,{props:{caption:s}}))},[r,s,n]);return r===void 0?null:u.jsxs(e.Generic.Popover.Root,{children:[u.jsx(e.Generic.Popover.Trigger,{children:u.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:u.jsx(RM,{})})}),u.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:u.jsx(e.Generic.Form.Root,{children:u.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:u.jsx(RM,{}),value:s||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:o})})})]})},x3e=()=>{const t=Be(),e=Ce(),n=Ae(),r=_n({editor:n,selector:({editor:i})=>{var o;if(!i.isEditable)return;const a=((o=i.getSelection())==null?void 0:o.blocks)||[i.getTextCursorPosition().block];if(a.length!==1)return;const l=a[0];if(Pr(l,i,l.type,{url:"string"}))return l}}),s=y.useCallback(()=>{r!==void 0&&(n.focus(),n.removeBlocks([r.id]))},[r,n]);return r===void 0?null:u.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[r.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[r.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:u.jsx(i3e,{}),onClick:s})},y3e=()=>{const t=Be(),e=Ce(),n=Ae(),r=_n({editor:n,selector:({editor:l})=>{var c;if(!l.isEditable)return;const d=((c=l.getSelection())==null?void 0:c.blocks)||[l.getTextCursorPosition().block];if(d.length!==1)return;const h=d[0];if(Pr(h,l,h.type,{url:"string",name:"string"}))return h}}),[s,i]=y.useState();y.useEffect(()=>{r!==void 0&&i(r.props.name)},[r]);const o=y.useCallback(l=>i(l.currentTarget.value),[]),a=y.useCallback(l=>{r!==void 0&&It(n,r.type,{name:"string"})&&l.key==="Enter"&&(l.preventDefault(),n.updateBlock(r.id,{props:{name:s}}))},[r,s,n]);return r===void 0?null:u.jsxs(e.Generic.Popover.Root,{children:[u.jsx(e.Generic.Popover.Trigger,{children:u.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[r.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[r.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:u.jsx(MM,{})})}),u.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:u.jsx(e.Generic.Form.Root,{children:u.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:u.jsx(MM,{}),value:s||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[r.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:o})})})]})},v3e=()=>{const t=Be(),e=Ce(),n=Ae(),r=_n({editor:n,selector:({editor:s})=>{var i;if(!s.isEditable)return;const o=((i=s.getSelection())==null?void 0:i.blocks)||[s.getTextCursorPosition().block];if(o.length!==1)return;const a=o[0];if(Pr(a,s,a.type,{url:"string"}))return a}});return r===void 0?null:u.jsxs(e.Generic.Popover.Root,{position:"bottom",children:[u.jsx(e.Generic.Popover.Trigger,{children:u.jsx(e.FormattingToolbar.Button,{className:"bn-button",mainTooltip:t.formatting_toolbar.file_replace.tooltip[r.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[r.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:u.jsx(t3e,{})})}),u.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:u.jsx(hz,{blockId:r.id})})]})},w3e=()=>{const t=Be(),e=Ce(),n=Ae(),r=_n({editor:n,selector:({editor:i})=>{var o;if(!(!i.isEditable||!(((o=i.getSelection())==null?void 0:o.blocks)||[i.getTextCursorPosition().block]).find(a=>a.content!==void 0)))return{canNestBlock:i.canNestBlock()}}}),s=y.useCallback(()=>{r!==void 0&&r.canNestBlock&&(n.focus(),n.nestBlock())},[n,r]);return r===void 0?null:u.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:s,isDisabled:!r.canNestBlock,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:ks(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:u.jsx(VAe,{})})},k3e=()=>{const t=Be(),e=Ce(),n=Ae(),r=_n({editor:n,selector:({editor:i})=>{var o;if(!(!i.isEditable||!(((o=i.getSelection())==null?void 0:o.blocks)||[i.getTextCursorPosition().block]).find(a=>a.content!==void 0)))return{canUnnestBlock:i.canUnnestBlock()}}}),s=y.useCallback(()=>{r!==void 0&&r.canUnnestBlock&&(n.focus(),n.unnestBlock())},[n,r]);return r===void 0?null:u.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:s,isDisabled:!r.canUnnestBlock,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:ks(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:u.jsx(zAe,{})})},E3e=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:I_},{name:t.slash_menu.heading.title,type:"heading",props:{level:1,isToggleable:!1},icon:Qx},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2,isToggleable:!1},icon:Xx},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3,isToggleable:!1},icon:Zx},{name:t.slash_menu.heading_4.title,type:"heading",props:{level:4,isToggleable:!1},icon:xz},{name:t.slash_menu.heading_5.title,type:"heading",props:{level:5,isToggleable:!1},icon:yz},{name:t.slash_menu.heading_6.title,type:"heading",props:{level:6,isToggleable:!1},icon:vz},{name:t.slash_menu.toggle_heading.title,type:"heading",props:{level:1,isToggleable:!0},icon:Qx},{name:t.slash_menu.toggle_heading_2.title,type:"heading",props:{level:2,isToggleable:!0},icon:Xx},{name:t.slash_menu.toggle_heading_3.title,type:"heading",props:{level:3,isToggleable:!0},icon:Zx},{name:t.slash_menu.quote.title,type:"quote",icon:Sz},{name:t.slash_menu.toggle_list.title,type:"toggleListItem",icon:Tz},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:Cz},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:Ez},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:kz}],C3e=t=>{const e=Ce(),n=Ae(),r=_n({editor:n,selector:({editor:a})=>{var l;return((l=a.getSelection())==null?void 0:l.blocks)||[a.getTextCursorPosition().block]}}),s=r[0],i=y.useMemo(()=>(t.items||E3e(n.dictionary)).filter(a=>It(n,a.type,Object.fromEntries(Object.entries(a.props||{}).map(([l,c])=>[l,typeof c])))),[n,t.items]),o=y.useMemo(()=>i.map(a=>{const l=a.icon,c=a.type===s.type,d=Object.entries(a.props||{}).filter(([h,f])=>f!==s.props[h]).length===0;return{text:a.name,icon:u.jsx(l,{size:16}),onClick:()=>{n.focus(),n.transact(()=>{for(const h of r)n.updateBlock(h,{type:a.type,props:a.props})})},isSelected:c&&d}}),[n,i,s.props,s.type,r]);return!y.useMemo(()=>o.find(a=>a.isSelected)!==void 0,[o])||!n.isEditable?null:u.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:o})},S3e=()=>{const t=Be(),e=Ce(),n=ot("comments"),{store:r}=ot(bl),s=y.useCallback(()=>{n.startPendingComment(),r.setState(!1)},[n,r]);return u.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:u.jsx(bz,{}),onClick:s})},T3e=()=>Ae().getExtension("comments")?u.jsx(S3e,{}):null,N3e=()=>{const t=Be(),e=Ce(),n=Ae(),r=y.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:u.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:u.jsx(bz,{}),onClick:r})};function HC(t,e){try{const n=new URL(t,e);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const _3e=()=>{const t=Be(),e=Ce(),n=Ae(),r=_n({editor:n,selector:({editor:i})=>{var o;const a=((o=i.getSelection())==null?void 0:o.blocks)||[i.getTextCursorPosition().block];if(a.length!==1)return;const l=a[0];if(Pr(l,i,l.type,{url:"string"}))return l}}),s=y.useCallback(()=>{r!==void 0&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(r.props.url).then(i=>window.open(HC(i,window.location.href))):window.open(HC(r.props.url,window.location.href)))},[r,n]);return r===void 0?null:u.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[r.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[r.type]||t.formatting_toolbar.file_download.tooltip.file,icon:u.jsx(a3e,{}),onClick:s})},A3e=()=>{const t=Be(),e=Ce(),n=Ae(),r=_n({editor:n,selector:({editor:i})=>{var o;if(!i.isEditable)return;const a=((o=i.getSelection())==null?void 0:o.blocks)||[i.getTextCursorPosition().block];if(a.length!==1)return;const l=a[0];if(Pr(l,i,l.type,{url:"string",showPreview:"boolean"}))return l}}),s=y.useCallback(()=>{r!==void 0&&It(n,r.type,{showPreview:"boolean"})&&n.updateBlock(r.id,{props:{showPreview:!r.props.showPreview}})},[r,n]);return r===void 0?null:u.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:u.jsx(e3e,{}),isSelected:r.props.showPreview,onClick:s})},j3e=()=>{const t=Be(),e=Ce(),n=Ae(),r=ot(_t),s=_n({editor:n,selector:({editor:o})=>{var a;if(!o.isEditable||!o.settings.tables.splitCells)return;const l=((a=o.getSelection())==null?void 0:a.blocks)||[o.getTextCursorPosition().block];if(l.length!==1)return;const c=l[0];if(c.type==="table")return{mergeDirection:r.getMergeDirection(c)}}}),i=y.useCallback(()=>{r==null||r.mergeCells()},[r]);return s===void 0?null:u.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:t.formatting_toolbar.table_cell_merge.tooltip,icon:s.mergeDirection==="horizontal"?u.jsx(GAe,{}):u.jsx(YAe,{}),onClick:i})},O3e=()=>Ae().getExtension(_t)?u.jsx(j3e,{}):null,I3e={left:$Ae,center:LAe,right:FAe,justify:BAe},Sk=t=>{const e=Ce(),n=Be(),r=Ae(),s=_n({editor:r,selector:({editor:a})=>{var l,c;if(!a.isEditable)return;const d=((l=a.getSelection())==null?void 0:l.blocks)||[a.getTextCursorPosition().block],h=d[0];if(Pr(h,a,h.type,{textAlignment:st.textAlignment}))return{textAlignment:h.props.textAlignment,blocks:d};if(d.length===1&&Pr(h,a,"table"))return(c=a.getExtension(_t))!=null&&c.getCellSelection()?{textAlignment:cl(h.content.rows[0].cells[0]).props.textAlignment,blocks:[h]}:void 0}}),i=y.useCallback(a=>{var l;if(s!==void 0){r.focus();for(const c of s.blocks)if(Pr(c,r,c.type,{textAlignment:st.textAlignment})&&It(r,c.type,{textAlignment:st.textAlignment}))r.updateBlock(c,{props:{textAlignment:a}});else if(c.type==="table"){const d=(l=r.getExtension(_t))==null?void 0:l.getCellSelection();if(!d)continue;const h=c.content.rows.map(f=>({...f,cells:f.cells.map(p=>cl(p))}));d.cells.forEach(({row:f,col:p})=>{h[f].cells[p].props.textAlignment=a}),r.updateBlock(c,{type:"table",content:{...c.content,type:"tableContent",rows:h}}),r.setTextCursorPosition(c)}}},[r,s]);if(s===void 0)return null;const o=I3e[t.textAlignment];return u.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>i(t.textAlignment),isSelected:s.textAlignment===t.textAlignment,label:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:u.jsx(o,{})})},_z=t=>[u.jsx(C3e,{items:t},"blockTypeSelect"),u.jsx(O3e,{},"tableCellMergeButton"),u.jsx(b3e,{},"fileCaptionButton"),u.jsx(v3e,{},"replaceFileButton"),u.jsx(y3e,{},"fileRenameButton"),u.jsx(x3e,{},"fileDeleteButton"),u.jsx(_3e,{},"fileDownloadButton"),u.jsx(A3e,{},"filePreviewButton"),u.jsx(Y0,{basicTextStyle:"bold"},"boldStyleButton"),u.jsx(Y0,{basicTextStyle:"italic"},"italicStyleButton"),u.jsx(Y0,{basicTextStyle:"underline"},"underlineStyleButton"),u.jsx(Y0,{basicTextStyle:"strike"},"strikeStyleButton"),u.jsx(Sk,{textAlignment:"left"},"textAlignLeftButton"),u.jsx(Sk,{textAlignment:"center"},"textAlignCenterButton"),u.jsx(Sk,{textAlignment:"right"},"textAlignRightButton"),u.jsx(p3e,{},"colorStyleButton"),u.jsx(w3e,{},"nestBlockButton"),u.jsx(k3e,{},"unnestBlockButton"),u.jsx(g3e,{},"createLinkButton"),u.jsx(T3e,{},"addCommentButton"),u.jsx(N3e,{},"addTiptapCommentButton")],Az=t=>{const e=Ce();return u.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||_z(t.blockTypeSelectItems)})},M3e=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},jz=t=>{const e=Ae(),n=ot(bl,{editor:e}),r=yt(bl,{editor:e}),s=_n({editor:e,selector:({editor:l})=>n.store.state?{from:l.prosemirrorState.selection.from,to:l.prosemirrorState.selection.to}:void 0}),i=_n({editor:e,selector:({editor:l})=>{const c=l.getTextCursorPosition().block;return Pr(c,l,c.type,{textAlignment:st.textAlignment})?M3e(c.props.textAlignment):"top-start"}}),o=y.useMemo(()=>({useFloatingOptions:{open:r,onOpenChange:(l,c,d)=>{n.store.setState(l),d==="escape-key"&&e.focus()},placement:i,middleware:[Fs(10),Ol(),ea()]},elementProps:{style:{zIndex:40}},...t.floatingUIOptions}),[r,i,t.floatingUIOptions,n.store,e]),a=t.formattingToolbar||Az;return u.jsx(O_,{position:s,...o,children:r&&u.jsx(a,{})})},R3e=t=>{const e=Ce(),n=Be(),{deleteLink:r}=ot(Sm);return u.jsx(e.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:()=>{var s;r(t.range.from),(s=t.setToolbarOpen)==null||s.call(t,!1)},icon:u.jsx(qAe,{})})},P3e=t=>{const e=Ce(),n=Be();return u.jsxs(e.Generic.Popover.Root,{onOpenChange:t.setToolbarPositionFrozen,children:[u.jsx(e.Generic.Popover.Trigger,{children:u.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),u.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:u.jsx(Nz,{url:t.url,text:t.text,range:t.range,setToolbarOpen:t.setToolbarOpen,setToolbarPositionFrozen:t.setToolbarPositionFrozen})})]})},D3e=t=>{const e=Ce(),n=Be();return u.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(HC(t.url,window.location.href),"_blank")},icon:u.jsx(l3e,{})})},L3e=t=>{const e=Ce();return u.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:t.children||u.jsxs(u.Fragment,{children:[u.jsx(P3e,{url:t.url,text:t.text,range:t.range,setToolbarOpen:t.setToolbarOpen,setToolbarPositionFrozen:t.setToolbarPositionFrozen}),u.jsx(D3e,{url:t.url}),u.jsx(R3e,{range:t.range,setToolbarOpen:t.setToolbarOpen})]})})},B3e=t=>{const e=Ae(),[n,r]=y.useState(!1),[s,i]=y.useState(!1),o=ot(Sm),[a,l]=y.useState(void 0);y.useEffect(()=>{var f;const p=()=>{const b=o.getLinkAtSelection();if(!b){l(void 0),s||r(!1);return}l({cursorType:"text",url:b.mark.attrs.href,text:b.text,range:b.range,element:o.getLinkElementAtPos(b.range.from)}),s||r(!0)},m=b=>{if(a!==void 0&&a.cursorType==="text"||!(b.target instanceof HTMLElement))return;const v=o.getLinkAtElement(b.target);v&&l({cursorType:"mouse",url:v.mark.attrs.href,text:v.text,range:v.range,element:o.getLinkElementAtPos(v.range.from)})},g=e.onChange(p),x=e.onSelectionChange(p);return(f=e.domElement)==null||f.addEventListener("mouseover",m),()=>{var b;g(),x(),(b=e.domElement)==null||b.removeEventListener("mouseover",m)}},[e,o,a,s]);const c=y.useMemo(()=>({useFloatingOptions:{open:n,onOpenChange:(f,p,m)=>{s||a!==void 0&&a.cursorType==="text"&&m==="hover"||(m==="escape-key"&&e.focus(),r(f))},placement:"top-start",middleware:[Fs(10),ea()]},useHoverProps:{enabled:a!==void 0&&a.cursorType==="mouse",delay:{open:250,close:250},handleClose:z_e()},elementProps:{style:{zIndex:50}},...t.floatingUIOptions}),[e,a,t.floatingUIOptions,n,s]),d=y.useMemo(()=>a!=null&&a.element?{element:a.element}:void 0,[a==null?void 0:a.element]);if(!e.isEditable)return null;const h=t.linkToolbar||L3e;return u.jsx(Gi,{reference:d,...c,children:a&&u.jsx(h,{url:a.url,text:a.text,range:a.range,setToolbarOpen:r,setToolbarPositionFrozen:i})})};function $3e(t){return Se({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const F3e=()=>{const t=Ce(),e=Be(),n=Ae(),r=ot(Bs),s=yt(yi,{editor:n,selector:o=>o==null?void 0:o.block}),i=y.useCallback(()=>{if(s===void 0)return;const o=s.content;if(o!==void 0&&Array.isArray(o)&&o.length===0)n.setTextCursorPosition(s),r.openSuggestionMenu("/");else{const a=n.insertBlocks([{type:"paragraph"}],s,"after")[0];n.setTextCursorPosition(a),r.openSuggestionMenu("/")}},[s,n,r]);return s===void 0?null:u.jsx(t.SideMenu.Button,{className:"bn-button",label:e.side_menu.add_block_label,icon:u.jsx($3e,{size:24,onClick:i,"data-test":"dragHandleAdd"})})};function Oz(t){return Se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function H3e(t){return Se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(t)}const U3e=t=>{const e=Ce(),n=Ae(),r=yt(yi,{editor:n,selector:s=>s==null?void 0:s.block});return r===void 0||!Pr(r,n,r.type,{textColor:"string"})&&!Pr(r,n,r.type,{backgroundColor:"string"})?null:u.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[u.jsx(e.Generic.Menu.Trigger,{sub:!0,children:u.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),u.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:u.jsx(B1,{iconSize:18,text:Pr(r,n,r.type,{textColor:"string"})&&It(n,r.type,{textColor:"string"})?{color:r.props.textColor,setColor:s=>n.updateBlock(r,{type:r.type,props:{textColor:s}})}:void 0,background:Pr(r,n,r.type,{backgroundColor:"string"})&&It(n,r.type,{backgroundColor:"string"})?{color:r.props.backgroundColor,setColor:s=>n.updateBlock(r,{props:{backgroundColor:s}})}:void 0})})]})},z3e=t=>{const e=Ce(),n=Ae(),r=yt(yi,{editor:n,selector:s=>s==null?void 0:s.block});return r===void 0?null:u.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([r]),children:t.children})},V3e=t=>{const e=Ce(),n=Ae(),r=yt(yi,{editor:n,selector:i=>i==null?void 0:i.block});if(r===void 0||r.type!=="table"||!n.settings.tables.headers)return null;const s=!!r.content.headerRows;return u.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:s,onClick:()=>{n.updateBlock(r,{content:{...r.content,headerRows:s?void 0:1}})},children:t.children})},W3e=t=>{const e=Ce(),n=Ae(),r=yt(yi,{editor:n,selector:i=>i==null?void 0:i.block});if(r===void 0||r.type!=="table"||!n.settings.tables.headers)return null;const s=!!r.content.headerCols;return u.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:s,onClick:()=>{n.updateBlock(r,{content:{...r.content,headerCols:s?void 0:1}})},children:t.children})},q3e=t=>{const e=Ce(),n=Be();return u.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||u.jsxs(u.Fragment,{children:[u.jsx(z3e,{children:n.drag_handle.delete_menuitem}),u.jsx(U3e,{children:n.drag_handle.colors_menuitem}),u.jsx(V3e,{children:n.drag_handle.header_row_menuitem}),u.jsx(W3e,{children:n.drag_handle.header_column_menuitem})]})})},G3e=t=>{const e=Ce(),n=Be(),r=ot(yi),s=yt(yi,{selector:o=>o==null?void 0:o.block});if(s===void 0)return null;const i=t.dragHandleMenu||q3e;return u.jsxs(e.Generic.Menu.Root,{onOpenChange:o=>{o?r.freezeMenu():r.unfreezeMenu()},position:"left",children:[u.jsx(e.Generic.Menu.Trigger,{children:u.jsx(e.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>r.blockDragStart(o,s),onDragEnd:r.blockDragEnd,className:"bn-button",icon:u.jsx(Oz,{size:24,"data-test":"dragHandle"})})}),u.jsx(i,{children:t.children})]})},Y3e=t=>{const e=Ce(),n=Ae(),r=yt(yi,{editor:n,selector:i=>i==null?void 0:i.block}),s=y.useMemo(()=>{var i;if(r===void 0)return{};const o={"data-block-type":r.type};return r.type==="heading"&&(o["data-level"]=r.props.level.toString()),(i=n.schema.blockSpecs[r.type].implementation.meta)!=null&&i.fileBlockAccept&&(r.props.url?o["data-url"]="true":o["data-url"]="false"),o},[r,n.schema.blockSpecs]);return u.jsx(e.SideMenu.Root,{className:"bn-side-menu",...s,children:t.children||u.jsxs(u.Fragment,{children:[u.jsx(F3e,{}),u.jsx(G3e,{dragHandleMenu:t.dragHandleMenu})]})})},K3e=t=>{const e=yt(yi,{selector:o=>o!==void 0?{show:o.show,block:o.block}:void 0}),{show:n,block:r}=e||{},s=y.useMemo(()=>({useFloatingOptions:{open:n,placement:"left-start"},useDismissProps:{enabled:!1},elementProps:{style:{zIndex:20}},...t.floatingUIOptions}),[t.floatingUIOptions,n]),i=t.sideMenu||Y3e;return u.jsx(fz,{blockId:n?r==null?void 0:r.id:void 0,...s,children:(r==null?void 0:r.id)&&u.jsx(i,{})})};async function J3e(t,e){return(await QTe(t,e)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function Q3e(t){const e=Ce(),n=Be(),{items:r,loadingState:s,selectedIndex:i,onItemClick:o,columns:a}=t,l=s==="loading-initial"||s==="loading"?u.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,c=y.useMemo(()=>{const d=[];for(let h=0;h<r.length;h++){const f=r[h];d.push(u.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:f,id:`bn-grid-suggestion-menu-item-${h}`,isSelected:h===i,onClick:()=>o==null?void 0:o(f)},f.id))}return d},[e,r,o,i]);return u.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[l,c,c.length===0&&t.loadingState==="loaded"&&u.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function Iz(t,e,n,r=3){const s=y.useRef(0);y.useEffect(()=>{e!==void 0&&(t.length>0?s.current=e.length:e.length-s.current>r&&n())},[n,r,t.length,e])}function Mz(t,e){const[n,r]=y.useState([]),[s,i]=y.useState(!1),o=y.useRef(void 0),a=y.useRef(void 0);return y.useEffect(()=>{const l=t;o.current=t,i(!0),e(t).then(c=>{o.current===l&&(r(c),i(!1),a.current=l)})},[t,e]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":s?"loading":"loaded"}}function X3e(t,e,n,r,s){const[i,o]=y.useState(0),a=r!==void 0&&r>1;return y.useEffect(()=>{var l;const c=d=>(d.key==="ArrowLeft"&&(d.preventDefault(),n.length&&o((i-1+n.length)%n.length)),d.key==="ArrowRight"&&(d.preventDefault(),n.length&&o((i+1+n.length)%n.length)),d.key==="ArrowUp"?(d.preventDefault(),n.length&&o((i-r+n.length)%n.length),!0):d.key==="ArrowDown"?(d.preventDefault(),n.length&&o((i+r)%n.length),!0):d.key==="Enter"&&!d.isComposing?(d.stopPropagation(),d.preventDefault(),n.length&&(s==null||s(n[i])),!0):!1);return(l=t.domElement)==null||l.addEventListener("keydown",c,!0),()=>{var d;(d=t.domElement)==null||d.removeEventListener("keydown",c,!0)}},[t.domElement,n,i,s,r,a]),y.useEffect(()=>{o(0)},[e]),{selectedIndex:n.length===0?void 0:i}}function Z3e(t){const e=Ni().setContentEditableProps,n=Ae(),{getItems:r,gridSuggestionMenuComponent:s,query:i,clearQuery:o,closeMenu:a,onItemClick:l,columns:c}=t,d=y.useCallback(g=>{a(),o(),l==null||l(g)},[l,a,o]),{items:h,usedQuery:f,loadingState:p}=Mz(i,r);Iz(h,f,a);const{selectedIndex:m}=X3e(n,i,h,c,d);return y.useEffect(()=>(e(g=>({...g,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(g=>({...g,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),y.useEffect(()=>(e(g=>({...g,"aria-activedescendant":m?"bn-suggestion-menu-item-"+m:void 0})),()=>{e(g=>({...g,"aria-activedescendant":void 0}))}),[e,m]),u.jsx(s,{items:h,onItemClick:d,loadingState:p,selectedIndex:m,columns:c})}function eje(t){const e=Ae(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:s,minQueryLength:i,onItemClick:o,getItems:a}=t,l=y.useMemo(()=>o||(m=>{m.onItemClick(e)}),[e,o]),c=y.useMemo(()=>a||(async m=>await J3e(e,m)),[e,a]),d=ot(Bs);y.useEffect(()=>{d.addTriggerCharacter(n)},[d,n]);const h=yt(Bs),f=yt(Bs,{selector:m=>{var g;return{element:((g=e.domElement)==null?void 0:g.firstChild)||void 0,getBoundingClientRect:()=>(m==null?void 0:m.referencePos)||new DOMRect}}}),p=y.useMemo(()=>({useFloatingOptions:{open:(h==null?void 0:h.show)&&(h==null?void 0:h.triggerCharacter)===n,onOpenChange:m=>{m||d.closeMenu()},placement:"bottom-start",middleware:[Fs(10),QU({allowedPlacements:["bottom-start","top-start"],padding:10}),Ol(),Up({apply({elements:m,availableHeight:g}){m.floating.style.maxHeight=`${Math.max(0,g)}px`},padding:10})]},elementProps:{onMouseDownCapture:m=>m.preventDefault(),style:{zIndex:70}},...t.floatingUIOptions}),[t.floatingUIOptions,h==null?void 0:h.show,h==null?void 0:h.triggerCharacter,d,n]);return!h||!h.ignoreQueryLength&&i&&(h.query.startsWith(" ")||h.query.length<i)?null:u.jsx(Gi,{reference:f,...p,children:n&&u.jsx(Z3e,{query:h.query,closeMenu:d.closeMenu,clearQuery:d.clearQuery,getItems:c,columns:s,gridSuggestionMenuComponent:r||Q3e,onItemClick:l})})}function tje(t){const e=Ce(),n=Be(),{items:r,loadingState:s,selectedIndex:i,onItemClick:o}=t,a=s==="loading-initial"||s==="loading"?u.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=y.useMemo(()=>{let c;const d=[];for(let h=0;h<r.length;h++){const f=r[h];f.group!==c&&(c=f.group,d.push(u.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:c},c))),d.push(u.jsx(e.SuggestionMenu.Item,{className:Kt("bn-suggestion-menu-item",f.size==="small"?"bn-suggestion-menu-item-small":""),item:f,id:`bn-suggestion-menu-item-${h}`,isSelected:h===i,onClick:()=>o==null?void 0:o(f)},f.title))}return d},[e,r,o,i]);return u.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&u.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function nje(t,e){const[n,r]=y.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:s=>{if(s.key==="ArrowUp")return s.preventDefault(),t.length&&r((n-1+t.length)%t.length),!0;if(s.key==="ArrowDown")return s.preventDefault(),t.length&&r((n+1)%t.length),!0;const i=rje(s)?s.nativeEvent.isComposing:s.isComposing;return s.key==="Enter"&&!i?(s.preventDefault(),s.stopPropagation(),t.length&&(e==null||e(t[n])),!0):!1}}}function rje(t){return t.nativeEvent!==void 0}function sje(t,e,n,r,s){const{selectedIndex:i,setSelectedIndex:o,handler:a}=nje(n,r);return y.useEffect(()=>{var l;return(l=t.domElement)==null||l.addEventListener("keydown",a,!0),()=>{var c;(c=t.domElement)==null||c.removeEventListener("keydown",a,!0)}},[t.domElement,n,i,r,s,a]),y.useEffect(()=>{o(0)},[e,o]),{selectedIndex:n.length===0?void 0:i}}function ije(t){const e=Ni().setContentEditableProps,n=Ae(),{getItems:r,suggestionMenuComponent:s,query:i,clearQuery:o,closeMenu:a,onItemClick:l}=t,c=y.useCallback(m=>{a(),o(),l==null||l(m)},[l,a,o]),{items:d,usedQuery:h,loadingState:f}=Mz(i,r);Iz(d,h,a);const{selectedIndex:p}=sje(n,i,d,c);return y.useEffect(()=>(e(m=>({...m,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(m=>({...m,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),y.useEffect(()=>(e(m=>({...m,"aria-activedescendant":p?"bn-suggestion-menu-item-"+p:void 0})),()=>{e(m=>({...m,"aria-activedescendant":void 0}))}),[e,p]),u.jsx(s,{items:d,onItemClick:c,loadingState:f,selectedIndex:p})}const oje={heading:Qx,heading_2:Xx,heading_3:Zx,heading_4:xz,heading_5:yz,heading_6:vz,toggle_heading:Qx,toggle_heading_2:Xx,toggle_heading_3:Zx,quote:Sz,toggle_list:Tz,numbered_list:Ez,bullet_list:Cz,check_list:kz,paragraph:I_,table:JAe,image:ZAe,video:XAe,audio:n3e,file:DAe,emoji:d3e,code_block:UAe,divider:u3e};function aje(t){return Xpe(t).map(e=>{const n=oje[e.key];return{...e,icon:u.jsx(n,{size:18})}})}function lje(t){const e=Ae(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:s,onItemClick:i,getItems:o}=t,a=y.useMemo(()=>i||(p=>{p.onItemClick(e)}),[e,i]),l=y.useMemo(()=>o||(async p=>Zpe(aje(e),p)),[e,o]),c=ot(Bs);y.useEffect(()=>{c.addTriggerCharacter(n)},[c,n]);const d=yt(Bs),h=yt(Bs,{selector:p=>{var m;return{element:((m=e.domElement)==null?void 0:m.firstChild)||void 0,getBoundingClientRect:()=>(p==null?void 0:p.referencePos)||new DOMRect}}}),f=y.useMemo(()=>({useFloatingOptions:{open:(d==null?void 0:d.show)&&(d==null?void 0:d.triggerCharacter)===n,onOpenChange:p=>{p||c.closeMenu()},placement:"bottom-start",middleware:[Fs(10),QU({allowedPlacements:["bottom-start","top-start"],padding:10}),Ol(),Up({apply({elements:p,availableHeight:m}){p.floating.style.maxHeight=`${Math.max(0,m)}px`},padding:10})]},elementProps:{onMouseDownCapture:p=>p.preventDefault(),style:{zIndex:80}},...t.floatingUIOptions}),[t.floatingUIOptions,d==null?void 0:d.show,d==null?void 0:d.triggerCharacter,c,n]);return!d||!d.ignoreQueryLength&&s&&(d.query.startsWith(" ")||d.query.length<s)?null:u.jsx(Gi,{reference:h,...f,children:n&&u.jsx(ije,{query:d.query,closeMenu:c.closeMenu,clearQuery:c.clearQuery,getItems:l,suggestionMenuComponent:r||tje,onItemClick:a})})}const cje=(t,e=.3)=>{const n=Math.floor(t)+e,r=Math.ceil(t)-e;return t>=n&&t<=r?Math.round(t):t<n?Math.floor(t):Math.ceil(t)},uje=t=>{const e=Ce(),n=Ae(),r=ot(_t),s=yt(_t,{selector:d=>d==null?void 0:d.block}),i=y.useRef(!1),[o,a]=y.useState(),l=y.useCallback(d=>{r.freezeHandles(),t.hideOtherElements(!0),s&&(a({originalContent:s.content,originalCroppedContent:{rows:r.cropEmptyRowsOrColumns(s,t.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:t.orientation==="addOrRemoveColumns"?d.clientX:d.clientY}),i.current=!1,d.preventDefault())},[s,t,r]),c=y.useCallback(()=>{!s||i.current||n.updateBlock(s,{type:"table",content:{...s.content,rows:t.orientation==="addOrRemoveColumns"?r.addRowsOrColumns(s,"columns",1):r.addRowsOrColumns(s,"rows",1)}})},[s,n,t.orientation,r]);return y.useEffect(()=>{const d=h=>{var f,p;if(!s)return;if(!o)throw new Error("editingState is undefined");i.current=!0;const m=(t.orientation==="addOrRemoveColumns"?h.clientX:h.clientY)-o.startPos,g=t.orientation==="addOrRemoveColumns"?((f=o.originalCroppedContent.rows[0])==null?void 0:f.cells.length)??0:o.originalCroppedContent.rows.length,x=t.orientation==="addOrRemoveColumns"?((p=o.originalContent.rows[0])==null?void 0:p.cells.length)??0:o.originalContent.rows.length,b=t.orientation==="addOrRemoveColumns"?s.content.rows[0].cells.length:s.content.rows.length,v=x+cje(m/(t.orientation==="addOrRemoveColumns"?PN:Rpe),.3);v>=g&&v>0&&v!==b&&(n.updateBlock(s,{type:"table",content:{...s.content,rows:t.orientation==="addOrRemoveColumns"?r.addRowsOrColumns({type:"table",content:o.originalCroppedContent},"columns",v-g):r.addRowsOrColumns({type:"table",content:o.originalCroppedContent},"rows",v-g)}}),s.content&&n.setTextCursorPosition(s))};return o&&window.addEventListener("mousemove",d),()=>{window.removeEventListener("mousemove",d)}},[s,o,n,t.orientation,r]),y.useEffect(()=>{const d=()=>{t.hideOtherElements(!1),r.unfreezeHandles(),a(void 0)};return o&&window.addEventListener("mouseup",d),()=>{window.removeEventListener("mouseup",d)}},[o,t,r]),n.isEditable?u.jsx(e.TableHandle.ExtendButton,{className:Kt("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",o!==null?"bn-extend-button-editing":""),onClick:c,onMouseDown:l,children:t.children||u.jsx(r3e,{size:18,"data-test":"extendButton"})}):null},BM=t=>{const e=Ce(),n=Be(),r=ot(_t),s=yt(_t,{selector:i=>t.orientation==="column"?i==null?void 0:i.colIndex:i==null?void 0:i.rowIndex});return r===void 0||s===void 0?null:u.jsx(e.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(s,t.orientation==="row"?{orientation:"row",side:t.side}:{orientation:"column",side:t.side})},children:n.table_handle[`add_${t.side}_menuitem`]})},dje=t=>{const e=Ce(),n=Be(),r=ot(_t),s=yt(_t,{selector:i=>t.orientation==="column"?i==null?void 0:i.colIndex:i==null?void 0:i.rowIndex});return r===void 0||s===void 0?null:u.jsx(e.Generic.Menu.Item,{onClick:()=>r.removeRowOrColumn(s,t.orientation),children:t.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem})},hje=t=>{const e=Ce(),n=Be(),r=Ae(),s=ot(_t),{block:i,index:o}=yt(_t,{selector:d=>({block:d==null?void 0:d.block,index:t.orientation==="column"?d==null?void 0:d.colIndex:d==null?void 0:d.rowIndex})}),a=y.useMemo(()=>s===void 0||i===void 0||o===void 0?[]:t.orientation==="row"?s.getCellsAtRowHandle(i,o):s.getCellsAtColumnHandle(i,o),[i,o,t.orientation,s]),l=(d,h)=>{if(i===void 0)return;const f=i.content.rows.map(p=>({...p,cells:p.cells.map(m=>cl(m))}));a.forEach(({row:p,col:m})=>{h==="text"?f[p].cells[m].props.textColor=d:f[p].cells[m].props.backgroundColor=d}),r.updateBlock(i,{type:"table",content:{...i.content,rows:f}}),r.setTextCursorPosition(i)};if(!a||!a[0]||!s||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const c=cl(a[0].cell);return u.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[u.jsx(e.Generic.Menu.Trigger,{sub:!0,children:u.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||n.drag_handle.colors_menuitem})}),u.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:u.jsx(B1,{iconSize:18,text:r.settings.tables.cellTextColor?{color:a.every(({cell:d})=>ul(d)&&d.props.textColor===c.props.textColor)?c.props.textColor:"default",setColor:d=>{l(d,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:a.every(({cell:d})=>ul(d)&&d.props.backgroundColor===c.props.backgroundColor)?c.props.backgroundColor:"default",setColor:d=>l(d,"background")}:void 0})})]})},fje=t=>{const e=Ce(),n=Be(),r=Ae(),s=ot(_t),{block:i,index:o}=yt(_t,{selector:l=>({block:l==null?void 0:l.block,index:t.orientation==="column"?l==null?void 0:l.colIndex:l==null?void 0:l.rowIndex})});if(s===void 0||i===void 0||o!==0||t.orientation!=="row"||!r.settings.tables.headers)return null;const a=!!i.content.headerRows;return u.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:a,onClick:()=>{r.updateBlock(i,{...i,content:{...i.content,headerRows:a?void 0:1}})},children:n.drag_handle.header_row_menuitem})},pje=t=>{const e=Ce(),n=Be(),r=Ae(),s=ot(_t),i=yt(_t,{selector:l=>l==null?void 0:l.block}),o=yt(_t,{selector:l=>t.orientation==="column"?l==null?void 0:l.colIndex:l==null?void 0:l.rowIndex});if(!s||o!==0||!i||t.orientation!=="column"||!r.settings.tables.headers)return null;const a=!!i.content.headerCols;return u.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:a,onClick:()=>{r.updateBlock(i,{...i,content:{...i.content,headerCols:a?void 0:1}})},children:n.drag_handle.header_column_menuitem})},mje=t=>{const e=Ce();return u.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||u.jsxs(u.Fragment,{children:[u.jsx(dje,{orientation:t.orientation}),u.jsx(BM,{orientation:t.orientation,side:t.orientation==="row"?"above":"left"}),u.jsx(BM,{orientation:t.orientation,side:t.orientation==="row"?"below":"right"}),u.jsx(fje,{orientation:t.orientation}),u.jsx(pje,{orientation:t.orientation}),u.jsx(hje,{orientation:t.orientation})]})})},gje=t=>{const e=Ae(),n=Ce(),[r,s]=y.useState(!1),i=t.tableHandleMenu||mje,o=ot(_t),a=yt(_t),l=y.useMemo(()=>!o||!a||!a.block||a.block.type!=="table"?!1:t.orientation==="column"?o.getCellsAtColumnHandle(a.block,a.colIndex).every(({cell:c})=>Rc(c)===1):o.getCellsAtRowHandle(a.block,a.rowIndex).every(({cell:c})=>wp(c)===1),[t.orientation,a,o]);return a?u.jsxs(n.Generic.Menu.Root,{onOpenChange:c=>{c?(o.freezeHandles(),t.hideOtherElements(!0)):(o.unfreezeHandles(),t.hideOtherElements(!1),e.focus())},position:"right",children:[u.jsx(n.Generic.Menu.Trigger,{children:u.jsx(n.TableHandle.Root,{className:Kt("bn-table-handle",r?"bn-table-handle-dragging":"",l?"":"bn-table-handle-not-draggable"),draggable:l,onDragStart:c=>{s(!0),t.hideOtherElements(!0),t.orientation==="column"?o.colDragStart(c):o.rowDragStart(c)},onDragEnd:()=>{o.dragEnd(),t.hideOtherElements(!1),s(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||u.jsx(Oz,{size:24,"data-test":"tableHandle"})})}),u.jsx(i,{orientation:t.orientation})]}):null},bje=t=>{var e,n;const r=Ce(),s=Be(),i=Ae(),{block:o,colIndex:a,rowIndex:l}=yt(_t,{selector:h=>({block:h==null?void 0:h.block,colIndex:h==null?void 0:h.colIndex,rowIndex:h==null?void 0:h.rowIndex})}),c=(h,f)=>{if(o===void 0||a===void 0||l===void 0)return;const p=o.content.rows.map(m=>({...m,cells:m.cells.map(g=>cl(g))}));f==="text"?p[l].cells[a].props.textColor=h:p[l].cells[a].props.backgroundColor=h,i.updateBlock(o,{type:"table",content:{...o.content,rows:p}}),i.setTextCursorPosition(o)};if(o===void 0||a===void 0||l===void 0)return null;const d=(n=(e=o.content.rows[l])==null?void 0:e.cells)==null?void 0:n[a];return!d||i.settings.tables.cellTextColor===!1&&i.settings.tables.cellBackgroundColor===!1?null:u.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[u.jsx(r.Generic.Menu.Trigger,{sub:!0,children:u.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||s.drag_handle.colors_menuitem})}),u.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:u.jsx(B1,{iconSize:18,text:i.settings.tables.cellTextColor?{color:ul(d)?d.props.textColor:"default",setColor:h=>c(h,"text")}:void 0,background:i.settings.tables.cellBackgroundColor?{color:ul(d)?d.props.backgroundColor:"default",setColor:h=>c(h,"background")}:void 0})})]})},xje=()=>{var t,e;const n=Ce(),r=Be(),s=Ae(),i=ot(_t),{block:o,colIndex:a,rowIndex:l}=yt(_t,{selector:d=>({block:d==null?void 0:d.block,colIndex:d==null?void 0:d.colIndex,rowIndex:d==null?void 0:d.rowIndex})});if(o===void 0||a===void 0||l===void 0)return null;const c=(e=(t=o.content.rows[l])==null?void 0:t.cells)==null?void 0:e[a];return!c||!ul(c)||wp(c)===1&&Rc(c)===1||!s.settings.tables.splitCells?null:u.jsx(n.Generic.Menu.Item,{onClick:()=>{i.splitCell({row:l,col:a})},children:r.table_handle.split_cell_menuitem})},yje=t=>{const e=Ce();return u.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-table-handle-menu",children:t.children||u.jsxs(u.Fragment,{children:[u.jsx(xje,{}),u.jsx(bje,{})]})})},vje=t=>{const e=Ce(),n=Ae(),r=ot(_t),s=t.tableCellMenu||yje;return!n.settings.tables.splitCells&&!n.settings.tables.cellBackgroundColor&&!n.settings.tables.cellTextColor?null:u.jsxs(e.Generic.Menu.Root,{onOpenChange:i=>{i?(r.freezeHandles(),t.hideOtherElements(!0)):(r.unfreezeHandles(),t.hideOtherElements(!1),n.focus())},position:"right",children:[u.jsx(e.Generic.Menu.Trigger,{children:u.jsx(e.Generic.Menu.Button,{className:"bn-table-cell-handle",children:t.children||u.jsx(H3e,{size:12,"data-test":"tableCellHandle"})})}),u.jsx(s,{})]})},wje=t=>{const e=Ae(),[n,r]=y.useState(),s=yt(_t),i=y.useMemo(()=>{const d={};if(s===void 0)return{};const h=xr(s.block.id,e.prosemirrorState.doc);if(!h)return{};const f=h.posBeforeNode+1,p=e.prosemirrorView.domAtPos(f+1).node;if(!(p instanceof Element))return{};if(d.tableReference={element:p},s.rowIndex===void 0||s.colIndex===void 0)return d;const m=e.prosemirrorState.doc.resolve(f+1).posAtIndex(s.rowIndex),g=e.prosemirrorState.doc.resolve(m+1).posAtIndex(s.colIndex),x=e.prosemirrorView.domAtPos(g+1).node;return x instanceof Element?(d.cellReference={element:x},d.rowReference={element:p,getBoundingClientRect:()=>{const b=p.getBoundingClientRect(),v=x.getBoundingClientRect();return new DOMRect(b.x,s.draggingState&&s.draggingState.draggedCellOrientation==="row"?s.draggingState.mousePos-v.height/2:v.y,b.width,v.height)}},d.columnReference={element:p,getBoundingClientRect:()=>{const b=p.getBoundingClientRect(),v=x.getBoundingClientRect();return new DOMRect(s.draggingState&&s.draggingState.draggedCellOrientation==="col"?s.draggingState.mousePos-v.width/2:v.x,b.y,v.width,b.height)}},d):{}},[e,s]),o=y.useMemo(()=>s!==void 0?{rowTableHandle:{useFloatingOptions:{open:s.show&&s.rowIndex!==void 0&&(!n||n==="rowTableHandle"),placement:"left",middleware:[Fs(-10)]},elementProps:{style:{zIndex:10}}},columnTableHandle:{useFloatingOptions:{open:s.show&&s.colIndex!==void 0&&(!n||n==="columnTableHandle"),placement:"top",middleware:[Fs(-12)]},elementProps:{style:{zIndex:10}}},tableCellHandle:{useFloatingOptions:{open:s.show&&s.rowIndex!==void 0&&s.colIndex!==void 0&&(!n||n==="tableCellHandle"),placement:"top-end",middleware:[Fs({mainAxis:-15,crossAxis:-1})]},elementProps:{style:{zIndex:10}}},extendRowsButton:{useFloatingOptions:{open:s.show&&s.showAddOrRemoveRowsButton&&(!n||n==="extendRowsButton"),placement:"bottom",middleware:[Up({apply({rects:d,elements:h}){Object.assign(h.floating.style,{width:`${d.reference.width}px`})}})]},elementProps:{style:{zIndex:10}}},extendColumnsButton:{useFloatingOptions:{open:s.show&&s.showAddOrRemoveColumnsButton&&(!n||n==="extendColumnsButton"),placement:"right",middleware:[Up({apply({rects:d,elements:h}){Object.assign(h.floating.style,{height:`${d.reference.height}px`})}})]},elementProps:{style:{zIndex:10}}}}:void 0,[n,s]);if(!s)return null;const a=t.tableHandle||gje,l=t.extendButton||uje,c=t.tableCellHandle||vje;return u.jsxs(u.Fragment,{children:[u.jsx(Gi,{reference:i==null?void 0:i.rowReference,...o==null?void 0:o.rowTableHandle,children:s.show&&s.rowIndex!==void 0&&(!n||n==="rowTableHandle")&&u.jsx(a,{orientation:"row",hideOtherElements:d=>r(d?"rowTableHandle":void 0)})}),u.jsx(Gi,{reference:i==null?void 0:i.columnReference,...o==null?void 0:o.columnTableHandle,children:s.show&&s.colIndex!==void 0&&(!n||n==="columnTableHandle")&&u.jsx(a,{orientation:"column",hideOtherElements:d=>r(d?"columnTableHandle":void 0)})}),u.jsx(Gi,{reference:i==null?void 0:i.cellReference,...o==null?void 0:o.tableCellHandle,children:s.show&&s.rowIndex!==void 0&&s.colIndex!==void 0&&(!n||n==="tableCellHandle")&&u.jsx(c,{hideOtherElements:d=>r(d?"tableCellHandle":void 0)})}),u.jsx(Gi,{reference:i==null?void 0:i.tableReference,...o==null?void 0:o.extendRowsButton,children:s.show&&s.showAddOrRemoveRowsButton&&(!n||n==="extendRowsButton")&&u.jsx(l,{orientation:"addOrRemoveRows",hideOtherElements:d=>r(d?"extendRowsButton":void 0)})}),u.jsx(Gi,{reference:i==null?void 0:i.tableReference,...o==null?void 0:o.extendColumnsButton,children:s.show&&s.showAddOrRemoveColumnsButton&&(!n||n==="extendColumnsButton")&&u.jsx(l,{orientation:"addOrRemoveColumns",hideOtherElements:d=>r(d?"extendColumnsButton":void 0)})})]})},kje=y.lazy(()=>Promise.resolve().then(()=>Wje)),Eje=y.lazy(()=>Promise.resolve().then(()=>Yje));function Cje(t){const e=Ae();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return u.jsxs(u.Fragment,{children:[e.getExtension(bl)&&t.formattingToolbar!==!1&&u.jsx(jz,{}),e.getExtension(Sm)&&t.linkToolbar!==!1&&u.jsx(B3e,{}),e.getExtension(Bs)&&t.slashMenu!==!1&&u.jsx(lje,{triggerCharacter:"/"}),e.getExtension(Bs)&&t.emojiPicker!==!1&&u.jsx(eje,{triggerCharacter:":",columns:10,minQueryLength:2}),e.getExtension(yi)&&t.sideMenu!==!1&&u.jsx(K3e,{}),e.getExtension(ii)&&t.filePanel!==!1&&u.jsx(gAe,{}),e.getExtension(_t)&&t.tableHandles!==!1&&u.jsx(wje,{}),e.getExtension(Vs)&&t.comments!==!1&&u.jsxs(y.Suspense,{children:[u.jsx(kje,{}),u.jsx(Eje,{})]})]})}function Sje(t,e){const n=Ni();e||(e=n==null?void 0:n.editor),y.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}function Tje(t,e,n){const r=Ni();e||(e=r==null?void 0:r.editor),y.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t,n)},[t,e,n])}const Rz=()=>{const t=y.useMemo(()=>{var o;return(o=window.matchMedia)==null?void 0:o.call(window,"(prefers-color-scheme: dark)")},[]),e=y.useMemo(()=>{var o;return(o=window.matchMedia)==null?void 0:o.call(window,"(prefers-color-scheme: light)")},[]),n=t==null?void 0:t.matches,r=e==null?void 0:e.matches,[s,i]=y.useState(n?"dark":r?"light":"no-preference");return y.useEffect(()=>{i(n?"dark":r?"light":"no-preference")},[n,r]),y.useEffect(()=>{if(typeof(t==null?void 0:t.addEventListener)=="function"){const o=({matches:l})=>l&&i("dark"),a=({matches:l})=>l&&i("light");return t==null||t.addEventListener("change",o),e==null||e.addEventListener("change",a),()=>{t==null||t.removeEventListener("change",o),e==null||e.removeEventListener("change",a)}}else{const o=()=>i(t.matches?"dark":e.matches?"light":"no-preference");return t==null||t.addEventListener("change",o),e==null||e.addEventListener("change",o),()=>{t==null||t.removeEventListener("change",o),e==null||e.removeEventListener("change",o)}}},[t,e]),s},Pz=y.createContext(void 0);function Nje(){return y.useContext(Pz)}function _je(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:eo.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}const Aje=({contentComponent:t})=>{const e=y.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(e)})},jje=y.forwardRef((t,e)=>{const[n,r]=y.useState();return y.useImperativeHandle(e,()=>(s,i)=>{eo.flushSync(()=>{r({node:s,container:i})}),r(void 0)},[]),u.jsx(u.Fragment,{children:n&&eo.createPortal(n.node,n.container)})}),$M=()=>{};function Oje(t,e){const{editor:n,className:r,theme:s,children:i,editable:o,onSelectionChange:a,onChange:l,formattingToolbar:c,linkToolbar:d,slashMenu:h,emojiPicker:f,sideMenu:p,filePanel:m,tableHandles:g,comments:x,autoFocus:b,renderEditor:v=!0,...w}=t,[S,E]=y.useState(),C=Ni(),T=Rz(),_=(C==null?void 0:C.colorSchemePreference)||T,O=s||(_==="dark"?"dark":"light");Sje(l||$M,n),Tje(a||$M,n),y.useEffect(()=>{n.isEditable=o!==!1},[o,n]);const N=y.useCallback(W=>{n.elementRenderer=W},[n]),R=y.useMemo(()=>({...C,editor:n,setContentEditableProps:E,colorSchemePreference:O}),[C,n,O]),M=y.useMemo(()=>({editorProps:{autoFocus:b,contentEditableProps:S},defaultUIProps:{formattingToolbar:c,linkToolbar:d,slashMenu:h,emojiPicker:f,sideMenu:p,filePanel:m,tableHandles:g,comments:x}}),[b,S,c,d,h,f,p,m,g,x]);return u.jsx(uz.Provider,{value:R,children:u.jsxs(Pz.Provider,{value:M,children:[u.jsx(jje,{ref:N}),u.jsx(Ije,{className:r,renderEditor:v,editable:o,editorColorScheme:O,ref:e,...w,children:i})]})})}const Ije=lt.forwardRef(({className:t,renderEditor:e,editable:n,editorColorScheme:r,children:s,...i},o)=>u.jsx("div",{className:Kt("bn-container",r,t),"data-color-scheme":r,...i,ref:o,children:e?u.jsx(Rje,{editable:n,children:s}):s})),Mje=lt.forwardRef(Oje),Rje=t=>{const e=Nje(),n=Ae(),r=y.useMemo(()=>_je(),[]),s=y.useCallback(i=>{t.editable!==void 0&&t.editable!==n.isEditable&&(n.isEditable=t.editable),n._tiptapEditor.contentComponent=r,i?n.mount(i):n.unmount()},[n,r,t.editable]);return u.jsxs(u.Fragment,{children:[u.jsx(Aje,{contentComponent:r}),u.jsx(Pje,{...e.editorProps,...t,mount:s}),u.jsx(Cje,{...e.defaultUIProps}),t.children]})},Pje=t=>{const{autoFocus:e,mount:n,contentEditableProps:r}=t;return u.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":e,ref:n,...r})},$1=(t={},e=[])=>y.useMemo(()=>{const n=zTe.create(t);return window&&(window.ProseMirror=n._tiptapEditor),n},e),M_=t=>{const[e,n]=y.useState(!1),r=_n({editor:t.editor,selector:({editor:a})=>a.isEmpty}),s=Ce(),i=y.useCallback(()=>{n(!0)},[]),o=y.useCallback(()=>{n(!1)},[]);return y.useEffect(()=>{t.editable&&t.autoFocus&&t.editor.focus()},[t.autoFocus,t.editable,t.editor]),u.jsxs(u.Fragment,{children:[u.jsx(s.Comments.Editor,{autoFocus:t.autoFocus,className:"bn-comment-editor",editor:t.editor,onFocus:i,onBlur:o,editable:t.editable}),t.actions&&u.jsx("div",{className:"bn-comment-actions-wrapper",children:u.jsx(t.actions,{isFocused:e,isEmpty:r})})]})};let Tk;async function Dje(){return Tk||(Tk=(async()=>{const[t,e]=await Promise.all([Ux(()=>import("./module-BvCTiNll.js"),[]),Ux(()=>import("./native-B5Vb9Oiz.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),Tk)}function Lje(t){const e=y.useRef(null),n=y.useRef(null);return n.current&&n.current.update(t),y.useEffect(()=>((async()=>{const{emojiMart:r}=await Dje();n.current=new r.Picker({...t,ref:e})})(),()=>{n.current=null}),[]),lt.createElement("div",{ref:e})}const FM=t=>{const[e,n]=y.useState(!1),r=Ce(),s=Ae(),i=Ni();return u.jsxs(r.Generic.Popover.Root,{open:e,children:[u.jsx(r.Generic.Popover.Trigger,{children:u.jsx("div",{onClick:o=>{var a;o.preventDefault(),o.stopPropagation(),n(!e),(a=t.onOpenChange)==null||a.call(t,!e)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t.children})}),eo.createPortal(u.jsx(r.Generic.Popover.Content,{className:"bn-emoji-picker-popover",variant:"panel-popover",children:u.jsx(Lje,{perLine:7,onClickOutside:()=>{var o;n(!1),(o=t.onOpenChange)==null||o.call(t,!1)},onEmojiSelect:o=>{var a;t.onEmojiSelect(o),n(!1),(a=t.onOpenChange)==null||a.call(t,!1)},theme:i==null?void 0:i.colorSchemePreference})}),s.domElement.parentElement)]})};function Bje(t){return R_([t]).get(t)}function R_(t){const e=ot(Vs).userStore,n=y.useCallback(()=>{const i=new Map;for(const o of t){const a=e.getUser(o);a&&i.set(o,a)}return i},[e,t]),r=y.useMemo(()=>({current:n()}),[n]),s=y.useCallback(i=>{const o=e.subscribe(a=>{r.current=n(),i()});return e.loadUsers(t),o},[e,n,t,r]);return y.useSyncExternalStore(s,()=>r.current)}const $je=t=>{const e=Ce(),n=Be(),r=ot(Vs),s=t.comment.reactions.find(l=>l.emoji===t.emoji);if(!s)throw new Error("Trying to render reaction badge for non-existing reaction");const[i,o]=y.useState([]),a=R_(i);return u.jsx(e.Generic.Badge.Root,{className:Kt("bn-badge","bn-comment-reaction"),text:s.userIds.length.toString(),icon:s.emoji,isSelected:r.threadStore.auth.canDeleteReaction(t.comment,s.emoji),onClick:()=>t.onReactionSelect(s.emoji),onMouseEnter:()=>o(s.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(l=>l.username).join(`
`)}`},s.emoji)},{textColor:FPe,backgroundColor:HPe,...Fje}=DN,P_=tU.create({blockSpecs:{paragraph:I$()},styleSpecs:Fje}),Hje=({comment:t,thread:e,showResolveButton:n})=>{const r=ot(Vs),s=Be(),i=$1({initialContent:t.body,trailingBlock:!1,dictionary:{...s,placeholders:{emptyDocument:s.placeholders.edit_comment}},schema:r.commentEditorSchema||P_}),o=Ce(),[a,l]=y.useState(!1),[c,d]=y.useState(!1),h=r.threadStore,f=y.useCallback(()=>{l(!0)},[]),p=y.useCallback(()=>{i.replaceBlocks(i.document,t.body),l(!1)},[i,t.body]),m=y.useCallback(async N=>{await h.updateComment({commentId:t.id,comment:{body:i.document},threadId:e.id}),l(!1)},[t,e.id,i,h]),g=y.useCallback(async()=>{await h.deleteComment({commentId:t.id,threadId:e.id})},[t,e.id,h]),x=y.useCallback(async N=>{h.auth.canAddReaction(t,N)?await h.addReaction({threadId:e.id,commentId:t.id,emoji:N}):h.auth.canDeleteReaction(t,N)&&await h.deleteReaction({threadId:e.id,commentId:t.id,emoji:N})},[h,t,e.id]),b=y.useCallback(async()=>{await h.resolveThread({threadId:e.id})},[e.id,h]),v=y.useCallback(async()=>{await h.unresolveThread({threadId:e.id})},[e.id,h]),w=Bje(t.userId);if(!t.body)return null;let S;const E=h.auth.canAddReaction(t),C=h.auth.canDeleteComment(t),T=h.auth.canUpdateComment(t),_=n&&(e.resolved?h.auth.canUnresolveThread(e):h.auth.canResolveThread(e));a||(S=u.jsxs(o.Generic.Toolbar.Root,{className:Kt("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[E&&u.jsx(FM,{onEmojiSelect:N=>x(N.native),onOpenChange:d,children:u.jsx(o.Generic.Toolbar.Button,{mainTooltip:s.comments.actions.add_reaction,variant:"compact",children:u.jsx(PM,{size:16})},"add-reaction")}),_&&(e.resolved?u.jsx(o.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:v,children:u.jsx(MAe,{size:16})},"reopen"):u.jsx(o.Generic.Toolbar.Button,{mainTooltip:s.comments.actions.resolve,variant:"compact",onClick:b,children:u.jsx(s3e,{size:16})},"resolve")),(C||T)&&u.jsxs(o.Generic.Menu.Root,{position:"bottom-start",children:[u.jsx(o.Generic.Menu.Trigger,{children:u.jsx(o.Generic.Toolbar.Button,{mainTooltip:s.comments.actions.more_actions,variant:"compact",children:u.jsx(c3e,{size:16})},"more-actions")}),u.jsxs(o.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[T&&u.jsx(o.Generic.Menu.Item,{icon:u.jsx(RAe,{}),onClick:f,children:s.comments.actions.edit_comment},"edit-comment"),C&&u.jsx(o.Generic.Menu.Item,{icon:u.jsx(o3e,{}),onClick:g,children:s.comments.actions.delete_comment},"delete-comment")]})]})]}));const O=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return u.jsx(o.Comments.Comment,{authorInfo:w??"loading",timeString:O,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:S,className:"bn-thread-comment",emojiPickerOpen:c,children:u.jsx(M_,{autoFocus:a,editor:i,editable:a,actions:t.reactions.length>0||a?({isEmpty:N})=>u.jsxs(u.Fragment,{children:[t.reactions.length>0&&!a&&u.jsxs(o.Generic.Badge.Group,{className:Kt("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(R=>u.jsx($je,{comment:t,emoji:R.emoji,onReactionSelect:x},R.emoji)),E&&u.jsx(FM,{onEmojiSelect:R=>x(R.native),onOpenChange:d,children:u.jsx(o.Generic.Badge.Root,{className:Kt("bn-badge","bn-comment-add-reaction"),text:"+",icon:u.jsx(PM,{size:16}),mainTooltip:s.comments.actions.add_reaction})})]}),a&&u.jsxs(o.Generic.Toolbar.Root,{variant:"action-toolbar",className:Kt("bn-action-toolbar","bn-comment-actions"),children:[u.jsx(o.Generic.Toolbar.Button,{mainTooltip:s.comments.save_button_text,variant:"compact",onClick:m,isDisabled:N,children:s.comments.save_button_text}),u.jsx(o.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:s.comments.cancel_button_text,variant:"compact",onClick:p,children:s.comments.cancel_button_text})]})]}):void 0})})},Uje=({thread:t,maxCommentsBeforeCollapse:e})=>{const n=Ce(),r=Be(),s=R_(t.resolvedBy?[t.resolvedBy]:[]),i=t.comments.map((o,a)=>u.jsx(Hje,{thread:t,comment:o,showResolveButton:a===0},o.id+JSON.stringify(o.body||"{}")));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!s.get(t.resolvedBy))throw new Error(`User ${t.resolvedBy} resolved thread ${t.id}, but their data could not be found.`);const o=t.comments.findLastIndex(a=>t.resolvedUpdatedAt.getTime()>a.createdAt.getTime())+1;i.splice(o,0,u.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&s.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:u.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return e&&i.length>e&&i.splice(1,i.length-2,u.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),i};function zje(){const t=ot(Vs),e=Ce(),n=Be(),r=$1({trailingBlock:!1,dictionary:{...n,placeholders:{emptyDocument:n.placeholders.new_comment}},schema:t.commentEditorSchema||P_});return u.jsx(e.Comments.Card,{className:"bn-thread",children:u.jsx(M_,{autoFocus:!0,editable:!0,editor:r,actions:({isEmpty:s})=>u.jsx(e.Generic.Toolbar.Root,{className:Kt("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:u.jsx(e.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:s,onClick:async()=>{await t.createThread({initialComment:{body:r.document}}),t.stopPendingComment()},children:"Save"})})})})}function Vje(t){const e=Ae(),n=ot(Vs),r=yt(Vs,{editor:e,selector:a=>a.pendingComment}),s=_n({editor:e,selector:({editor:a})=>r?{from:a.prosemirrorState.selection.from,to:a.prosemirrorState.selection.to}:void 0}),i=y.useMemo(()=>({useFloatingOptions:{open:!!r,onOpenChange:a=>{a||(n.stopPendingComment(),e.focus())},placement:"bottom",middleware:[Fs(10),Ol(),ea()]},elementProps:{style:{zIndex:60}},...t.floatingUIOptions}),[n,e,r,t.floatingUIOptions]),o=t.floatingComposer||zje;return u.jsx(O_,{position:s,...i,children:u.jsx(o,{})})}const Wje=Object.freeze(Object.defineProperty({__proto__:null,default:Vje},Symbol.toStringTag,{value:"Module"})),Dz=({thread:t,selected:e,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:s,onBlur:i,tabIndex:o})=>{const a=Ce(),l=Be(),c=ot(Vs),d=$1({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.comment_reply}},schema:c.commentEditorSchema||P_}),h=y.useCallback(async()=>{await c.threadStore.addComment({comment:{body:d.document},threadId:t.id}),d.removeBlocks(d.document)},[c,d,t.id]);return u.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:s,onBlur:i,selected:e,tabIndex:o,children:[u.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:u.jsx(Uje,{thread:t,maxCommentsBeforeCollapse:e?void 0:r||5})}),e&&u.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:u.jsx(M_,{autoFocus:!1,editable:!0,editor:d,actions:({isEmpty:f})=>f?null:u.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:Kt("bn-action-toolbar","bn-comment-actions"),children:u.jsx(a.Generic.Toolbar.Button,{mainTooltip:l.comments.save_button_text,variant:"compact",isDisabled:f,onClick:h,children:l.comments.save_button_text})})})})]})};function qje(){const t=ot(Vs).threadStore,e=y.useRef(void 0);e.current||(e.current=t.getThreads());const n=y.useCallback(r=>t.subscribe(s=>{e.current=s,r()}),[t]);return y.useSyncExternalStore(n,()=>e.current)}function Gje(t){const e=Ae(),n=ot(Vs),r=yt(Vs,{editor:e,selector:l=>l.selectedThreadId?{id:l.selectedThreadId,position:l.threadPositions.get(l.selectedThreadId)}:void 0}),s=qje(),i=y.useMemo(()=>r?s.get(r.id):void 0,[r,s]),o=y.useMemo(()=>({useFloatingOptions:{open:!!r,onOpenChange:(l,c,d)=>{d==="escape-key"&&e.focus(),l||n.selectThread(void 0)},placement:"bottom",middleware:[Fs(10),Ol(),ea()]},elementProps:{style:{zIndex:30}},...t.floatingUIOptions}),[n,e,t.floatingUIOptions,r]),a=t.floatingThread||Dz;return u.jsx(O_,{position:r==null?void 0:r.position,...o,children:i&&u.jsx(a,{thread:i,selected:!0})})}const Yje=Object.freeze(Object.defineProperty({__proto__:null,default:Gje},Symbol.toStringTag,{value:"Module"}));lt.memo(({thread:t,selectedThreadId:e,maxCommentsBeforeCollapse:n,referenceText:r})=>{const s=ot(Vs),i=y.useCallback(a=>{a.target.closest(".bn-action-toolbar")||s.selectThread(t.id)},[s,t.id]),o=y.useCallback(a=>{if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const l=a.target instanceof Node?a.target:null,c=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!l||!c||!c.contains(l))&&s.selectThread(void 0)},[s]);return u.jsx(Dz,{thread:t,selected:t.id===e,referenceText:r,maxCommentsBeforeCollapse:n,onFocus:i,onBlur:o,tabIndex:0})});function Lz(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=n.top<r.top,i=n.bottom>r.bottom;return s&&i?"both":s?"top":i?"bottom":"none"}function Kje(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Zi(t){return Object.keys(t)}function Nk(t){return t&&typeof t=="object"&&!Array.isArray(t)}function D_(t,e){const n={...t},r=e;return Nk(t)&&Nk(e)&&Object.keys(e).forEach(s=>{Nk(r[s])&&s in t?n[s]=D_(n[s],r[s]):n[s]=r[s]}),n}function Jje(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Qje(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function Xje(t){const e=Qje(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function HM(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function Bz(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const s=`${r/16}${t}`;return e?HM(s):s}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(i=>n(i)).join(",");if(r.includes(" "))return r.split(" ").map(i=>n(i)).join(" ");const s=r.replace("px","");if(!Number.isNaN(Number(s))){const i=`${Number(s)/16}${t}`;return e?HM(i):i}}return r}return n}const ne=Bz("rem",{shouldScale:!0}),UM=Bz("em");function F1(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function $z(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function Fz(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==y.Fragment:!1}function H1(t){const e=y.createContext(null);return[({children:s,value:i})=>u.jsx(e.Provider,{value:i,children:s}),()=>{const s=y.useContext(e);if(s===null)throw new Error(t);return s}]}function U1(t=null){const e=y.createContext(t);return[({children:s,value:i})=>u.jsx(e.Provider,{value:i,children:s}),()=>y.useContext(e)]}function zM(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function ey(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function Zje(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].disabled)return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return t}function e4e(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return t}function t4e(t,e,n){return ey(t,n)===ey(e,n)}function L_({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:r=!0,activateOnFocus:s=!1,dir:i="rtl",orientation:o}){return a=>{var m;n==null||n(a);const l=Array.from(((m=ey(a.currentTarget,t))==null?void 0:m.querySelectorAll(e))||[]).filter(g=>t4e(a.currentTarget,g,t)),c=l.findIndex(g=>a.currentTarget===g),d=e4e(c,l,r),h=Zje(c,l,r),f=i==="rtl"?h:d,p=i==="rtl"?d:h;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),s&&l[f].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),s&&l[p].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),s&&l[h].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),s&&l[d].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const g=l.length-1;!l[g].disabled&&l[g].focus();break}}}}const n4e={app:100,modal:200,popover:300,overlay:400,max:9999};function Nm(t){return n4e[t]}const r4e=()=>{};function s4e(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||r4e:n=>{var r;n.key==="Escape"&&(t(n),(r=e.onTrigger)==null||r.call(e))}}function Tt(t,e="size",n=!0){if(t!==void 0)return $z(t)?n?ne(t):t:`var(--${e}-${t})`}function _m(t){return Tt(t,"mantine-spacing")}function or(t){return t===void 0?"var(--mantine-radius-default)":Tt(t,"mantine-radius")}function zr(t){return Tt(t,"mantine-font-size")}function i4e(t){return Tt(t,"mantine-line-height",!1)}function Hz(t){if(t)return Tt(t,"mantine-shadow",!1)}function Dr(t,e){return n=>{t==null||t(n),e==null||e(n)}}function o4e(t,e,n){var r;return n?Array.from(((r=ey(n,e))==null?void 0:r.querySelectorAll(t))||[]).findIndex(s=>s===n):null}function a4e(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}const l4e=["mousedown","touchstart"];function c4e(t,e,n){const r=y.useRef(null),s=e||l4e;return y.useEffect(()=>{const i=o=>{const{target:a}=o??{};if(Array.isArray(n)){const l=!document.body.contains(a)&&(a==null?void 0:a.tagName)!=="HTML";n.every(d=>!!d&&!o.composedPath().includes(d))&&!l&&t(o)}else r.current&&!r.current.contains(a)&&t(o)};return s.forEach(o=>document.addEventListener(o,i)),()=>{s.forEach(o=>document.removeEventListener(o,i))}},[r,t,n]),r}function u4e(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function d4e(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function h4e(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,s]=y.useState(n?e:d4e(t));return y.useEffect(()=>{try{const i=window.matchMedia(t);return s(i.matches),u4e(i,o=>s(o.matches))}catch{return}},[t]),r||!1}const Am=typeof document<"u"?y.useLayoutEffect:y.useEffect;function zp(t,e){const n=y.useRef(!1);y.useEffect(()=>()=>{n.current=!1},[]),y.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function f4e({opened:t,shouldReturnFocus:e=!0}){const n=y.useRef(null),r=()=>{var s;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((s=n.current)==null||s.focus({preventScroll:!0}))};return zp(()=>{let s=-1;const i=o=>{o.key==="Tab"&&window.clearTimeout(s)};return document.addEventListener("keydown",i),t?n.current=document.activeElement:e&&(s=window.setTimeout(r,10)),()=>{window.clearTimeout(s),document.removeEventListener("keydown",i)}},[t,e]),r}const p4e=/input|select|textarea|button|object/,Uz="a, input, select, textarea, button, object, [tabindex]";function m4e(t){return t.style.display==="none"}function g4e(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(m4e(n))return!1;n=n.parentNode}return!0}function zz(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function UC(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(zz(t));return(p4e.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&g4e(t)}function Vz(t){const e=zz(t);return(Number.isNaN(e)||e>=0)&&UC(t)}function b4e(t){return Array.from(t.querySelectorAll(Uz)).filter(Vz)}function x4e(t,e){const n=b4e(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],s=t.getRootNode();let i=r===s.activeElement||t===s.activeElement;const o=s.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(i=n.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===o.getAttribute("name")).includes(r)),!i)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function Wz(t=!0){const e=y.useRef(null),n=s=>{let i=s.querySelector("[data-autofocus]");if(!i){const o=Array.from(s.querySelectorAll(Uz));i=o.find(Vz)||o.find(UC)||null,!i&&UC(s)&&(i=s)}i&&i.focus({preventScroll:!0})},r=y.useCallback(s=>{t&&s!==null&&e.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&n(s)}),e.current=s):e.current=null)},[t]);return y.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const s=i=>{i.key==="Tab"&&e.current&&x4e(e.current,i)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[t]),r}const y4e=lt.useId||(()=>{});function v4e(){const t=y4e();return t?`mantine-${t.replace(/:/g,"")}`:""}function yh(t){const e=v4e(),[n,r]=y.useState(e);return Am(()=>{r(a4e())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function ty(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function z1(...t){const e=new Map;return n=>{if(t.forEach(r=>{const s=ty(r,n);s&&e.set(r,s)}),e.size>0)return()=>{t.forEach(r=>{const s=e.get(r);s&&typeof s=="function"?s():ty(r,null)}),e.clear()}}}function _i(...t){return y.useCallback(z1(...t),t)}function vh({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[s,i]=y.useState(e!==void 0?e:n),o=(a,...l)=>{i(a),r==null||r(a,...l)};return t!==void 0?[t,r,!0]:[s,o,!1]}function w4e(t,e){return h4e("(prefers-reduced-motion: reduce)",t,e)}function k4e(){const[t,e]=y.useState(!1),n=y.useRef(null),r=y.useCallback(()=>{e(!0)},[]),s=y.useCallback(()=>{e(!1)},[]);return{ref:y.useCallback(o=>{n.current&&(n.current.removeEventListener("mouseenter",r),n.current.removeEventListener("mouseleave",s)),o&&(o.addEventListener("mouseenter",r),o.addEventListener("mouseleave",s)),n.current=o},[r,s]),hovered:t}}function E4e(t=!1,e={}){const[n,r]=y.useState(t),s=y.useCallback(()=>{r(a=>{var l;return a||((l=e.onOpen)==null||l.call(e),!0)})},[e.onOpen]),i=y.useCallback(()=>{r(a=>{var l;return a&&((l=e.onClose)==null||l.call(e),!1)})},[e.onClose]),o=y.useCallback(()=>{n?i():s()},[i,s,n]);return[n,{open:s,close:i,toggle:o}]}function C4e(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function S4e({onBlur:t,onFocus:e}={}){const[n,r]=y.useState(!1),s=y.useRef(!1),i=y.useRef(null),o=y.useCallback(d=>{r(d),s.current=d},[]),a=y.useCallback(d=>{s.current||(o(!0),e==null||e(d))},[e]),l=y.useCallback(d=>{s.current&&!C4e(d)&&(o(!1),t==null||t(d))},[t]),c=y.useCallback(d=>{d&&(i.current&&(i.current.removeEventListener("focusin",a),i.current.removeEventListener("focusout",l)),d.addEventListener("focusin",a),d.addEventListener("focusout",l),i.current=d)},[a,l]);return y.useEffect(()=>()=>{i.current&&(i.current.removeEventListener("focusin",a),i.current.removeEventListener("focusout",l))},[]),{ref:c,focused:n}}function B_(t){var n;const e=lt.version;return typeof lt.version!="string"||e.startsWith("18.")?t==null?void 0:t.ref:(n=t==null?void 0:t.props)==null?void 0:n.ref}function jm(t){const e=y.Children.toArray(t);return e.length!==1||!Fz(e[0])?null:e[0]}const T4e={};function N4e(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,s])=>{e[r]?e[r]=fo(e[r],s):e[r]=s})}),e}function V1({theme:t,classNames:e,props:n,stylesCtx:r}){const i=(Array.isArray(e)?e:[e]).map(o=>typeof o=="function"?o(t,n,r):o||T4e);return N4e(i)}function ny({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((i,o)=>typeof o=="function"?{...i,...o(t,n,r)}:{...i,...o},{})}const $_=y.createContext(null);function Il(){const t=y.useContext($_);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function _4e(){return Il().cssVariablesResolver}function A4e(){return Il().classNamesPrefix}function F_(){return Il().getStyleNonce}function j4e(){return Il().withStaticClasses}function O4e(){return Il().headless}function I4e(){var t;return(t=Il().stylesTransform)==null?void 0:t.sx}function M4e(){var t;return(t=Il().stylesTransform)==null?void 0:t.styles}function W1(){return Il().env||"default"}function R4e(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function P4e(t){let e=t.replace("#","");if(e.length===3){const o=e.split("");e=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(e.length===8){const o=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:o}}const n=parseInt(e,16),r=n>>16&255,s=n>>8&255,i=n&255;return{r,g:s,b:i,a:1}}function D4e(t){const[e,n,r,s]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:s===void 0?1:s}}function L4e(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),s=parseInt(n[2],10)/100,i=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*i-1))*s,l=r/60,c=a*(1-Math.abs(l%2-1)),d=i-a/2;let h,f,p;return l>=0&&l<1?(h=a,f=c,p=0):l>=1&&l<2?(h=c,f=a,p=0):l>=2&&l<3?(h=0,f=a,p=c):l>=3&&l<4?(h=0,f=c,p=a):l>=4&&l<5?(h=c,f=0,p=a):(h=a,f=0,p=c),{r:Math.round((h+d)*255),g:Math.round((f+d)*255),b:Math.round((p+d)*255),a:o||1}}function H_(t){return R4e(t)?P4e(t):t.startsWith("rgb")?D4e(t):t.startsWith("hsl")?L4e(t):{r:0,g:0,b:0,a:1}}function J0(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:s,a:i}=H_(t),o=1-e,a=l=>Math.round(l*o);return`rgba(${a(n)}, ${a(r)}, ${a(s)}, ${i})`}function Vp(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function _k(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function B4e(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function $4e(t){if(t.startsWith("oklch("))return(B4e(t)||0)/100;const{r:e,g:n,b:r}=H_(t),s=e/255,i=n/255,o=r/255,a=_k(s),l=_k(i),c=_k(o);return .2126*a+.7152*l+.0722*c}function Yh(t,e=.179){return t.startsWith("var(")?!1:$4e(t)>e}function nu({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Yh(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Yh(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Yh(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,s]=t.split("."),i=s?Number(s):void 0,o=r in e.colors;if(o){const a=i!==void 0?e.colors[r][i]:e.colors[r][Vp(e,n||"light")];return{color:r,value:a,shade:i,isThemeColor:o,isLight:Yh(a,e.luminanceThreshold),variable:s?`--mantine-color-${r}-${i}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:o,isLight:Yh(t,e.luminanceThreshold),shade:i,variable:void 0}}function ta(t,e){const n=nu({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function zC(t,e){const n={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)??e.defaultGradient.deg??0},r=ta(n.from,e),s=ta(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${s} 100%)`}function Fi(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const i=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${i}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:s}=H_(t);return`rgba(${n}, ${r}, ${s}, ${e})`}const vu=Fi,F4e=({color:t,theme:e,variant:n,gradient:r,autoContrast:s})=>{const i=nu({color:t,theme:e}),o=typeof s=="boolean"?s:e.autoContrast;if(n==="none")return{background:"transparent",hover:"transparent",color:"inherit",border:"none"};if(n==="filled"){const a=o&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?i.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${ne(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${i.shade===9?8:i.shade+1})`,color:a,border:`${ne(1)} solid transparent`}:{background:t,hover:J0(t,.1),color:a,border:`${ne(1)} solid transparent`}}if(n==="light"){if(i.isThemeColor){if(i.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${ne(1)} solid transparent`};const a=e.colors[i.color][i.shade];return{background:Fi(a,.1),hover:Fi(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${ne(1)} solid transparent`}}return{background:Fi(t,.1),hover:Fi(t,.12),color:t,border:`${ne(1)} solid transparent`}}if(n==="outline")return i.isThemeColor?i.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${ne(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:Fi(e.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${ne(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:Fi(t,.05),color:t,border:`${ne(1)} solid ${t}`};if(n==="subtle"){if(i.isThemeColor){if(i.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${ne(1)} solid transparent`};const a=e.colors[i.color][i.shade];return{background:"transparent",hover:Fi(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${ne(1)} solid transparent`}}return{background:"transparent",hover:Fi(t,.12),color:t,border:`${ne(1)} solid transparent`}}return n==="transparent"?i.isThemeColor?i.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${ne(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${ne(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${ne(1)} solid transparent`}:n==="white"?i.isThemeColor?i.shade===void 0?{background:"var(--mantine-color-white)",hover:J0(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${ne(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:J0(e.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${ne(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:J0(e.white,.01),color:t,border:`${ne(1)} solid transparent`}:n==="gradient"?{background:zC(r,e),hover:zC(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ne(1)} solid var(--mantine-color-default-border)`}:{}},H4e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},VM="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",U_={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:H4e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:F4e,autoContrast:!1,luminanceThreshold:.3,fontFamily:VM,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:VM,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ne(34),lineHeight:"1.3"},h2:{fontSize:ne(26),lineHeight:"1.35"},h3:{fontSize:ne(22),lineHeight:"1.4"},h4:{fontSize:ne(18),lineHeight:"1.45"},h5:{fontSize:ne(16),lineHeight:"1.5"},h6:{fontSize:ne(14),lineHeight:"1.5"}}},fontSizes:{xs:ne(12),sm:ne(14),md:ne(16),lg:ne(18),xl:ne(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ne(2),sm:ne(4),md:ne(8),lg:ne(16),xl:ne(32)},spacing:{xs:ne(10),sm:ne(12),md:ne(16),lg:ne(20),xl:ne(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ne(1)} ${ne(3)} rgba(0, 0, 0, 0.05), 0 ${ne(1)} ${ne(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ne(1)} ${ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ne(10)} ${ne(15)} ${ne(-5)}, rgba(0, 0, 0, 0.04) 0 ${ne(7)} ${ne(7)} ${ne(-5)}`,md:`0 ${ne(1)} ${ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ne(20)} ${ne(25)} ${ne(-5)}, rgba(0, 0, 0, 0.04) 0 ${ne(10)} ${ne(10)} ${ne(-5)}`,lg:`0 ${ne(1)} ${ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ne(28)} ${ne(23)} ${ne(-7)}, rgba(0, 0, 0, 0.04) 0 ${ne(12)} ${ne(12)} ${ne(-7)}`,xl:`0 ${ne(1)} ${ne(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ne(36)} ${ne(28)} ${ne(-7)}, rgba(0, 0, 0, 0.04) 0 ${ne(17)} ${ne(17)} ${ne(-7)}`},other:{},components:{}};function WM(t){return t==="auto"||t==="dark"||t==="light"}function U4e({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return WM(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&WM(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const z4e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",qM="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Ak(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function GM(t){if(!(t.primaryColor in t.colors))throw new Error(z4e);if(typeof t.primaryShade=="object"&&(!Ak(t.primaryShade.dark)||!Ak(t.primaryShade.light)))throw new Error(qM);if(typeof t.primaryShade=="number"&&!Ak(t.primaryShade))throw new Error(qM)}function V4e(t,e){var r;if(!e)return GM(t),t;const n=D_(t,e);return e.fontFamily&&!((r=e.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=e.fontFamily),GM(n),n}const z_=y.createContext(null),W4e=()=>y.useContext(z_)||U_;function qr(){const t=y.useContext(z_);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function qz({theme:t,children:e,inherit:n=!0}){const r=W4e(),s=y.useMemo(()=>V4e(n?r:U_,t),[t,r,n]);return u.jsx(z_.Provider,{value:s,children:e})}qz.displayName="@mantine/core/MantineThemeProvider";function q4e(){const t=qr(),e=F_(),n=Zi(t.breakpoints).reduce((r,s)=>{const i=t.breakpoints[s].includes("px"),o=Xje(t.breakpoints[s]),a=i?`${o-.1}px`:UM(o-.1),l=i?`${o}px`:UM(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${s} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${s} {display: none !important;}}`},"");return u.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:n}})}function jk(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function Gz(t,e){const n=e?[e]:[":root",":host"],r=jk(t.variables),s=r?`${n.join(", ")}{${r}}`:"",i=jk(t.dark),o=jk(t.light),a=d=>n.map(h=>h===":host"?`${h}([data-mantine-color-scheme="${d}"])`:`${h}[data-mantine-color-scheme="${d}"]`).join(", "),l=i?`${a("dark")}{${i}}`:"",c=o?`${a("light")}{${o}}`:"";return`${s}

${l}

${c}`}function Yz({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&nu({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function YM(t,e){return Yz({color:t.colors[t.primaryColor][Vp(t,e)],theme:t,autoContrast:null})}function Q0({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:s=!0}){if(!t.colors[e])return{};if(n==="light"){const a=Vp(t,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:vu(t.colors[e][a],.1),[`--mantine-color-${r}-light-hover`]:vu(t.colors[e][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:vu(t.colors[e][a],.05)};return s?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...l}:l}const i=Vp(t,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${i})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${i===9?8:i+1})`,[`--mantine-color-${r}-light`]:vu(t.colors[e][Math.max(0,i-2)],.15),[`--mantine-color-${r}-light-hover`]:vu(t.colors[e][Math.max(0,i-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(i-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(i-4,0)})`,[`--mantine-color-${r}-outline-hover`]:vu(t.colors[e][Math.max(i-4,0)],.05)};return s?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...o}:o}function G4e(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function wu(t,e,n){Zi(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const Kz=t=>{const e=Vp(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:ne(t.defaultRadius),r={variables:{"--mantine-z-index-app":"100","--mantine-z-index-modal":"200","--mantine-z-index-popover":"300","--mantine-z-index-overlay":"400","--mantine-z-index-max":"9999","--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-color-scheme":"light","--mantine-primary-color-contrast":YM(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)","--mantine-color-disabled":"var(--mantine-color-gray-2)","--mantine-color-disabled-color":"var(--mantine-color-gray-5)","--mantine-color-disabled-border":"var(--mantine-color-gray-3)"},dark:{"--mantine-color-scheme":"dark","--mantine-primary-color-contrast":YM(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)","--mantine-color-disabled":"var(--mantine-color-dark-6)","--mantine-color-disabled-color":"var(--mantine-color-dark-3)","--mantine-color-disabled-border":"var(--mantine-color-dark-4)"}};wu(r.variables,t.breakpoints,"breakpoint"),wu(r.variables,t.spacing,"spacing"),wu(r.variables,t.fontSizes,"font-size"),wu(r.variables,t.lineHeights,"line-height"),wu(r.variables,t.shadows,"shadow"),wu(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((i,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${t.primaryColor}-${o})`}),Zi(t.colors).forEach(i=>{const o=t.colors[i];if(G4e(o)){Object.assign(r.light,Q0({theme:t,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Q0({theme:t,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,l)=>{r.variables[`--mantine-color-${i}-${l}`]=a}),Object.assign(r.light,Q0({theme:t,color:i,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Q0({theme:t,color:i,colorScheme:"dark",withColorValues:!1}))});const s=t.headings.sizes;return Zi(s).forEach(i=>{r.variables[`--mantine-${i}-font-size`]=s[i].fontSize,r.variables[`--mantine-${i}-line-height`]=s[i].lineHeight,r.variables[`--mantine-${i}-font-weight`]=s[i].fontWeight||t.headings.fontWeight}),r};function Y4e({theme:t,generator:e}){const n=Kz(t),r=e==null?void 0:e(t);return r?D_(n,r):n}const Ok=Kz(U_);function K4e(t){const e={variables:{},light:{},dark:{}};return Zi(t.variables).forEach(n=>{Ok.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),Zi(t.light).forEach(n=>{Ok.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),Zi(t.dark).forEach(n=>{Ok.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function J4e(t){return Gz({variables:{},dark:{"--mantine-color-scheme":"dark"},light:{"--mantine-color-scheme":"light"}},t)}function Jz({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=qr(),r=F_(),s=_4e(),i=Y4e({theme:n,generator:s}),o=(t===void 0||t===":root"||t===":host")&&e,a=o?K4e(i):i,l=Gz(a,t);return l?u.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${o?"":J4e(t)}`}}):null}Jz.displayName="@mantine/CssVariables";function ku(t,e){var s,i;const n=typeof window<"u"&&"matchMedia"in window&&((s=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:s.matches),r=t!=="auto"?t:n?"dark":"light";(i=e())==null||i.setAttribute("data-mantine-color-scheme",r)}function Q4e({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const s=y.useRef(null),[i,o]=y.useState(()=>t.get(e)),a=r||i,l=y.useCallback(d=>{r||(ku(d,n),o(d),t.set(d))},[t.set,a,r]),c=y.useCallback(()=>{o(e),ku(e,n),t.clear()},[t.clear,e]);return y.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),Am(()=>{ku(t.get(e),n)},[]),y.useEffect(()=>{var h;if(r)return ku(r,n),()=>{};r===void 0&&ku(i,n),typeof window<"u"&&"matchMedia"in window&&(s.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=f=>{i==="auto"&&ku(f.matches?"dark":"light",n)};return(h=s.current)==null||h.addEventListener("change",d),()=>{var f;return(f=s.current)==null?void 0:f.removeEventListener("change",d)}},[i,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function X4e({respectReducedMotion:t,getRootElement:e}){Am(()=>{var n;t&&((n=e())==null||n.setAttribute("data-respect-reduced-motion","true"))},[t])}function V_({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:s=!0,deduplicateCssVariables:i=!0,withCssVariables:o=!0,cssVariablesSelector:a,classNamesPrefix:l="mantine",colorSchemeManager:c=U4e(),defaultColorScheme:d="light",getRootElement:h=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:p,stylesTransform:m,env:g}){const{colorScheme:x,setColorScheme:b,clearColorScheme:v}=Q4e({defaultColorScheme:d,forceColorScheme:p,manager:c,getRootElement:h});return X4e({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:h}),u.jsx($_.Provider,{value:{colorScheme:x,setColorScheme:b,clearColorScheme:v,getRootElement:h,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:f,cssVariablesSelector:a??":root",withStaticClasses:r,stylesTransform:m,env:g},children:u.jsxs(qz,{theme:t,children:[o&&u.jsx(Jz,{cssVariablesSelector:a,deduplicateCssVariables:i}),s&&u.jsx(q4e,{}),e]})})}V_.displayName="@mantine/core/MantineProvider";function q1({classNames:t,styles:e,props:n,stylesCtx:r}){const s=qr();return{resolvedClassNames:V1({theme:s,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:ny({theme:s,styles:e,props:n,stylesCtx:r||void 0})}}const Z4e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function e5e({theme:t,options:e,unstyled:n}){return fo((e==null?void 0:e.focusable)&&!n&&(t.focusClassName||Z4e[t.focusRing]),(e==null?void 0:e.active)&&!n&&t.activeClassName)}function t5e({selector:t,stylesCtx:e,options:n,props:r,theme:s}){return V1({theme:s,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:e})[t]}function KM({selector:t,stylesCtx:e,theme:n,classNames:r,props:s}){return V1({theme:n,classNames:r,props:s,stylesCtx:e})[t]}function n5e({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function r5e({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function s5e({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(s=>`${e}-${s}-${n}`)}function i5e({themeName:t,theme:e,selector:n,props:r,stylesCtx:s}){return t.map(i=>{var o,a;return(a=V1({theme:e,classNames:(o=e.components[i])==null?void 0:o.classNames,props:r,stylesCtx:s}))==null?void 0:a[n]})}function o5e({options:t,classes:e,selector:n,unstyled:r}){return t!=null&&t.variant&&!r?e[`${n}--${t.variant}`]:void 0}function a5e({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:s,classNames:i,classes:o,unstyled:a,className:l,rootSelector:c,props:d,stylesCtx:h,withStaticClasses:f,headless:p,transformedStyles:m}){return fo(e5e({theme:t,options:e,unstyled:a||p}),i5e({theme:t,themeName:n,selector:r,props:d,stylesCtx:h}),o5e({options:e,classes:o,selector:r,unstyled:a}),KM({selector:r,stylesCtx:h,theme:t,classNames:i,props:d}),KM({selector:r,stylesCtx:h,theme:t,classNames:m,props:d}),t5e({selector:r,stylesCtx:h,options:e,props:d,theme:t}),n5e({rootSelector:c,selector:r,className:l}),r5e({selector:r,classes:o,unstyled:a||p}),f&&!p&&s5e({themeName:n,classNamesPrefix:s,selector:r,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function l5e({theme:t,themeName:e,props:n,stylesCtx:r,selector:s}){return e.map(i=>{var o;return ny({theme:t,styles:(o=t.components[i])==null?void 0:o.styles,props:n,stylesCtx:r})[s]}).reduce((i,o)=>({...i,...o}),{})}function VC({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...VC({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function c5e(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...F1(n[r])}}),e),{})}function u5e({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:s,selector:i,themeName:o,headless:a}){var l;return(l=c5e([a?{}:e==null?void 0:e(n,r,s),...o.map(c=>{var d,h,f;return(f=(h=(d=n.components)==null?void 0:d[c])==null?void 0:h.vars)==null?void 0:f.call(h,n,r,s)}),t==null?void 0:t(n,r,s)]))==null?void 0:l[i]}function d5e({theme:t,themeName:e,selector:n,options:r,props:s,stylesCtx:i,rootSelector:o,styles:a,style:l,vars:c,varsResolver:d,headless:h,withStylesTransform:f}){return{...!f&&l5e({theme:t,themeName:e,props:s,stylesCtx:i,selector:n}),...!f&&ny({theme:t,styles:a,props:s,stylesCtx:i})[n],...!f&&ny({theme:t,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||s,stylesCtx:i})[n],...u5e({theme:t,props:s,stylesCtx:i,vars:c,varsResolver:d,selector:n,themeName:e,headless:h}),...o===n?VC({style:l,theme:t}):null,...VC({style:r==null?void 0:r.style,theme:t})}}function h5e({props:t,stylesCtx:e,themeName:n}){var o;const r=qr(),s=(o=M4e())==null?void 0:o();return{getTransformedStyles:a=>s?[...a.map(c=>s(c,{props:t,theme:r,ctx:e})),...n.map(c=>{var d;return s((d=r.components[c])==null?void 0:d.styles,{props:t,theme:r,ctx:e})})].filter(Boolean):[],withStylesTransform:!!s}}function Qe({name:t,classes:e,props:n,stylesCtx:r,className:s,style:i,rootSelector:o="root",unstyled:a,classNames:l,styles:c,vars:d,varsResolver:h,attributes:f}){const p=qr(),m=A4e(),g=j4e(),x=O4e(),b=(Array.isArray(t)?t:[t]).filter(S=>S),{withStylesTransform:v,getTransformedStyles:w}=h5e({props:n,stylesCtx:r,themeName:b});return(S,E)=>({className:a5e({theme:p,options:E,themeName:b,selector:S,classNamesPrefix:m,classNames:l,classes:e,unstyled:a,className:s,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:g,headless:x,transformedStyles:w([E==null?void 0:E.styles,c])}),style:d5e({theme:p,themeName:b,selector:S,options:E,props:n,stylesCtx:r,rootSelector:o,styles:c,style:i,vars:d,varsResolver:h,headless:x,withStylesTransform:v}),...f==null?void 0:f[S]})}function f5e(t,e){return typeof t=="boolean"?t:e.autoContrast}function ye(t,e,n){var o;const r=qr(),s=(o=r.components[t])==null?void 0:o.defaultProps,i=typeof s=="function"?s(r):s;return{...e,...i,...F1(n)}}function Ik(t){return Zi(t).reduce((e,n)=>t[n]!==void 0?`${e}${Jje(n)}:${t[n]};`:e,"").trim()}function p5e({selector:t,styles:e,media:n,container:r}){const s=e?Ik(e):"",i=Array.isArray(n)?n.map(a=>`@media${a.query}{${t}{${Ik(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${t}{${Ik(a.styles)}}}`):[];return`${s?`${t}{${s}}`:""}${i.join("")}${o.join("")}`.trim()}function Qz(t){const e=F_();return u.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:p5e(t)}})}function G1(t){const{m:e,mx:n,my:r,mt:s,mb:i,ml:o,mr:a,me:l,ms:c,p:d,px:h,py:f,pt:p,pb:m,pl:g,pr:x,pe:b,ps:v,bd:w,bdrs:S,bg:E,c:C,opacity:T,ff:_,fz:O,fw:N,lts:R,ta:M,lh:W,fs:D,tt:B,td:$,w:V,miw:A,maw:z,h:j,mih:U,mah:H,bgsz:I,bgp:q,bgr:G,bga:Z,pos:te,top:fe,left:K,bottom:pe,right:ke,inset:me,display:Pe,flex:Dt,hiddenFrom:zn,visibleFrom:Gr,lightHidden:yo,darkHidden:vo,sx:lr,...la}=t;return{styleProps:F1({m:e,mx:n,my:r,mt:s,mb:i,ml:o,mr:a,me:l,ms:c,p:d,px:h,py:f,pt:p,pb:m,pl:g,pr:x,pe:b,ps:v,bd:w,bg:E,c:C,opacity:T,ff:_,fz:O,fw:N,lts:R,ta:M,lh:W,fs:D,tt:B,td:$,w:V,miw:A,maw:z,h:j,mih:U,mah:H,bgsz:I,bgp:q,bgr:G,bga:Z,pos:te,top:fe,left:K,bottom:pe,right:ke,inset:me,display:Pe,flex:Dt,bdrs:S,hiddenFrom:zn,visibleFrom:Gr,lightHidden:yo,darkHidden:vo,sx:lr}),rest:la}}const m5e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bdrs:{type:"radius",property:"borderRadius"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function W_(t,e){const n=nu({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function g5e(t,e){const n=nu({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:W_(t,e)}function b5e(t,e){if(typeof t=="number")return ne(t);if(typeof t=="string"){const[n,r,...s]=t.split(" ").filter(o=>o.trim()!=="");let i=`${ne(n)}`;return r&&(i+=` ${r}`),s.length>0&&(i+=` ${W_(s.join(" "),e)}`),i.trim()}return t}const JM={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function x5e(t){return typeof t=="string"&&t in JM?JM[t]:t}const y5e=["h1","h2","h3","h4","h5","h6"];function v5e(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&y5e.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?ne(t):t}function w5e(t){return t}const k5e=["h1","h2","h3","h4","h5","h6"];function E5e(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&k5e.includes(t)?`var(--mantine-${t}-line-height)`:t}function C5e(t,e){return typeof t=="string"&&t in e.radius?`var(--mantine-radius-${t})`:typeof t=="number"||typeof t=="string"?ne(t):t}function S5e(t){return typeof t=="number"?ne(t):t}function T5e(t,e){if(typeof t=="number")return ne(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return ne(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const Mk={color:W_,textColor:g5e,fontSize:v5e,spacing:T5e,radius:C5e,identity:w5e,size:S5e,lineHeight:E5e,fontFamily:x5e,border:b5e};function QM(t){return t.replace("(min-width: ","").replace("em)","")}function N5e({media:t,...e}){const r=Object.keys(t).sort((s,i)=>Number(QM(s))-Number(QM(i))).map(s=>({query:s,styles:t[s]}));return{...e,media:r}}function _5e(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function A5e(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function j5e(t){return typeof t=="object"&&t!==null?Zi(t).filter(e=>e!=="base"):[]}function O5e(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function Xz({styleProps:t,data:e,theme:n}){return N5e(Zi(t).reduce((r,s)=>{if(s==="hiddenFrom"||s==="visibleFrom"||s==="sx")return r;const i=e[s],o=Array.isArray(i.property)?i.property:[i.property],a=A5e(t[s]);if(!_5e(t[s]))return o.forEach(c=>{r.inlineStyles[c]=Mk[i.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=j5e(t[s]);return o.forEach(c=>{a!=null&&(r.styles[c]=Mk[i.type](a,n)),l.forEach(d=>{const h=`(min-width: ${n.breakpoints[d]})`;r.media[h]={...r.media[h],[c]:Mk[i.type](O5e(t[s],d),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function Zz(){return`__m__-${y.useId().replace(/[:]/g,"")}`}function eV(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...eV(r,e)}),{}):typeof t=="function"?t(e):t??{}}function tV(t){return t.startsWith("data-")?t:`data-${t}`}function I5e(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[tV(n)]=t[n]),e},{})}function nV(t){return t?typeof t=="string"?{[tV(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...nV(n)}),{}):I5e(t):null}function WC(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...WC(r,e)}),{}):typeof t=="function"?t(e):t??{}}function M5e({theme:t,style:e,vars:n,styleProps:r}){const s=WC(e,t),i=WC(n,t);return{...s,...i,...r}}const rV=y.forwardRef(({component:t,style:e,__vars:n,className:r,variant:s,mod:i,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:d,renderRoot:h,__size:f,...p},m)=>{var _;const g=qr(),x=t||"div",{styleProps:b,rest:v}=G1(p),w=I4e(),S=(_=w==null?void 0:w())==null?void 0:_(b.sx),E=Zz(),C=Xz({styleProps:b,theme:g,data:m5e}),T={ref:m,style:M5e({theme:g,style:e,vars:n,styleProps:C.inlineStyles}),className:fo(r,S,{[E]:C.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":d,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":s,"data-size":$z(o)?void 0:o||void 0,size:f,...nV(i),...v};return u.jsxs(u.Fragment,{children:[C.hasResponsiveStyles&&u.jsx(Qz,{selector:`.${E}`,styles:C.styles,media:C.media}),typeof h=="function"?h(T):u.jsx(x,{...T})]})});rV.displayName="@mantine/core/Box";const je=rV;function sV(t){return t}function R5e(t){const e=t;return n=>{const r=y.forwardRef((s,i)=>u.jsx(e,{...n,...s,ref:i}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r}}function Xe(t){const e=y.forwardRef(t);return e.extend=sV,e.withProps=n=>{const r=y.forwardRef((s,i)=>u.jsx(e,{...n,...s,ref:i}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function ar(t){const e=y.forwardRef(t);return e.withProps=n=>{const r=y.forwardRef((s,i)=>u.jsx(e,{...n,...s,ref:i}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=sV,e}const P5e=y.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function wh(){return y.useContext(P5e)}var iV={root:"m_87cf2631"};const D5e={__staticSelector:"UnstyledButton"},Ml=ar((t,e)=>{const n=ye("UnstyledButton",D5e,t),{className:r,component:s="button",__staticSelector:i,unstyled:o,classNames:a,styles:l,style:c,attributes:d,...h}=n,f=Qe({name:i,props:n,classes:iV,className:r,style:c,classNames:a,styles:l,unstyled:o,attributes:d});return u.jsx(je,{...f("root",{focusable:!0}),component:s,ref:e,type:s==="button"?"button":void 0,...h})});Ml.classes=iV;Ml.displayName="@mantine/core/UnstyledButton";var oV={root:"m_515a97f8"};const q_=Xe((t,e)=>{const n=ye("VisuallyHidden",null,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,attributes:c,...d}=n,h=Qe({name:"VisuallyHidden",classes:oV,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:c});return u.jsx(je,{component:"span",ref:e,...h("root"),...d})});q_.classes=oV;q_.displayName="@mantine/core/VisuallyHidden";var aV={root:"m_1b7284a3"};const L5e=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:or(e),"--paper-shadow":Hz(n)}}),G_=ar((t,e)=>{const n=ye("Paper",null,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,withBorder:l,vars:c,radius:d,shadow:h,variant:f,mod:p,attributes:m,...g}=n,x=Qe({name:"Paper",props:n,classes:aV,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:m,vars:c,varsResolver:L5e});return u.jsx(je,{ref:e,mod:[{"data-with-border":l},p],...x("root"),variant:f,...g})});G_.classes=aV;G_.displayName="@mantine/core/Paper";function XM(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function ZM(t,e,n,r,s){return t==="center"||r==="center"?{left:e}:t==="end"?{[s==="ltr"?"right":"left"]:n}:t==="start"?{[s==="ltr"?"left":"right"]:n}:{}}const B5e={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function $5e({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:s,arrowX:i,arrowY:o,dir:a}){const[l,c="center"]=t.split("-"),d={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[B5e[l]]:r},h=-e/2;return l==="left"?{...d,...XM(c,o,n,s),right:h,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...d,...XM(c,o,n,s),left:h,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...d,...ZM(c,i,n,s,a),bottom:h,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...d,...ZM(c,i,n,s,a),top:h,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const ry=y.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:s,visible:i,arrowX:o,arrowY:a,style:l,...c},d)=>{const{dir:h}=wh();return i?u.jsx("div",{...c,ref:d,style:{...l,...$5e({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:s,dir:h,arrowX:o,arrowY:a})}}):null});ry.displayName="@mantine/core/FloatingArrow";function lV(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),s=n==="right"?"left":"right";return r===void 0?s:`${s}-${r}`}return e}var cV={root:"m_9814e45f"};const F5e={zIndex:Nm("modal")},H5e=(t,{gradient:e,color:n,backgroundOpacity:r,blur:s,radius:i,zIndex:o})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&Fi(n||"#000",r??.6)||void 0,"--overlay-filter":s?`blur(${ne(s)})`:void 0,"--overlay-radius":i===void 0?void 0:or(i),"--overlay-z-index":o==null?void 0:o.toString()}}),Wp=ar((t,e)=>{const n=ye("Overlay",F5e,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,fixed:c,center:d,children:h,radius:f,zIndex:p,gradient:m,blur:g,color:x,backgroundOpacity:b,mod:v,attributes:w,...S}=n,E=Qe({name:"Overlay",props:n,classes:cV,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:w,vars:l,varsResolver:H5e});return u.jsx(je,{ref:e,...E("root"),mod:[{center:d,fixed:c},v],...S,children:h})});Wp.classes=cV;Wp.displayName="@mantine/core/Overlay";function Rk(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function U5e({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||Rk(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const s=Rk(n);return s.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(s),s}return Rk(n)}const z5e={reuseTargetNode:!0},uV=Xe((t,e)=>{const{children:n,target:r,reuseTargetNode:s,...i}=ye("Portal",z5e,t),[o,a]=y.useState(!1),l=y.useRef(null);return Am(()=>(a(!0),l.current=U5e({target:r,reuseTargetNode:s,...i}),ty(e,l.current),!r&&!s&&l.current&&document.body.appendChild(l.current),()=>{!r&&!s&&l.current&&document.body.removeChild(l.current)}),[r]),!o||!l.current?null:eo.createPortal(u.jsx(u.Fragment,{children:n}),l.current)});uV.displayName="@mantine/core/Portal";const Jd=Xe(({withinPortal:t=!0,children:e,...n},r)=>W1()==="test"||!t?u.jsx(u.Fragment,{children:e}):u.jsx(uV,{ref:r,...n,children:e}));Jd.displayName="@mantine/core/OptionalPortal";const Kh=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),X0={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Kh("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Kh("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Kh("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Kh("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Kh("top"),common:{transformOrigin:"top right"}}},eR={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function V5e({transition:t,state:e,duration:n,timingFunction:r}){const s={WebkitBackfaceVisibility:"hidden",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in X0?{transitionProperty:X0[t].transitionProperty,...s,...X0[t].common,...X0[t][eR[e]]}:{}:{transitionProperty:t.transitionProperty,...s,...t.common,...t[eR[e]]}}function W5e({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:s,onExit:i,onEntered:o,onExited:a,enterDelay:l,exitDelay:c}){const d=qr(),h=w4e(),f=d.respectReducedMotion?h:!1,[p,m]=y.useState(f?0:t),[g,x]=y.useState(r?"entered":"exited"),b=y.useRef(-1),v=y.useRef(-1),w=y.useRef(-1);function S(){window.clearTimeout(b.current),window.clearTimeout(v.current),cancelAnimationFrame(w.current)}const E=T=>{S();const _=T?s:i,O=T?o:a,N=f?0:T?t:e;m(N),N===0?(typeof _=="function"&&_(),typeof O=="function"&&O(),x(T?"entered":"exited")):w.current=requestAnimationFrame(()=>{_6.flushSync(()=>{x(T?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof _=="function"&&_(),x(T?"entering":"exiting"),b.current=window.setTimeout(()=>{typeof O=="function"&&O(),x(T?"entered":"exited")},N)})})},C=T=>{if(S(),typeof(T?l:c)!="number"){E(T);return}v.current=window.setTimeout(()=>{E(T)},T?l:c)};return zp(()=>{C(r)},[r]),y.useEffect(()=>()=>{S()},[]),{transitionDuration:p,transitionStatus:g,transitionTimingFunction:n||"ease"}}function xl({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:s,children:i,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:h,exitDelay:f}){const p=W1(),{transitionDuration:m,transitionStatus:g,transitionTimingFunction:x}=W5e({mounted:s,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:h,exitDelay:f});return m===0||p==="test"?s?u.jsx(u.Fragment,{children:i({})}):t?i({display:"none"}):null:g==="exited"?t?i({display:"none"}):null:u.jsx(u.Fragment,{children:i(V5e({transition:e,duration:m,state:g,timingFunction:x}))})}xl.displayName="@mantine/core/Transition";const[q5e,dV]=H1("Popover component was not found in the tree");function Y_({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const s=Wz(e),i=_i(s,r),o=jm(t);return o?y.cloneElement(o,{[n]:i}):t}function hV(t){return u.jsx(q_,{tabIndex:-1,"data-autofocus":!0,...t})}Y_.displayName="@mantine/core/FocusTrap";hV.displayName="@mantine/core/FocusTrapInitialFocus";Y_.InitialFocus=hV;var fV={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const Y1=Xe((t,e)=>{var x,b,v,w;const n=ye("PopoverDropdown",null,t),{className:r,style:s,vars:i,children:o,onKeyDownCapture:a,variant:l,classNames:c,styles:d,...h}=n,f=dV(),p=f4e({opened:f.opened,shouldReturnFocus:f.returnFocus}),m=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=_i(e,f.floating);return f.disabled?null:u.jsx(Jd,{...f.portalProps,withinPortal:f.withinPortal,children:u.jsx(xl,{mounted:f.opened,...f.transitionProps,transition:((x=f.transitionProps)==null?void 0:x.transition)||"fade",duration:((b=f.transitionProps)==null?void 0:b.duration)??150,keepMounted:f.keepMounted,exitDuration:typeof((v=f.transitionProps)==null?void 0:v.exitDuration)=="number"?f.transitionProps.exitDuration:(w=f.transitionProps)==null?void 0:w.duration,children:S=>u.jsx(Y_,{active:f.trapFocus&&f.opened,innerRef:g,children:u.jsxs(je,{...m,...h,variant:l,onKeyDownCapture:s4e(()=>{var E,C;(E=f.onClose)==null||E.call(f),(C=f.onDismiss)==null||C.call(f)},{active:f.closeOnEscape,onTrigger:p,onKeyDown:a}),"data-position":f.placement,"data-fixed":f.floatingStrategy==="fixed"||void 0,...f.getStyles("dropdown",{className:r,props:n,classNames:c,styles:d,style:[{...S,zIndex:f.zIndex,top:f.y??0,left:f.x??0,width:f.width==="target"?void 0:ne(f.width),...f.referenceHidden?{display:"none"}:null},f.resolvedStyles.dropdown,d==null?void 0:d.dropdown,s]}),children:[o,u.jsx(ry,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,arrowPosition:f.arrowPosition,...f.getStyles("arrow",{props:n,classNames:c,styles:d})})]})})})})});Y1.classes=fV;Y1.displayName="@mantine/core/PopoverDropdown";const G5e={refProp:"ref",popupType:"dialog"},K_=Xe((t,e)=>{const{children:n,refProp:r,popupType:s,...i}=ye("PopoverTarget",G5e,t),o=jm(n);if(!o)throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=i,l=dV(),c=_i(l.reference,B_(o),e),d=l.withRoles?{"aria-haspopup":s,"aria-expanded":l.opened,"aria-controls":l.getDropdownId(),id:l.getTargetId()}:{},h=o.props;return y.cloneElement(o,{...a,...d,...l.targetProps,className:fo(l.targetProps.className,a.className,h.className),[r]:c,...l.controlled?null:{onClick:()=>{var f;l.onToggle(),(f=h.onClick)==null||f.call(h)}}})});K_.displayName="@mantine/core/PopoverTarget";function Y5e(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function K5e(t,e,n){const r=Y5e(t.middlewares),s=[Fs(t.offset),v_e()];return t.dropdownVisible&&n!=="test"&&t.preventPositionChangeWhenVisible&&(r.flip=!1),r.shift&&s.push(Ol(typeof r.shift=="boolean"?{limiter:bM(),padding:5}:{limiter:bM(),padding:5,...r.shift})),r.flip&&s.push(typeof r.flip=="boolean"?ea():ea(r.flip)),r.inline&&s.push(typeof r.inline=="boolean"?Hf():Hf(r.inline)),s.push(XU({element:t.arrowRef,padding:t.arrowOffset})),(r.size||t.width==="target")&&s.push(Up({...typeof r.size=="boolean"?{}:r.size,apply({rects:i,availableWidth:o,availableHeight:a,...l}){var h;const d=((h=e().refs.floating.current)==null?void 0:h.style)??{};r.size&&(typeof r.size=="object"&&r.size.apply?r.size.apply({rects:i,availableWidth:o,availableHeight:a,...l}):Object.assign(d,{maxWidth:`${o}px`,maxHeight:`${a}px`})),t.width==="target"&&Object.assign(d,{width:`${i.reference.width}px`})}})),s}function J5e(t){const e=W1(),[n,r]=vh({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),s=y.useRef(n),i=()=>{n&&!t.disabled&&r(!1)},o=()=>{t.disabled||r(!n)},a=D1({strategy:t.strategy,placement:t.preventPositionChangeWhenVisible?t.positionRef.current:t.position,middleware:K5e(t,()=>a,e),whileElementsMounted:t.keepMounted?void 0:Gx});return y.useEffect(()=>{if(!(!a.refs.reference.current||!a.refs.floating.current)&&n)return Gx(a.refs.reference.current,a.refs.floating.current,a.update)},[n,a.update]),zp(()=>{var l;(l=t.onPositionChange)==null||l.call(t,a.placement),t.positionRef.current=a.placement},[a.placement,t.preventPositionChangeWhenVisible]),zp(()=>{var l,c;n!==s.current&&(n?(c=t.onOpen)==null||c.call(t):(l=t.onClose)==null||l.call(t)),s.current=n},[n,t.onClose,t.onOpen]),Am(()=>{let l=-1;return n&&(l=window.setTimeout(()=>t.setDropdownVisible(!0),4)),()=>{window.clearTimeout(l)}},[n,t.position]),{floating:a,controlled:typeof t.opened=="boolean",opened:n,onClose:i,onToggle:o}}const Q5e={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,hideDetached:!0,clickOutsideEvents:["mousedown","touchstart"],zIndex:Nm("popover"),__staticSelector:"Popover",width:"max-content"},X5e=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:or(e),"--popover-shadow":Hz(n)}});function Ai(t){var Oi,xs,ca,ua,Vn,wo,ys;const e=ye("Popover",Q5e,t),{children:n,position:r,offset:s,onPositionChange:i,positionDependencies:o,opened:a,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:d,width:h,middlewares:f,withArrow:p,arrowSize:m,arrowOffset:g,arrowRadius:x,arrowPosition:b,unstyled:v,classNames:w,styles:S,closeOnClickOutside:E,withinPortal:C,portalProps:T,closeOnEscape:_,clickOutsideEvents:O,trapFocus:N,onClose:R,onDismiss:M,onOpen:W,onChange:D,zIndex:B,radius:$,shadow:V,id:A,defaultOpened:z,__staticSelector:j,withRoles:U,disabled:H,returnFocus:I,variant:q,keepMounted:G,vars:Z,floatingStrategy:te,withOverlay:fe,overlayProps:K,hideDetached:pe,attributes:ke,preventPositionChangeWhenVisible:me,...Pe}=e,Dt=Qe({name:j,props:e,classes:fV,classNames:w,styles:S,unstyled:v,attributes:ke,rootSelector:"dropdown",vars:Z,varsResolver:X5e}),{resolvedStyles:zn}=q1({classNames:w,styles:S,props:e}),[Gr,yo]=y.useState(a??z??!1),vo=y.useRef(r),lr=y.useRef(null),[la,Pm]=y.useState(null),[av,lv]=y.useState(null),{dir:cv}=wh(),uv=W1(),ee=yh(A),oe=J5e({middlewares:f,width:h,position:lV(cv,r),offset:typeof s=="number"?s+(p?m/2:0):s,arrowRef:lr,arrowOffset:g,onPositionChange:i,positionDependencies:o,opened:a,defaultOpened:z,onChange:D,onOpen:W,onClose:R,onDismiss:M,strategy:te,dropdownVisible:Gr,setDropdownVisible:yo,positionRef:vo,disabled:H,preventPositionChangeWhenVisible:me,keepMounted:G});c4e(()=>{E&&(oe.onClose(),M==null||M())},O,[la,av]);const Oe=y.useCallback(Kr=>{Pm(Kr),oe.floating.refs.setReference(Kr)},[oe.floating.refs.setReference]),qe=y.useCallback(Kr=>{lv(Kr),oe.floating.refs.setFloating(Kr)},[oe.floating.refs.setFloating]),dt=y.useCallback(()=>{var Kr;(Kr=l==null?void 0:l.onExited)==null||Kr.call(l),c==null||c(),yo(!1),me||(vo.current=r)},[l==null?void 0:l.onExited,c,me,r]),Yr=y.useCallback(()=>{var Kr;(Kr=l==null?void 0:l.onEntered)==null||Kr.call(l),d==null||d()},[l==null?void 0:l.onEntered,d]);return u.jsxs(q5e,{value:{returnFocus:I,disabled:H,controlled:oe.controlled,reference:Oe,floating:qe,x:oe.floating.x,y:oe.floating.y,arrowX:(ca=(xs=(Oi=oe.floating)==null?void 0:Oi.middlewareData)==null?void 0:xs.arrow)==null?void 0:ca.x,arrowY:(wo=(Vn=(ua=oe.floating)==null?void 0:ua.middlewareData)==null?void 0:Vn.arrow)==null?void 0:wo.y,opened:oe.opened,arrowRef:lr,transitionProps:{...l,onExited:dt,onEntered:Yr},width:h,withArrow:p,arrowSize:m,arrowOffset:g,arrowRadius:x,arrowPosition:b,placement:oe.floating.placement,trapFocus:N,withinPortal:C,portalProps:T,zIndex:B,radius:$,shadow:V,closeOnEscape:_,onDismiss:M,onClose:oe.onClose,onToggle:oe.onToggle,getTargetId:()=>`${ee}-target`,getDropdownId:()=>`${ee}-dropdown`,withRoles:U,targetProps:Pe,__staticSelector:j,classNames:w,styles:S,unstyled:v,variant:q,keepMounted:G,getStyles:Dt,resolvedStyles:zn,floatingStrategy:te,referenceHidden:pe&&uv!=="test"?(ys=oe.floating.middlewareData.hide)==null?void 0:ys.referenceHidden:!1},children:[n,fe&&u.jsx(xl,{transition:"fade",mounted:oe.opened,duration:(l==null?void 0:l.duration)||250,exitDuration:(l==null?void 0:l.exitDuration)||250,children:Kr=>u.jsx(Jd,{withinPortal:C,children:u.jsx(Wp,{...K,...Dt("overlay",{className:K==null?void 0:K.className,style:[Kr,K==null?void 0:K.style]})})})})]})}Ai.Target=K_;Ai.Dropdown=Y1;Ai.displayName="@mantine/core/Popover";Ai.extend=t=>t;var ai={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const pV=y.forwardRef(({className:t,...e},n)=>u.jsxs(je,{component:"span",className:fo(ai.barsLoader,t),...e,ref:n,children:[u.jsx("span",{className:ai.bar}),u.jsx("span",{className:ai.bar}),u.jsx("span",{className:ai.bar})]}));pV.displayName="@mantine/core/Bars";const mV=y.forwardRef(({className:t,...e},n)=>u.jsxs(je,{component:"span",className:fo(ai.dotsLoader,t),...e,ref:n,children:[u.jsx("span",{className:ai.dot}),u.jsx("span",{className:ai.dot}),u.jsx("span",{className:ai.dot})]}));mV.displayName="@mantine/core/Dots";const gV=y.forwardRef(({className:t,...e},n)=>u.jsx(je,{component:"span",className:fo(ai.ovalLoader,t),...e,ref:n}));gV.displayName="@mantine/core/Oval";const bV={bars:pV,oval:gV,dots:mV},Z5e={loaders:bV,type:"oval"},eOe=(t,{size:e,color:n})=>({root:{"--loader-size":Tt(e,"loader-size"),"--loader-color":n?ta(n,t):void 0}}),Rl=Xe((t,e)=>{const n=ye("Loader",Z5e,t),{size:r,color:s,type:i,vars:o,className:a,style:l,classNames:c,styles:d,unstyled:h,loaders:f,variant:p,children:m,attributes:g,...x}=n,b=Qe({name:"Loader",props:n,classes:ai,className:a,style:l,classNames:c,styles:d,unstyled:h,attributes:g,vars:o,varsResolver:eOe});return m?u.jsx(je,{...b("root"),ref:e,...x,children:m}):u.jsx(je,{...b("root"),ref:e,component:f[i],variant:p,size:r,...x})});Rl.defaultLoaders=bV;Rl.classes=ai;Rl.displayName="@mantine/core/Loader";var kh={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const tR={orientation:"horizontal"},tOe=(t,{borderWidth:e})=>({group:{"--ai-border-width":ne(e)}}),J_=Xe((t,e)=>{const n=ye("ActionIconGroup",tR,t),{className:r,style:s,classNames:i,styles:o,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:h,mod:f,attributes:p,...m}=ye("ActionIconGroup",tR,t),g=Qe({name:"ActionIconGroup",props:n,classes:kh,className:r,style:s,classNames:i,styles:o,unstyled:a,attributes:p,vars:c,varsResolver:tOe,rootSelector:"group"});return u.jsx(je,{...g("group"),ref:e,variant:h,mod:[{"data-orientation":l},f],role:"group",...m})});J_.classes=kh;J_.displayName="@mantine/core/ActionIconGroup";const nOe=(t,{radius:e,color:n,gradient:r,variant:s,autoContrast:i,size:o})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:s||"filled",autoContrast:i});return{groupSection:{"--section-height":Tt(o,"section-height"),"--section-padding-x":Tt(o,"section-padding-x"),"--section-fz":zr(o),"--section-radius":e===void 0?void 0:or(e),"--section-bg":n||s?a.background:void 0,"--section-color":a.color,"--section-bd":n||s?a.border:void 0}}},Q_=Xe((t,e)=>{const n=ye("ActionIconGroupSection",null,t),{className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,variant:c,gradient:d,radius:h,autoContrast:f,attributes:p,...m}=n,g=Qe({name:"ActionIconGroupSection",props:n,classes:kh,className:r,style:s,classNames:i,styles:o,unstyled:a,attributes:p,vars:l,varsResolver:nOe,rootSelector:"groupSection"});return u.jsx(je,{...g("groupSection"),ref:e,variant:c,...m})});Q_.classes=kh;Q_.displayName="@mantine/core/ActionIconGroupSection";const rOe=(t,{size:e,radius:n,variant:r,gradient:s,color:i,autoContrast:o})=>{const a=t.variantColorResolver({color:i||t.primaryColor,theme:t,gradient:s,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Tt(e,"ai-size"),"--ai-radius":n===void 0?void 0:or(n),"--ai-bg":i||r?a.background:void 0,"--ai-hover":i||r?a.hover:void 0,"--ai-hover-color":i||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":i||r?a.border:void 0}}},ru=ar((t,e)=>{const n=ye("ActionIcon",null,t),{className:r,unstyled:s,variant:i,classNames:o,styles:a,style:l,loading:c,loaderProps:d,size:h,color:f,radius:p,__staticSelector:m,gradient:g,vars:x,children:b,disabled:v,"data-disabled":w,autoContrast:S,mod:E,attributes:C,...T}=n,_=Qe({name:["ActionIcon",m],props:n,className:r,style:l,classes:kh,classNames:o,styles:a,unstyled:s,attributes:C,vars:x,varsResolver:rOe});return u.jsxs(Ml,{..._("root",{active:!v&&!c&&!w}),...T,unstyled:s,variant:i,size:h,disabled:v||c,ref:e,mod:[{loading:c,disabled:v||w},E],children:[typeof c=="boolean"&&u.jsx(xl,{mounted:c,transition:"slide-down",duration:150,children:O=>u.jsx(je,{component:"span",..._("loader",{style:O}),"aria-hidden":!0,children:u.jsx(Rl,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),u.jsx(je,{component:"span",mod:{loading:c},..._("icon"),children:b})]})});ru.classes=kh;ru.displayName="@mantine/core/ActionIcon";ru.Group=J_;ru.GroupSection=Q_;const xV=y.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>u.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:u.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));xV.displayName="@mantine/core/CloseIcon";var yV={root:"m_86a44da5","root--subtle":"m_220c80f2"};const sOe={variant:"subtle"},iOe=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":Tt(e,"cb-size"),"--cb-radius":n===void 0?void 0:or(n),"--cb-icon-size":ne(r)}}),K1=ar((t,e)=>{const n=ye("CloseButton",sOe,t),{iconSize:r,children:s,vars:i,radius:o,className:a,classNames:l,style:c,styles:d,unstyled:h,"data-disabled":f,disabled:p,variant:m,icon:g,mod:x,attributes:b,__staticSelector:v,...w}=n,S=Qe({name:v||"CloseButton",props:n,className:a,style:c,classes:yV,classNames:l,styles:d,unstyled:h,attributes:b,vars:i,varsResolver:iOe});return u.jsxs(Ml,{ref:e,...w,unstyled:h,variant:m,disabled:p,mod:[{disabled:p||f},x],...S("root",{variant:m,active:!p&&!f}),children:[g||u.jsx(xV,{}),s]})});K1.classes=yV;K1.displayName="@mantine/core/CloseButton";function oOe(t){return y.Children.toArray(t).filter(Boolean)}var vV={root:"m_4081bf90"};const aOe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},lOe=(t,{grow:e,preventGrowOverflow:n,gap:r,align:s,justify:i,wrap:o},{childWidth:a})=>({root:{"--group-child-width":e&&n?a:void 0,"--group-gap":_m(r),"--group-align":s,"--group-justify":i,"--group-wrap":o}}),$n=Xe((t,e)=>{const n=ye("Group",aOe,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,children:l,gap:c,align:d,justify:h,wrap:f,grow:p,preventGrowOverflow:m,vars:g,variant:x,__size:b,mod:v,attributes:w,...S}=n,E=oOe(l),C=E.length,T=_m(c??"md"),O={childWidth:`calc(${100/C}% - (${T} - ${T} / ${C}))`},N=Qe({name:"Group",props:n,stylesCtx:O,className:s,style:i,classes:vV,classNames:r,styles:o,unstyled:a,attributes:w,vars:g,varsResolver:lOe});return u.jsx(je,{...N("root"),ref:e,variant:x,mod:[{grow:p},v],size:b,...S,children:E})});$n.classes=vV;$n.displayName="@mantine/core/Group";const[cOe,uOe]=U1({size:"sm"}),wV=Xe((t,e)=>{const n=ye("InputClearButton",null,t),{size:r,variant:s,vars:i,classNames:o,styles:a,...l}=n,c=uOe(),{resolvedClassNames:d,resolvedStyles:h}=q1({classNames:o,styles:a,props:n});return u.jsx(K1,{variant:s||"transparent",ref:e,size:r||(c==null?void 0:c.size)||"sm",classNames:d,styles:h,__staticSelector:"InputClearButton",style:{pointerEvents:"all",background:"var(--input-bg)",...l.style},...l})});wV.displayName="@mantine/core/InputClearButton";const dOe={xs:7,sm:8,md:10,lg:12,xl:15};function hOe({__clearable:t,__clearSection:e,rightSection:n,__defaultRightSection:r,size:s="sm"}){const i=t&&e;return i&&(n||r)?u.jsxs("div",{"data-combined-clear-section":!0,style:{display:"flex",gap:2,alignItems:"center",paddingInlineEnd:dOe[s]},children:[i,n||r]}):n===null?null:n||i||r}const[fOe,J1]=U1({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Gs={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const pOe=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${zr(e)} - ${ne(2)})`}}),Q1=Xe((t,e)=>{const n=ye("InputDescription",null,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:h=!0,attributes:f,variant:p,...m}=ye("InputDescription",null,n),g=J1(),x=Qe({name:["InputWrapper",d],props:n,classes:Gs,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:f,rootSelector:"description",vars:l,varsResolver:pOe}),b=h&&(g==null?void 0:g.getStyles)||x;return u.jsx(je,{component:"p",ref:e,variant:p,size:c,...b("description",g!=null&&g.getStyles?{className:s,style:i}:void 0),...m})});Q1.classes=Gs;Q1.displayName="@mantine/core/InputDescription";const mOe=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${zr(e)} - ${ne(2)})`}}),X1=Xe((t,e)=>{const n=ye("InputError",null,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,size:c,attributes:d,__staticSelector:h,__inheritStyles:f=!0,variant:p,...m}=n,g=Qe({name:["InputWrapper",h],props:n,classes:Gs,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:d,rootSelector:"error",vars:l,varsResolver:mOe}),x=J1(),b=f&&(x==null?void 0:x.getStyles)||g;return u.jsx(je,{component:"p",ref:e,variant:p,size:c,...b("error",x!=null&&x.getStyles?{className:s,style:i}:void 0),...m})});X1.classes=Gs;X1.displayName="@mantine/core/InputError";const nR={labelElement:"label"},gOe=(t,{size:e})=>({label:{"--input-label-size":zr(e),"--input-asterisk-color":void 0}}),Z1=Xe((t,e)=>{const n=ye("InputLabel",nR,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,labelElement:c,size:d,required:h,htmlFor:f,onMouseDown:p,children:m,__staticSelector:g,variant:x,mod:b,attributes:v,...w}=ye("InputLabel",nR,n),S=Qe({name:["InputWrapper",g],props:n,classes:Gs,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:v,rootSelector:"label",vars:l,varsResolver:gOe}),E=J1(),C=(E==null?void 0:E.getStyles)||S;return u.jsxs(je,{...C("label",E!=null&&E.getStyles?{className:s,style:i}:void 0),component:c,variant:x,size:d,ref:e,htmlFor:c==="label"?f:void 0,mod:[{required:h},b],onMouseDown:T=>{p==null||p(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...w,children:[m,h&&u.jsx("span",{...C("required"),"aria-hidden":!0,children:" *"})]})});Z1.classes=Gs;Z1.displayName="@mantine/core/InputLabel";const X_=Xe((t,e)=>{const n=ye("InputPlaceholder",null,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,__staticSelector:c,variant:d,error:h,mod:f,attributes:p,...m}=n,g=Qe({name:["InputPlaceholder",c],props:n,classes:Gs,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:p,rootSelector:"placeholder"});return u.jsx(je,{...g("placeholder"),mod:[{error:!!h},f],component:"span",variant:d,ref:e,...m})});X_.classes=Gs;X_.displayName="@mantine/core/InputPlaceholder";function bOe(t,{hasDescription:e,hasError:n}){const r=t.findIndex(l=>l==="input"),s=t.slice(0,r),i=t.slice(r+1),o=e&&s.includes("description")||n&&s.includes("error");return{offsetBottom:e&&i.includes("description")||n&&i.includes("error"),offsetTop:o}}const xOe={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},yOe=(t,{size:e})=>({label:{"--input-label-size":zr(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${zr(e)} - ${ne(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${zr(e)} - ${ne(2)})`}}),Z_=Xe((t,e)=>{const n=ye("InputWrapper",xOe,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,size:c,variant:d,__staticSelector:h,inputContainer:f,inputWrapperOrder:p,label:m,error:g,description:x,labelProps:b,descriptionProps:v,errorProps:w,labelElement:S,children:E,withAsterisk:C,id:T,required:_,__stylesApiProps:O,mod:N,attributes:R,...M}=n,W=Qe({name:["InputWrapper",h],props:O||n,classes:Gs,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:R,vars:l,varsResolver:yOe}),D={size:c,variant:d,__staticSelector:h},B=yh(T),$=typeof C=="boolean"?C:_,V=(w==null?void 0:w.id)||`${B}-error`,A=(v==null?void 0:v.id)||`${B}-description`,z=B,j=!!g&&typeof g!="boolean",U=!!x,H=`${j?V:""} ${U?A:""}`,I=H.trim().length>0?H.trim():void 0,q=(b==null?void 0:b.id)||`${B}-label`,G=m&&u.jsx(Z1,{labelElement:S,id:q,htmlFor:z,required:$,...D,...b,children:m},"label"),Z=U&&u.jsx(Q1,{...v,...D,size:(v==null?void 0:v.size)||D.size,id:(v==null?void 0:v.id)||A,children:x},"description"),te=u.jsx(y.Fragment,{children:f(E)},"input"),fe=j&&y.createElement(X1,{...w,...D,size:(w==null?void 0:w.size)||D.size,key:"error",id:(w==null?void 0:w.id)||V},g),K=p.map(pe=>{switch(pe){case"label":return G;case"input":return te;case"description":return Z;case"error":return fe;default:return null}});return u.jsx(fOe,{value:{getStyles:W,describedBy:I,inputId:z,labelId:q,...bOe(p,{hasDescription:U,hasError:j})},children:u.jsx(je,{ref:e,variant:d,size:c,mod:[{error:!!g},N],...W("root"),...M,children:K})})});Z_.classes=Gs;Z_.displayName="@mantine/core/InputWrapper";const vOe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0,size:"sm"},wOe=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Tt(e.size,"input-height"),"--input-fz":zr(e.size),"--input-radius":e.radius===void 0?void 0:or(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?ne(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?ne(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?Tt(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),ps=ar((t,e)=>{const n=ye("Input",vOe,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:d,size:h,wrapperProps:f,error:p,disabled:m,leftSection:g,leftSectionProps:x,leftSectionWidth:b,rightSection:v,rightSectionProps:w,rightSectionWidth:S,rightSectionPointerEvents:E,leftSectionPointerEvents:C,variant:T,vars:_,pointer:O,multiline:N,radius:R,id:M,withAria:W,withErrorStyles:D,mod:B,inputSize:$,attributes:V,__clearSection:A,__clearable:z,__defaultRightSection:j,...U}=n,{styleProps:H,rest:I}=G1(U),q=J1(),G={offsetBottom:q==null?void 0:q.offsetBottom,offsetTop:q==null?void 0:q.offsetTop},Z=Qe({name:["Input",c],props:d||n,classes:Gs,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:V,stylesCtx:G,rootSelector:"wrapper",vars:_,varsResolver:wOe}),te=W?{required:l,disabled:m,"aria-invalid":!!p,"aria-describedby":q==null?void 0:q.describedBy,id:(q==null?void 0:q.inputId)||M}:{},fe=hOe({__clearable:z,__clearSection:A,rightSection:v,__defaultRightSection:j,size:h});return u.jsx(cOe,{value:{size:h||"sm"},children:u.jsxs(je,{...Z("wrapper"),...H,...f,mod:[{error:!!p&&D,pointer:O,disabled:m,multiline:N,"data-with-right-section":!!fe,"data-with-left-section":!!g},B],variant:T,size:h,children:[g&&u.jsx("div",{...x,"data-position":"left",...Z("section",{className:x==null?void 0:x.className,style:x==null?void 0:x.style}),children:g}),u.jsx(je,{component:"input",...I,...te,ref:e,required:l,mod:{disabled:m,error:!!p&&D},variant:T,__size:$,...Z("input")}),fe&&u.jsx("div",{...w,"data-position":"right",...Z("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:fe})]})})});ps.classes=Gs;ps.Wrapper=Z_;ps.Label=Z1;ps.Error=X1;ps.Description=Q1;ps.Placeholder=X_;ps.ClearButton=wV;ps.displayName="@mantine/core/Input";function kOe(t,e,n){const r=ye(t,e,n),{label:s,description:i,error:o,required:a,classNames:l,styles:c,className:d,unstyled:h,__staticSelector:f,__stylesApiProps:p,errorProps:m,labelProps:g,descriptionProps:x,wrapperProps:b,id:v,size:w,style:S,inputContainer:E,inputWrapperOrder:C,withAsterisk:T,variant:_,vars:O,mod:N,attributes:R,...M}=r,{styleProps:W,rest:D}=G1(M),B={label:s,description:i,error:o,required:a,classNames:l,className:d,__staticSelector:f,__stylesApiProps:p||r,errorProps:m,labelProps:g,descriptionProps:x,unstyled:h,styles:c,size:w,style:S,inputContainer:E,inputWrapperOrder:C,withAsterisk:T,variant:_,id:v,mod:N,attributes:R,...b};return{...D,classNames:l,styles:c,unstyled:h,wrapperProps:{...B,...W},inputProps:{required:a,classNames:l,styles:c,unstyled:h,size:w,__staticSelector:f,__stylesApiProps:p||r,error:o,variant:_,id:v,attributes:R}}}const EOe={__staticSelector:"InputBase",withAria:!0,size:"sm"},Eh=ar((t,e)=>{const{inputProps:n,wrapperProps:r,...s}=kOe("InputBase",EOe,t);return u.jsx(ps.Wrapper,{...r,children:u.jsx(ps,{...n,...s,ref:e})})});Eh.classes={...ps.classes,...ps.Wrapper.classes};Eh.displayName="@mantine/core/InputBase";const COe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var kV={root:"m_8bffd616"};const eA=ar((t,e)=>{const n=ye("Flex",null,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,gap:c,rowGap:d,columnGap:h,align:f,justify:p,wrap:m,direction:g,attributes:x,...b}=n,v=Qe({name:"Flex",classes:kV,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:x,vars:l}),w=qr(),S=Zz(),E=Xz({styleProps:{gap:c,rowGap:d,columnGap:h,align:f,justify:p,wrap:m,direction:g},theme:w,data:COe});return u.jsxs(u.Fragment,{children:[E.hasResponsiveStyles&&u.jsx(Qz,{selector:`.${S}`,styles:E.styles,media:E.media}),u.jsx(je,{ref:e,...v("root",{className:S,style:F1(E.inlineStyles)}),...b})]})});eA.classes=kV;eA.displayName="@mantine/core/Flex";function EV({open:t,close:e,openDelay:n,closeDelay:r}){const s=y.useRef(-1),i=y.useRef(-1),o=()=>{window.clearTimeout(s.current),window.clearTimeout(i.current)},a=()=>{o(),n===0||n===void 0?t():s.current=window.setTimeout(t,n)},l=()=>{o(),r===0||r===void 0?e():i.current=window.setTimeout(e,r)};return y.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:l}}function CV({style:t,size:e=16,...n}){return u.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:ne(e),height:ne(e),display:"block"},...n,children:u.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}CV.displayName="@mantine/core/AccordionChevron";var SV={root:"m_b6d8b162"};function SOe(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const TOe={inherit:!1},NOe=(t,{variant:e,lineClamp:n,gradient:r,size:s,color:i})=>({root:{"--text-fz":zr(s),"--text-lh":i4e(s),"--text-gradient":e==="gradient"?zC(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":i?ta(i,t):void 0}}),uo=ar((t,e)=>{const n=ye("Text",TOe,t),{lineClamp:r,truncate:s,inline:i,inherit:o,gradient:a,span:l,__staticSelector:c,vars:d,className:h,style:f,classNames:p,styles:m,unstyled:g,variant:x,mod:b,size:v,attributes:w,...S}=n,E=Qe({name:["Text",c],props:n,classes:SV,className:h,style:f,classNames:p,styles:m,unstyled:g,attributes:w,vars:d,varsResolver:NOe});return u.jsx(je,{...E("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:x,mod:[{"data-truncate":SOe(s),"data-line-clamp":typeof r=="number","data-inline":i,"data-inherit":o},b],size:v,...S})});uo.classes=SV;uo.displayName="@mantine/core/Text";function sy({size:t,style:e,...n}){const r=t!==void 0?{width:ne(t),height:ne(t),...e}:e;return u.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:u.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const TV=y.createContext(null),_Oe=TV.Provider;function AOe(){return{withinGroup:!!y.useContext(TV)}}var ev={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const jOe=(t,{spacing:e})=>({group:{"--ag-spacing":_m(e)}}),tA=Xe((t,e)=>{const n=ye("AvatarGroup",null,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,spacing:c,attributes:d,...h}=n,f=Qe({name:"AvatarGroup",classes:ev,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:d,vars:l,varsResolver:jOe,rootSelector:"group"});return u.jsx(_Oe,{value:!0,children:u.jsx(je,{ref:e,...f("group"),...h})})});tA.classes=ev;tA.displayName="@mantine/core/AvatarGroup";function OOe(t){return u.jsx("svg",{...t,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function IOe(t){let e=0;for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e}const MOe=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function ROe(t,e=MOe){const n=IOe(t),r=Math.abs(n)%e.length;return e[r]}function POe(t,e=2){const n=t.split(" ");return n.length===1?t.slice(0,e).toUpperCase():n.map(r=>r[0]).slice(0,e).join("").toUpperCase()}const DOe=(t,{size:e,radius:n,variant:r,gradient:s,color:i,autoContrast:o,name:a,allowedInitialsColors:l})=>{const c=i==="initials"&&typeof a=="string"?ROe(a,l):i,d=t.variantColorResolver({color:c||"gray",theme:t,gradient:s,variant:r||"light",autoContrast:o});return{root:{"--avatar-size":Tt(e,"avatar-size"),"--avatar-radius":n===void 0?void 0:or(n),"--avatar-bg":c||r?d.background:void 0,"--avatar-color":c||r?d.color:void 0,"--avatar-bd":c||r?d.border:void 0}}},tv=ar((t,e)=>{const n=ye("Avatar",null,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,src:c,alt:d,radius:h,color:f,gradient:p,imageProps:m,children:g,autoContrast:x,mod:b,name:v,allowedInitialsColors:w,attributes:S,...E}=n,C=AOe(),[T,_]=y.useState(!c),O=Qe({name:"Avatar",props:n,classes:ev,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:S,vars:l,varsResolver:DOe});return y.useEffect(()=>_(!c),[c]),u.jsx(je,{...O("root"),mod:[{"within-group":C.withinGroup},b],ref:e,...E,children:T||!c?u.jsx("span",{...O("placeholder"),title:d,children:g||typeof v=="string"&&POe(v)||u.jsx(OOe,{})}):u.jsx("img",{...m,...O("image"),src:c,alt:d,onError:N=>{var R;_(!0),(R=m==null?void 0:m.onError)==null||R.call(m,N)}})})});tv.classes=ev;tv.displayName="@mantine/core/Avatar";tv.Group=tA;var NV={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const LOe=(t,{radius:e,color:n,gradient:r,variant:s,size:i,autoContrast:o,circle:a})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:s||"filled",autoContrast:o});return{root:{"--badge-height":Tt(i,"badge-height"),"--badge-padding-x":Tt(i,"badge-padding-x"),"--badge-fz":Tt(i,"badge-fz"),"--badge-radius":a||e===void 0?void 0:or(e),"--badge-bg":n||s?l.background:void 0,"--badge-color":n||s?l.color:void 0,"--badge-bd":n||s?l.border:void 0,"--badge-dot-color":s==="dot"?ta(n,t):void 0}}},nA=ar((t,e)=>{const n=ye("Badge",null,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,radius:c,color:d,gradient:h,leftSection:f,rightSection:p,children:m,variant:g,fullWidth:x,autoContrast:b,circle:v,mod:w,attributes:S,...E}=n,C=Qe({name:"Badge",props:n,classes:NV,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:S,vars:l,varsResolver:LOe});return u.jsxs(je,{variant:g,mod:[{block:x,circle:v,"with-right-section":!!p,"with-left-section":!!f},w],...C("root",{variant:g}),ref:e,...E,children:[f&&u.jsx("span",{...C("section"),"data-position":"left",children:f}),u.jsx("span",{...C("label"),children:m}),p&&u.jsx("span",{...C("section"),"data-position":"right",children:p})]})});nA.classes=NV;nA.displayName="@mantine/core/Badge";var Ch={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const rR={orientation:"horizontal"},BOe=(t,{borderWidth:e})=>({group:{"--button-border-width":ne(e)}}),rA=Xe((t,e)=>{const n=ye("ButtonGroup",rR,t),{className:r,style:s,classNames:i,styles:o,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:h,mod:f,attributes:p,...m}=ye("ButtonGroup",rR,t),g=Qe({name:"ButtonGroup",props:n,classes:Ch,className:r,style:s,classNames:i,styles:o,unstyled:a,attributes:p,vars:c,varsResolver:BOe,rootSelector:"group"});return u.jsx(je,{...g("group"),ref:e,variant:h,mod:[{"data-orientation":l},f],role:"group",...m})});rA.classes=Ch;rA.displayName="@mantine/core/ButtonGroup";const $Oe=(t,{radius:e,color:n,gradient:r,variant:s,autoContrast:i,size:o})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:s||"filled",autoContrast:i});return{groupSection:{"--section-height":Tt(o,"section-height"),"--section-padding-x":Tt(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?zr(o.replace("compact-","")):zr(o),"--section-radius":e===void 0?void 0:or(e),"--section-bg":n||s?a.background:void 0,"--section-color":a.color,"--section-bd":n||s?a.border:void 0}}},sA=Xe((t,e)=>{const n=ye("ButtonGroupSection",null,t),{className:r,style:s,classNames:i,styles:o,unstyled:a,vars:l,variant:c,gradient:d,radius:h,autoContrast:f,attributes:p,...m}=n,g=Qe({name:"ButtonGroupSection",props:n,classes:Ch,className:r,style:s,classNames:i,styles:o,unstyled:a,attributes:p,vars:l,varsResolver:$Oe,rootSelector:"groupSection"});return u.jsx(je,{...g("groupSection"),ref:e,variant:c,...m})});sA.classes=Ch;sA.displayName="@mantine/core/ButtonGroupSection";const FOe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ne(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},HOe=(t,{radius:e,color:n,gradient:r,variant:s,size:i,justify:o,autoContrast:a})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:s||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Tt(i,"button-height"),"--button-padding-x":Tt(i,"button-padding-x"),"--button-fz":i!=null&&i.includes("compact")?zr(i.replace("compact-","")):zr(i),"--button-radius":e===void 0?void 0:or(e),"--button-bg":n||s?l.background:void 0,"--button-hover":n||s?l.hover:void 0,"--button-color":l.color,"--button-bd":n||s?l.border:void 0,"--button-hover-color":n||s?l.hoverColor:void 0}}},ji=ar((t,e)=>{const n=ye("Button",null,t),{style:r,vars:s,className:i,color:o,disabled:a,children:l,leftSection:c,rightSection:d,fullWidth:h,variant:f,radius:p,loading:m,loaderProps:g,gradient:x,classNames:b,styles:v,unstyled:w,"data-disabled":S,autoContrast:E,mod:C,attributes:T,..._}=n,O=Qe({name:"Button",props:n,classes:Ch,className:i,style:r,classNames:b,styles:v,unstyled:w,attributes:T,vars:s,varsResolver:HOe}),N=!!c,R=!!d;return u.jsxs(Ml,{ref:e,...O("root",{active:!a&&!m&&!S}),unstyled:w,variant:f,disabled:a||m,mod:[{disabled:a||S,loading:m,block:h,"with-left-section":N,"with-right-section":R},C],..._,children:[typeof m=="boolean"&&u.jsx(xl,{mounted:m,transition:FOe,duration:150,children:M=>u.jsx(je,{component:"span",...O("loader",{style:M}),"aria-hidden":!0,children:u.jsx(Rl,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...g})})}),u.jsxs("span",{...O("inner"),children:[c&&u.jsx(je,{component:"span",...O("section"),mod:{position:"left"},children:c}),u.jsx(je,{component:"span",mod:{loading:m},...O("label"),children:l}),d&&u.jsx(je,{component:"span",...O("section"),mod:{position:"right"},children:d})]})]})});ji.classes=Ch;ji.displayName="@mantine/core/Button";ji.Group=rA;ji.GroupSection=sA;const[UOe,zOe]=H1("Card component was not found in tree");var iA={root:"m_e615b15f",section:"m_599a2148"};const nv=ar((t,e)=>{const n=ye("CardSection",null,t),{classNames:r,className:s,style:i,styles:o,vars:a,withBorder:l,inheritPadding:c,mod:d,...h}=n,f=zOe();return u.jsx(je,{ref:e,mod:[{"with-border":l,"inherit-padding":c},d],...f.getStyles("section",{className:s,style:i,styles:o,classNames:r}),...h})});nv.classes=iA;nv.displayName="@mantine/core/CardSection";const VOe=(t,{padding:e})=>({root:{"--card-padding":_m(e)}}),Om=ar((t,e)=>{const n=ye("Card",null,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,children:c,padding:d,attributes:h,...f}=n,p=Qe({name:"Card",props:n,classes:iA,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:h,vars:l,varsResolver:VOe}),m=y.Children.toArray(c),g=m.map((x,b)=>typeof x=="object"&&x&&"type"in x&&x.type===nv?y.cloneElement(x,{"data-first-section":b===0||void 0,"data-last-section":b===m.length-1||void 0}):x);return u.jsx(UOe,{value:{getStyles:p},children:u.jsx(G_,{ref:e,unstyled:a,...p("root"),...f,children:g})})});Om.classes=iA;Om.displayName="@mantine/core/Card";Om.Section=nv;const[WOe,qOe]=U1();function _V(t){const{value:e,defaultValue:n,onChange:r,multiple:s,children:i}=ye("ChipGroup",null,t),[o,a]=vh({value:e,defaultValue:n,finalValue:s?[]:null,onChange:r}),l=d=>Array.isArray(o)?o.includes(d):d===o,c=d=>{const h=d.currentTarget.value;Array.isArray(o)?a(o.includes(h)?o.filter(f=>f!==h):[...o,h]):a(h)};return u.jsx(WOe,{value:{isChipSelected:l,onChange:c,multiple:s},children:i})}_V.displayName="@mantine/core/ChipGroup";var AV={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const GOe={type:"checkbox"},YOe=(t,{size:e,radius:n,variant:r,color:s,autoContrast:i})=>{const o=t.variantColorResolver({color:s||t.primaryColor,theme:t,variant:r||"filled",autoContrast:i});return{root:{"--chip-fz":zr(e),"--chip-size":Tt(e,"chip-size"),"--chip-radius":n===void 0?void 0:or(n),"--chip-checked-padding":Tt(e,"chip-checked-padding"),"--chip-padding":Tt(e,"chip-padding"),"--chip-icon-size":Tt(e,"chip-icon-size"),"--chip-bg":s||r?o.background:void 0,"--chip-hover":s||r?o.hover:void 0,"--chip-color":s||r?o.color:void 0,"--chip-bd":s||r?o.border:void 0,"--chip-spacing":Tt(e,"chip-spacing")}}},rv=Xe((t,e)=>{const n=ye("Chip",GOe,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,id:c,checked:d,defaultChecked:h,onChange:f,value:p,wrapperProps:m,type:g,disabled:x,children:b,size:v,variant:w,icon:S,rootRef:E,autoContrast:C,mod:T,attributes:_,...O}=n,N=Qe({name:"Chip",classes:AV,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:_,vars:l,varsResolver:YOe}),R=qOe(),M=yh(c),{styleProps:W,rest:D}=G1(O),[B,$]=vh({value:d,defaultValue:h,finalValue:!1,onChange:f}),V=R?{checked:R.isChipSelected(p),onChange:z=>{R.onChange(z),f==null||f(z.currentTarget.checked)},type:R.multiple?"checkbox":"radio"}:{},A=V.checked||B;return u.jsxs(je,{size:v,variant:w,ref:E,mod:T,...N("root"),...W,...m,children:[u.jsx("input",{type:g,...N("input"),checked:A,onChange:z=>$(z.currentTarget.checked),id:M,disabled:x,ref:e,value:p,...V,...D}),u.jsxs("label",{htmlFor:M,"data-checked":A||void 0,"data-disabled":x||void 0,...N("label",{variant:w||"filled"}),children:[A&&S!==null&&S!==!1&&u.jsx("span",{...N("iconWrapper"),children:S===void 0?u.jsx(sy,{...N("checkIcon")}):S}),u.jsx("span",{children:b})]})]})});rv.classes=AV;rv.displayName="@mantine/core/Chip";rv.Group=_V;var jV={root:"m_3eebeb36",label:"m_9e365f20"};const KOe={orientation:"horizontal"},JOe=(t,{color:e,variant:n,size:r})=>({root:{"--divider-color":e?ta(e,t):void 0,"--divider-border-style":n,"--divider-size":Tt(r,"divider-size")}}),oA=Xe((t,e)=>{const n=ye("Divider",KOe,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,color:c,orientation:d,label:h,labelPosition:f,mod:p,attributes:m,...g}=n,x=Qe({name:"Divider",classes:jV,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:m,vars:l,varsResolver:JOe});return u.jsx(je,{ref:e,mod:[{orientation:d,"with-label":!!h},p],...x("root"),...g,role:"separator",children:h&&u.jsx(je,{component:"span",mod:{position:f},...x("label"),children:h})})});oA.classes=jV;oA.displayName="@mantine/core/Divider";const QOe={multiple:!1},OV=y.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:s,accept:i,name:o,form:a,resetRef:l,disabled:c,capture:d,inputProps:h,...f}=ye("FileButton",QOe,t),p=y.useRef(null),m=()=>{var b;!c&&((b=p.current)==null||b.click())},g=b=>{if(b.currentTarget.files===null)return n(s?[]:null);n(s?Array.from(b.currentTarget.files):b.currentTarget.files[0]||null)};return ty(l,()=>{p.current&&(p.current.value="")}),u.jsxs(u.Fragment,{children:[u.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:s,onChange:g,ref:_i(e,p),name:o,form:a,capture:d,...h}),r({onClick:m,...f})]})});OV.displayName="@mantine/core/FileButton";const XOe=({value:t})=>u.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t==null?void 0:t.name}),ZOe={valueComponent:XOe},aA=Xe((t,e)=>{const n=ye("FileInput",ZOe,t),{unstyled:r,vars:s,onChange:i,value:o,defaultValue:a,multiple:l,accept:c,name:d,form:h,valueComponent:f,clearable:p,clearButtonProps:m,readOnly:g,capture:x,fileInputProps:b,rightSection:v,size:w,placeholder:S,component:E,resetRef:C,classNames:T,styles:_,attributes:O,...N}=n,R=y.useRef(null),{resolvedClassNames:M,resolvedStyles:W}=q1({classNames:T,styles:_,props:n}),[D,B]=vh({value:o,defaultValue:a,onChange:i,finalValue:l?[]:null}),$=Array.isArray(D)?D.length!==0:D!==null,V=v||(p&&$&&!g?u.jsx(K1,{...m,variant:"subtle",onClick:()=>B(l?[]:null),size:w,unstyled:r}):null);return y.useEffect(()=>{var A;(Array.isArray(D)&&D.length===0||D===null)&&((A=R.current)==null||A.call(R))},[D]),u.jsx(OV,{onChange:B,multiple:l,accept:c,name:d,form:h,resetRef:_i(R,C),disabled:g,capture:x,inputProps:b,children:A=>u.jsx(Eh,{component:E||"button",ref:e,rightSection:V,...A,...N,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:w,classNames:T,styles:_,attributes:O,children:$?u.jsx(f,{value:D}):u.jsx(ps.Placeholder,{__staticSelector:"FileInput",classNames:M,styles:W,attributes:O,children:S})})})});aA.classes=Eh.classes;aA.displayName="@mantine/core/FileInput";const eIe=aA;var IV={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const sR={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Nm("overlay")},tIe=(t,{zIndex:e})=>({root:{"--lo-z-index":e==null?void 0:e.toString()}}),lA=Xe((t,e)=>{const n=ye("LoadingOverlay",sR,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,transitionProps:c,loaderProps:d,overlayProps:h,visible:f,zIndex:p,attributes:m,...g}=n,x=qr(),b=Qe({name:"LoadingOverlay",classes:IV,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:m,vars:l,varsResolver:tIe}),v={...sR.overlayProps,...h};return u.jsx(xl,{transition:"fade",...c,mounted:!!f,children:w=>u.jsxs(je,{...b("root",{style:w}),ref:e,...g,children:[u.jsx(Rl,{...b("loader"),unstyled:a,...d}),u.jsx(Wp,{...v,...b("overlay"),darkHidden:!0,unstyled:a,color:(h==null?void 0:h.color)||x.white}),u.jsx(Wp,{...v,...b("overlay"),lightHidden:!0,unstyled:a,color:(h==null?void 0:h.color)||x.colors.dark[5]})]})})});lA.classes=IV;lA.displayName="@mantine/core/LoadingOverlay";const[nIe,Pl]=H1("Menu component was not found in the tree");var Dl={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504",chevron:"m_b85b0bed"};const cA=Xe((t,e)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=ye("MenuDivider",null,t),l=Pl();return u.jsx(je,{ref:e,...l.getStyles("divider",{className:r,style:s,styles:i,classNames:n}),...a})});cA.classes=Dl;cA.displayName="@mantine/core/MenuDivider";const uA=Xe((t,e)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:d,...h}=ye("MenuDropdown",null,t),f=y.useRef(null),p=Pl(),m=Dr(c,b=>{var v,w;(b.key==="ArrowUp"||b.key==="ArrowDown")&&(b.preventDefault(),(w=(v=f.current)==null?void 0:v.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),g=Dr(a,()=>(p.trigger==="hover"||p.trigger==="click-hover")&&p.openDropdown()),x=Dr(l,()=>(p.trigger==="hover"||p.trigger==="click-hover")&&p.closeDropdown());return u.jsxs(Ai.Dropdown,{...h,onMouseEnter:g,onMouseLeave:x,role:"menu","aria-orientation":"vertical",ref:_i(e,f),...p.getStyles("dropdown",{className:r,style:s,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:m,children:[p.withInitialFocusPlaceholder&&u.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),d]})});uA.classes=Dl;uA.displayName="@mantine/core/MenuDropdown";const[rIe,sv]=U1(),dA=ar((t,e)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,color:a,closeMenuOnClick:l,leftSection:c,rightSection:d,children:h,disabled:f,"data-disabled":p,...m}=ye("MenuItem",null,t),g=Pl(),x=sv(),b=qr(),{dir:v}=wh(),w=y.useRef(null),S=m,E=Dr(S.onClick,()=>{p||(typeof l=="boolean"?l&&g.closeDropdownImmediately():g.closeOnItemClick&&g.closeDropdownImmediately())}),C=a?b.variantColorResolver({color:a,theme:b,variant:"light"}):void 0,T=a?nu({color:a,theme:b}):null,_=Dr(S.onKeyDown,O=>{O.key==="ArrowLeft"&&x&&(x.close(),x.focusParentItem())});return u.jsxs(Ml,{onMouseDown:O=>O.preventDefault(),...m,unstyled:g.unstyled,tabIndex:g.menuItemTabIndex,...g.getStyles("item",{className:r,style:s,styles:i,classNames:n}),ref:_i(w,e),role:"menuitem",disabled:f,"data-menu-item":!0,"data-disabled":f||p||void 0,"data-mantine-stop-propagation":!0,onClick:E,onKeyDown:L_({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:g.loop,dir:v,orientation:"vertical",onKeyDown:_}),__vars:{"--menu-item-color":T!=null&&T.isThemeColor&&(T==null?void 0:T.shade)===void 0?`var(--mantine-color-${T.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[c&&u.jsx("div",{...g.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:c}),h&&u.jsx("div",{...g.getStyles("itemLabel",{styles:i,classNames:n}),children:h}),d&&u.jsx("div",{...g.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:d})]})});dA.classes=Dl;dA.displayName="@mantine/core/MenuItem";const hA=Xe((t,e)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,...a}=ye("MenuLabel",null,t),l=Pl();return u.jsx(je,{ref:e,...l.getStyles("label",{className:r,style:s,styles:i,classNames:n}),...a})});hA.classes=Dl;hA.displayName="@mantine/core/MenuLabel";const fA=Xe((t,e)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:d,...h}=ye("MenuSubDropdown",null,t),f=y.useRef(null),p=Pl(),m=sv(),g=Dr(a,m==null?void 0:m.open),x=Dr(l,m==null?void 0:m.close);return u.jsx(Ai.Dropdown,{...h,onMouseEnter:g,onMouseLeave:x,role:"menu","aria-orientation":"vertical",ref:_i(e,f),...p.getStyles("dropdown",{className:r,style:s,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,children:d})});fA.classes=Dl;fA.displayName="@mantine/core/MenuSubDropdown";const pA=ar((t,e)=>{const{classNames:n,className:r,style:s,styles:i,vars:o,color:a,leftSection:l,rightSection:c,children:d,disabled:h,"data-disabled":f,closeMenuOnClick:p,...m}=ye("MenuSubItem",null,t),g=Pl(),x=sv(),b=qr(),{dir:v}=wh(),w=y.useRef(null),S=m,E=a?b.variantColorResolver({color:a,theme:b,variant:"light"}):void 0,C=a?nu({color:a,theme:b}):null,T=Dr(S.onKeyDown,R=>{R.key==="ArrowRight"&&(x==null||x.open(),x==null||x.focusFirstItem()),R.key==="ArrowLeft"&&(x!=null&&x.parentContext)&&(x.parentContext.close(),x.parentContext.focusParentItem())}),_=Dr(S.onClick,()=>{!f&&p&&g.closeDropdownImmediately()}),O=Dr(S.onMouseEnter,x==null?void 0:x.open),N=Dr(S.onMouseLeave,x==null?void 0:x.close);return u.jsxs(Ml,{onMouseDown:R=>R.preventDefault(),...m,unstyled:g.unstyled,tabIndex:g.menuItemTabIndex,...g.getStyles("item",{className:r,style:s,styles:i,classNames:n}),ref:_i(w,e),role:"menuitem",disabled:h,"data-menu-item":!0,"data-sub-menu-item":!0,"data-disabled":h||f||void 0,"data-mantine-stop-propagation":!0,onMouseEnter:O,onMouseLeave:N,onClick:_,onKeyDown:L_({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:g.loop,dir:v,orientation:"vertical",onKeyDown:T}),__vars:{"--menu-item-color":C!=null&&C.isThemeColor&&(C==null?void 0:C.shade)===void 0?`var(--mantine-color-${C.color}-6)`:E==null?void 0:E.color,"--menu-item-hover":E==null?void 0:E.hover},children:[l&&u.jsx("div",{...g.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:l}),d&&u.jsx("div",{...g.getStyles("itemLabel",{styles:i,classNames:n}),children:d}),u.jsx("div",{...g.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:c||u.jsx(CV,{...g.getStyles("chevron"),size:14})})]})});pA.classes=Dl;pA.displayName="@mantine/core/MenuSubItem";function MV({children:t,refProp:e}){if(!Fz(t))throw new Error("Menu.Sub.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return Pl(),u.jsx(Ai.Target,{refProp:e,popupType:"menu",children:t})}MV.displayName="@mantine/core/MenuSubTarget";const sIe={offset:0,position:"right-start",transitionProps:{duration:0},openDelay:0,middlewares:{shift:{crossAxis:!0}}};function Sh(t){const{children:e,closeDelay:n,openDelay:r,...s}=ye("MenuSub",sIe,t),i=yh(),[o,{open:a,close:l}]=E4e(!1),c=sv(),{openDropdown:d,closeDropdown:h}=EV({open:a,close:l,closeDelay:n,openDelay:r}),f=()=>window.setTimeout(()=>{var m,g;(g=(m=document.getElementById(`${i}-dropdown`))==null?void 0:m.querySelectorAll("[data-menu-item]:not([data-disabled])")[0])==null||g.focus()},16),p=()=>window.setTimeout(()=>{var m;(m=document.getElementById(`${i}-target`))==null||m.focus()},16);return u.jsx(rIe,{value:{opened:o,close:h,open:d,focusFirstItem:f,focusParentItem:p,parentContext:c},children:u.jsx(Ai,{opened:o,withinPortal:!1,withArrow:!1,id:i,...s,children:e})})}Sh.extend=t=>t;Sh.displayName="@mantine/core/MenuSub";Sh.Target=MV;Sh.Dropdown=fA;Sh.Item=pA;const iIe={refProp:"ref"},RV=y.forwardRef((t,e)=>{const{children:n,refProp:r,...s}=ye("MenuTarget",iIe,t),i=jm(n);if(!i)throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=Pl(),a=i.props,l=Dr(a.onClick,()=>{o.trigger==="click"?o.toggleDropdown():o.trigger==="click-hover"&&(o.setOpenedViaClick(!0),o.opened||o.openDropdown())}),c=Dr(a.onMouseEnter,()=>(o.trigger==="hover"||o.trigger==="click-hover")&&o.openDropdown()),d=Dr(a.onMouseLeave,()=>{(o.trigger==="hover"||o.trigger==="click-hover"&&!o.openedViaClick)&&o.closeDropdown()});return u.jsx(Ai.Target,{refProp:r,popupType:"menu",ref:e,...s,children:y.cloneElement(i,{onClick:l,onMouseEnter:c,onMouseLeave:d,"data-expanded":o.opened?!0:void 0})})});RV.displayName="@mantine/core/MenuTarget";const oIe={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Pt(t){const e=ye("Menu",oIe,t),{children:n,onOpen:r,onClose:s,opened:i,defaultOpened:o,trapFocus:a,onChange:l,closeOnItemClick:c,loop:d,closeOnEscape:h,trigger:f,openDelay:p,closeDelay:m,classNames:g,styles:x,unstyled:b,variant:v,vars:w,menuItemTabIndex:S,keepMounted:E,withInitialFocusPlaceholder:C,attributes:T,..._}=e,O=Qe({name:"Menu",classes:Dl,props:e,classNames:g,styles:x,unstyled:b,attributes:T}),[N,R]=vh({value:i,defaultValue:o,finalValue:!1,onChange:l}),[M,W]=y.useState(!1),D=()=>{R(!1),W(!1),N&&(s==null||s())},B=()=>{R(!0),!N&&(r==null||r())},$=()=>{N?D():B()},{openDropdown:V,closeDropdown:A}=EV({open:B,close:D,closeDelay:m,openDelay:p}),z=H=>o4e("[data-menu-item]","[data-menu-dropdown]",H),{resolvedClassNames:j,resolvedStyles:U}=q1({classNames:g,styles:x,props:e});return u.jsx(nIe,{value:{getStyles:O,opened:N,toggleDropdown:$,getItemIndex:z,openedViaClick:M,setOpenedViaClick:W,closeOnItemClick:c,closeDropdown:f==="click"?D:A,openDropdown:f==="click"?B:V,closeDropdownImmediately:D,loop:d,trigger:f,unstyled:b,menuItemTabIndex:S,withInitialFocusPlaceholder:C},children:u.jsx(Ai,{returnFocus:!0,..._,opened:N,onChange:$,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:h,__staticSelector:"Menu",classNames:j,styles:U,unstyled:b,variant:v,keepMounted:E,children:n})})}Pt.extend=t=>t;Pt.withProps=R5e(Pt);Pt.classes=Dl;Pt.displayName="@mantine/core/Menu";Pt.Item=dA;Pt.Label=hA;Pt.Dropdown=uA;Pt.Target=RV;Pt.Divider=cA;Pt.Sub=Sh;const aIe={duration:100,transition:"fade"};function iR(t,e){return{...aIe,...e,...t}}function lIe({offset:t,position:e,defaultOpened:n}){const[r,s]=y.useState(n),i=y.useRef(null),{x:o,y:a,elements:l,refs:c,update:d,placement:h}=D1({placement:e,middleware:[Ol({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=h.includes("right")?t:e.includes("left")?t*-1:0,p=h.includes("bottom")?t:e.includes("top")?t*-1:0,m=y.useCallback(({clientX:g,clientY:x})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:g,y:x,left:g+f,top:x+p,right:g,bottom:x}}})},[l.reference]);return y.useEffect(()=>{if(c.floating.current){const g=i.current;g.addEventListener("mousemove",m);const x=Yo(c.floating.current);return x.forEach(b=>{b.addEventListener("scroll",d)}),()=>{g.removeEventListener("mousemove",m),x.forEach(b=>{b.removeEventListener("scroll",d)})}}},[l.reference,c.floating.current,d,m,r]),{handleMouseMove:m,x:o,y:a,opened:r,setOpened:s,boundaryRef:i,floating:c.setFloating}}var iv={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const cIe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Nm("popover")},uIe=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:or(e),"--tooltip-bg":n?ta(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),mA=Xe((t,e)=>{const n=ye("TooltipFloating",cIe,t),{children:r,refProp:s,withinPortal:i,style:o,className:a,classNames:l,styles:c,unstyled:d,radius:h,color:f,label:p,offset:m,position:g,multiline:x,zIndex:b,disabled:v,defaultOpened:w,variant:S,vars:E,portalProps:C,attributes:T,..._}=n,O=qr(),N=Qe({name:"TooltipFloating",props:n,classes:iv,className:a,style:o,classNames:l,styles:c,unstyled:d,attributes:T,rootSelector:"tooltip",vars:E,varsResolver:uIe}),{handleMouseMove:R,x:M,y:W,opened:D,boundaryRef:B,floating:$,setOpened:V}=lIe({offset:m,position:g,defaultOpened:w}),A=jm(r);if(!A)throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const z=_i(B,B_(A),e),j=A.props,U=I=>{var q;(q=j.onMouseEnter)==null||q.call(j,I),R(I),V(!0)},H=I=>{var q;(q=j.onMouseLeave)==null||q.call(j,I),V(!1)};return u.jsxs(u.Fragment,{children:[u.jsx(Jd,{...C,withinPortal:i,children:u.jsx(je,{..._,...N("tooltip",{style:{...eV(o,O),zIndex:b,display:!v&&D?"block":"none",top:(W&&Math.round(W))??"",left:(M&&Math.round(M))??""}}),variant:S,ref:$,mod:{multiline:x},children:p})}),y.cloneElement(A,{...j,[s]:z,onMouseEnter:U,onMouseLeave:H})]})});mA.classes=iv;mA.displayName="@mantine/core/TooltipFloating";const PV=y.createContext(!1),dIe=PV.Provider,hIe=()=>y.useContext(PV),fIe={openDelay:0,closeDelay:0};function gA(t){const{openDelay:e,closeDelay:n,children:r}=ye("TooltipGroup",fIe,t);return u.jsx(dIe,{value:!0,children:u.jsx(O_e,{delay:{open:e,close:n},children:r})})}gA.displayName="@mantine/core/TooltipGroup";gA.extend=t=>t;function pIe(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function mIe(t){const e=pIe(t.middlewares),n=[Fs(t.offset)];return e.shift&&n.push(Ol(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?ea():ea(e.flip)),n.push(XU({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?Hf():Hf(e.inline)):t.inline&&n.push(Hf()),n}function gIe(t){var E,C,T;const[e,n]=y.useState(t.defaultOpened),s=typeof t.opened=="boolean"?t.opened:e,i=hIe(),o=yh(),a=y.useCallback(_=>{n(_),_&&b(o)},[o]),{x:l,y:c,context:d,refs:h,placement:f,middlewareData:{arrow:{x:p,y:m}={}}}=D1({strategy:t.strategy,placement:t.position,open:s,onOpenChange:a,middleware:mIe(t),whileElementsMounted:Gx}),{delay:g,currentId:x,setCurrentId:b}=I_e(d,{id:o}),{getReferenceProps:v,getFloatingProps:w}=rz([ez(d,{enabled:(E=t.events)==null?void 0:E.hover,delay:i?g:{open:t.openDelay,close:t.closeDelay},mouseOnly:!((C=t.events)!=null&&C.touch)}),L_e(d,{enabled:(T=t.events)==null?void 0:T.focus,visibleOnly:!0}),$_e(d,{role:"tooltip"}),nz(d,{enabled:typeof t.opened>"u"})]);zp(()=>{var _;(_=t.onPositionChange)==null||_.call(t,f)},[f]);const S=s&&x&&x!==o;return{x:l,y:c,arrowX:p,arrowY:m,reference:h.setReference,floating:h.setFloating,getFloatingProps:w,getReferenceProps:v,isGroupPhase:S,opened:s,placement:f}}const oR={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Nm("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},bIe=(t,{radius:e,color:n,variant:r,autoContrast:s})=>{const i=t.variantColorResolver({theme:t,color:n||t.primaryColor,autoContrast:s,variant:r||"filled"});return{tooltip:{"--tooltip-radius":e===void 0?void 0:or(e),"--tooltip-bg":n?i.background:void 0,"--tooltip-color":n?i.color:void 0}}},Th=Xe((t,e)=>{const n=ye("Tooltip",oR,t),{children:r,position:s,refProp:i,label:o,openDelay:a,closeDelay:l,onPositionChange:c,opened:d,defaultOpened:h,withinPortal:f,radius:p,color:m,classNames:g,styles:x,unstyled:b,style:v,className:w,withArrow:S,arrowSize:E,arrowOffset:C,arrowRadius:T,arrowPosition:_,offset:O,transitionProps:N,multiline:R,events:M,zIndex:W,disabled:D,positionDependencies:B,onClick:$,onMouseEnter:V,onMouseLeave:A,inline:z,variant:j,keepMounted:U,vars:H,portalProps:I,mod:q,floatingStrategy:G,middlewares:Z,autoContrast:te,attributes:fe,target:K,...pe}=ye("Tooltip",oR,n),{dir:ke}=wh(),me=y.useRef(null),Pe=gIe({position:lV(ke,s),closeDelay:l,openDelay:a,onPositionChange:c,opened:d,defaultOpened:h,events:M,arrowRef:me,arrowOffset:C,offset:typeof O=="number"?O+(S?E/2:0):O,positionDependencies:[...B,K??r],inline:z,strategy:G,middlewares:Z});y.useEffect(()=>{const lr=K instanceof HTMLElement?K:typeof K=="string"?document.querySelector(K):(K==null?void 0:K.current)||null;lr&&Pe.reference(lr)},[K,Pe]);const Dt=Qe({name:"Tooltip",props:n,classes:iv,className:w,style:v,classNames:g,styles:x,unstyled:b,attributes:fe,rootSelector:"tooltip",vars:H,varsResolver:bIe}),zn=jm(r);if(!K&&!zn)return null;if(K){const lr=iR(N,{duration:100,transition:"fade"});return u.jsx(u.Fragment,{children:u.jsx(Jd,{...I,withinPortal:f,children:u.jsx(xl,{...lr,keepMounted:U,mounted:!D&&!!Pe.opened,duration:Pe.isGroupPhase?10:lr.duration,children:la=>u.jsxs(je,{...pe,"data-fixed":G==="fixed"||void 0,variant:j,mod:[{multiline:R},q],...Pe.getFloatingProps({ref:Pe.floating,className:Dt("tooltip").className,style:{...Dt("tooltip").style,...la,zIndex:W,top:Pe.y??0,left:Pe.x??0}}),children:[o,u.jsx(ry,{ref:me,arrowX:Pe.arrowX,arrowY:Pe.arrowY,visible:S,position:Pe.placement,arrowSize:E,arrowOffset:C,arrowRadius:T,arrowPosition:_,...Dt("arrow")})]})})})})}const Gr=zn.props,yo=_i(Pe.reference,B_(zn),e),vo=iR(N,{duration:100,transition:"fade"});return u.jsxs(u.Fragment,{children:[u.jsx(Jd,{...I,withinPortal:f,children:u.jsx(xl,{...vo,keepMounted:U,mounted:!D&&!!Pe.opened,duration:Pe.isGroupPhase?10:vo.duration,children:lr=>u.jsxs(je,{...pe,"data-fixed":G==="fixed"||void 0,variant:j,mod:[{multiline:R},q],...Pe.getFloatingProps({ref:Pe.floating,className:Dt("tooltip").className,style:{...Dt("tooltip").style,...lr,zIndex:W,top:Pe.y??0,left:Pe.x??0}}),children:[o,u.jsx(ry,{ref:me,arrowX:Pe.arrowX,arrowY:Pe.arrowY,visible:S,position:Pe.placement,arrowSize:E,arrowOffset:C,arrowRadius:T,arrowPosition:_,...Dt("arrow")})]})})}),y.cloneElement(zn,Pe.getReferenceProps({onClick:$,onMouseEnter:V,onMouseLeave:A,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,...Gr,className:fo(w,Gr.className),[i]:yo}))]})});Th.classes=iv;Th.displayName="@mantine/core/Tooltip";Th.Floating=mA;Th.Group=gA;var DV={root:"m_18320242","skeleton-fade":"m_299c329c"};const xIe={visible:!0,animate:!0},yIe=(t,{width:e,height:n,radius:r,circle:s})=>({root:{"--skeleton-height":ne(n),"--skeleton-width":ne(s?n:e),"--skeleton-radius":s?"1000px":r===void 0?void 0:or(r)}}),iy=Xe((t,e)=>{const n=ye("Skeleton",xIe,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,width:c,height:d,circle:h,visible:f,radius:p,animate:m,mod:g,attributes:x,...b}=n,v=Qe({name:"Skeleton",classes:DV,props:n,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:x,vars:l,varsResolver:yIe});return u.jsx(je,{ref:e,...v("root"),mod:[{visible:f,animate:m},g],...b})});iy.classes=DV;iy.displayName="@mantine/core/Skeleton";var LV={root:"m_6d731127"};const vIe={gap:"md",align:"stretch",justify:"flex-start"},wIe=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":_m(e),"--stack-align":n,"--stack-justify":r}}),Im=Xe((t,e)=>{const n=ye("Stack",vIe,t),{classNames:r,className:s,style:i,styles:o,unstyled:a,vars:l,align:c,justify:d,gap:h,variant:f,attributes:p,...m}=n,g=Qe({name:"Stack",props:n,classes:LV,className:s,style:i,classNames:r,styles:o,unstyled:a,attributes:p,vars:l,varsResolver:wIe});return u.jsx(je,{ref:e,...g("root"),variant:f,...m})});Im.classes=LV;Im.displayName="@mantine/core/Stack";const[kIe,bA]=H1("Tabs component was not found in the tree");var Mm={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",tab:"m_4ec4dce6",panel:"m_b0c91715",tabSection:"m_fc420b1f",tabLabel:"m_42bbd1ae","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const xA=Xe((t,e)=>{const n=ye("TabsList",null,t),{children:r,className:s,grow:i,justify:o,classNames:a,styles:l,style:c,mod:d,...h}=n,f=bA();return u.jsx(je,{...h,...f.getStyles("list",{className:s,style:c,classNames:a,styles:l,props:n,variant:f.variant}),ref:e,role:"tablist",variant:f.variant,mod:[{grow:i,orientation:f.orientation,placement:f.orientation==="vertical"&&f.placement,inverted:f.inverted},d],"aria-orientation":f.orientation,__vars:{"--tabs-justify":o},children:r})});xA.classes=Mm;xA.displayName="@mantine/core/TabsList";const yA=Xe((t,e)=>{const n=ye("TabsPanel",null,t),{children:r,className:s,value:i,classNames:o,styles:a,style:l,mod:c,keepMounted:d,...h}=n,f=bA(),p=f.value===i,m=f.keepMounted||d||p?r:null;return u.jsx(je,{...f.getStyles("panel",{className:s,classNames:o,styles:a,style:[l,p?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:f.orientation},c],role:"tabpanel",id:f.getPanelId(i),"aria-labelledby":f.getTabId(i),...h,children:m})});yA.classes=Mm;yA.displayName="@mantine/core/TabsPanel";const vA=Xe((t,e)=>{const n=ye("TabsTab",null,t),{className:r,children:s,rightSection:i,leftSection:o,value:a,onClick:l,onKeyDown:c,disabled:d,color:h,style:f,classNames:p,styles:m,vars:g,mod:x,tabIndex:b,...v}=n,w=qr(),{dir:S}=wh(),E=bA(),C=a===E.value,T=O=>{E.onChange(E.allowTabDeactivation&&a===E.value?null:a),l==null||l(O)},_={classNames:p,styles:m,props:n};return u.jsxs(Ml,{...E.getStyles("tab",{className:r,style:f,variant:E.variant,..._}),disabled:d,unstyled:E.unstyled,variant:E.variant,mod:[{active:C,disabled:d,orientation:E.orientation,inverted:E.inverted,placement:E.orientation==="vertical"&&E.placement},x],ref:e,role:"tab",id:E.getTabId(a),"aria-selected":C,tabIndex:b!==void 0?b:C||E.value===null?0:-1,"aria-controls":E.getPanelId(a),onClick:T,__vars:{"--tabs-color":h?ta(h,w):void 0},onKeyDown:L_({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:E.activateTabWithKeyboard,loop:E.loop,orientation:E.orientation||"horizontal",dir:S,onKeyDown:c}),...v,children:[o&&u.jsx("span",{...E.getStyles("tabSection",_),"data-position":"left",children:o}),s&&u.jsx("span",{...E.getStyles("tabLabel",_),children:s}),i&&u.jsx("span",{...E.getStyles("tabSection",_),"data-position":"right",children:i})]})});vA.classes=Mm;vA.displayName="@mantine/core/TabsTab";const aR="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",EIe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,variant:"default",placement:"left"},CIe=(t,{radius:e,color:n,autoContrast:r})=>({root:{"--tabs-radius":or(e),"--tabs-color":ta(n,t),"--tabs-text-color":f5e(r,t)?Yz({color:n,theme:t,autoContrast:r}):void 0}}),$o=Xe((t,e)=>{const n=ye("Tabs",EIe,t),{defaultValue:r,value:s,onChange:i,orientation:o,children:a,loop:l,id:c,activateTabWithKeyboard:d,allowTabDeactivation:h,variant:f,color:p,radius:m,inverted:g,placement:x,keepMounted:b,classNames:v,styles:w,unstyled:S,className:E,style:C,vars:T,autoContrast:_,mod:O,attributes:N,...R}=n,M=yh(c),[W,D]=vh({value:s,defaultValue:r,finalValue:null,onChange:i}),B=Qe({name:"Tabs",props:n,classes:Mm,className:E,style:C,classNames:v,styles:w,unstyled:S,attributes:N,vars:T,varsResolver:CIe});return u.jsx(kIe,{value:{placement:x,value:W,orientation:o,id:M,loop:l,activateTabWithKeyboard:d,getTabId:zM(`${M}-tab`,aR),getPanelId:zM(`${M}-panel`,aR),onChange:D,allowTabDeactivation:h,variant:f,color:p,radius:m,inverted:g,keepMounted:b,unstyled:S,getStyles:B},children:u.jsx(je,{ref:e,id:M,variant:f,mod:[{orientation:o,inverted:o==="horizontal"&&g,placement:o==="vertical"&&x},O],...B("root"),...R,children:a})})});$o.classes=Mm;$o.displayName="@mantine/core/Tabs";$o.Tab=vA;$o.Panel=yA;$o.List=xA;const ov=Xe((t,e)=>{const n=ye("TextInput",null,t);return u.jsx(Eh,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});ov.classes=Eh.classes;ov.displayName="@mantine/core/TextInput";const BV=(t,e,n=!1)=>{const r=[];function s(i,o="--bn"){for(const a in i){const l=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=`${o}-${l}`;typeof i[a]!="object"?(typeof i[a]=="number"&&(i[a]=`${i[a]}px`),n?e.style.removeProperty(c):e.style.setProperty(c,i[a].toString())):s(i[a],c)}}return s(t),r},lR=(t,e)=>BV(t,e),SIe={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},TIe=t=>BV(SIe,t,!0),$V=t=>u.jsxs(Im,{gap:0,className:"bn-tooltip",children:[u.jsx(uo,{size:"sm",lineClamp:5,children:t.mainTooltip}),t.secondaryTooltip&&u.jsx(uo,{size:"xs",lineClamp:5,children:t.secondaryTooltip})]}),Pk=y.forwardRef((t,e)=>{const{className:n,children:r,mainTooltip:s,secondaryTooltip:i,icon:o,isSelected:a,isDisabled:l,onClick:c,label:d,variant:h,...f}=t;Fe(f,!1);const[p,m]=y.useState(!1),g=r?u.jsx(ji,{"aria-label":d,className:n,onMouseDown:x=>{Z2()&&x.currentTarget.focus()},onClick:x=>{m(!0),c==null||c(x)},onPointerLeave:()=>m(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":s?s.slice(0,1).toLowerCase()+s.replace(/\s+/g,"").slice(1):void 0,size:h==="compact"?"compact-xs":"xs",disabled:l||!1,ref:e,...f,children:r}):u.jsx(ru,{className:n,"aria-label":d,onMouseDown:x=>{Z2()&&x.currentTarget.focus()},onClick:x=>{m(!0),c==null||c(x)},onPointerLeave:()=>m(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":s?s.slice(0,1).toLowerCase()+s.replace(/\s+/g,"").slice(1):void 0,size:h==="compact"?20:30,disabled:l||!1,ref:e,...f,children:o});return s?u.jsx(Th,{disabled:p,withinPortal:!1,label:u.jsx($V,{mainTooltip:s,secondaryTooltip:i}),children:g}):g}),NIe=y.forwardRef((t,e)=>{const{className:n,text:r,icon:s,isSelected:i,mainTooltip:o,secondaryTooltip:a,onClick:l,onMouseEnter:c,...d}=t;Fe(d,!1);const[h,f]=y.useState(!1),p=u.jsxs(rv,{className:n,checked:i===!0,wrapperProps:{onMouseEnter:c,onMouseLeave:()=>f(!1),onClick:m=>{f(!0),l==null||l(m)}},variant:"light",icon:null,ref:e,children:[u.jsx("span",{children:s}),u.jsx("span",{children:r})]});return!o||h?p:u.jsx(Th,{refProp:"rootRef",withinPortal:!1,label:u.jsx($V,{mainTooltip:o,secondaryTooltip:a}),children:p})}),_Ie=y.forwardRef((t,e)=>{const{className:n,children:r,...s}=t;return Fe(s),u.jsx($n,{className:n,ref:e,children:r})}),AIe=y.forwardRef((t,e)=>{const{className:n,children:r,headerText:s,selected:i,onFocus:o,onBlur:a,tabIndex:l,...c}=t;return Fe(c,!1),u.jsxs(Om,{className:Kt(n,i?"selected":""),onFocus:o,onBlur:a,tabIndex:l,ref:e,children:[s&&u.jsx(uo,{className:"bn-header-text",children:s}),r]})}),jIe=y.forwardRef((t,e)=>{const{className:n,children:r,...s}=t;return Fe(s,!1),u.jsx(Om.Section,{className:n,ref:e,children:r})}),OIe=y.forwardRef((t,e)=>{const{className:n,children:r,...s}=t;return Fe(s,!1),u.jsx(oA,{className:n,label:u.jsx(uo,{children:r}),ref:e})}),IIe=y.forwardRef((t,e)=>{const{authorInfo:n,timeString:r,edited:s,...i}=t,o=Be();return Fe(i,!1),n==="loading"?u.jsxs($n,{children:[u.jsx(iy,{height:24,width:24}),u.jsx("div",{children:u.jsx(iy,{height:12,width:100})})]}):u.jsxs($n,{children:[u.jsx(tv,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),u.jsxs(uo,{fz:"sm",fw:"bold",children:[n.username,u.jsxs(uo,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",s&&`(${o.comments.edited})`]})]})]})}),MIe=y.forwardRef((t,e)=>{const{className:n,showActions:r,authorInfo:s,timeString:i,edited:o,actions:a,emojiPickerOpen:l,children:c,...d}=t,{hovered:h,ref:f}=k4e(),p=Kje([e,f]);return Fe(d,!1),u.jsxs($n,{pos:"relative",ref:p,className:n,children:[a&&(r===!0||r===void 0||r==="hover"&&h||l)?u.jsx($n,{style:{position:"absolute",right:0,top:0,zIndex:10},children:a}):null,u.jsx(IIe,{...t}),c]})}),RIe=y.forwardRef((t,e)=>{const{className:n,autoFocus:r,onFocus:s,onBlur:i,editor:o,editable:a,...l}=t;Fe(l,!1);const c=Ni();return u.jsx(UV,{autoFocus:r,className:n,editor:t.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,theme:c==null?void 0:c.colorSchemePreference,ref:e,onFocus:s,onBlur:i,children:u.jsx(jz,{formattingToolbar:PIe})})}),PIe=()=>{const t=_z([]).filter(e=>e.key!=="nestBlockButton"&&e.key!=="unnestBlockButton");return u.jsx(Az,{blockTypeSelectItems:[],children:t})},DIe=y.forwardRef((t,e)=>{const{className:n,name:r,label:s,variant:i,icon:o,value:a,autoFocus:l,placeholder:c,disabled:d,onKeyDown:h,onChange:f,onSubmit:p,autoComplete:m,rightSection:g,...x}=t;return Fe(x),u.jsx(ov,{size:"xs",className:Kt(n||"",i==="large"?"bn-mt-input-large":""),ref:e,name:r,label:s,leftSection:o,value:a,autoFocus:l,"data-autofocus":l?"true":void 0,rightSection:g,placeholder:c,disabled:d,onKeyDown:h,onChange:f,onSubmit:p,autoComplete:m})}),LIe=y.createContext(void 0),BIe=t=>{const{children:e,onOpenChange:n,position:r,sub:s,...i}=t;return Fe(i),s?u.jsx(Pt.Sub,{transitionProps:{duration:250,exitDelay:250},withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:e}):u.jsx(Pt,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:e})},$Ie=y.forwardRef((t,e)=>{const{className:n,children:r,icon:s,checked:i,subTrigger:o,onClick:a,...l}=t;return Fe(l,!1),o?u.jsx(Pt.Sub.Item,{className:n,ref:e,leftSection:s,rightSection:i?u.jsx(sy,{size:10}):i===!1?u.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r}):u.jsx(Pt.Item,{className:n,ref:e,leftSection:s,rightSection:i?u.jsx(sy,{size:10}):i===!1?u.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r})}),FIe=t=>{const{children:e,sub:n,...r}=t;return Fe(r),n?u.jsx(Pt.Sub.Target,{children:e}):u.jsx(Pt.Target,{children:e})},HIe=y.forwardRef((t,e)=>{const{className:n,children:r,sub:s,...i}=t;Fe(i);const o=y.useContext(LIe);return s?u.jsx(Pt.Sub.Dropdown,{className:n,ref:e,onMouseOver:o==null?void 0:o.onMenuMouseOver,onMouseLeave:o==null?void 0:o.onMenuMouseLeave,children:r}):u.jsx(Pt.Dropdown,{className:n,ref:e,onMouseOver:o==null?void 0:o.onMenuMouseOver,onMouseLeave:o==null?void 0:o.onMenuMouseLeave,children:r})}),UIe=y.forwardRef((t,e)=>{const{className:n,...r}=t;return Fe(r),u.jsx(Pt.Divider,{className:n,ref:e})}),zIe=y.forwardRef((t,e)=>{const{className:n,children:r,...s}=t;return Fe(s),u.jsx(Pt.Label,{className:n,ref:e,children:r})}),VIe=y.forwardRef((t,e)=>{const{className:n,children:r,icon:s,onClick:i,onDragEnd:o,onDragStart:a,draggable:l,label:c,...d}=t;return Fe(d,!1),s?u.jsx(ru,{size:24,className:n,ref:e,onClick:i,onDragEnd:o,onDragStart:a,draggable:l,"aria-label":c,...d,children:s}):u.jsx(ji,{className:n,ref:e,onClick:i,onDragEnd:o,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),WIe=y.forwardRef((t,e)=>{const{className:n,tabs:r,defaultOpenTab:s,openTab:i,setOpenTab:o,loading:a,...l}=t;return Fe(l),u.jsx($n,{className:n,ref:e,children:u.jsxs($o,{value:i,defaultValue:s,onChange:o,children:[a&&u.jsx(lA,{visible:a}),u.jsx($o.List,{children:r.map(c=>u.jsx($o.Tab,{"data-test":`${c.name.toLowerCase()}-tab`,value:c.name,children:c.name},c.name))}),r.map(c=>u.jsx($o.Panel,{value:c.name,children:c.tabPanel},c.name))]})})}),qIe=y.forwardRef((t,e)=>{const{className:n,children:r,onClick:s,label:i,...o}=t;return Fe(o),u.jsx(ji,{size:"xs","aria-label":i,className:n,ref:e,onClick:s,...o,children:r})}),GIe=y.forwardRef((t,e)=>{const{className:n,accept:r,value:s,placeholder:i,onChange:o,...a}=t;return Fe(a),u.jsx(eIe,{size:"xs",className:n,ref:e,accept:r,value:s,placeholder:i,onChange:o,...a})}),YIe=y.forwardRef((t,e)=>{const{className:n,children:r,...s}=t;return Fe(s),u.jsx("div",{className:n,ref:e,children:r})}),KIe=y.forwardRef((t,e)=>{const{className:n,value:r,placeholder:s,onKeyDown:i,onChange:o,...a}=t;return Fe(a),u.jsx(ov,{size:"xs","data-test":"embed-input",className:n,ref:e,value:r,placeholder:s,onKeyDown:i,onChange:o})}),JIe=t=>{const{open:e,onOpenChange:n,position:r,children:s,...i}=t;return Fe(i),u.jsx(Ai,{middlewares:{size:{padding:20}},withinPortal:!1,opened:e,onChange:n,position:r,zIndex:1e4,children:s})},QIe=t=>{const{children:e,...n}=t;return Fe(n),u.jsx(K_,{children:e})},XIe=y.forwardRef((t,e)=>{const{className:n,children:r,variant:s,...i}=t;return Fe(i),u.jsx(Y1,{className:n,ref:e,children:r})}),ZIe=y.forwardRef((t,e)=>{const{className:n,children:r,...s}=t;return Fe(s,!1),u.jsx($n,{align:"center",gap:0,className:n,ref:e,...s,children:r})}),eMe=y.forwardRef((t,e)=>{const{className:n,children:r,icon:s,onClick:i,onDragEnd:o,onDragStart:a,draggable:l,label:c,...d}=t;return Fe(d,!1),s?u.jsx(ru,{size:24,className:n,ref:e,onClick:i,onDragEnd:o,onDragStart:a,draggable:l,"aria-label":c,...d,children:s}):u.jsx(ji,{className:n,ref:e,onClick:i,onDragEnd:o,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),tMe=y.forwardRef((t,e)=>{const{className:n,children:r,id:s,...i}=t;return Fe(i),u.jsx(Im,{gap:0,className:n,ref:e,id:s,role:"listbox",children:r})}),nMe=y.forwardRef((t,e)=>{const{className:n,children:r,...s}=t;return Fe(s),u.jsx($n,{className:n,ref:e,children:u.jsx($n,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),rMe=y.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:s,item:i,id:o,...a}=t;Fe(a);const l=y.useRef(null);return y.useEffect(()=>{if(!l.current||!r)return;const c=Lz(l.current,l.current.closest(".bn-suggestion-menu, #ai-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),u.jsxs($n,{gap:0,className:n,ref:z1(e,l),id:o,role:"option",onMouseDown:c=>c.preventDefault(),onClick:s,"aria-selected":r||void 0,children:[i.icon&&u.jsx($n,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:i.icon}),u.jsxs(Im,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[u.jsx(uo,{className:"bn-mt-suggestion-menu-item-title",children:i.title}),u.jsx(uo,{className:"bn-mt-suggestion-menu-item-subtitle",children:i.subtext})]}),i.badge&&u.jsx($n,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:u.jsx(nA,{size:"xs",children:i.badge})})]})}),sMe=y.forwardRef((t,e)=>{const{className:n,children:r,...s}=t;return Fe(s),u.jsx($n,{className:n,ref:e,children:r})}),iMe=y.forwardRef((t,e)=>{const{className:n,...r}=t;return Fe(r),u.jsx(Rl,{className:n,type:"dots",size:16,ref:e})}),oMe=y.forwardRef((t,e)=>{const{className:n,children:r,id:s,columns:i,...o}=t;return Fe(o),u.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${i}, 1fr)`},ref:e,id:s,role:"grid",children:r})}),aMe=y.forwardRef((t,e)=>{const{className:n,children:r,columns:s,...i}=t;return Fe(i),u.jsx($n,{className:n,style:{gridColumn:`1 / ${s+1}`},ref:e,children:u.jsx($n,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),lMe=y.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:s,item:i,id:o,...a}=t;Fe(a);const l=y.useRef(null);return y.useEffect(()=>{if(!l.current||!r)return;const c=Lz(l.current,l.current.closest(".bn-grid-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),u.jsx("div",{className:n,ref:z1(e,l),id:o,role:"option",onClick:s,"aria-selected":r||void 0,children:i.icon})}),cMe=y.forwardRef((t,e)=>{const{className:n,children:r,columns:s,...i}=t;return Fe(i),u.jsx(Rl,{className:n,style:{gridColumn:`1 / ${s+1}`},type:"dots",ref:e})}),uMe=y.forwardRef((t,e)=>{const{children:n,className:r,onMouseDown:s,onClick:i,...o}=t;return Fe(o,!1),u.jsx(ji,{className:r,ref:e,onMouseDown:s,onClick:i,...o,children:n})}),dMe=y.forwardRef((t,e)=>{const{className:n,children:r,draggable:s,onDragStart:i,onDragEnd:o,style:a,label:l,...c}=t;return Fe(c,!1),u.jsx(ji,{className:n,ref:e,"aria-label":l,draggable:s,onDragStart:i,onDragEnd:o,style:a,...c,children:r})}),Dk=y.forwardRef((t,e)=>{const{className:n,children:r,onMouseEnter:s,onMouseLeave:i,variant:o,...a}=t;Fe(a);const{ref:l,focused:c}=S4e(),d=Wz(c),h=z1(e,l,d);return u.jsx(eA,{className:n,ref:h,role:"toolbar",onMouseEnter:s,onMouseLeave:i,gap:o==="action-toolbar"?2:void 0,children:r})});var FV={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cR=lt.createContext&&lt.createContext(FV),hMe=["attr","size","title"];function fMe(t,e){if(t==null)return{};var n=pMe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oy(){return oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oy.apply(this,arguments)}function uR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ay(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uR(Object(n),!0).forEach(function(r){mMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mMe(t,e,n){return e=gMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gMe(t){var e=bMe(t,"string");return typeof e=="symbol"?e:e+""}function bMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HV(t){return t&&t.map((e,n)=>lt.createElement(e.tag,ay({key:n},e.attr),HV(e.child)))}function xMe(t){return e=>lt.createElement(yMe,oy({attr:ay({},t.attr)},e),HV(t.child))}function yMe(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=fMe(t,hMe),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),lt.createElement("svg",oy({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:ay(ay({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&lt.createElement("title",null,i),t.children)};return cR!==void 0?lt.createElement(cR.Consumer,null,n=>e(n)):e(FV)}function vMe(t){return xMe({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}const Lk=y.forwardRef((t,e)=>{const{className:n,items:r,isDisabled:s,...i}=t;Fe(i);const o=r.filter(a=>a.isSelected)[0];return o?u.jsxs(Pt,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:s,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[u.jsx(Pt.Target,{children:u.jsx(ji,{onMouseDown:a=>{Z2()&&a.currentTarget.focus()},leftSection:o.icon,rightSection:u.jsx(vMe,{}),size:"xs",variant:"subtle",disabled:s,children:o.text})}),u.jsx(Pt.Dropdown,{className:n,ref:e,children:r.map(a=>u.jsx(Pt.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?u.jsx(sy,{size:10,className:"bn-tick-icon"}):u.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),wMe={FormattingToolbar:{Root:Dk,Button:Pk,Select:Lk},FilePanel:{Root:WIe,Button:qIe,FileInput:GIe,TabPanel:YIe,TextInput:KIe},GridSuggestionMenu:{Root:oMe,Item:lMe,EmptyItem:aMe,Loader:cMe},LinkToolbar:{Root:Dk,Button:Pk,Select:Lk},SideMenu:{Root:ZIe,Button:eMe},SuggestionMenu:{Root:tMe,Item:rMe,EmptyItem:nMe,Label:sMe,Loader:iMe},TableHandle:{Root:dMe,ExtendButton:uMe},Generic:{Badge:{Root:NIe,Group:_Ie},Form:{Root:t=>u.jsx("div",{children:t.children}),TextInput:DIe},Menu:{Root:BIe,Trigger:FIe,Dropdown:HIe,Divider:UIe,Label:zIe,Item:$Ie,Button:VIe},Popover:{Root:JIe,Trigger:QIe,Content:XIe},Toolbar:{Root:Dk,Button:Pk,Select:Lk}},Comments:{Comment:MIe,Editor:RIe,Card:AIe,CardSection:jIe,ExpandSectionsPrompt:OIe}},UV=t=>{const{className:e,theme:n,...r}=t,s=Ni(),i=Rz(),o=(s==null?void 0:s.colorSchemePreference)||i,a=y.useCallback(h=>{if(h&&(TIe(h),typeof n=="object")){if("light"in n&&"dark"in n){lR(n[o==="dark"?"dark":"light"],h);return}lR(n,h);return}},[o,n]),l=y.useContext($_),c=typeof n=="string"?n:o!=="no-preference"?o:"light",d=u.jsx(dz.Provider,{value:wMe,children:u.jsx(Mje,{"data-mantine-color-scheme":c,className:Kt("bn-mantine",e||""),theme:typeof n=="object"?void 0:n,...r,ref:a})});return l?d:u.jsx(V_,{withCssVariables:!1,getRootElement:()=>{},children:d})},kMe="https://generativelanguage.googleapis.com/v1beta";async function wA(t,e,n){var o,a,l,c,d;const r=n==null?void 0:n.trim();if(!r)throw new Error("API Key is missing.");const i=await(await fetch(`${kMe}/models/${t}?key=${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(i.error)throw console.error("Gemini API Error:",i.error),new Error(i.error.message||"AI Service Error");return(d=(c=(l=(a=(o=i.candidates)==null?void 0:o[0])==null?void 0:a.content)==null?void 0:l.parts)==null?void 0:c[0])==null?void 0:d.text}async function EMe(t,e){const n=`
    Role: Professional Project Estimator
    Task: Create 3-6 line items for a proposal based on this description: "${t}"
    Output: JSON Array ONLY. No markdown.
    Schema: [{ "description": string, "quantity": number, "unit_price": number }]
    Currency: TRY (Turkish Lira context)
  `,r="gemini-1.5-flash";console.log(`[AI] Generating proposal items with ${r}...`);const s=await wA(`${r}:generateContent`,{contents:[{parts:[{text:n}]}],generationConfig:{temperature:.7,maxOutputTokens:1024}},e);if(!s)throw new Error("AI returned no content.");const i=s.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(i)}async function CMe(t,e){const n=`
    Analyze meeting notes and extract actionable tasks.
    Output: JSON Array of strings.
    Example: ["Email client", "Update UI"]
    Notes: "${t}"
  `,r=await wA("gemini-1.5-flash:generateContent",{contents:[{parts:[{text:n}]}],generationConfig:{temperature:.2}},e);if(!r)throw new Error("AI returned no content.");const s=r.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(s)}async function SMe(t,e){const n=`
    Analyze this document content (JSON/Text) and provide a professional summary.
    Identify and extract key action items as a list.
    Language: Turkish (Trke).
    Content: "${t}"
    
    Output Format:
    {
      "summary": "...",
      "action_items": ["...", "..."]
    }
  `,r=await wA("gemini-1.5-flash:generateContent",{contents:[{parts:[{text:n}]}],generationConfig:{temperature:.5}},e);if(!r)throw new Error("AI returned no content.");const s=r.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(s)}function Rm({pageId:t,initialContent:e,onSave:n,autoSave:r=!0,entityId:s=null,entityType:i=null,isPrivate:o=!1}){const[a,l]=y.useState(!1),[c,d]=y.useState(null),[h,f]=y.useState(null),[p,m]=y.useState(!1),g=$1({initialContent:e?typeof e=="string"?JSON.parse(e):e:void 0}),x=async()=>{let v=localStorage.getItem("gemini_api_key");if(!v)if(v=prompt("Google Gemini API Anahtarnz giriniz:"),v)localStorage.setItem("gemini_api_key",v);else return;const w=JSON.stringify(g.document);if(w.length<20)return alert("zetlemek iin daha fazla ierik giriniz.");m(!0);try{const S=await SMe(w,v);g.insertBlocks([{type:"heading",content:"AI zeti",props:{level:2}},{type:"paragraph",content:S.summary},{type:"heading",content:"Aksiyon Maddeleri",props:{level:3}},...S.action_items.map(E=>({type:"checkListItem",content:E}))],g.document[g.document.length-1],"after")}catch(S){console.error("AI error:",S),alert("AI Hatas: "+S.message)}finally{m(!1)}},b=async()=>{if(!(!t&&!s)){l(!0),f(null);try{const v=g.document;let w;if(t?w=await X.from("wiki_pages").update({content:v,updated_at:new Date().toISOString()}).eq("id",t):s&&(w=await X.from("wiki_pages").upsert({entity_id:s,entity_type:i,content:v,is_private:o,updated_at:new Date().toISOString()},{onConflict:"entity_id,entity_type"})),w.error)throw w.error;d(new Date),n&&n(g.document)}catch(v){console.error("Wiki save error:",v),f("Kaydedilemedi")}finally{l(!1)}}};return y.useEffect(()=>{if(!r)return;const v=setTimeout(()=>{b()},3e3);return()=>clearTimeout(v)},[g.document]),u.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 overflow-hidden shadow-sm",children:[u.jsxs("div",{className:"h-12 border-b border-gray-100 dark:border-slate-800 px-4 flex items-center justify-between bg-gray-50/50 dark:bg-slate-950/50",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[a?u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[u.jsx(Hn,{className:"w-3 h-3 animate-spin"}),u.jsx("span",{children:"Kaydediliyor..."})]}):c?u.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600",children:[u.jsx(tQ,{className:"w-3 h-3"}),u.jsxs("span",{children:["Kaydedildi (",c.toLocaleTimeString(),")"]})]}):null,h&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-red-500",children:[u.jsx(nm,{className:"w-3 h-3"}),u.jsx("span",{children:h})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:x,disabled:p,className:"flex items-center gap-2 px-3 py-1 bg-violet-100 dark:bg-violet-900/30 text-violet-700 dark:text-violet-400 text-xs font-bold rounded-md hover:bg-violet-200 transition-all",children:[p?u.jsx(Hn,{className:"w-3 h-3 animate-spin"}):u.jsx(sm,{className:"w-3 h-3"}),"AI Genius"]}),u.jsxs("button",{onClick:b,disabled:a,className:"flex items-center gap-2 px-3 py-1 bg-primary text-white text-xs font-semibold rounded-md hover:bg-primary/90 disabled:opacity-50 transition-all shadow-sm",children:[u.jsx(_d,{className:"w-3 h-3"}),"Kaydet"]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar",children:u.jsx(UV,{editor:g,theme:document.documentElement.classList.contains("dark")?"dark":"light"})})]})}function TMe({isOpen:t,onClose:e,user:n}){const[r,s]=y.useState("overview");return!t||!n?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl w-full max-w-lg h-[80vh] flex flex-col border border-slate-200 dark:border-slate-800 overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white",children:"Personel Kart"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:"Sistem zerindeki yetki ve bilgiler"})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 dark:hover:bg-slate-800",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"flex items-center gap-1 px-6 border-b border-gray-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:[{id:"overview",label:"Profil",icon:ro},{id:"wiki",label:"zel Notlar",icon:Sc}].map(i=>{const o=i.icon,a=r===i.id;return u.jsxs("button",{onClick:()=>s(i.id),className:ie("flex items-center gap-2 px-4 py-3 text-sm font-medium transition-all relative",a?"text-purple-600 dark:text-purple-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:[u.jsx(o,{className:"w-4 h-4"}),i.label,a&&u.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-purple-600 dark:bg-purple-400 rounded-t-full"})]},i.id)})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin",children:r==="overview"?u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsx("div",{className:ie("w-20 h-20 rounded-2xl flex items-center justify-center text-white text-2xl font-black shadow-lg shadow-purple-500/20",n.avatarColor||"bg-purple-600"),children:n.name.split(" ").map(i=>i[0]).join("").substring(0,2).toUpperCase()}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white",children:n.name}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("span",{className:ie("inline-flex items-center px-2.5 py-0.5 rounded-lg text-[10px] font-black uppercase tracking-wider",n.role==="Ynetici"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"),children:n.role}),u.jsx("span",{className:"px-2.5 py-0.5 rounded-lg text-[10px] font-black bg-gray-900 dark:bg-slate-700 text-white uppercase tracking-wider",children:n.status||"Aktif"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-6 p-6 bg-gray-50 dark:bg-slate-800/50 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[u.jsx(ro,{className:"w-3 h-3"})," Ad Soyad"]}),u.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:n.name})]}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[u.jsx(kL,{className:"w-3 h-3"})," E-posta"]}),u.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white break-words",children:n.email})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsxs("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[u.jsx(dL,{className:"w-3 h-3"})," IBAN Bilgisi"]}),u.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white font-mono",children:n.iban||"-"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl",children:[u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Kayt Tarihi"}),u.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:n.registrationDate||"21.11.2025"})]}),u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl",children:[u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Adres Bilgisi"}),u.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-xs truncate uppercase",children:n.address||"-"})]})]})]}):u.jsx("div",{className:"h-full flex flex-col animate-in fade-in duration-300",children:u.jsx(Rm,{entityId:n.id,entityType:"staff",isPrivate:!0})})})]})})}const NMe="https://qulzeoytobflgktbtogg.supabase.co",_Me="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1bHplb3l0b2JmbGdrdGJ0b2dnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMDMyMTEsImV4cCI6MjA4MDc3OTIxMX0.vn0s8NzjDSDHsy7ufOenkHluWw5Vlbn9gxzliJzCOrM";function AMe(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[s,i]=y.useState(!1),[o,a]=y.useState(!1),[l,c]=y.useState(null),[d,h]=y.useState(""),f=async()=>{try{r(!0);const{data:v,error:w}=await X.from("profiles").select("*").order("created_at",{ascending:!1});if(w)throw w;e(v||[])}catch(v){console.error("Error fetching users:",v)}finally{r(!1)}};y.useEffect(()=>{f()},[]);const p=async v=>{var T;const{name:w,email:S,password:E,role:C}=v;if(l){try{const{error:_}=await X.from("profiles").update({full_name:w,role:C,address:v.address,iban:v.iban}).eq("id",l.id);if(_)throw _;alert("Kullanc gncellendi."),f(),i(!1)}catch(_){alert("Gncelleme hatas: "+_.message)}return}try{const _=oL(NMe,_Me,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}),{data:O,error:N}=await _.auth.signUp({email:S,password:E,options:{data:{full_name:w,role:C,address:v.address,iban:v.iban}}});if(N)throw N;if(await new Promise(R=>setTimeout(R,1500)),C&&C!=="Mhendis"&&((T=O==null?void 0:O.user)!=null&&T.id)){const{error:R}=await X.from("profiles").update({role:C}).eq("id",O.user.id);R&&console.error("Role update failed:",R)}await f(),alert("Kullanc oluturuldu! (E-posta onay gerekebilir)"),i(!1)}catch(_){console.error("User creation error:",_),alert("Kullanc oluturma hatas: "+_.message)}},m=v=>{c({id:v.id,name:v.full_name,email:"...",role:v.role,address:v.address,iban:v.iban,status:"Aktif"}),i(!0)},g=async v=>{if(confirm("Bu kullancy ve tm verilerini silmek istediinizden emin misiniz? Bu ilem geri alnamaz!"))try{r(!0);const{error:w}=await X.rpc("delete_user_account",{target_user_id:v});if(w)throw w;alert("Kullanc baaryla silindi."),await f()}catch(w){console.error("Delete error:",w),alert("Silme ilemi baarsz: "+w.message)}finally{r(!1)}},x=()=>{c(null),i(!0)},b=t.filter(v=>{var w,S;return(((w=v.full_name)==null?void 0:w.toLowerCase())||"").includes(d.toLowerCase())||(((S=v.role)==null?void 0:S.toLowerCase())||"").includes(d.toLowerCase())});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Kullanc Ynetimi"}),u.jsx("p",{className:"text-gray-500 dark:text-slate-400 mt-1",children:"Sistem kullanclarn ynetin"})]}),u.jsxs(re,{onClick:x,className:"gap-2 bg-blue-600 hover:bg-blue-700 shadow-blue-200 dark:shadow-blue-900/40 text-white",children:[u.jsx(Ht,{className:"w-5 h-5"}),"Yeni Kullanc"]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-gray-100 dark:border-slate-800 shadow-sm flex items-center justify-between transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-slate-400",children:"Toplam Kullanc"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:t.length})]}),u.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400",children:u.jsx(so,{className:"w-6 h-6"})})]})}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-100 dark:border-slate-800 shadow-sm overflow-hidden transition-colors",children:[u.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-slate-800",children:u.jsxs("div",{className:"relative",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-slate-500"}),u.jsx("input",{type:"text",placeholder:"Kullanc ara...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all placeholder:text-gray-400 dark:placeholder:text-slate-500",value:d,onChange:v=>h(v.target.value)})]})}),n?u.jsx("div",{className:"p-8 flex justify-center",children:u.jsx(Hn,{className:"w-6 h-6 animate-spin text-blue-600"})}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-gray-50/50 dark:bg-slate-800/50 text-xs uppercase font-medium text-gray-500 dark:text-slate-400 border-b border-gray-100 dark:border-slate-800",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-4",children:"Kullanc"}),u.jsx("th",{className:"px-6 py-4",children:"Rol"}),u.jsx("th",{className:"px-6 py-4 text-right",children:"lemler"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:b.map(v=>{var w;return u.jsxs("tr",{className:"group hover:bg-gray-50/50 dark:hover:bg-slate-800/50 transition-colors",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:ie("w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-medium shadow-sm bg-blue-600"),children:((w=v.full_name)==null?void 0:w.substring(0,2).toUpperCase())||"K"}),u.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:v.full_name||"simsiz"})]})}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:ie("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",v.role==="Ynetici"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"),children:v.role})}),u.jsx("td",{className:"px-6 py-4 text-right",children:u.jsxs("div",{className:"flex items-center justify-end gap-2 text-gray-400 dark:text-slate-500",children:[u.jsx(re,{variant:"ghost",size:"icon",onClick:()=>m(v),className:"w-8 h-8 text-gray-400 dark:text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 dark:hover:bg-slate-800",children:u.jsx(rm,{className:"w-4 h-4"})}),u.jsx(re,{variant:"ghost",size:"icon",onClick:()=>g(v.id),className:"w-8 h-8 text-gray-400 dark:text-slate-500 hover:text-red-600 dark:hover:text-red-400 dark:hover:bg-slate-800",children:u.jsx(hr,{className:"w-4 h-4"})})]})})]},v.id)})})]})})]}),u.jsx(Pne,{isOpen:s,onClose:()=>i(!1),onCreate:p,initialData:l}),u.jsx(TMe,{isOpen:o,onClose:()=>a(!1),user:l})]})}function jMe({isOpen:t,onClose:e,client:n}){const[r,s]=y.useState("overview");return!t||!n?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl w-full max-w-2xl h-[80vh] flex flex-col border border-slate-200 dark:border-slate-800 overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white",children:n.name}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:n.company||"Bireysel Mteri"})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"flex items-center gap-1 px-6 border-b border-gray-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:[{id:"overview",label:"Genel Bak",icon:kb},{id:"wiki",label:"zel Notlar (Wiki)",icon:Sc}].map(i=>{const o=i.icon,a=r===i.id;return u.jsxs("button",{onClick:()=>s(i.id),className:ie("flex items-center gap-2 px-4 py-3 text-sm font-medium transition-all relative",a?"text-blue-600 dark:text-blue-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:[u.jsx(o,{className:"w-4 h-4"}),i.label,a&&u.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-blue-400 rounded-t-full"})]},i.id)})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin",children:r==="overview"?u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-16 h-16 rounded-2xl bg-blue-600 flex items-center justify-center text-white text-xl font-black shadow-lg shadow-blue-500/20",children:n.name.split(" ").map(i=>i[0]).join("").substring(0,2).toUpperCase()}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:"Mteri Kart"}),u.jsx("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-black bg-blue-100 dark:bg-blue-900/30 text-blue-600 uppercase",children:n.status})]}),u.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white",children:n.name})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-2xl border border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-1",children:"E-posta"}),u.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:n.email||"-"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase mb-1",children:"Telefon"}),u.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:n.phone})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-900 dark:text-white font-bold",children:[u.jsx(t2,{className:"w-5 h-5 text-blue-500"}),"Aktif Projeler"]}),u.jsxs("div",{className:"border border-gray-100 dark:border-slate-800 rounded-2xl p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-all cursor-pointer group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform",children:u.jsx(t2,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-gray-900 dark:text-white group-hover:text-blue-600 transition-colors",children:"Kurumsal Website"}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:"Son Gncelleme: 10.10.2025"})]})]}),u.jsx("span",{className:"px-3 py-1 bg-black dark:bg-slate-700 text-white text-[10px] font-black rounded-lg uppercase",children:"tamamland"})]})]})]}):u.jsx("div",{className:"h-full flex flex-col animate-in fade-in duration-300",children:u.jsx(Rm,{entityId:n.id,entityType:"client"})})})]})})}function OMe({isOpen:t,onClose:e,onCreate:n}){const[r,s]=y.useState({name:"",phone:"",email:"",address:"",status:"Aktif",type:"Normal",notes:""});if(!t)return null;const i=o=>{if(o.preventDefault(),!r.name){alert("Mteri ismi zorunludur");return}n(r),e(),s({name:"",phone:"",email:"",address:"",status:"Aktif",type:"Normal",notes:""})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-xl w-full max-w-lg border border-slate-200 dark:border-slate-800",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Yeni Mteri"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:"Yeni bir mteri kart oluturun"})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Mteri / Firma Ad"}),u.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",placeholder:"rn: Butik Ajans A..",value:r.name,onChange:o=>s({...r,name:o.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Telefon"}),u.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",placeholder:"05...",value:r.phone,onChange:o=>s({...r,phone:o.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Durum"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white",value:r.status,onChange:o=>s({...r,status:o.target.value}),children:[u.jsx("option",{value:"Aktif",children:"Aktif"}),u.jsx("option",{value:"Pasif",children:"Pasif"}),u.jsx("option",{value:"Skntl",children:"Skntl"})]})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"E-posta"}),u.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",placeholder:"deneme@sirket.com",value:r.email,onChange:o=>s({...r,email:o.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Adres"}),u.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all resize-none bg-white dark:bg-slate-950 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",placeholder:"Adres detaylar...",value:r.address,onChange:o=>s({...r,address:o.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Notlar"}),u.jsx("textarea",{rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all resize-none bg-white dark:bg-slate-950 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",placeholder:"Mteri hakknda notlar...",value:r.notes,onChange:o=>s({...r,notes:o.target.value})})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-slate-800",children:[u.jsx(re,{type:"button",variant:"ghost",onClick:e,className:"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-800",children:"ptal"}),u.jsxs(re,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white gap-2 shadow-blue-200 dark:shadow-blue-900/40",children:[u.jsx(_d,{className:"w-4 h-4"}),"Kaydet"]})]})]})]})})}function IMe(){const[t,e]=y.useState("Tm"),[n,r]=y.useState(""),[s,i]=y.useState(null),[o,a]=y.useState(!1),[l,c]=y.useState([]),[d,h]=y.useState(!0),{user:f,isAdmin:p}=hn(),m=async()=>{try{h(!0);const{data:b,error:v}=await X.from("clients").select("*").order("created_at",{ascending:!1});if(v)throw v;c(b||[])}catch(b){console.error("Error loading clients:",b)}finally{h(!1)}};y.useEffect(()=>{f&&m()},[f]);const g=async b=>{try{const v={name:b.name,type:b.type||"Normal",status:"Aktif",phone:b.phone,email:b.email,address:b.address,notes:b.notes},{error:w}=await X.from("clients").insert(v);if(w)throw w;alert("Mteri baaryla oluturuldu."),a(!1),m()}catch(v){console.error("Create client error:",v),alert("Hata: "+v.message)}},x=l.filter(b=>{if(!b||!b.name)return!1;const v=b.name.toLowerCase().includes(n.toLowerCase())||b.phone&&b.phone.includes(n);return t==="Tm"?v:v&&b.status===t});return u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Mteriler"}),u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 font-medium",children:[u.jsx("p",{children:"Mteri portfynz ve bakiyelerini ynetin."}),u.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300 dark:bg-slate-600"}),u.jsxs("span",{className:"text-violet-600 dark:text-violet-400 font-bold",children:[l.length," Kayt"]})]})]}),u.jsxs(re,{onClick:()=>a(!0),className:"bg-violet-600 hover:bg-violet-700 text-white shadow-lg shadow-violet-500/20 gap-2 px-6 dark:shadow-violet-900/40",children:[u.jsx(so,{className:"w-5 h-5"}),"Yeni Mteri"]})]}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"sim, telefon veya adres ara...",className:"w-full pl-10 pr-4 py-3 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all font-medium text-slate-700 dark:text-slate-200 placeholder:text-slate-400 dark:placeholder:text-slate-600 shadow-sm",value:n,onChange:b=>r(b.target.value)})]}),u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0",children:["Tm","Aktif","Pasif","Skntl"].map(b=>u.jsx("button",{onClick:()=>e(b),className:ie("px-4 py-2 rounded-xl text-sm font-bold transition-all whitespace-nowrap",t===b?"bg-slate-900 dark:bg-white text-white dark:text-slate-900 shadow-lg shadow-slate-900/20 dark:shadow-white/10":"bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 hover:border-slate-300 dark:hover:border-slate-700"),children:b},b))})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:d?u.jsx("div",{className:"col-span-full flex justify-center py-20",children:u.jsx(Hn,{className:"w-8 h-8 animate-spin text-violet-600"})}):x.length===0?u.jsxs("div",{className:"col-span-full py-20 bg-white dark:bg-slate-900 rounded-3xl border border-slate-200 dark:border-slate-800 border-dashed text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(so,{className:"w-8 h-8 text-slate-300 dark:text-slate-600"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Mteri Bulunamad"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Arama kriterlerinize uygun kayt yok."})]}):x.map(b=>u.jsxs("div",{className:"group bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-xl hover:border-violet-200 dark:hover:border-violet-900 transition-all duration-300 relative overflow-hidden",children:[u.jsxs("div",{className:"absolute top-0 right-0 p-6 opacity-0 group-hover:opacity-100 transition-opacity flex gap-2",children:[u.jsx("button",{onClick:()=>i(b),className:"p-2 bg-slate-50 dark:bg-slate-800 text-slate-400 dark:text-slate-500 hover:text-violet-600 dark:hover:text-violet-400 hover:bg-violet-50 dark:hover:bg-violet-900/30 rounded-lg transition-colors",children:u.jsx(Gc,{className:"w-4 h-4"})}),u.jsx("button",{className:"p-2 bg-slate-50 dark:bg-slate-800 text-slate-400 dark:text-slate-500 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:u.jsx(rm,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 flex items-center justify-center text-slate-500 dark:text-slate-400 font-bold text-lg",children:b.name.charAt(0)}),u.jsxs("div",{className:"flex-1 pr-16",children:[u.jsx("h3",{className:"font-bold text-slate-900 dark:text-white leading-tight mb-1 group-hover:text-violet-700 dark:group-hover:text-violet-400 transition-colors line-clamp-2",children:b.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:ie("px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider border",b.status==="Aktif"?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border-emerald-100 dark:border-emerald-900/50":b.status==="Pasif"?"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-100 dark:border-slate-700":b.status==="Skntl"?"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-100 dark:border-red-900/50":"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 border-indigo-100 dark:border-indigo-900/50"),children:b.status}),u.jsx("span",{className:"text-xs font-mono text-slate-400 dark:text-slate-500",children:b.type})]})]})]}),u.jsxs("div",{className:"space-y-3 border-t border-slate-100 dark:border-slate-800 pt-4",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-slate-400 dark:text-slate-500 font-medium",children:"Telefon"}),u.jsx("span",{className:"font-mono text-slate-700 dark:text-slate-300",children:b.phone||"-"})]}),u.jsxs("div",{className:"flex items-start justify-between text-sm gap-4",children:[u.jsx("span",{className:"text-slate-400 dark:text-slate-500 font-medium whitespace-nowrap",children:"Adres"}),u.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-right truncate max-w-[180px]",title:b.address,children:b.address||"-"})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm bg-slate-50 dark:bg-slate-800/50 p-3 rounded-xl",children:[u.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-bold",children:"Bakiye"}),u.jsx("span",{className:"font-bold text-lg text-slate-900 dark:text-white",children:"0,00"})]})]})]},b.id))}),u.jsx(jMe,{isOpen:!!s,onClose:()=>i(null),client:s}),u.jsx(OMe,{isOpen:o,onClose:()=>a(!1),onCreate:g})]})}function MMe({isOpen:t,onClose:e,onSubmit:n}){const[r,s]=y.useState([]),[i,o]=y.useState([]),[a,l]=y.useState(!1);y.useEffect(()=>{if(!t)return;(async()=>{l(!0);try{const{data:b}=await X.from("clients").select("id, name").order("name"),{data:v}=await X.from("profiles").select("id, full_name").order("full_name");o(b||[]),s(v||[])}catch(b){console.error("Fetch modal data error:",b)}finally{l(!1)}})()},[t]);const[c,d]=y.useState({name:"",customer:"",customerId:"",description:"",status:"Hazrlk",priority:"Normal",startDate:new Date().toISOString().split("T")[0],endDate:"",assignee:"",team:[],links:[],price:"0.00"}),[h,f]=y.useState({label:"",url:""}),p=()=>{h.label&&h.url&&(d({...c,links:[...c.links||[],h]}),f({label:"",url:""}))},m=x=>{const b=[...c.links];b.splice(x,1),d({...c,links:b})};if(!t)return null;const g=x=>{if(x.preventDefault(),!c.customerId){alert("Ltfen bir mteri seiniz.");return}n(c)};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto animate-in fade-in zoom-in-95 duration-200 border border-slate-200 dark:border-slate-800",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800 sticky top-0 bg-white dark:bg-slate-900 z-10",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Yeni Proje Olutur"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:"Proje bilgilerini girin"})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Proje Ad *"}),u.jsx("input",{required:!0,type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white",value:c.name,onChange:x=>d({...c,name:x.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Mteri *"}),u.jsxs("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white",value:c.customerId,onChange:x=>{const b=i.find(v=>v.id===x.target.value);d({...c,customerId:x.target.value,customer:(b==null?void 0:b.name)||""})},children:[u.jsx("option",{value:"",children:a?"Ykleniyor...":"Mteri Seiniz..."}),i.map(x=>u.jsx("option",{value:x.id,children:x.name},x.id))]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Aklama"}),u.jsx("textarea",{rows:3,placeholder:"Proje hakknda detayl aklama...",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all resize-none bg-white dark:bg-slate-950 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",value:c.description,onChange:x=>d({...c,description:x.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Durum"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white",value:c.status,onChange:x=>d({...c,status:x.target.value}),children:[u.jsx("option",{value:"Planlama",children:"Planlama"}),u.jsx("option",{value:"Devam Ediyor",children:"Devam Ediyor"}),u.jsx("option",{value:"Tamamland",children:"Tamamland"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"ncelik"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white",value:c.priority,onChange:x=>d({...c,priority:x.target.value}),children:[u.jsx("option",{value:"dk",children:"dk"}),u.jsx("option",{value:"orta",children:"orta"}),u.jsx("option",{value:"yksek",children:"yksek"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Balang Tarihi"}),u.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white",value:c.startDate,onChange:x=>d({...c,startDate:x.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Biti Tarihi"}),u.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white",value:c.endDate,onChange:x=>d({...c,endDate:x.target.value})})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Proje Ekibi / Atanan Personeller"}),u.jsx("div",{className:"flex gap-2",children:u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white",onChange:x=>{x.target.value&&!c.team.includes(x.target.value)&&d({...c,team:[...c.team,x.target.value]}),x.target.value=""},children:[u.jsx("option",{value:"",children:a?"Ykleniyor...":"Personel Seiniz..."}),r.map(x=>u.jsx("option",{value:x.id,children:x.full_name},x.id))]})}),c.team.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mt-2 p-2 bg-gray-50 dark:bg-slate-800/50 rounded-lg border border-gray-100 dark:border-slate-800",children:c.team.map((x,b)=>{const v=r.find(w=>w.id===x);return u.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-md border border-gray-200 dark:border-slate-700 text-sm text-gray-700 dark:text-slate-300 shadow-sm",children:[u.jsx("span",{children:(v==null?void 0:v.full_name)||"Bilinmeyen"}),u.jsx("button",{type:"button",onClick:()=>d({...c,team:c.team.filter(w=>w!==x)}),className:"text-gray-400 hover:text-red-500",children:u.jsx(Jt,{className:"w-3 h-3"})})]},b)})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Projeyi Kim Getirdi?"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white",value:c.assignee,onChange:x=>d({...c,assignee:x.target.value}),children:[u.jsx("option",{value:"",children:a?"Ykleniyor...":"Seiniz..."}),r.map(x=>u.jsx("option",{value:x.id,children:x.full_name},x.id))]})]}),u.jsxs("div",{className:"space-y-2 pt-2 border-t border-gray-50 dark:border-slate-800",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Proje Dosyalar / Linkler"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",placeholder:"Balk (rn: Figma)",className:"w-1/3 px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 bg-white dark:bg-slate-950 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",value:h.label,onChange:x=>f({...h,label:x.target.value})}),u.jsx("input",{type:"url",placeholder:"https://...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 bg-white dark:bg-slate-950 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",value:h.url,onChange:x=>f({...h,url:x.target.value})}),u.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-gray-900 dark:bg-white text-white dark:text-slate-900 rounded-lg text-sm font-medium hover:bg-gray-800 dark:hover:bg-gray-100",children:"Ekle"})]}),c.links&&c.links.length>0&&u.jsx("div",{className:"space-y-2 mt-2",children:c.links.map((x,b)=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-slate-800/50 rounded-lg border border-gray-100 dark:border-slate-800 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[u.jsxs("span",{className:"font-semibold text-gray-700 dark:text-slate-300 whitespace-nowrap",children:[x.label,":"]}),u.jsx("a",{href:x.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline truncate",children:x.url})]}),u.jsx("button",{type:"button",onClick:()=>m(b),className:"text-gray-400 hover:text-red-500",children:u.jsx(Jt,{className:"w-4 h-4"})})]},b))})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-green-700 dark:text-green-500 flex items-center gap-1",children:"ANLAILAN FYAT ()"}),u.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-slate-900 dark:text-white",value:c.price,onChange:x=>d({...c,price:x.target.value})})]}),u.jsxs("div",{className:"pt-4 flex gap-3 justify-end border-t border-gray-100 dark:border-slate-800 mt-6",children:[u.jsx(re,{type:"button",variant:"secondary",onClick:e,className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-300",children:"ptal"}),u.jsx(re,{type:"submit",className:"bg-[#6366f1] hover:bg-[#4f46e5] shadow-indigo-200 dark:shadow-indigo-900/40 text-white",children:"Proje Olutur"})]})]})]})})}function RMe({isOpen:t,onClose:e,project:n,onDelete:r,onUpdate:s}){var fe;const{user:i}=hn(),[o,a]=y.useState("overview"),[l,c]=y.useState(!1),[d,h]=y.useState(null),[f,p]=y.useState(!1),[m,g]=y.useState([]),[x,b]=y.useState([]),[v,w]=y.useState([]),[S,E]=y.useState([]),[C,T]=y.useState([]),[_,O]=y.useState(""),[N,R]=y.useState({name:"",url:"",type:"link"}),[M,W]=y.useState(""),D=y.useRef(null);if(y.useEffect(()=>{if(t&&n){a("overview"),g([]),b([]),w([]),h({...n,startDate:n.start_date?n.start_date.split("T")[0]:"",endDate:n.end_date?n.end_date.split("T")[0]:"",team_ids:n.team_ids||[]}),c(!1),(async()=>{p(!0);const{data:ke}=await X.from("clients").select("id, name"),{data:me}=await X.from("profiles").select("id, full_name, avatar_url");T(ke||[]),E(me||[]);const{data:Pe}=await X.from("project_subtasks").select("*").eq("project_id",n.id).order("created_at");g(Pe||[]);const{data:Dt}=await X.from("project_files").select("*").eq("project_id",n.id).order("created_at",{ascending:!1});b(Dt||[]);const{data:zn}=await X.from("project_activity").select("*, profiles(full_name)").eq("project_id",n.id).order("created_at",{ascending:!0});w(zn||[]),p(!1)})();const pe=X.channel(`project-${n.id}`).on("postgres_changes",{event:"*",schema:"public",filter:`project_id=eq.${n.id}`},ke=>{}).subscribe();return()=>{X.removeChannel(pe)}}},[t,n]),y.useEffect(()=>{o==="activity"&&D.current&&(D.current.scrollTop=D.current.scrollHeight)},[v,o]),!t||!n||!d)return null;const B=()=>{s({...d,start_date:d.startDate?new Date(d.startDate).toISOString():null,end_date:d.endDate?new Date(d.endDate).toISOString():null,price:typeof d.price=="string"?parseFloat(d.price.replace(/\./g,"").replace(",","."))||0:parseFloat(d.price)||0}),c(!1),$("Proje bilgilerini gncelledi.")},$=async(K,pe="log")=>{if(!i)return;const{error:ke}=await X.from("project_activity").insert({project_id:n.id,user_id:i.id,message:K,type:pe});if(!ke){const me={id:Date.now(),project_id:n.id,user_id:i.id,message:K,type:pe,created_at:new Date().toISOString(),profiles:{full_name:"Ben"}};w([...v,me])}},V=async K=>{if(K.preventDefault(),!_.trim())return;const{data:pe,error:ke}=await X.from("project_subtasks").insert({project_id:n.id,title:_,is_completed:!1}).select().single();!ke&&pe&&(g([...m,pe]),O(""),$(`Yeni grev ekledi: ${_}`))},A=async K=>{const{error:pe}=await X.from("project_subtasks").update({is_completed:!K.is_completed}).eq("id",K.id);pe||g(m.map(ke=>ke.id===K.id?{...ke,is_completed:!ke.is_completed}:ke))},z=async K=>{await X.from("project_subtasks").delete().eq("id",K),g(m.filter(pe=>pe.id!==K))},j=async K=>{if(K.preventDefault(),!N.url||!N.name)return;const{data:pe,error:ke}=await X.from("project_files").insert({project_id:n.id,name:N.name,url:N.url,type:N.type,uploaded_by:i==null?void 0:i.id}).select().single();!ke&&pe&&(b([pe,...x]),R({name:"",url:"",type:"link"}),$(`Yeni dosya ekledi: ${N.name}`))},U=async K=>{await X.from("project_files").delete().eq("id",K),b(x.filter(pe=>pe.id!==K))},H=async K=>{K.preventDefault(),M.trim()&&(await $(M,"comment"),W(""))},I=K=>{switch(K){case"Devam Ediyor":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"Tamamland":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30";case"Hazrlk":case"Planlama":return"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30";default:return"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300"}},q=()=>{var K,pe,ke;return u.jsx("div",{className:"space-y-6 animate-in fade-in duration-300",children:l?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Proje Ad"}),u.jsx("input",{className:"w-full input-primary",value:d.name,onChange:me=>h({...d,name:me.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label-text",children:"Mteri"}),u.jsxs("select",{className:"w-full input-primary",value:d.client_id,onChange:me=>h({...d,client_id:me.target.value}),children:[u.jsx("option",{value:"",children:"Seiniz..."}),C.map(me=>u.jsx("option",{value:me.id,children:me.name},me.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label-text",children:"Durum"}),u.jsxs("select",{className:"w-full input-primary",value:d.status,onChange:me=>h({...d,status:me.target.value}),children:[u.jsx("option",{children:"Hazrlk"}),u.jsx("option",{children:"Devam Ediyor"}),u.jsx("option",{children:"Tamamland"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label-text",children:"Aklama"}),u.jsx("textarea",{rows:3,className:"w-full input-primary resize-none",value:d.description,onChange:me=>h({...d,description:me.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"label-text",children:"Balang"}),u.jsx("input",{type:"date",className:"w-full input-primary",value:d.startDate,onChange:me=>h({...d,startDate:me.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label-text",children:"Biti"}),u.jsx("input",{type:"date",className:"w-full input-primary",value:d.endDate,onChange:me=>h({...d,endDate:me.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label-text",children:"Bte ()"}),u.jsx("input",{type:"text",className:"w-full input-primary",value:d.price,onChange:me=>h({...d,price:me.target.value})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"label-text",children:"Ekip"}),u.jsxs("select",{className:"w-full input-primary",onChange:me=>{me.target.value&&!d.team_ids.includes(me.target.value)&&h({...d,team_ids:[...d.team_ids,me.target.value]}),me.target.value=""},children:[u.jsx("option",{value:"",children:"Personel Ekle..."}),S.map(me=>u.jsx("option",{value:me.id,children:me.full_name},me.id))]}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:d.team_ids.map(me=>{var Pe;return u.jsxs("div",{className:"badge-chip",children:[(Pe=S.find(Dt=>Dt.id===me))==null?void 0:Pe.full_name,u.jsx(Jt,{className:"w-3 h-3 cursor-pointer hover:text-red-500",onClick:()=>h({...d,team_ids:d.team_ids.filter(Dt=>Dt!==me)})})]},me)})})]}),u.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[u.jsx(re,{variant:"ghost",onClick:()=>c(!1),children:"ptal"}),u.jsx(re,{onClick:B,children:"Kaydet"})]})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-100 dark:border-slate-800",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Proje Bilgileri"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-slate-500",children:"Mteri:"}),u.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:((K=n.clients)==null?void 0:K.name)||"Yok"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-slate-500",children:"Ynetici:"}),u.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:((pe=S.find(me=>me.id===n.manager_id))==null?void 0:pe.full_name)||"-"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-slate-500",children:"Tarihler:"}),u.jsxs("p",{className:"font-semibold text-slate-900 dark:text-white text-sm",children:[n.start_date?Ve(nt(n.start_date),"d MMM",{locale:Cn}):"?"," -",n.end_date?Ve(nt(n.end_date),"d MMM yyyy",{locale:Cn}):"?"]})]})]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-100 dark:border-slate-800",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Finans & Durum"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{children:u.jsx("span",{className:ie("px-2.5 py-1 rounded-lg text-xs font-bold border",I(n.status)),children:n.status})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-slate-500",children:"Bte:"}),u.jsxs("p",{className:"text-xl font-black text-emerald-600 dark:text-emerald-400",children:["",(ke=n.price)==null?void 0:ke.toLocaleString()]})]})]})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Aklama"}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl",children:n.description||"Aklama yok."})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Proje Ekibi"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:(n.team_ids||[]).map(me=>{var Pe,Dt,zn;return u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:[u.jsx("div",{className:"w-5 h-5 rounded-full bg-violet-100 dark:bg-violet-900 text-violet-600 dark:text-violet-300 flex items-center justify-center text-xs font-bold",children:((Dt=(Pe=S.find(Gr=>Gr.id===me))==null?void 0:Pe.full_name)==null?void 0:Dt.charAt(0))||"U"}),u.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:(zn=S.find(Gr=>Gr.id===me))==null?void 0:zn.full_name})]},me)})})]})]})})},G=()=>u.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[u.jsxs("form",{onSubmit:V,className:"flex gap-2",children:[u.jsx("input",{autoFocus:!0,placeholder:"Yeni bir grev ekle...",className:"flex-1 input-primary",value:_,onChange:K=>O(K.target.value)}),u.jsxs(re,{type:"submit",disabled:!_.trim(),children:[u.jsx(Ht,{className:"w-4 h-4 mr-2"})," Ekle"]})]}),u.jsx("div",{className:"space-y-1",children:m.length===0?u.jsxs("div",{className:"text-center py-10 text-slate-400 dark:text-slate-600",children:[u.jsx(dj,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),u.jsx("p",{children:"Henz i maddesi eklenmemi."})]}):m.map(K=>u.jsxs("div",{className:"flex items-start gap-3 p-3 group hover:bg-slate-50 dark:hover:bg-slate-900/50 rounded-lg transition-colors",children:[u.jsx("button",{onClick:()=>A(K),className:ie("mt-0.5 w-5 h-5 rounded border flex items-center justify-center transition-all",K.is_completed?"bg-emerald-500 border-emerald-500 text-white":"border-slate-300 dark:border-slate-600 hover:border-violet-500 text-transparent"),children:u.jsx(tr,{className:"w-3.5 h-3.5"})}),u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:ie("text-sm transition-all",K.is_completed?"text-slate-400 line-through":"text-slate-800 dark:text-slate-200"),children:K.title})}),u.jsx("button",{onClick:()=>z(K.id),className:"opacity-0 group-hover:opacity-100 text-slate-400 hover:text-red-500 transition-opacity",children:u.jsx(hr,{className:"w-4 h-4"})})]},K.id))})]}),Z=()=>u.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[u.jsxs("form",{onSubmit:j,className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800 space-y-3",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx("input",{placeholder:"Dosya Ad (rn: Szleme)",className:"input-primary text-sm",value:N.name,onChange:K=>R({...N,name:K.target.value})}),u.jsxs("select",{className:"input-primary text-sm",value:N.type,onChange:K=>R({...N,type:K.target.value}),children:[u.jsx("option",{value:"link",children:"Harici Link"}),u.jsx("option",{value:"drive",children:"Google Drive"}),u.jsx("option",{value:"figma",children:"Figma"}),u.jsx("option",{value:"file",children:"Dosya"})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{placeholder:"URL veya Dosya Linki",className:"flex-1 input-primary text-sm",value:N.url,onChange:K=>R({...N,url:K.target.value})}),u.jsx(re,{type:"submit",size:"sm",disabled:!N.url,children:"Ekle"})]})]}),u.jsx("div",{className:"grid grid-cols-1 gap-2",children:x.length===0?u.jsxs("div",{className:"text-center py-10 text-slate-400 dark:text-slate-600",children:[u.jsx(pj,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),u.jsx("p",{children:"Dosya bulunmuyor."})]}):x.map(K=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-800 hover:shadow-sm transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 flex items-center justify-center",children:K.type==="link"?u.jsx(uQ,{className:"w-5 h-5"}):u.jsx(no,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:K.name}),u.jsx("a",{href:K.url,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-500 hover:underline max-w-[200px] truncate block opacity-80",children:K.url})]})]}),u.jsx("button",{onClick:()=>U(K.id),className:"text-slate-400 hover:text-red-500 p-2",children:u.jsx(hr,{className:"w-4 h-4"})})]},K.id))})]}),te=()=>u.jsxs("div",{className:"flex flex-col h-[500px] animate-in fade-in duration-300",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 p-2",ref:D,children:[v.length===0&&u.jsxs("div",{className:"text-center py-20 text-slate-400 dark:text-slate-600",children:[u.jsx(fj,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),u.jsx("p",{children:"Henz bir aktivite yok."})]}),v.map(K=>{var me,Pe;const pe=K.type==="log",ke=K.user_id===(i==null?void 0:i.id);return pe?u.jsxs("div",{className:"flex items-center justify-center gap-2 my-4",children:[u.jsx("div",{className:"h-px w-8 bg-slate-200 dark:bg-slate-800"}),u.jsxs("span",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-wider",children:[K.message,"  ",Ve(nt(K.created_at),"HH:mm")]}),u.jsx("div",{className:"h-px w-8 bg-slate-200 dark:bg-slate-800"})]},K.id):u.jsxs("div",{className:ie("flex gap-3 max-w-[85%]",ke?"ml-auto flex-row-reverse":""),children:[u.jsx("div",{className:ie("w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shrink-0",ke?"bg-violet-600 text-white":"bg-slate-200 text-slate-600"),children:((Pe=(me=K.profiles)==null?void 0:me.full_name)==null?void 0:Pe.charAt(0))||"?"}),u.jsxs("div",{className:ie("p-3 rounded-2xl text-sm",ke?"bg-violet-600 text-white rounded-tr-none":"bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded-tl-none"),children:[u.jsx("p",{children:K.message}),u.jsx("span",{className:ie("text-[10px] block mt-1 opacity-70",ke?"text-violet-200":"text-slate-400"),children:Ve(nt(K.created_at),"HH:mm",{locale:Cn})})]})]},K.id)})]}),u.jsxs("form",{onSubmit:H,className:"pt-4 border-t border-slate-100 dark:border-slate-800 flex gap-2",children:[u.jsx("input",{placeholder:"Yorum yaz...",className:"flex-1 input-primary",value:M,onChange:K=>W(K.target.value)}),u.jsx(re,{type:"submit",size:"icon",className:"bg-violet-600",children:u.jsx(bQ,{className:"w-4 h-4"})})]})]});return u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl w-full max-w-2xl h-[85vh] flex flex-col border border-slate-200 dark:border-slate-800 overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-black text-gray-900 dark:text-white flex items-center gap-2",children:[n.name,!l&&u.jsx(rm,{className:"w-4 h-4 text-slate-400 cursor-pointer hover:text-violet-600",onClick:()=>c(!0)})]}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-0.5",children:(fe=n.clients)==null?void 0:fe.name})]}),u.jsxs("div",{className:"flex gap-2",children:[!l&&u.jsx(re,{variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:()=>{confirm("Sil?")&&r(n.id)},children:u.jsx(hr,{className:"w-5 h-5"})}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,children:u.jsx(Jt,{className:"w-5 h-5"})})]})]}),u.jsx("div",{className:"flex items-center gap-1 px-6 border-b border-gray-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:[{id:"overview",label:"Genel Bak",icon:kb},{id:"tasks",label:" Listesi",icon:dj},{id:"files",label:"Dosyalar",icon:pj},{id:"wiki",label:"Wiki",icon:Sc},{id:"activity",label:"Gnlk",icon:fj}].map(K=>{const pe=K.icon,ke=o===K.id;return u.jsxs("button",{onClick:()=>a(K.id),className:ie("flex items-center gap-2 px-4 py-3 text-sm font-medium transition-all relative",ke?"text-violet-600 dark:text-violet-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:[u.jsx(pe,{className:"w-4 h-4"}),K.label,ke&&u.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-violet-600 dark:bg-violet-400 rounded-t-full"})]},K.id)})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin",children:f?u.jsx("div",{className:"text-center py-20 text-slate-400",children:"Ykleniyor..."}):u.jsxs(u.Fragment,{children:[o==="overview"&&q(),o==="tasks"&&G(),o==="files"&&Z(),o==="wiki"&&u.jsx("div",{className:"h-[500px]",children:u.jsx(Rm,{entityId:n.id,entityType:"project"})}),o==="activity"&&te()]})})]}),u.jsx("style",{children:`
          .input-primary {
              @apply px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500/20 bg-white dark:bg-slate-950 text-slate-900 dark:text-white transition-all text-sm;
          }
          .label-text {
              @apply text-xs font-semibold text-slate-700 dark:text-slate-300 mb-1 block;
          }
          .badge-chip {
              @apply flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded text-xs font-medium text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-700;
          }
      `})]})}function PMe(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),{user:s,isAdmin:i}=hn(),[o,a]=y.useState("Tm"),[l,c]=y.useState(!1),[d,h]=y.useState(null),[f,p]=y.useState(""),[m,g]=y.useState("Tm Durumlar"),[x,b]=y.useState({total:0,ongoing:0,completed:0,planning:0}),v=async()=>{try{r(!0);const{data:_,error:O}=await X.from("projects").select("*, clients(name)");if(O)throw O;const N=(_||[]).map(M=>{var W;return{...M,customer:((W=M.clients)==null?void 0:W.name)||"Bilinmiyor"}});e(N);const R={total:N.length,ongoing:N.filter(M=>M.status==="Devam Ediyor").length,completed:N.filter(M=>M.status==="Tamamland").length,planning:N.filter(M=>M.status==="Hazrlk"||M.status==="Planlama").length};b(R)}catch(_){console.error("Projects fetch error:",_)}finally{r(!1)}};y.useEffect(()=>{s&&v()},[s]);const w=async _=>{try{let O=null;const{data:N}=await X.from("clients").select("id").eq("name",_.customer).single();if(N)O=N.id;else{const{data:W,error:D}=await X.from("clients").insert({name:_.customer,type:"Normal",status:"Aktif"}).select().single();D||(O=W.id)}const R={name:_.name,client_id:O,status:_.status,price:parseFloat(_.price)||0,description:_.description,start_date:_.startDate?new Date(_.startDate).toISOString():null,end_date:_.endDate?new Date(_.endDate).toISOString():null,manager_id:_.assignee||null,team_ids:_.team||[]},{error:M}=await X.from("projects").insert(R);if(M)throw M;alert("Proje oluturuldu."),c(!1),v()}catch(O){console.error("Create project error:",O),alert("Hata: "+O.message)}},S=async _=>{try{const{error:O}=await X.from("projects").delete().eq("id",_);if(O)throw O;v()}catch(O){alert("Silme hatas: "+O.message)}},E=async _=>{try{const{error:O}=await X.from("projects").update({status:_.status}).eq("id",_.id);if(O)throw O;v()}catch(O){console.error(O)}},C=_=>{switch(_){case"Devam Ediyor":return"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-400 border-amber-200 dark:border-amber-900/50";case"Tamamland":return"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-400 border-emerald-200 dark:border-emerald-900/50";case"Planlama":case"Hazrlk":return"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-400 border-indigo-200 dark:border-indigo-900/50";default:return"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-400 border-slate-200 dark:border-slate-700"}},T=t.filter(_=>{const O=_.customer||"",N=_.name.toLowerCase().includes(f.toLowerCase())||O.toLowerCase().includes(f.toLowerCase()),R=_.status==="Hazrlk"?"Planlama":_.status;return N&&(m==="Tm Durumlar"||R===m)});return u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Projeler"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 font-medium",children:"Tm projeleri buradan takip et ve ynet."})]}),u.jsxs(re,{onClick:()=>c(!0),className:"bg-violet-600 hover:bg-violet-700 text-white shadow-lg shadow-violet-500/20 dark:shadow-violet-900/40",children:[u.jsx(Ht,{className:"w-4 h-4 mr-2"})," Yeni Proje"]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border dark:border-slate-800 shadow-sm hover:shadow-md transition-all bg-violet-50 dark:bg-violet-900/20 border-violet-100 dark:border-violet-900/50",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Toplam Proje"}),u.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:x.total})]}),u.jsx("div",{className:"p-3 bg-white dark:bg-slate-950/30 rounded-xl shadow-sm",children:u.jsx(t2,{className:"w-6 h-6 text-violet-600 dark:text-violet-400"})})]})}),u.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border dark:border-slate-800 shadow-sm hover:shadow-md transition-all bg-amber-50 dark:bg-amber-900/20 border-amber-100 dark:border-amber-900/50",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-slate-500",children:"Devam Eden"}),u.jsx("h3",{className:"text-2xl font-bold",children:x.ongoing})]}),u.jsx("div",{className:"p-3 bg-white/50 rounded-xl",children:u.jsx(pi,{className:"w-6 h-6 text-amber-600"})})]})}),u.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border dark:border-slate-800 shadow-sm hover:shadow-md transition-all bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-900/50",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-slate-500",children:"Tamamlanan"}),u.jsx("h3",{className:"text-2xl font-bold",children:x.completed})]}),u.jsx("div",{className:"p-3 bg-white/50 rounded-xl",children:u.jsx(tr,{className:"w-6 h-6 text-emerald-600"})})]})})]}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Proje veya mteri ara...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all font-medium text-slate-700 dark:text-slate-200 placeholder:text-slate-400 dark:placeholder:text-slate-600",value:f,onChange:_=>p(_.target.value)})]}),u.jsxs("div",{className:"relative",children:[u.jsx(iT,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 w-4 h-4"}),u.jsxs("select",{className:"pl-10 pr-8 py-2.5 rounded-xl border border-slate-200 dark:border-slate-800 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 bg-white dark:bg-slate-900 font-medium text-slate-700 dark:text-slate-200 appearance-none cursor-pointer",value:m,onChange:_=>g(_.target.value),children:[u.jsx("option",{children:"Tm Durumlar"}),u.jsx("option",{children:"Devam Ediyor"}),u.jsx("option",{children:"Planlama"}),u.jsx("option",{children:"Tamamland"})]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n?u.jsx("div",{className:"col-span-full flex justify-center py-20",children:u.jsx(Hn,{className:"w-8 h-8 animate-spin text-violet-600"})}):T.map(_=>{var O;return u.jsxs("div",{onClick:()=>h(_),className:"group bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-xl hover:border-violet-200 dark:hover:border-violet-900 transition-all duration-300 cursor-pointer relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-violet-500 scale-y-0 group-hover:scale-y-100 transition-transform duration-300 origin-top"}),u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("div",{className:"flex gap-2",children:u.jsx("span",{className:ie("px-2.5 py-1 rounded-lg text-xs font-bold border",C(_.status)),children:_.status})}),u.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-400 dark:text-slate-500 group-hover:bg-violet-100 dark:group-hover:bg-violet-900/30 group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors",children:u.jsx(Gc,{className:"w-4 h-4"})})]}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 group-hover:text-violet-700 dark:group-hover:text-violet-400 transition-colors",children:_.name}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-5 font-medium flex items-center gap-2",children:[u.jsx(pr,{className:"w-3.5 h-3.5"}),_.customer]}),u.jsx("div",{className:"space-y-3 pt-4 border-t border-slate-100 dark:border-slate-800",children:u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-slate-400 dark:text-slate-500 font-medium",children:"Bte"}),u.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:["",(O=_.price)==null?void 0:O.toLocaleString()]})]})})]},_.id)})}),u.jsx(MMe,{isOpen:l,onClose:()=>c(!1),onSubmit:w}),u.jsx(RMe,{isOpen:!!d,onClose:()=>h(null),project:d,onDelete:S,onUpdate:E})]})}function DMe({isOpen:t,onClose:e,staff:n}){const[r,s]=y.useState("overview");return!t||!n?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl w-full max-w-lg h-[80vh] flex flex-col border border-slate-200 dark:border-slate-800 overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-black text-gray-900 dark:text-white",children:"Personel Detay"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:"Personel bilgilerini grntleyin"})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"flex items-center gap-1 px-6 border-b border-gray-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:[{id:"overview",label:"Profil",icon:ro},{id:"wiki",label:"zel Notlar",icon:Sc}].map(i=>{const o=i.icon,a=r===i.id;return u.jsxs("button",{onClick:()=>s(i.id),className:ie("flex items-center gap-2 px-4 py-3 text-sm font-medium transition-all relative",a?"text-blue-600 dark:text-blue-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:[u.jsx(o,{className:"w-4 h-4"}),i.label,a&&u.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 dark:bg-blue-400 rounded-t-full"})]},i.id)})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin",children:r==="overview"?u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsx("div",{className:ie("w-20 h-20 rounded-2xl flex items-center justify-center text-white text-2xl font-black shadow-lg shadow-blue-500/20",n.avatarColor||"bg-blue-600"),children:n.name.split(" ").map(i=>i[0]).join("").substring(0,2).toUpperCase()}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white",children:n.name}),u.jsx("div",{className:"flex items-center gap-2 mt-1",children:u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-lg text-[10px] font-black bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 uppercase tracking-wider",children:n.role})})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-6 p-6 bg-gray-50 dark:bg-slate-800/50 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Ad Soyad"}),u.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:n.name})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"E-posta"}),u.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white break-words",children:n.email})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Rol"}),u.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white font-mono",children:n.role})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Kayt Tarihi"}),u.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:n.joinedDate})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"IBAN Bilgisi"}),u.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white font-mono",children:n.iban||"-"})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1",children:"Adres"}),u.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase",children:n.address||"-"})]})]})]}):u.jsx("div",{className:"h-full flex flex-col animate-in fade-in duration-300",children:u.jsx(Rm,{entityId:n.id,entityType:"staff",isPrivate:!0})})})]})})}function LMe(){const[t,e]=y.useState("Tm"),[n,r]=y.useState(""),[s,i]=y.useState(null),[o,a]=y.useState([]),[l,c]=y.useState(!0),{user:d}=hn(),h=async()=>{try{c(!0);const{data:m,error:g}=await X.from("profiles").select("*").order("created_at",{ascending:!1});if(g)throw g;const x=m.map(b=>({id:b.id,name:b.full_name||"simsiz",email:b.email||"-",role:b.role||"Mhendis",team:b.team||null,joinedDate:b.created_at?Ve(nt(b.created_at),"dd.MM.yyyy"):"-",address:b.address||"",phone:b.phone||"",avatarColor:f(b.role)}));a(x)}catch(m){console.error("Staff fetch error:",m)}finally{c(!1)}};y.useEffect(()=>{d&&h()},[d]);const f=m=>m==="Ynetici"?"bg-gradient-to-br from-purple-500 to-indigo-600":"bg-gradient-to-br from-blue-500 to-cyan-600",p=o.filter(m=>{const g=m.name||"",x=m.email||"",b=g.toLowerCase().includes(n.toLowerCase())||x.toLowerCase().includes(n.toLowerCase());return t==="Tm"?b:b&&m.role===t});return u.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Personeller"}),u.jsx("p",{className:"text-gray-500 dark:text-slate-400 mt-1",children:"Kullanc Ynetimi'nden eklenen tm personeller"})]})}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-gray-100 dark:border-slate-800 shadow-sm flex items-center justify-between transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-slate-400",children:"Toplam Personel"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:p.length})]}),u.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400",children:u.jsx(so,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-gray-100 dark:border-slate-800 shadow-sm space-y-4 transition-colors",children:[u.jsx("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:u.jsxs("div",{className:"relative w-full",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-slate-500"}),u.jsx("input",{type:"text",placeholder:"Personel ara (isim, email, rol)...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:n,onChange:m=>r(m.target.value)})]})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-500 dark:text-slate-400",children:[u.jsx(iT,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Rol Filtresi"})]}),["Tm","Ynetici","Mhendis"].map(m=>u.jsx(re,{onClick:()=>e(m),variant:t===m?"default":"ghost",size:"sm",className:ie("h-8 transition-all",t===m?"bg-[#6366f1] text-white shadow-sm":"text-gray-600 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-800"),children:m},m))]})]}),l?u.jsx("div",{className:"flex justify-center py-20",children:u.jsx(Hn,{className:"w-8 h-8 animate-spin text-violet-600"})}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[p.map(m=>u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-100 dark:border-slate-800 p-6 shadow-sm hover:shadow-md transition-all",children:[u.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[u.jsx("div",{className:ie("w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg",m.avatarColor),children:m.name.split(" ").map(g=>g[0]).join("").substring(0,2).toUpperCase()}),u.jsx("div",{children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:m.name}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("span",{className:"text-sm text-gray-500 dark:text-slate-400",children:m.role}),m.team&&u.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-100 dark:border-blue-900/50",children:m.team})]})]})})]}),u.jsxs("div",{className:"space-y-3 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-slate-400",children:[u.jsx(pL,{className:"w-4 h-4 text-gray-400 dark:text-slate-500"}),u.jsx("span",{className:"truncate",children:m.email})]}),u.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-slate-400",children:[u.jsx(pr,{className:"w-4 h-4 text-gray-400 dark:text-slate-500"}),u.jsx("span",{children:m.role})]}),u.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-slate-400",children:[u.jsx(to,{className:"w-4 h-4 text-gray-400 dark:text-slate-500"}),u.jsx("span",{children:m.joinedDate})]}),m.address&&u.jsxs("div",{className:"flex items-start gap-3 text-sm text-gray-600 dark:text-slate-400",children:[u.jsx(aT,{className:"w-4 h-4 text-gray-400 dark:text-slate-500 mt-0.5"}),u.jsx("span",{className:"line-clamp-2",children:m.address})]})]}),u.jsxs(re,{variant:"outline",onClick:()=>i(m),className:"w-full gap-2 border-gray-200 dark:border-slate-800 text-gray-700 dark:text-slate-300 hover:bg-gray-50 dark:hover:bg-slate-800",children:[u.jsx(Gc,{className:"w-4 h-4"}),"Grntle"]})]},m.id)),p.length===0&&!l&&u.jsx("div",{className:"col-span-full text-center py-12",children:u.jsx("p",{className:"text-gray-500 dark:text-slate-400",children:"Personel bulunamad."})})]}),u.jsx(DMe,{isOpen:!!s,onClose:()=>i(null),staff:s})]})}function BMe({proposalId:t,onClose:e,onUpdate:n}){var C;const[r,s]=y.useState(null),[i,o]=y.useState([]),[a,l]=y.useState(!0),[c,d]=y.useState([]),[h,f]=y.useState(!1),[p,m]=y.useState({description:"",quantity:1,unit_price:0});y.useEffect(()=>{g()},[t]);const g=async()=>{l(!0);const{data:T,error:_}=await X.from("proposals").select("*").eq("id",t).single();if(_){console.error("Teklif yklenemedi:",_),alert("Teklif yklenemedi: "+_.message),e();return}const{data:O}=await X.from("proposal_items").select("*").eq("proposal_id",t).order("id"),{data:N}=await X.from("clients").select("id, name");s(T),o(O||[]),d(N||[]),l(!1)},x=async()=>{let T=localStorage.getItem("gemini_api_key");if(!T)if(T=prompt(`Ltfen Google Gemini API Anahtarnz giriniz:
(Taraycnza kaydedilecektir)`),T)localStorage.setItem("gemini_api_key",T);else return;const _=prompt(`Nasl bir proje iin teklif hazrlamak istiyorsunuz?
rn: E-ticaret sitesi, Mobil Uygulama, Logo Tasarm`);if(_){f(!0);try{const O=await EMe(_,T),N=[];for(const M of O){const{data:W}=await X.from("proposal_items").insert({proposal_id:t,description:M.description,quantity:M.quantity,unit_price:M.unit_price}).select().single();W&&N.push(W)}const R=[...i,...N];o(R),w(R),alert("AI baaryla "+N.length+" kalem oluturdu!")}catch(O){alert("AI Hatas: "+O.message),O.message.includes("API Key")&&localStorage.removeItem("gemini_api_key")}finally{f(!1)}}},b=async()=>{if(!p.description)return;const{data:T,error:_}=await X.from("proposal_items").insert({proposal_id:t,description:p.description,quantity:p.quantity,unit_price:p.unit_price}).select().single();T&&(o([...i,T]),m({description:"",quantity:1,unit_price:0}),w(i.concat(T)))},v=async T=>{await X.from("proposal_items").delete().eq("id",T);const _=i.filter(O=>O.id!==T);o(_),w(_)},w=async T=>{const _=T.reduce((O,N)=>O+N.unit_price*N.quantity,0);await X.from("proposals").update({total_amount:_}).eq("id",t),s({...r,total_amount:_}),n&&n()},S=()=>{const T=`${window.location.origin}/proposal/${r.access_token}`;navigator.clipboard.writeText(T),alert(`Mteri linki kopyaland! WhatsApp'tan atabilirsiniz.
`+T)},E=async()=>{if(confirm("Bu teklifi Projeye dntrmek istediinize emin misiniz?"))try{const{data:T,error:_}=await X.from("projects").insert({name:r.title,client_id:r.client_id,price:r.total_amount*(1+r.tax_rate/100),status:"Hazrlk",description:`Teklif No: #${r.proposal_number} referansyla oluturuldu.`,start_date:new Date().toISOString()}).select().single();if(_)throw _;await X.from("proposals").update({status:"Onayland"}).eq("id",t),alert("Baarl! Proje oluturuldu."),e(),n&&n()}catch(T){alert("Hata: "+T.message)}};return r?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-4xl h-[90vh] rounded-2xl flex flex-col items-center shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800",children:[u.jsxs("div",{className:"w-full p-6 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center bg-white dark:bg-slate-900",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-black text-gray-900 dark:text-white flex items-center gap-2",children:["Teklif Dzenleyici",u.jsxs("span",{className:"text-xs bg-violet-100 text-violet-700 px-2 py-1 rounded-full uppercase tracking-wider",children:["#",r.proposal_number]})]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Hizmetleri ekleyin ve mteriye gnderin."})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(re,{variant:"outline",onClick:x,disabled:h,className:"border-indigo-200 text-indigo-600 hover:bg-indigo-50",children:[h?u.jsx(Hn,{className:"w-4 h-4 mr-2 animate-spin"}):u.jsx(wQ,{className:"w-4 h-4 mr-2"}),"AI Sihirbaz"]}),u.jsxs(re,{variant:"ghost",onClick:S,className:"text-blue-600 hover:bg-blue-50",children:[u.jsx(hj,{className:"w-4 h-4 mr-2"})," Linki Kopyala"]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,children:u.jsx(Jt,{className:"w-5 h-5"})})]})]}),u.jsxs("div",{className:"flex-1 w-full overflow-hidden flex flex-col md:flex-row",children:[u.jsxs("div",{className:"flex-1 p-6 overflow-y-auto space-y-8 bg-slate-50 dark:bg-slate-950/50",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm space-y-4",children:[u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-sm uppercase tracking-wide",children:"Temel Bilgiler"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Balk"}),u.jsx("input",{className:"w-full p-2 rounded border border-gray-300 dark:border-slate-700 bg-transparent text-sm",value:r.title,onChange:async T=>{s({...r,title:T.target.value})},onBlur:async()=>await X.from("proposals").update({title:r.title}).eq("id",r.id)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Mteri"}),u.jsxs("select",{className:"w-full p-2 rounded border border-gray-300 dark:border-slate-700 bg-transparent text-sm",value:r.client_id||"",onChange:async T=>{s({...r,client_id:T.target.value}),await X.from("proposals").update({client_id:T.target.value}).eq("id",r.id)},children:[u.jsx("option",{value:"",children:"Seiniz"}),c.map(T=>u.jsx("option",{value:T.id,children:T.name},T.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"Para Birimi"}),u.jsxs("select",{className:"w-full p-2 rounded border border-gray-300 dark:border-slate-700 bg-transparent text-sm",value:r.currency,onChange:async T=>{s({...r,currency:T.target.value}),await X.from("proposals").update({currency:T.target.value}).eq("id",r.id)},children:[u.jsx("option",{value:"TRY",children:"TRY"}),u.jsx("option",{value:"USD",children:"USD"}),u.jsx("option",{value:"EUR",children:"EUR"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1 block",children:"KDV Oran (%)"}),u.jsx("input",{className:"w-full p-2 rounded border border-gray-300 dark:border-slate-700 bg-transparent text-sm",type:"number",value:r.tax_rate,onChange:async T=>{s({...r,tax_rate:T.target.value})},onBlur:async()=>await X.from("proposals").update({tax_rate:r.tax_rate}).eq("id",r.id)})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex justify-between items-center",children:u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-sm uppercase tracking-wide",children:"Hizmet Kalemleri"})}),u.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:u.jsxs("table",{className:"w-full text-sm text-left",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-slate-500",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3",children:"Hizmet"}),u.jsx("th",{className:"p-3 w-20 text-center",children:"Adet"}),u.jsx("th",{className:"p-3 w-32 text-right",children:"Fiyat"}),u.jsx("th",{className:"p-3 w-32 text-right",children:"Toplam"}),u.jsx("th",{className:"p-3 w-10"})]})}),u.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:[i.map(T=>u.jsxs("tr",{className:"group hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[u.jsx("td",{className:"p-3 font-medium",children:T.description}),u.jsx("td",{className:"p-3 text-center",children:T.quantity}),u.jsx("td",{className:"p-3 text-right",children:T.unit_price}),u.jsx("td",{className:"p-3 text-right font-bold",children:(T.quantity*T.unit_price).toLocaleString()}),u.jsx("td",{className:"p-3 text-center",children:u.jsx("button",{onClick:()=>v(T.id),className:"text-slate-300 hover:text-red-500",children:u.jsx(hr,{className:"w-4 h-4"})})})]},T.id)),u.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-950",children:[u.jsx("td",{className:"p-2",children:u.jsx("input",{placeholder:"Yeni hizmet...",className:"w-full bg-transparent p-1 outline-none",value:p.description,onChange:T=>m({...p,description:T.target.value})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full bg-transparent p-1 outline-none text-center",value:p.quantity,onChange:T=>m({...p,quantity:T.target.value})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full bg-transparent p-1 outline-none text-right",value:p.unit_price,onChange:T=>m({...p,unit_price:T.target.value})})}),u.jsx("td",{className:"p-3"}),u.jsx("td",{className:"p-2",children:u.jsx(re,{size:"sm",onClick:b,disabled:!p.description,children:u.jsx(Ht,{className:"w-4 h-4"})})})]})]})]})}),u.jsx("div",{className:"flex justify-end pr-4",children:u.jsxs("div",{className:"w-64 space-y-2 text-sm text-right",children:[u.jsxs("div",{className:"flex justify-between text-slate-500",children:[u.jsx("span",{children:"Ara Toplam"}),u.jsxs("span",{children:[(C=r.total_amount)==null?void 0:C.toLocaleString()," ",r.currency]})]}),u.jsxs("div",{className:"flex justify-between text-slate-500",children:[u.jsxs("span",{children:["KDV (%",r.tax_rate,")"]}),u.jsxs("span",{children:[(r.total_amount*(r.tax_rate/100)).toLocaleString()," ",r.currency]})]}),u.jsxs("div",{className:"flex justify-between font-bold text-lg text-slate-900 dark:text-white border-t pt-2",children:[u.jsx("span",{children:"TOPLAM"}),u.jsxs("span",{children:[(r.total_amount*(1+r.tax_rate/100)).toLocaleString()," ",r.currency]})]})]})})]})]}),u.jsxs("div",{className:"w-full md:w-80 bg-white dark:bg-slate-900 border-l border-gray-100 dark:border-slate-800 p-6 flex flex-col gap-4",children:[u.jsxs("div",{className:"p-4 rounded-xl bg-violet-50 dark:bg-violet-900/20 border border-violet-100 dark:border-violet-800 text-center",children:[u.jsx("p",{className:"text-xs font-bold text-violet-500 uppercase mb-1",children:"DURUM"}),u.jsx("p",{className:"text-xl font-black text-violet-800 dark:text-violet-300",children:r.status})]}),r.view_count>0&&u.jsxs("div",{className:"p-4 rounded-xl bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800 text-center",children:[u.jsx("p",{className:"text-xs font-bold text-amber-500 uppercase mb-1",children:"GRNTLENME"}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(tr,{className:"w-5 h-5 text-amber-600"}),u.jsxs("span",{className:"text-lg font-bold text-amber-800 dark:text-amber-300",children:[r.view_count," Kez"]})]})]}),u.jsx("hr",{className:"my-2 border-slate-100 dark:border-slate-800"}),u.jsxs(re,{className:"w-full bg-slate-800 hover:bg-slate-700 text-white",onClick:()=>window.open(`/proposal/${r.access_token}`,"_blank"),children:[u.jsx(yL,{className:"w-4 h-4 mr-2"})," nizle / Yazdr"]}),u.jsxs(re,{className:"w-full bg-violet-600 hover:bg-violet-700 text-white",onClick:S,children:[u.jsx(hj,{className:"w-4 h-4 mr-2"})," Linki Kopyala"]}),r.status!=="Onayland"?u.jsx(re,{variant:"outline",className:"w-full mt-auto",onClick:()=>X.from("proposals").update({status:"Onayland"}).eq("id",r.id).then(()=>g()),children:"Manuel Onayla"}):u.jsxs(re,{className:"w-full mt-auto bg-green-600 hover:bg-green-700 text-white",onClick:E,children:[u.jsx(YJ,{className:"w-4 h-4 mr-2"})," Projeye evir"]})]})]})]})}):null}function $Me(){const{user:t}=hn(),[e,n]=y.useState([]),[r,s]=y.useState(!0),[i,o]=y.useState(""),[a,l]=y.useState(null),[c,d]=y.useState(!1);y.useEffect(()=>{h()},[]);const h=async()=>{s(!0);let m=X.from("proposals").select("*, clients(name)").order("created_at",{ascending:!1});i&&(m=m.ilike("title",`%${i}%`));const{data:g,error:x}=await m;x&&console.error(x),n(g||[]),s(!1)},f=async()=>{if(!t){alert("Oturum amanz gerekiyor.");return}try{const{data:m,error:g}=await X.from("proposals").insert({title:"Yeni Taslak Teklif",status:"Taslak",user_id:t.id}).select().single();if(g)throw g;m&&(l(m.id),d(!0))}catch(m){console.error("Teklif oluturma hatas:",m),alert("Teklif oluturulamad: "+m.message+`
Ltfen veritaban kurulumunu yaptnzdan emin olun.`)}},p={Taslak:"bg-gray-100 text-gray-600",Gnderildi:"bg-blue-100 text-blue-600",Onayland:"bg-green-100 text-green-600",Reddedildi:"bg-red-100 text-red-600"};return u.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-400 bg-clip-text text-transparent",children:"Teklif Ynetimi"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Profesyonel teklifler hazrlayn ve satlar takip edin."})]}),u.jsxs(re,{onClick:f,className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-600/20",children:[u.jsx(Ht,{className:"w-4 h-4 mr-2"})," Yeni Teklif Olutur"]})]}),u.jsx("div",{className:"flex gap-4",children:u.jsxs("div",{className:"relative flex-1 max-w-sm",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",placeholder:"Teklif ara...",value:i,onChange:m=>o(m.target.value),onKeyDown:m=>m.key==="Enter"&&h()})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.map(m=>{var g,x;return u.jsxs("div",{onClick:()=>{l(m.id),d(!0)},className:"group bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-xl p-6 hover:shadow-xl hover:border-indigo-500/30 transition-all cursor-pointer relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase tracking-wider ${p[m.status]||"bg-gray-100"}`,children:m.status}),u.jsxs("span",{className:"text-xs font-mono text-gray-400",children:["#",m.proposal_number]})]}),u.jsx("h3",{className:"font-bold text-lg mb-1 truncate",children:m.title}),u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:((g=m.clients)==null?void 0:g.name)||"Mteri Seilmedi"}),u.jsxs("div",{className:"flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-400",children:"Toplam Tutar"}),u.jsxs("p",{className:"font-bold text-xl text-gray-900 dark:text-white",children:[(x=m.total_amount)==null?void 0:x.toLocaleString()," ",m.currency]})]}),u.jsx("div",{className:"flex gap-2 text-gray-400",children:m.view_count>0&&u.jsxs("div",{className:"flex items-center gap-1 text-amber-500",title:"Grntlendi",children:[u.jsx(Gc,{className:"w-4 h-4"}),u.jsx("span",{className:"text-xs font-bold",children:m.view_count})]})})]}),u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-50 dark:border-slate-800 flex justify-between text-xs text-gray-400",children:u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(pi,{className:"w-3 h-3"})," ",Ve(new Date(m.created_at),"dd MMM",{locale:Cn})]})})]},m.id)}),e.length===0&&!r&&u.jsxs("div",{className:"col-span-full py-20 text-center text-gray-400",children:[u.jsx(no,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),u.jsx("p",{children:"Henz hi teklif oluturmadnz."})]})]}),c&&u.jsx(BMe,{proposalId:a,onClose:()=>{d(!1),l(null),h()},onUpdate:h})]})}function dR({isOpen:t,onClose:e,onCreate:n,initialData:r,availablePersonnel:s=[],availableProjects:i=[]}){const[o,a]=y.useState({title:"",project_id:"",description:"",assignees:[],dueDate:"",status:"beklemede",priority:"orta"}),l=!!r,[c,d]=y.useState(!1),h=lt.useRef(null);if(y.useEffect(()=>{function m(g){h.current&&!h.current.contains(g.target)&&d(!1)}return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),y.useEffect(()=>{if(t){if(r){let m="";r.due_date&&(m=r.due_date.substring(0,10)),a({title:r.title||"",project_id:r.project_id||"",description:r.description||"",assignees:r.assigned_to||[],dueDate:m,status:r.status?r.status.toLowerCase():"beklemede",priority:r.priority?r.priority.toLowerCase():"orta"})}else a({title:"",project_id:"",description:"",assignees:[],dueDate:"",status:"beklemede",priority:"orta"});d(!1)}},[t,r]),!t)return null;const f=m=>{m.preventDefault(),n(o),e()},p=m=>{o.assignees.includes(m)?a({...o,assignees:o.assignees.filter(g=>g!==m)}):a({...o,assignees:[...o.assignees,m]})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh] border border-slate-200 dark:border-slate-800",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800 shrink-0",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l?" Emri Dzenle":"Yeni  Emri"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:l?"Grev bilgilerini gncelleyin":"Yeni grev oluturun"})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:u.jsxs("form",{id:"create-order-form",onSubmit:f,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Balk *"}),u.jsx("input",{required:!0,type:"text",placeholder:"rn: API Entegrasyonu",className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all text-sm bg-white dark:bg-slate-950 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",value:o.title,onChange:m=>a({...o,title:m.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Proje *"}),i.length>0||l?u.jsxs("select",{required:!0,className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all bg-white dark:bg-slate-950 text-sm text-slate-900 dark:text-white",value:o.project_id,onChange:m=>a({...o,project_id:m.target.value}),children:[u.jsx("option",{value:"",children:"Proje sein"}),i.map(m=>u.jsx("option",{value:m.id,children:m.name},m.id))]}):u.jsxs("div",{children:[u.jsx("input",{type:"text",placeholder:"nce Projeler sayfasndan proje ekleyin",disabled:!0,className:"w-full px-3 py-2.5 border border-gray-200 dark:border-slate-800 bg-gray-50 dark:bg-slate-800 rounded-lg text-gray-500 dark:text-slate-400 text-sm focus:outline-none focus:border-gray-300 transition-all placeholder:text-gray-400 dark:placeholder:text-slate-600 cursor-not-allowed",value:o.project}),u.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Ltfen nce Projeler sayfasna giderek bir proje oluturun."})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Aklama"}),u.jsx("textarea",{rows:3,placeholder:" emri detaylar...",className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all resize-none text-sm bg-white dark:bg-slate-950 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",value:o.description,onChange:m=>a({...o,description:m.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5 relative",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Atanan Kiiler"}),u.jsxs("div",{className:"relative",ref:h,children:[u.jsxs("div",{className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-950 flex items-center justify-between cursor-pointer min-h-[42px] hover:border-purple-400 transition-colors",onClick:()=>d(!c),children:[u.jsx("span",{className:"text-sm text-gray-700 dark:text-white truncate select-none",children:o.assignees.length>0?o.assignees.map(m=>{var g;return((g=s.find(x=>x.id===m))==null?void 0:g.full_name)||"..."}).join(", "):u.jsx("span",{className:"text-gray-400 dark:text-slate-500",children:"Kii seiniz..."})}),u.jsxs("div",{className:"flex items-center gap-2",children:[o.assignees.length>0&&u.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 text-xs px-2 py-0.5 rounded-full font-medium",children:o.assignees.length}),u.jsx(NL,{className:"w-4 h-4 text-gray-400 dark:text-slate-500"})]})]}),c&&u.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg shadow-xl max-h-56 overflow-y-auto z-50",children:[s.map(m=>u.jsxs("div",{className:"flex items-center px-3 py-2.5 hover:bg-gray-50 dark:hover:bg-slate-800 cursor-pointer border-b border-gray-50 dark:border-slate-800/50 last:border-0",onClick:()=>p(m.id),children:[u.jsx("div",{className:ie("w-4 h-4 border rounded mr-3 flex items-center justify-center transition-all",o.assignees.includes(m.id)?"bg-purple-600 border-purple-600":"border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-950"),children:o.assignees.includes(m.id)&&u.jsx(cL,{className:"w-3 h-3 text-white"})}),u.jsx("span",{className:"text-sm text-gray-700 dark:text-slate-200 font-medium",children:m.full_name})]},m.id)),s.length===0&&u.jsx("div",{className:"px-3 py-4 text-sm text-gray-500 dark:text-slate-400 text-center",children:"Personel bulunamad."})]})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Teslim Tarihi"}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"date",className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all text-sm bg-white dark:bg-slate-950 text-slate-900 dark:text-white",value:o.dueDate,onChange:m=>a({...o,dueDate:m.target.value})})})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Durum"}),u.jsxs("select",{className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all bg-white dark:bg-slate-950 text-sm text-slate-900 dark:text-white",value:o.status,onChange:m=>a({...o,status:m.target.value}),children:[u.jsx("option",{value:"beklemede",children:"beklemede"}),u.jsx("option",{value:"devam ediyor",children:"devam ediyor"}),u.jsx("option",{value:"tamamlandi",children:"tamamland"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"ncelik"}),u.jsxs("select",{className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all bg-white dark:bg-slate-950 text-sm text-slate-900 dark:text-white",value:o.priority,onChange:m=>a({...o,priority:m.target.value}),children:[u.jsx("option",{value:"dk",children:"dk"}),u.jsx("option",{value:"orta",children:"orta"}),u.jsx("option",{value:"yksek",children:"yksek"})]})]})]}),u.jsx("div",{className:"h-6"})]})}),u.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 shrink-0 flex justify-end gap-3 rounded-b-xl",children:[u.jsx(re,{type:"button",variant:"secondary",onClick:e,className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-300 px-6",children:"ptal"}),u.jsx(re,{type:"submit",form:"create-order-form",className:ie("px-6 font-bold shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 bg-[#8b5cf6] hover:bg-[#7c3aed] shadow-purple-200 dark:shadow-purple-900/40 focus:ring-purple-500 text-white"),children:l?"Gncelle":"Olutur"})]})]})})}function FMe(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),{user:s}=hn(),[i,o]=y.useState({}),[a,l]=y.useState([]),[c,d]=y.useState([]),[h,f]=y.useState(!1),[p,m]=y.useState(!1),[g,x]=y.useState(!1),[b,v]=y.useState(null),[w,S]=y.useState(""),[E,C]=y.useState("Tm Durumlar"),[T,_]=y.useState("Tm Zamanlar"),O=async()=>{const{data:A}=await X.from("profiles").select("id, full_name"),{data:z}=await X.from("projects").select("id, name"),j={};return A&&A.forEach(U=>j[U.id]=U.full_name),o(j),l(A||[]),d(z||[]),j},N=async(A=null)=>{try{r(!0);const{data:z,error:j}=await X.from("work_orders").select(`
                *,
                projects (name)
            `).order("due_date",{ascending:!0});if(j)throw j;const U=A||i,H=z.map(I=>{var q;return{...I,project:((q=I.projects)==null?void 0:q.name)||"Bilinmiyor",assignedToNames:(I.assigned_to||[]).map(G=>U[G]||"Bilinmiyor")}});e(H)}catch(z){console.error(z)}finally{r(!1)}};y.useEffect(()=>{s&&O().then(A=>{N(A)})},[s]);const R=async A=>{try{const z={title:A.title,status:B(A.status),priority:A.priority,project_id:A.project_id||null,assigned_to:A.assignees||[],due_date:A.dueDate?new Date(A.dueDate).toISOString():null,description:A.description},{error:j}=await X.from("work_orders").insert(z);if(j)throw j;f(!1),N()}catch(z){alert("Hata: "+z.message)}},M=async A=>{try{const{error:z}=await X.from("work_orders").update({title:A.title,status:B(A.status),priority:A.priority,project_id:A.project_id||null,due_date:A.dueDate?new Date(A.dueDate).toISOString():b.due_date,description:A.description,assigned_to:A.assignees||[]}).eq("id",b.id);if(z)throw z;m(!1),v(null),N()}catch(z){alert("Gncelleme hatas: "+z.message)}},W=async A=>{if(confirm("Bu i emrini silmek istediinize emin misiniz?")){const{error:z}=await X.from("work_orders").delete().eq("id",A);z||N()}},D=async(A,z)=>{const{error:j}=await X.from("work_orders").update({status:B(z)}).eq("id",A);j||N()},B=A=>{if(!A)return"Bekliyor";const z=A.toLowerCase();return z==="beklemede"||z==="bekliyor"?"Bekliyor":z.includes("devam")?"Devam Ediyor":z.includes("tamam")?"Tamamland":z==="iptal"?"ptal":z==="geciken"?"Geciken":A},$=[{label:"Toplam",value:t.length,icon:wb,color:"text-violet-600 dark:text-violet-400",bg:"bg-violet-50 dark:bg-violet-900/20 border-violet-100 dark:border-violet-900/50"},{label:"Bekliyor",value:t.filter(A=>A.status==="Bekliyor").length,icon:pi,color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20 border-amber-100 dark:border-amber-900/50"},{label:"Devam Eden",value:t.filter(A=>A.status==="Devam Ediyor").length,icon:Hn,color:"text-indigo-600 dark:text-indigo-400",bg:"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-100 dark:border-indigo-900/50"},{label:"Geciken",value:t.filter(A=>A.status==="Geciken").length,icon:nm,color:"text-red-600 dark:text-red-400",bg:"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900/50"}],V=t.filter(A=>{const z=A.assignedToNames.join(" ");A.status==="Bekliyor"||A.status;const j=A.title.toLowerCase().includes(w.toLowerCase())||(A.project||"").toLowerCase().includes(w.toLowerCase())||z.toLowerCase().includes(w.toLowerCase());let U=E;E==="Beklemede"&&(U="Bekliyor");const H=E==="Tm Durumlar"||A.status===U;let I=!0;if(T!=="Tm Zamanlar"&&A.due_date){const q=new Date(A.due_date),Z=Math.abs(new Date-q),te=Math.ceil(Z/(1e3*60*60*24));T==="Son 1 Hafta"&&(I=te<=7),T==="Son 1 Ay"&&(I=te<=30)}return j&&H&&I});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:" Emirleri"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 font-medium",children:" emirlerini oluturun ve detayl takibini yapn."})]}),u.jsxs(re,{onClick:()=>f(!0),className:"bg-violet-600 hover:bg-violet-700 text-white shadow-lg shadow-violet-500/20 gap-2 dark:shadow-violet-900/40",children:[u.jsx(Ht,{className:"w-4 h-4"}),"Yeni  Emri"]})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:$.map(A=>{const z=A.icon;return u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-gray-100 dark:border-slate-800 shadow-sm flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-slate-400",children:A.label}),u.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:A.value})]}),u.jsx("div",{className:ie("w-12 h-12 rounded-full flex items-center justify-center",A.bg,A.color),children:u.jsx(z,{className:"w-6 h-6"})})]},A.label)})}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:" emri, proje veya personel ara...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-800 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all font-medium text-slate-700 dark:text-slate-200 placeholder:text-slate-400 dark:placeholder:text-slate-600 bg-white dark:bg-slate-900",value:w,onChange:A=>S(A.target.value)})]}),u.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0",children:[u.jsxs("div",{className:"relative min-w-[160px]",children:[u.jsx(iT,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 w-4 h-4"}),u.jsxs("select",{className:"w-full pl-10 pr-8 py-2.5 rounded-xl border border-slate-200 dark:border-slate-800 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 bg-white dark:bg-slate-900 font-medium text-slate-700 dark:text-slate-200 appearance-none cursor-pointer",value:E,onChange:A=>C(A.target.value),children:[u.jsx("option",{children:"Tm Durumlar"}),u.jsx("option",{children:"Devam Ediyor"}),u.jsx("option",{children:"Beklemede"}),u.jsx("option",{children:"Tamamland"}),u.jsx("option",{children:"Geciken"}),u.jsx("option",{children:"ptal"})]})]}),u.jsxs("div",{className:"relative min-w-[160px]",children:[u.jsx(pi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 w-4 h-4"}),u.jsxs("select",{className:"w-full pl-10 pr-8 py-2.5 rounded-xl border border-slate-200 dark:border-slate-800 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 bg-white dark:bg-slate-900 font-medium text-slate-700 dark:text-slate-200 appearance-none cursor-pointer",value:T,onChange:A=>_(A.target.value),children:[u.jsx("option",{children:"Tm Zamanlar"}),u.jsx("option",{children:"Son 1 Hafta"}),u.jsx("option",{children:"Son 1 Ay"})]})]})]})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:n?u.jsx("div",{className:"text-center py-10",children:u.jsx(Hn,{className:"w-8 h-8 animate-spin mx-auto text-violet-600"})}):V.length===0?u.jsxs("div",{className:"text-center py-20 bg-white dark:bg-slate-900 rounded-3xl border border-slate-200 dark:border-slate-800 border-dashed",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(wb,{className:"w-8 h-8 text-slate-300 dark:text-slate-600"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Sonu Bulunamad"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Arama kriterlerinize uygun i emri yok."})]}):V.map(A=>u.jsx("div",{className:"group bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-1 hover:shadow-lg hover:border-violet-200 dark:hover:border-violet-900 transition-all duration-300",children:u.jsxs("div",{className:"flex flex-col md:flex-row gap-6 p-5",children:[u.jsxs("div",{className:"flex-1 space-y-4",children:[u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white group-hover:text-violet-700 dark:group-hover:text-violet-400 transition-colors",children:A.title}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("span",{className:ie("px-2.5 py-1 rounded-lg text-xs font-bold border",A.status==="Devam Ediyor"?"bg-amber-50 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-100 dark:border-amber-900/50":A.status==="Tamamland"?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border-emerald-100 dark:border-emerald-900/50":A.status==="Geciken"?"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-100 dark:border-red-900/50":A.status==="Beklemede"||A.status==="Bekliyor"?"bg-orange-50 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 border-orange-100 dark:border-orange-900/50":"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-100 dark:border-slate-700"),children:A.status}),u.jsx("span",{className:ie("px-2.5 py-1 rounded-lg text-xs font-bold border",A.priority==="Yksek"?"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-100 dark:border-red-900/50":A.priority==="Orta"?"bg-orange-50 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 border-orange-100 dark:border-orange-900/50":"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-100 dark:border-slate-700"),children:A.priority})]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm text-slate-500 dark:text-slate-400 font-medium",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(no,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),A.project]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ro,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),u.jsx("span",{className:"truncate",children:A.assignedToNames.join(", ")})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(to,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),A.due_date?Ve(nt(A.due_date),"dd.MM.yyyy"):"-"]})]}),A.description&&u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-2 line-clamp-2 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-100 dark:border-slate-800",children:A.description})]}),u.jsxs("div",{className:"flex flex-row md:flex-col items-end justify-between gap-4 min-w-[140px] border-t md:border-t-0 md:border-l border-slate-100 dark:border-slate-800 pt-4 md:pt-0 md:pl-6",children:[u.jsxs("div",{className:"flex items-center gap-2 w-full justify-end",children:[u.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{v(A),x(!0)},className:"h-8 w-8 p-0",children:u.jsx(Gc,{className:"w-4 h-4"})}),u.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{v(A),m(!0)},className:"h-8 w-8 p-0",children:u.jsx(rm,{className:"w-4 h-4"})}),u.jsx(re,{variant:"ghost",size:"sm",onClick:()=>W(A.id),className:"h-8 w-8 p-0 text-red-500",children:u.jsx(hr,{className:"w-4 h-4"})})]}),u.jsxs("select",{className:"w-full text-xs font-bold px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none cursor-pointer",value:A.status.toLowerCase().replace(" ","-"),onChange:z=>D(A.id,z.target.value),children:[u.jsx("option",{value:"devam-ediyor",children:"devam-ediyor"}),u.jsx("option",{value:"beklemede",children:"beklemede"}),u.jsx("option",{value:"tamamlandi",children:"tamamland"}),u.jsx("option",{value:"iptal",children:"iptal"})]})]})]})},A.id))}),u.jsx(dR,{isOpen:h,onClose:()=>f(!1),onCreate:R,availablePersonnel:a,availableProjects:c}),u.jsx(dR,{isOpen:p,onClose:()=>m(!1),onCreate:M,initialData:b,availablePersonnel:a,availableProjects:c}),g&&b&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>x(!1),children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden border border-slate-200 dark:border-slate-800",onClick:A=>A.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:" Emri Detay"}),u.jsxs("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mt-1 uppercase tracking-wider",children:[" Emri ID: #",b.id.substring(0,8)]})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:()=>x(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 bg-white/50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white leading-tight mb-2",children:b.title}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("span",{className:ie("px-2.5 py-1 rounded-lg text-xs font-bold border",b.status==="Devam Ediyor"?"bg-amber-50 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-100 dark:border-amber-900/50":b.status==="Tamamland"?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border-emerald-100 dark:border-emerald-900/50":"bg-orange-50 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 border-orange-100 dark:border-orange-900/50"),children:b.status}),u.jsxs("span",{className:ie("px-2.5 py-1 rounded-lg text-xs font-bold border",b.priority==="Yksek"?"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-100 dark:border-red-900/50":"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-100 dark:border-slate-700"),children:[b.priority," lekli"]})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("p",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"AIKLAMA"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-950 p-4 rounded-xl text-slate-700 dark:text-slate-300 text-sm border border-slate-100 dark:border-slate-800/80 leading-relaxed font-medium",children:b.description||"Herhangi bir aklama girilmemi."})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-3 rounded-xl border border-slate-100 dark:border-slate-800",children:[u.jsx("h4",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-1",children:"Proje"}),u.jsxs("p",{className:"font-bold text-slate-900 dark:text-white text-sm flex items-center gap-2",children:[u.jsx(no,{className:"w-3.5 h-3.5 text-violet-500"}),b.project]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-3 rounded-xl border border-slate-100 dark:border-slate-800",children:[u.jsx("h4",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-1",children:"Teslim Tarihi"}),u.jsxs("p",{className:"font-bold text-slate-900 dark:text-white text-sm flex items-center gap-2",children:[u.jsx(to,{className:"w-3.5 h-3.5 text-amber-500"}),b.due_date?Ve(nt(b.due_date),"dd MMMM yyyy",{locale:Cn}):"-"]})]})]}),u.jsxs("div",{className:"bg-indigo-50/50 dark:bg-indigo-900/20 p-4 rounded-xl border border-indigo-100/50 dark:border-indigo-900/50",children:[u.jsx("h4",{className:"text-[10px] font-bold text-indigo-400 dark:text-indigo-400 uppercase tracking-widest mb-2",children:"GREVL PERSONELLER"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:b.assignedToNames.map((A,z)=>u.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-900 px-3 py-1.5 rounded-lg border border-indigo-100 dark:border-indigo-900/50 shadow-sm",children:[u.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center text-[10px] text-white font-bold",children:A.charAt(0).toUpperCase()}),u.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-200",children:A})]},z))})]})]}),u.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/30 border-t border-slate-100 dark:border-slate-800 flex justify-end",children:u.jsx(re,{onClick:()=>x(!1),variant:"secondary",className:"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700",children:"Kapat"})})]})})]})}const HMe={meeting:{label:"Toplant",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:pr},task:{label:"Grev",color:"bg-blue-100 text-blue-700 border-blue-200",icon:tr},personal:{label:"Kiisel",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ro},break:{label:"Mola",color:"bg-orange-100 text-orange-700 border-orange-200",icon:sT}};function UMe({isOpen:t,onClose:e,date:n,onAdd:r,taskTypes:s=HMe}){const[i,o]=y.useState({title:"",description:"",time:"09:00",priority:"Normal",type:"task"});if(!t)return null;const a=l=>{l.preventDefault(),r({...i,date:n}),o({title:"",description:"",time:"09:00",priority:"Normal",type:"task"}),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-lg animate-in fade-in zoom-in-95 duration-200 overflow-hidden border border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900/50",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Yeni Etkinlik Ekle"}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:[n," tarihinde planla"]})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-white dark:hover:bg-slate-800",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:a,className:"p-6 space-y-5",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Balk"}),u.jsx("input",{required:!0,type:"text",placeholder:"rn: Pazarlama Toplants",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-950 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-sm font-medium text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:i.title,onChange:l=>o({...i,title:l.target.value}),autoFocus:!0})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Etkinlik Tipi"}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Object.entries(s).map(([l,c])=>{const d=c.icon,h=i.type===l;return c.color.split(" ")[1],c.color.split(" ")[0],u.jsxs("button",{type:"button",onClick:()=>o({...i,type:l}),className:ie("flex flex-col items-center justify-center gap-2 p-3 rounded-xl border transition-all text-xs font-medium",h?ie(c.color,"border-current ring-1 ring-offset-1 ring-current bg-opacity-100"):"bg-white dark:bg-slate-950 border-gray-200 dark:border-slate-800 text-gray-500 dark:text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"),children:[u.jsx(d,{className:"w-5 h-5"}),c.label]},l)})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Saat"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"time",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-950 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-sm text-gray-900 dark:text-white [color-scheme:light] dark:[color-scheme:dark]",value:i.time,onChange:l=>o({...i,time:l.target.value})}),u.jsx(pi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-slate-500 pointer-events-none"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"ncelik"}),u.jsxs("select",{className:"w-full px-4 py-2.5 border border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-950 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-sm text-gray-900 dark:text-white",value:i.priority,onChange:l=>o({...i,priority:l.target.value}),children:[u.jsx("option",{value:"Dk",children:"Dk"}),u.jsx("option",{value:"Normal",children:"Normal"}),u.jsx("option",{value:"Yksek",children:"Yksek"}),u.jsx("option",{value:"Acil",children:"Acil"})]})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Aklama (Opsiyonel)"}),u.jsx("textarea",{rows:3,placeholder:"Detaylar...",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-950 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all resize-none text-sm text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:i.description,onChange:l=>o({...i,description:l.target.value})})]}),u.jsxs("div",{className:"pt-4 flex gap-3 justify-end border-t border-gray-100 dark:border-slate-800 mt-6",children:[u.jsx(re,{type:"button",variant:"secondary",onClick:e,className:"bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-300",children:"ptal"}),u.jsx(re,{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-200 dark:shadow-indigo-900/40",children:"Etkinlik Olutur"})]})]})]})})}const Bk={meeting:{label:"Toplant",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:pr},task:{label:"Grev",color:"bg-blue-100 text-blue-700 border-blue-200",icon:tr},personal:{label:"Kiisel",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ro},break:{label:"Mola",color:"bg-orange-100 text-orange-700 border-orange-200",icon:sT}};function zMe({isOpen:t,onClose:e,task:n,onUpdate:r,onDelete:s}){if(!t||!n)return null;const[i,o]=y.useState(!1),[a,l]=y.useState({...n});y.useEffect(()=>{l({...n})},[n]);const c=()=>{r({...a}),o(!1),e()},d=()=>{window.confirm("Bu etkinlii silmek istediinize emin misiniz?")&&(s(n),e())},h=Bk[n.type||"task"]||Bk.task;return u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:e,children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in-95 duration-200",onClick:f=>f.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gray-50/50",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i?"Etkinlii Dzenle":"Etkinlik Detay"}),!i&&u.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[u.jsx(to,{className:"w-4 h-4"})," ",n.date||"Tarih Yok"]})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 hover:bg-white",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"p-6",children:i?u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Balk"}),u.jsx("input",{type:"text",className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-sm font-medium",value:a.title,onChange:f=>l({...a,title:f.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Etkinlik Tipi"}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Object.entries(Bk).map(([f,p])=>{const m=p.icon,g=a.type===f,x=p.color.split(" ")[1]||"text-gray-700",b=p.color.split(" ")[0]||"bg-gray-100";return u.jsxs("button",{type:"button",onClick:()=>l({...a,type:f}),className:ie("flex flex-col items-center justify-center gap-2 p-3 rounded-xl border transition-all text-xs font-medium",g?ie(b,x,"border-current ring-1 ring-offset-1 ring-current"):"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"),children:[u.jsx(m,{className:"w-5 h-5"}),p.label]},f)})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Saat"}),u.jsx("input",{type:"time",className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all text-sm",value:a.time,onChange:f=>l({...a,time:f.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"ncelik"}),u.jsxs("select",{className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all bg-white text-sm",value:a.priority,onChange:f=>l({...a,priority:f.target.value}),children:[u.jsx("option",{value:"Dk",children:"Dk"}),u.jsx("option",{value:"Normal",children:"Normal"}),u.jsx("option",{value:"Yksek",children:"Yksek"}),u.jsx("option",{value:"Acil",children:"Acil"})]})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Aklama"}),u.jsx("textarea",{rows:3,className:"w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all resize-none text-sm",value:a.description,onChange:f=>l({...a,description:f.target.value})})]}),u.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100",children:[u.jsx(re,{variant:"outline",onClick:()=>o(!1),className:"flex-1",children:"ptal"}),u.jsx(re,{onClick:c,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-200",children:"Kaydet"})]})]}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex items-start gap-5",children:[u.jsx("div",{className:ie("w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 shadow-sm border",h.color),children:u.jsx(h.icon,{className:"w-7 h-7"})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:ie("text-xs font-bold px-2 py-0.5 rounded uppercase tracking-wide",h.color.replace("text-","bg-opacity-20 bg-").replace("border-","border-transparent ")),children:h.label}),u.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded bg-gray-100 text-gray-600 border border-gray-200",children:n.priority||"Normal"})]}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:n.title}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mt-2 font-medium",children:[u.jsx(pi,{className:"w-4 h-4 text-gray-400"}),n.time]})]})]}),u.jsxs("div",{className:"bg-gray-50/80 rounded-2xl p-6 border border-gray-100/80",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Aklama"}),u.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:n.description||"Bu etkinlik iin herhangi bir aklama girilmemi."})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex gap-3",children:[u.jsxs(re,{variant:"outline",onClick:()=>o(!0),className:"flex-1 gap-2 hover:bg-gray-50 border-gray-200 text-gray-700",children:[u.jsx(mQ,{className:"w-4 h-4"})," Dzenle"]}),u.jsxs(re,{variant:"danger",onClick:d,className:"flex-1 gap-2 bg-white text-red-600 border border-red-100 hover:bg-red-50 hover:border-red-200 shadow-sm",children:[u.jsx(hr,{className:"w-4 h-4"})," Sil"]})]}),u.jsx(re,{onClick:()=>{r({...n,isCompleted:!n.isCompleted}),e()},className:ie("w-full gap-2 py-6 text-base shadow-lg transition-all active:scale-[0.98]",n.isCompleted?"bg-white border-2 border-gray-200 text-gray-500 hover:border-gray-300 hover:bg-gray-50 shadow-none":"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white shadow-emerald-200"),children:n.isCompleted?u.jsxs(u.Fragment,{children:[u.jsx(gQ,{className:"w-5 h-5"})," Tekrar Aktif Et"]}):u.jsxs(u.Fragment,{children:[u.jsx(tr,{className:"w-5 h-5"})," Tamamland Olarak aretle"]})})]})]})})]})})}const Jh={meeting:{label:"Toplant",color:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800",icon:pr},task:{label:"Grev",color:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800",icon:tr},event:{label:"Kiisel/Olay",color:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800",icon:ro},break:{label:"Mola",color:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800",icon:sT}};function VMe(){const{user:t}=hn(),[e,n]=y.useState(new Date),[r,s]=y.useState({}),[i,o]=y.useState(!1),[a,l]=y.useState(!1),[c,d]=y.useState(null),[h,f]=y.useState(null),[p,m]=y.useState(!1),g=async()=>{if(!t)return;o(!0);const M=Cb(l2(e),{weekStartsOn:1}).toISOString(),W=Pj(a2(e),{weekStartsOn:1}).toISOString();try{const D={},{data:B}=await X.from("calendar_events").select("*").gte("start_time",M).lte("start_time",W);B==null||B.forEach(V=>{const A=new Date(V.start_time).toISOString().split("T")[0],z=Ve(new Date(V.start_time),"HH:mm");D[A]||(D[A]=[]),D[A].push({id:V.id,title:V.title,time:z,date:A,type:V.type||"event",description:V.description,priority:V.priority,source:"calendar_events",original:V})});const{data:$}=await X.from("external_tasks").select("*").gte("due_date",M).lte("due_date",W);$==null||$.forEach(V=>{const A=new Date(V.due_date).toISOString().split("T")[0],z=V.due_date.includes("T")?Ve(new Date(V.due_date),"HH:mm"):"09:00";D[A]||(D[A]=[]),D[A].push({id:V.id,title:V.title,time:z,date:A,type:"task",priority:V.priority,description:V.description,isCompleted:V.status==="Tamamland",source:"external_tasks",original:V})}),Object.keys(D).forEach(V=>{D[V].sort((A,z)=>A.time.localeCompare(z.time))}),s(D)}catch(D){console.error("Calendar fetch error:",D)}finally{o(!1)}};y.useEffect(()=>{g()},[e,t]);const x=()=>n(es(e,1)),b=()=>n(fT(e,1)),v=()=>n(new Date),w=async M=>{if(!t){alert("Ltfen nce giri yapn.");return}try{const W=new Date(`${M.date}T${M.time}:00`);let D=null;const B=new Date(W.getTime()+60*60*1e3),{error:$}=await X.from("calendar_events").insert({user_id:t.id,title:M.title,description:M.description,start_time:W.toISOString(),end_time:B.toISOString(),type:M.type||"event",priority:M.priority});if(D=$,D)throw D;g(),l(!1)}catch(W){console.error("Add task error:",W),alert("Hata: "+(W.message||W.error_description||"Bilinmeyen hata"))}},S=async M=>{if(confirm("Silmek istediinize emin misiniz?"))try{const W=M.source;if(W==="meeting_notes"){alert("Toplant notlarn 'Toplant Notlar' sayfasndan silebilirsiniz.");return}const{error:D}=await X.from(W).delete().eq("id",M.id);if(D)throw D;g(),m(!1)}catch(W){console.error("Delete error:",W),alert("Silinemedi.")}},E=async M=>{if(t)try{const W=new Date(`${M.date}T${M.time}:00`);if(M.source==="calendar_events"){const D=new Date(W.getTime()+36e5);await X.from("calendar_events").update({title:M.title,description:M.description,type:M.type,priority:M.priority,start_time:W.toISOString(),end_time:D.toISOString()}).eq("id",M.id)}else if(M.source==="external_tasks")await X.from("external_tasks").update({title:M.title,description:M.description,priority:M.priority,due_date:W.toISOString(),status:M.isCompleted?"Tamamland":"Beklemede"}).eq("id",M.id);else if(M.source==="meeting_notes"){alert("Toplant notlarn buradan dzenleyemezsiniz.");return}g(),m(!1)}catch(W){console.error("Update error:",W),alert("Gncellenemedi.")}},C=M=>{const W=Ve(M,"yyyy-MM-dd");d(W),l(!0)},T=(M,W)=>{M.stopPropagation(),f(W),m(!0)},_=(M,W)=>W?"bg-gray-100 dark:bg-slate-800 text-gray-400 dark:text-slate-500 line-through border-gray-200 dark:border-slate-700 grayscale":(Jh[M]||Jh.event).color,O=()=>{const M=l2(e),W=a2(M),D=Cb(M,{weekStartsOn:1}),B=Pj(W,{weekStartsOn:1}),$=[];let V=[],A=D;for(;A<=B;){for(let z=0;z<7;z++){const j=A,U=Ve(A,"yyyy-MM-dd"),H=r[U]||[],I=w8(A,M),q=Rte(A);V.push(u.jsxs("div",{onClick:()=>C(j),className:ie("min-h-[140px] border-b border-r border-gray-100 dark:border-slate-800 p-2 relative group transition-all duration-200 hover:bg-gray-50/80 dark:hover:bg-slate-800/50 cursor-pointer overflow-hidden",I?"bg-white dark:bg-slate-900":"bg-gray-50/30 dark:bg-slate-950/50 text-gray-400 dark:text-slate-600",q?"bg-indigo-50/30 dark:bg-indigo-900/10 ring-1 ring-inset ring-indigo-200 dark:ring-indigo-800 z-10":""),children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:ie("w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium transition-colors",q?"bg-indigo-600 text-white shadow-md shadow-indigo-200 dark:shadow-indigo-900/40":"text-gray-700 dark:text-slate-300",!I&&"text-gray-400 dark:text-slate-600"),children:Ve(A,"d")}),u.jsx(re,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 h-6 w-6 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-all rounded-full",children:u.jsx(Ht,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"space-y-1.5 pl-1",children:H.map((G,Z)=>{const te=G.type==="meeting"?"meeting":G.type==="task"?"task":"event",fe=Jh[te].icon||Jh.event.icon;return u.jsxs("div",{onClick:K=>T(K,G),className:ie("px-2 py-1.5 rounded-lg text-xs border shadow-sm truncate transition-all hover:scale-[1.02] active:scale-95 flex items-center gap-2",_(te,G.isCompleted)),children:[u.jsx(fe,{className:"w-3 h-3 shrink-0"}),u.jsxs("span",{className:"truncate flex-1 font-medium",children:[G.time," ",G.title]})]},Z)})})]},A)),A=m8(A,1)}$.push(u.jsx("div",{className:"grid grid-cols-7 border-l border-gray-100 dark:border-slate-800 last:border-b-0",children:V},A)),V=[]}return u.jsx("div",{className:"border-t border-gray-100 dark:border-slate-800 rounded-b-xl overflow-hidden shadow-sm",children:$})},R=(()=>{const M=[],W=new Date;return Object.entries(r).forEach(([D,B])=>{(Mte(nt(D),W)||mT(nt(D),W))&&B.forEach($=>{$.isCompleted||M.push({...$,date:D})})}),M.sort((D,B)=>(D.date+D.time).localeCompare(B.date+B.time)).slice(0,5)})();return Object.values(r).flat().length,Object.values(r).flat().filter(M=>M.isCompleted).length,u.jsxs("div",{className:"min-h-screen bg-gray-50/50 dark:bg-slate-950 pb-10 transition-colors",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8 animate-in fade-in slide-in-from-top-4 duration-500",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white tracking-tight",children:"Kiisel Ajanda"}),u.jsx("p",{className:"text-gray-500 dark:text-slate-400 mt-2 font-medium",children:"Toplant, grev ve etkinlikleriniz tek yerde."})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsxs(re,{onClick:()=>C(new Date),className:"bg-gray-900 dark:bg-white text-white dark:text-slate-900 hover:bg-black dark:hover:bg-slate-200 shadow-lg shadow-gray-200 dark:shadow-none",children:[u.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Hzl Ekle"]})})]}),u.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[u.jsx("div",{className:"xl:col-span-3 space-y-6",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-gray-200 dark:border-slate-800 shadow-sm overflow-hidden transition-colors",children:[u.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-800 flex items-center justify-between bg-white dark:bg-slate-900 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:Ve(e,"MMMM yyyy",{locale:Cn})}),u.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg",children:[u.jsx(re,{variant:"ghost",size:"sm",onClick:x,className:"h-8 w-8 p-0",children:u.jsx(uL,{className:"w-4 h-4"})}),u.jsx(re,{variant:"ghost",size:"sm",onClick:b,className:"h-8 w-8 p-0",children:u.jsx(rT,{className:"w-4 h-4"})})]})]}),u.jsx(re,{onClick:v,variant:"outline",className:"hidden sm:flex border-gray-200 dark:border-slate-700 dark:text-slate-200",children:"Bugne Dn"})]}),u.jsx("div",{className:"grid grid-cols-7 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900/50",children:["Pzt","Sal","ar","Per","Cum","Cmt","Paz"].map(M=>u.jsx("div",{className:"py-3 text-center text-xs font-semibold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:M},M))}),u.jsx("div",{className:"bg-white dark:bg-slate-900",children:i?u.jsx("div",{className:"p-20 text-center text-slate-400",children:"Ykleniyor..."}):O()})]})}),u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-gray-200 dark:border-slate-800 shadow-sm p-6 relative overflow-hidden transition-colors",children:[u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-6",children:"Yaklaan Etkinlikler"}),u.jsx("div",{className:"space-y-4 relative z-10",children:R.length>0?R.map((M,W)=>u.jsxs("div",{className:"flex gap-4 group cursor-pointer",onClick:D=>T(D,M),children:[u.jsx("div",{className:"flex flex-col items-center",children:u.jsx("div",{className:ie("w-3 h-3 rounded-full border-2 border-white shadow-sm shrink-0 mt-1",_(M.type==="meeting"?"meeting":M.type==="task"?"task":"event",M.isCompleted).split(" ")[0].replace("bg-","bg-")),style:{backgroundColor:"currentColor"}})}),u.jsxs("div",{className:"pb-4 flex-1 border-b border-gray-50 last:border-0",children:[u.jsxs("p",{className:"text-xs font-medium text-gray-400 dark:text-slate-500 mb-0.5",children:[Ve(nt(M.date),"d MMMM, EEEE",{locale:Cn}),"  ",M.time]}),u.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-slate-200",children:M.title})]})]},W)):u.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"Plan bulunmuyor."})})]})})]}),u.jsx(UMe,{isOpen:a,onClose:()=>l(!1),date:c,onAdd:w,taskTypes:Jh}),u.jsx(zMe,{isOpen:p,onClose:()=>m(!1),task:h,onUpdate:E,onDelete:S})]})}function WMe(){const[t,e]=y.useState(new Date),[n,r]=y.useState([]),[s,i]=y.useState(!0),{user:o}=hn(),[a,l]=y.useState([]),c=async()=>{try{i(!0);const{data:$,error:V}=await X.from("transactions").select("*").order("date",{ascending:!0});if(V)throw V;r($||[]);const{data:A}=await X.from("profiles").select("id, full_name");A&&l(A.map(z=>({id:z.id,name:z.full_name})))}catch($){console.error("Finance load error:",$)}finally{i(!1)}};y.useEffect(()=>{o&&c()},[o]);const{monthlyCollections:d,monthlyExpenses:h,openingBalance:f}=y.useMemo(()=>{const $=l2(t),V=a2(t);let A=0;const z=[],j=[];return n.forEach(U=>{const H=nt(U.date);H<$?U.type==="income"?A+=parseFloat(U.amount):A-=parseFloat(U.amount):H<=V&&(U.type==="income"?z.push({...U,isSaved:!0}):j.push({...U,isSaved:!0}))}),{monthlyCollections:z,monthlyExpenses:j,openingBalance:A}},[n,t]),[p,m]=y.useState([]),[g,x]=y.useState([]),[b,v]=y.useState([]),[w,S]=y.useState([]);y.useEffect(()=>{v(d),S(h)},[d,h]);const E=$=>{e(V=>$>0?fT(V,1):es(V,1))},C=()=>{v([...b,{id:`temp_${Date.now()}`,date:Ve(t,"yyyy-MM-dd"),amount:0,category:"",payer:"",type:"income",isSaved:!1}])},T=()=>{S([...w,{id:`temp_${Date.now()}`,detail:"",date:Ve(t,"yyyy-MM-dd"),amount:0,payer:"",method:"Nakit",type:"expense",isSaved:!1}])},_=($,V,A,z)=>{($?v:S)(($?b:w).map(H=>H.id===V?{...H,[A]:z,isSaved:!1}:H))},O=async $=>{try{const V={date:$.date||new Date().toISOString().split("T")[0],amount:parseFloat($.amount)||0,type:$.type,category:$.category||"Genel",description:$.detail||$.description||"",payer:$.payer||$.customer||"-",method:$.method||"Nakit"};if($.id.toString().startsWith("temp_")){const{error:A}=await X.from("transactions").insert(V);if(A)throw A;if($.type==="expense"&&$.method==="Havale"){const j=(V.amount*.0629).toFixed(2),U={...V,amount:j,description:`${V.description} (Banka Komisyonu - %6.29)`,payer:"Banka",category:"Banka Giderleri"},{error:H}=await X.from("transactions").insert(U);H&&console.error("Komisyon eklenirken hata:",H)}}else{const{error:A}=await X.from("transactions").update(V).eq("id",$.id);if(A)throw A}await c()}catch(V){alert("Kaydetme hatas: "+V.message)}},N=async $=>{if($.toString().startsWith("temp_"))v(b.filter(V=>V.id!==$)),S(w.filter(V=>V.id!==$));else{if(!confirm("Silmek istediinize emin misiniz?"))return;const{error:V}=await X.from("transactions").delete().eq("id",$);V||c()}},R=b.reduce(($,V)=>$+(parseFloat(V.amount)||0),0),M=w.reduce(($,V)=>$+(parseFloat(V.amount)||0),0),W=w.filter($=>$.method==="Nakit").reduce(($,V)=>$+(parseFloat(V.amount)||0),0),D=R+f-M,B=new Intl.DateTimeFormat("tr-TR",{month:"long",year:"numeric"}).format(t);return u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Aylk Kasa"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 font-medium",children:"Gelir ve giderlerinizi aylk olarak ynetin ve raporlayn."})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 p-1.5 rounded-xl shadow-sm",children:[u.jsx("button",{onClick:()=>E(-1),className:"p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg transition-colors text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white",children:u.jsx(uL,{className:"w-5 h-5"})}),u.jsx("div",{className:"px-4 font-bold text-slate-700 dark:text-slate-200 min-w-[160px] text-center capitalize text-lg",children:B}),u.jsx("button",{onClick:()=>E(1),className:"p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg transition-colors text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white",children:u.jsx(rT,{className:"w-5 h-5"})})]}),u.jsxs(re,{variant:"outline",className:"gap-2 hidden md:flex border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white bg-white dark:bg-slate-900",children:[u.jsx(yL,{className:"w-4 h-4"})," Yazdr"]})]})]}),s?u.jsx("div",{className:"flex justify-center py-20",children:u.jsx(Hn,{className:"w-8 h-8 animate-spin text-violet-600"})}):u.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900/30 p-4 rounded-t-xl flex justify-between items-center transition-colors",children:u.jsxs("div",{className:"flex items-center gap-2 text-emerald-800 dark:text-emerald-400 font-bold text-lg",children:[u.jsx(Ad,{className:"w-5 h-5"}),u.jsx("span",{children:"Aylk Genel Gelirler"})]})}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-b-xl shadow-sm overflow-hidden flex-1 flex flex-col transition-colors",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left text-sm",children:[u.jsx("thead",{className:"bg-emerald-50/50 dark:bg-emerald-900/10 text-emerald-900 dark:text-emerald-300 font-semibold border-b border-emerald-100 dark:border-emerald-900/20",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 text-center w-12",children:"SIRA"}),u.jsx("th",{className:"p-3",children:"MTER SM"}),u.jsx("th",{className:"p-3 w-40",children:"TARH"}),u.jsx("th",{className:"p-3 min-w-[140px] text-right",children:"TUTAR"}),u.jsx("th",{className:"p-3 w-12",children:"LEM"})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:[b.map(($,V)=>u.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors",children:[u.jsx("td",{className:"p-3 text-center text-gray-500 dark:text-slate-500 font-mono",children:V+1}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"relative",children:[u.jsx(gn,{className:"w-3 h-3 text-gray-400 dark:text-slate-500 absolute left-3 top-1/2 -translate-y-1/2"}),u.jsx("input",{type:"text",placeholder:"Mteri ara...",className:"w-full pl-8 pr-2 py-1.5 border border-gray-200 dark:border-slate-700 dark:bg-slate-950 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-200 dark:focus:ring-emerald-900",value:$.payer||$.customer||"",onChange:A=>_(!0,$.id,"payer",A.target.value)})]})}),u.jsx("td",{className:"p-3",children:u.jsx("input",{type:"date",className:"w-full px-2 py-1.5 border border-gray-200 dark:border-slate-700 dark:bg-slate-950 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:border-emerald-500",value:$.date,onChange:A=>_(!0,$.id,"date",A.target.value)})}),u.jsx("td",{className:"p-3",children:u.jsx("input",{type:"number",placeholder:"0.00",className:"w-full px-2 py-1.5 border border-gray-200 dark:border-slate-700 dark:bg-slate-950 rounded-lg text-sm text-right font-medium text-emerald-700 dark:text-emerald-400 focus:outline-none focus:border-emerald-500",value:$.amount,onChange:A=>_(!0,$.id,"amount",A.target.value)})}),u.jsx("td",{className:"p-3 text-center flex gap-1 justify-center",children:$.isSaved?u.jsx("button",{onClick:()=>N($.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Sil",children:u.jsx(hr,{className:"w-4 h-4"})}):u.jsx("button",{onClick:()=>O($),className:"p-1.5 text-emerald-600 dark:text-emerald-500 hover:text-emerald-700 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded transition-colors",title:"Kaydet",children:u.jsx(_d,{className:"w-4 h-4"})})})]},$.id)),b.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-500 dark:text-slate-500 border-dashed border-2 border-gray-100 dark:border-slate-800 rounded-lg m-4",children:"Henz tahsilat eklenmedi."})})]})]})}),u.jsx("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 border-t border-gray-200 dark:border-slate-800",children:u.jsxs(re,{onClick:C,variant:"outline",className:"w-full border-dashed border-emerald-300 dark:border-emerald-700 text-emerald-700 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:border-emerald-500 dark:hover:border-emerald-600 bg-white dark:bg-slate-900",children:[u.jsx(Ht,{className:"w-4 h-4 mr-2"})," Satr Ekle"]})})]}),u.jsxs("div",{className:"bg-emerald-50/50 dark:bg-emerald-900/10 rounded-xl p-4 border border-emerald-100 dark:border-emerald-900/20 space-y-3 transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-emerald-900 dark:text-emerald-300 border-b border-emerald-100 dark:border-emerald-900/20 pb-2",children:[u.jsx("span",{children:"AYLIK TAHSLAT TOPLAMI"}),u.jsxs("span",{className:"font-bold text-lg",children:["",R.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),u.jsxs("div",{className:"flex justify-between items-center text-sm text-emerald-800 dark:text-emerald-400",children:[u.jsx("span",{children:"GEEN AYDAN DEVR"}),u.jsxs("span",{className:"font-mono",children:["",f.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),u.jsxs("div",{className:"flex justify-between items-center text-base font-bold text-emerald-950 dark:text-emerald-200 pt-2 border-t border-emerald-100 dark:border-emerald-900/20",children:[u.jsx("span",{children:"AYLIK KASA TOPLAMI"}),u.jsxs("span",{className:"text-xl",children:["",D.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 p-4 rounded-t-xl flex justify-between items-center transition-colors",children:u.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-400 font-bold text-lg",children:[u.jsx(Ad,{className:"w-5 h-5 rotate-180"}),u.jsx("span",{children:"Aylk Genel Harcamalar"})]})}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-b-xl shadow-sm overflow-hidden flex-1 flex flex-col transition-colors",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left text-sm",children:[u.jsx("thead",{className:"bg-red-50/50 dark:bg-red-900/10 text-red-900 dark:text-red-300 font-semibold border-b border-red-100 dark:border-red-900/20",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 text-center w-12",children:"SIRA"}),u.jsx("th",{className:"p-3",children:"HARCAMA DETAYI"}),u.jsx("th",{className:"p-3 w-40",children:"TARH / F"}),u.jsx("th",{className:"p-3 min-w-[140px] text-right",children:"TUTAR"}),u.jsx("th",{className:"p-3",children:"DEMEY YAPAN"}),u.jsx("th",{className:"p-3 w-28",children:"YNTEM"}),u.jsx("th",{className:"p-3 w-12",children:"LEM"})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:[w.map(($,V)=>u.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors",children:[u.jsx("td",{className:"p-3 text-center text-gray-500 dark:text-slate-500 font-mono",children:V+1}),u.jsx("td",{className:"p-3",children:u.jsx("input",{type:"text",placeholder:"Harcama detay...",className:"w-full px-2 py-1.5 border border-gray-200 dark:border-slate-700 dark:bg-slate-950 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:border-red-500",value:$.detail||$.description||"",onChange:A=>_(!1,$.id,"detail",A.target.value)})}),u.jsx("td",{className:"p-3",children:u.jsx("input",{type:"date",className:"w-full px-2 py-1.5 border border-gray-200 dark:border-slate-700 dark:bg-slate-950 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:border-red-500",value:$.date,onChange:A=>_(!1,$.id,"date",A.target.value)})}),u.jsx("td",{className:"p-3",children:u.jsx("input",{type:"number",placeholder:"0.00",className:"w-full px-2 py-1.5 border border-gray-200 dark:border-slate-700 dark:bg-slate-950 rounded-lg text-sm text-right font-medium text-red-700 dark:text-red-400 focus:outline-none focus:border-red-500",value:$.amount,onChange:A=>_(!1,$.id,"amount",A.target.value)})}),u.jsx("td",{className:"p-3",children:u.jsxs("select",{className:"w-full px-2 py-1.5 border border-gray-200 dark:border-slate-700 dark:bg-slate-950 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:border-red-500 bg-white dark:bg-slate-950",value:$.payer||"",onChange:A=>_(!1,$.id,"payer",A.target.value),children:[u.jsx("option",{value:"",children:"Seiniz"}),a.map(A=>u.jsx("option",{value:A.name,children:A.name},A.id))]})}),u.jsx("td",{className:"p-3",children:u.jsxs("select",{className:"w-full px-2 py-1.5 border border-gray-200 dark:border-slate-700 dark:bg-slate-950 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:border-red-500 bg-white dark:bg-slate-950",value:$.method,onChange:A=>_(!1,$.id,"method",A.target.value),children:[u.jsx("option",{children:"Nakit"}),u.jsx("option",{children:"Kredi Kart"}),u.jsx("option",{children:"Havale"}),u.jsx("option",{children:"Cebinden"})]})}),u.jsx("td",{className:"p-3 text-center flex gap-1 justify-center",children:$.isSaved?u.jsx("button",{onClick:()=>N($.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Sil",children:u.jsx(hr,{className:"w-4 h-4"})}):u.jsx("button",{onClick:()=>O($),className:"p-1.5 text-red-600 dark:text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Kaydet",children:u.jsx(_d,{className:"w-4 h-4"})})})]},$.id)),w.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"7",className:"p-8 text-center text-gray-500 dark:text-slate-500 border-dashed border-2 border-gray-100 dark:border-slate-800 rounded-lg m-4",children:"Henz harcama eklenmedi."})})]})]})}),u.jsx("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 border-t border-gray-200 dark:border-slate-800",children:u.jsxs(re,{onClick:T,variant:"outline",className:"w-full border-dashed border-red-300 dark:border-red-700 text-red-700 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:border-red-500 dark:hover:border-red-600 bg-white dark:bg-slate-900",children:[u.jsx(Ht,{className:"w-4 h-4 mr-2"})," Satr Ekle"]})})]}),u.jsxs("div",{className:"bg-red-50/50 dark:bg-red-900/10 rounded-xl p-4 border border-red-100 dark:border-red-900/20 space-y-3 transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-red-900 dark:text-red-300 border-b border-red-100 dark:border-red-900/20 pb-2",children:[u.jsx("span",{children:"AYLIK DENEN GDERLER (Nakit)"}),u.jsxs("span",{className:"font-bold text-lg",children:["",W.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),u.jsxs("div",{className:"flex justify-between items-center text-sm text-red-800 dark:text-red-400",children:[u.jsx("span",{children:"TOPLAM GDERLER (Tm)"}),u.jsxs("span",{children:["",M.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})]})]})]})}function qMe({isOpen:t,onClose:e,onCreate:n}){const[r,s]=y.useState({type:"income",amount:"",category:"",date:new Date().toISOString().split("T")[0],project:"general",payer:"",description:""});if(!t)return null;const i=o=>{o.preventDefault();const a=r.amount.toString().replace(/\./g,"").replace(",","."),l=parseFloat(a)||0;n({...r,amount:r.type==="expense"?-Math.abs(l):Math.abs(l)}),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-xl w-full max-w-lg overflow-hidden border border-slate-200 dark:border-slate-800 transition-colors",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Yeni Finans Kayd"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:"Gelir veya gider kayd ekleyin"})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 dark:hover:bg-slate-800",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Tr *"}),u.jsxs("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-gray-900 dark:text-white",value:r.type,onChange:o=>s({...r,type:o.target.value}),children:[u.jsx("option",{value:"income",children:"Gelir"}),u.jsx("option",{value:"expense",children:"Gider"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Tutar () *"}),u.jsx("input",{required:!0,type:"text",placeholder:"rn: 150.000",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:r.amount,onChange:o=>s({...r,amount:o.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:r.type==="income"?"Mteri / deyen":"Muhatap / Kime"}),u.jsx("input",{type:"text",placeholder:r.type==="income"?"rn: Ahmet Ylmaz":"rn: Trendyol Maazas",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:r.payer,onChange:o=>s({...r,payer:o.target.value})})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Kategori *"}),u.jsx("input",{required:!0,type:"text",placeholder:"Proje demesi, Maa, vs.",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:r.category,onChange:o=>s({...r,category:o.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Tarih *"}),u.jsx("input",{required:!0,type:"date",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:r.date,onChange:o=>s({...r,date:o.target.value})})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Proje"}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-white dark:bg-slate-950 text-gray-900 dark:text-white",value:r.project,onChange:o=>s({...r,project:o.target.value}),children:[u.jsx("option",{value:"general",children:"Genel"}),u.jsx("option",{value:"crm",children:"CRM Gelitirme"}),u.jsx("option",{value:"ecommerce",children:"E-Ticaret Sitesi"}),u.jsx("option",{value:"social",children:"Sosyal Medya Ynetimi"}),u.jsx("option",{value:"ads",children:"Meta Reklam Ynetimi"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Aklama"}),u.jsx("textarea",{rows:3,placeholder:"Detayl aklama...",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all resize-none bg-white dark:bg-slate-950 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:r.description,onChange:o=>s({...r,description:o.target.value})})]}),u.jsxs("div",{className:"pt-4 flex gap-3 justify-end border-t border-gray-100 dark:border-slate-800 mt-6",children:[u.jsx(re,{type:"button",variant:"secondary",onClick:e,className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200",children:"ptal"}),u.jsx(re,{type:"submit",className:"bg-[#8b5cf6] hover:bg-[#7c3aed] shadow-purple-200",children:"Kaydet"})]})]})]})})}function GMe(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),{user:s}=hn(),[i,o]=y.useState(!1),[a,l]=y.useState(""),[c,d]=y.useState("Tm"),h=async()=>{try{r(!0);const{data:E,error:C}=await X.from("transactions").select(`
                  *,
                  projects (name)
              `).order("date",{ascending:!1});if(C)throw C;const T=E.map(_=>{var O;return{..._,project_name:((O=_.projects)==null?void 0:O.name)||"Genel",amount:parseFloat(_.amount)}});e(T)}catch(E){console.error(E)}finally{r(!1)}};y.useEffect(()=>{s&&h()},[s]);const f=t.filter(E=>E.type==="income").reduce((E,C)=>E+C.amount,0),p=t.filter(E=>E.type==="expense").reduce((E,C)=>E+C.amount,0),m=f-p,g=[{label:"Toplam Gelir",value:f.toLocaleString("tr-TR"),icon:Ad,color:"text-green-600 dark:text-green-400",bg:"bg-green-50 dark:bg-green-900/20"},{label:"Toplam Gider",value:p.toLocaleString("tr-TR"),icon:TL,color:"text-red-600 dark:text-red-400",bg:"bg-red-50 dark:bg-red-900/20"},{label:"Net Bakiye",value:m.toLocaleString("tr-TR"),icon:io,color:m>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",bg:"bg-blue-50 dark:bg-blue-900/20"}],x=y.useMemo(()=>{const E={};return t.forEach(C=>{if(C.type==="expense"&&C.method==="Cebinden"&&!C.is_paid){const T=C.payer||"Bilinmiyor";E[T]||(E[T]={name:T,amount:0,count:0,items:[]}),E[T].amount+=C.amount,E[T].count+=1,E[T].items.push(C)}}),Object.values(E)},[t]),b=x.reduce((E,C)=>E+C.amount,0),v=async E=>{try{let C=null;E.project&&E.project;const T={date:E.date,type:E.type,category:E.category,amount:parseFloat(E.amount),description:E.description,payer:E.payer||"-",method:"Nakit",project_id:C},{error:_}=await X.from("transactions").insert(T);if(_)throw _;o(!1),h()}catch(C){alert("Hata: "+C.message)}},w=async(E,C,T)=>{if(confirm(`${E} isimli personelin ${C} tutarndaki borcu denecek. Onaylyor musunuz?`))try{const _=T.map(M=>M.id),{error:O}=await X.from("transactions").update({is_paid:!0}).in("id",_);if(O)throw O;const N={date:new Date().toISOString().split("T")[0],type:"expense",category:"Bor demesi",amount:C,description:`${E} - Bor demesi`,payer:"irket",method:"Nakit",is_paid:!0},{error:R}=await X.from("transactions").insert(N);if(R)throw R;h()}catch(_){alert("deme hatas: "+_.message)}},S=t.filter(E=>{const C=(E.category||"").toLowerCase().includes(a.toLowerCase())||(E.project_name||"").toLowerCase().includes(a.toLowerCase())||(E.description||"").toLowerCase().includes(a.toLowerCase())||(E.payer||"").toLowerCase().includes(a.toLowerCase()),T=E.type==="income"?"Gelir":"Gider";return C&&(c==="Tm"||T===c)});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Finans"}),u.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm mt-1",children:"Gelir ve gider kaytlarnz ynetin"})]}),u.jsxs(re,{onClick:()=>o(!0),className:"gap-2 bg-purple-600 hover:bg-purple-700 shadow-purple-200 dark:text-white",children:[u.jsx(Ht,{className:"w-4 h-4"}),"Yeni Kayt"]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:g.map((E,C)=>u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm flex items-center justify-between transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-slate-400",children:E.label}),u.jsxs("p",{className:ie("text-3xl font-bold mt-2",E.color),children:[C===2&&m>=0?"+":"","",E.value]})]}),u.jsx("div",{className:ie("p-4 rounded-full",E.bg),children:u.jsx(E.icon,{className:ie("w-6 h-6",E.color)})})]},C))}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm flex flex-col md:flex-row gap-4 transition-colors",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-slate-500"}),u.jsx("input",{type:"text",placeholder:"Kategori, aklama veya proje ara...",className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",value:a,onChange:E=>l(E.target.value)})]}),u.jsxs("div",{className:"relative min-w-[200px]",children:[u.jsxs("select",{className:"w-full appearance-none px-4 py-2 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-lg text-sm text-gray-600 dark:text-slate-300 focus:outline-none focus:border-purple-500 cursor-pointer",value:c,onChange:E=>d(E.target.value),children:[u.jsx("option",{value:"Tm",children:"Tm"}),u.jsx("option",{value:"Gelir",children:"Gelir"}),u.jsx("option",{value:"Gider",children:"Gider"})]}),u.jsx(ZJ,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),x.length>0&&u.jsxs("div",{className:"bg-orange-50/50 dark:bg-orange-900/10 border border-orange-100 dark:border-orange-900/30 rounded-xl p-6 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(io,{className:"w-5 h-5 text-orange-600 dark:text-orange-500"}),u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"irket Bor Durumu"})]}),u.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm mb-6",children:"Cebinden para veren kiilere irketin borlar"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg border border-orange-100/50 dark:border-orange-900/20 shadow-sm",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 font-medium",children:"Toplam Bor"}),u.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-500 mt-1",children:["",b.toLocaleString("tr-TR")]})]}),x.map(E=>u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg border border-orange-100/50 dark:border-orange-900/20 shadow-sm flex items-center justify-between transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",children:E.name.substring(0,1).toUpperCase()}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:E.name}),u.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:[E.count," ilem - Cebinden deme yapt"]})]})]}),u.jsxs("div",{className:"text-right flex items-center gap-4",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-orange-600 dark:text-orange-500",children:["",E.amount.toLocaleString("tr-TR")]}),u.jsx("p",{className:"text-xs text-gray-400 dark:text-slate-500",children:"Bor"})]}),u.jsx(re,{onClick:()=>w(E.name,E.amount,E.items),className:"bg-purple-600 hover:bg-purple-700 h-8 text-sm px-4 dark:text-white",children:"de"})]})]},E.name))]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm overflow-hidden transition-colors",children:[u.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-slate-800",children:[u.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Kaytlar"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Tm gelir ve gider kaytlar"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-gray-50/50 dark:bg-slate-950/50 text-xs font-semibold text-gray-500 dark:text-slate-400 border-b border-gray-100 dark:border-slate-800",children:[u.jsx("th",{className:"py-3 px-6",children:"Tarih"}),u.jsx("th",{className:"py-3 px-6",children:"Tr"}),u.jsx("th",{className:"py-3 px-6",children:"Kategori"}),u.jsx("th",{className:"py-3 px-6",children:"Proje"}),u.jsx("th",{className:"py-3 px-6",children:"Paray Veren"}),u.jsx("th",{className:"py-3 px-6",children:"Aklama"}),u.jsx("th",{className:"py-3 px-6 text-right",children:"Tutar"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-5 dark:divide-slate-800",children:n?u.jsx("tr",{children:u.jsx("td",{colSpan:"7",className:"py-10 text-center",children:u.jsx(Hn,{className:"w-6 h-6 animate-spin mx-auto text-violet-600"})})}):S.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"7",className:"py-12 text-center text-gray-500 dark:text-slate-400",children:"Kayt bulunamad."})}):S.map(E=>u.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-slate-800/50 transition-colors text-sm",children:[u.jsx("td",{className:"py-3 px-6 text-gray-600 dark:text-slate-300",children:E.date}),u.jsx("td",{className:"py-3 px-6",children:u.jsx("span",{className:ie("px-2 py-0.5 rounded text-xs font-medium",E.type==="income"?"bg-black dark:bg-slate-700 text-white":"bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-400"),children:E.type==="income"?"Gelir":"Gider"})}),u.jsx("td",{className:"py-3 px-6 text-gray-900 dark:text-white font-medium",children:E.category}),u.jsx("td",{className:"py-3 px-6 text-gray-500 dark:text-slate-400",children:E.project_name}),u.jsx("td",{className:"py-3 px-6",children:E.payer!=="-"?u.jsx("span",{className:"px-2 py-1 bg-black dark:bg-slate-700 text-white text-xs rounded-lg",children:E.payer}):u.jsx("span",{className:"text-gray-400 dark:text-slate-600",children:"-"})}),u.jsx("td",{className:"py-3 px-6 text-gray-500 dark:text-slate-400 max-w-xs truncate",children:E.description}),u.jsxs("td",{className:ie("py-3 px-6 text-right font-medium",E.type==="income"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[E.type==="income"?"+":"-","",E.amount.toLocaleString("tr-TR")]})]},E.id))})]})})]}),u.jsx(qMe,{isOpen:i,onClose:()=>o(!1),onCreate:v})]})}function YMe({isOpen:t,onClose:e,customer:n,onConfirm:r}){const[s,i]=y.useState("");if(y.useEffect(()=>{t&&n&&i(n.totalRemaining.toString())},[t,n]),!t||!n)return null;const o=a=>{a.preventDefault();const l=s.toString().replace(/\./g,"").replace(",","."),c=parseFloat(l);if(isNaN(c)||c<=0){alert("Geerli bir tutar giriniz.");return}if(c>n.totalRemaining+1){alert("Tutar kalan bakiyeden fazla olamaz.");return}r(c),e()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-xl w-full max-w-md border border-gray-200 dark:border-slate-800",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Tahsilat Al"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:n.name})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:["Tutar (Kalan: ",n.totalRemaining.toLocaleString("tr-TR",{minimumFractionDigits:2}),")"]}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-slate-400",children:""}),u.jsx("input",{type:"text",placeholder:"rn: 150.000",className:"w-full pl-8 pr-4 py-2 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500/20 focus:border-green-500 bg-white dark:bg-slate-950 text-gray-900 dark:text-white",value:s,onChange:a=>i(a.target.value),autoFocus:!0})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[u.jsx(re,{type:"button",variant:"ghost",onClick:e,className:"text-gray-600 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-800",children:"ptal"}),u.jsxs(re,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white gap-2 shadow-green-200 dark:shadow-green-900/40",children:[u.jsx(io,{className:"w-4 h-4"}),"Tahsil Et"]})]})]})]})})}function KMe({isOpen:t,onClose:e,customer:n}){var r,s,i;return!t||!n?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-xl w-full max-w-2xl overflow-hidden max-h-[90vh] flex flex-col border border-gray-200 dark:border-slate-800",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800 shrink-0",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n.name}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:n.phone})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 p-4 rounded-xl border border-gray-100 dark:border-slate-700",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-slate-400 mb-1",children:"Toplam Anlalan"}),u.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["",((r=n.totalAgreed)==null?void 0:r.toLocaleString("tr-TR"))||"0"]})]}),u.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-xl border border-green-100 dark:border-green-900/30",children:[u.jsx("p",{className:"text-xs font-medium text-green-700 dark:text-green-400 mb-1",children:"Tahsil Edilen"}),u.jsxs("p",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:["",((s=n.totalPaid)==null?void 0:s.toLocaleString("tr-TR"))||"0"]})]}),u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl border border-red-100 dark:border-red-900/30",children:[u.jsx("p",{className:"text-xs font-medium text-red-700 dark:text-red-400 mb-1",children:"Kalan Bakiye"}),u.jsxs("p",{className:"text-lg font-bold text-red-700 dark:text-red-400",children:["",((i=n.totalRemaining)==null?void 0:i.toLocaleString("tr-TR"))||"0"]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-1 h-6 bg-blue-600 rounded-full"}),u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Proje Detaylar"})]}),u.jsx("div",{className:"space-y-3",children:n.projects&&n.projects.length>0?n.projects.map(o=>u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-lg p-4 transition-shadow hover:shadow-sm",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg shrink-0",children:u.jsx(oT,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-base",children:o.name}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsxs("span",{className:"text-xs text-gray-500 dark:text-slate-400",children:["Anlalan: ",o.agreed.toLocaleString("tr-TR")]}),u.jsx("span",{className:"w-1 h-1 bg-gray-300 dark:bg-slate-600 rounded-full"}),u.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-slate-800 rounded text-gray-600 dark:text-slate-300 font-medium",children:o.label})]})]})]})}),u.jsxs("div",{className:"flex items-center gap-4 text-sm border-t border-gray-50 dark:border-slate-800 pt-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex justify-between mb-1.5",children:[u.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400",children:"Tahsilat Durumu"}),u.jsxs("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:["%",(o.paid/o.agreed*100).toFixed(0)]})]}),u.jsx("div",{className:"w-full bg-gray-100 dark:bg-slate-700 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-600 rounded-full",style:{width:`${o.paid/o.agreed*100}%`}})})]}),u.jsxs("div",{className:"text-right pl-4 border-l border-gray-100 dark:border-slate-800",children:[u.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mb-0.5",children:"Kalan"}),u.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold",children:["",o.remaining.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})]},o.id)):u.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm text-center py-4",children:"Bu mteriye ait proje bulunmamaktadr."})})]})]})]})})}function JMe(){const[t,e]=y.useState(""),[n,r]=y.useState("Tm"),[s,i]=y.useState(!1),[o,a]=y.useState(null),[l,c]=y.useState(!1),[d,h]=y.useState(null),[f,p]=y.useState([]),[m,g]=y.useState(!0),{user:x}=hn(),b=async()=>{try{g(!0);const{data:R}=await X.from("clients").select("*");if(!R){p([]);return}const{data:M}=await X.from("projects").select("id, client_id, price, name, status"),{data:W}=await X.from("transactions").select("*").eq("type","income"),D=R.map(B=>{const $=M?M.filter(U=>U.client_id===B.id):[],V=$.length,A=$.reduce((U,H)=>U+(parseFloat(H.price)||0),0);let z=0;W&&W.forEach(U=>{var I;$.find(q=>q.id===U.project_id)||U.payer&&U.payer.trim().toLowerCase()===B.name.trim().toLowerCase()?z+=parseFloat(U.amount)||0:U.project_id===null&&!U.payer&&((I=U.description)!=null&&I.toLowerCase().includes(B.name.toLowerCase()))});const j=A-z;return{...B,projectCount:V,totalAgreed:A,totalPaid:z,totalRemaining:j,projects:$.map(U=>({...U,remaining:Math.max(0,(U.price||0)-0),agreed:U.price}))}});p(D)}catch(R){console.error("Collections fetch error",R)}finally{g(!1)}};y.useEffect(()=>{x&&b()},[x]);const v=(R,M)=>{if(R.stopPropagation(),M.totalRemaining<=0){alert("Bu mterinin borcu bulunmamaktadr.");return}h(M),c(!0)},w=async R=>{const M=d;if(M)try{const W=new Date,{error:D}=await X.from("transactions").insert({date:Ve(W,"yyyy-MM-dd"),type:"income",category:"Proje demesi",description:`Tahsilat: ${M.name}`,amount:R,payer:M.name,project_id:null,is_paid:!0});if(D)throw D;alert("Tahsilat baaryla kaydedildi."),c(!1),b()}catch(W){console.error("Tahsilat hatas:",W),alert("Bir hata olutu: "+W.message)}},S=R=>{switch(R){case"Aktif":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"Pasif":return"bg-gray-100 text-gray-700 dark:bg-slate-800 dark:text-slate-400";case"Skntl":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"Kurumsal":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";default:return"bg-gray-100 text-gray-700 dark:bg-slate-800 dark:text-slate-400"}},E=f.filter(R=>{const M=(R.name||"").toLowerCase().includes(t.toLowerCase())||(R.phone||"").replace(/\s+/g,"").includes(t.replace(/\s+/g,"")),W=n==="Tm"||R.type===n;return M&&W}),C=f.reduce((R,M)=>R+M.totalPaid,0),T=f.reduce((R,M)=>R+M.totalRemaining,0),_=f.length,O=f.reduce((R,M)=>R+M.projectCount,0),N=[{label:"Toplam Tahsilat",value:`${C.toLocaleString("tr-TR",{minimumFractionDigits:2})}`,icon:io,color:"text-green-600 dark:text-green-400",bg:"bg-green-50 dark:bg-green-900/20"},{label:"Beklenen Tahsilat",value:`${T.toLocaleString("tr-TR",{minimumFractionDigits:2})}`,icon:lL,color:"text-red-600 dark:text-red-400",bg:"bg-red-50 dark:bg-red-900/20"},{label:"Mteri Says",value:_.toString(),icon:so,color:"text-orange-600 dark:text-orange-400",bg:"bg-orange-50 dark:bg-orange-900/20"},{label:"Proje Says",value:O.toString(),icon:oT,color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"}];return u.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Beklenen Tahsilat"}),u.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm mt-1",children:"Proje demelerini takip edin"})]})}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:N.map((R,M)=>u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 font-medium",children:R.label}),u.jsx("p",{className:ie("text-xl font-bold mt-1",R.color),children:R.value})]}),u.jsx("div",{className:ie("p-3 rounded-lg",R.bg),children:u.jsx(R.icon,{className:ie("w-6 h-6",R.color)})})]},M))}),u.jsx("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm",children:u.jsx("div",{className:"relative",children:u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-slate-500"}),u.jsx("input",{type:"text",placeholder:"sim veya telefon ile ara...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-slate-600",value:t,onChange:R=>e(R.target.value)})]}),u.jsx("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-lg p-1 gap-1",children:["Tm","Aktif","Pasif","Skntl","Kurumsal"].map(R=>u.jsx(re,{onClick:()=>r(R),variant:n===R?"secondary":"ghost",size:"sm",className:ie("text-xs font-medium shadow-sm transition-all",n===R?"bg-white dark:bg-slate-700 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-slate-400 hover:text-gray-700 dark:hover:text-slate-200 hover:bg-white/50 dark:hover:bg-slate-600 shadow-none bg-transparent"),children:R},R))})]})})}),u.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm overflow-hidden",children:u.jsxs("div",{className:"overflow-x-auto",children:[u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-gray-100 dark:border-slate-800 bg-white dark:bg-slate-900",children:[u.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"MTER ADI"}),u.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"TP"}),u.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"PROJE SAYISI"}),u.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"TAHSL EDLEN"}),u.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"KALAN"}),u.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider text-right",children:"LEMLER"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-5 dark:divide-slate-800",children:E.map(R=>u.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-slate-800/50 transition-colors group",children:[u.jsx("td",{className:"py-4 px-6",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm uppercase",children:R.name}),u.jsx("span",{className:"text-xs text-gray-400 dark:text-slate-500 mt-0.5",children:R.phone})]})}),u.jsx("td",{className:"py-4 px-6",children:u.jsx("span",{className:ie("px-2.5 py-1 rounded text-xs font-medium",S(R.type)),children:R.type})}),u.jsxs("td",{className:"py-4 px-6 text-sm text-gray-500 dark:text-slate-400",children:[R.projectCount," Proje"]}),u.jsxs("td",{className:"py-4 px-6 text-sm text-green-600 dark:text-green-400 font-medium",children:["",R.totalPaid.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),u.jsxs("td",{className:"py-4 px-6 text-sm font-bold text-gray-900 dark:text-white",children:["",R.totalRemaining.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),u.jsx("td",{className:"py-4 px-6",children:u.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-100 sm:opacity-60 sm:group-hover:opacity-100 transition-opacity",children:[u.jsxs(re,{size:"sm",variant:"ghost",className:"h-8 text-xs font-medium text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 dark:text-emerald-400 dark:hover:text-emerald-300 dark:hover:bg-emerald-900/30 gap-1",onClick:M=>v(M,R),title:"Tahsilat Al",disabled:R.totalRemaining<=0,children:[u.jsx(io,{className:"w-3.5 h-3.5"}),"Tahsil Et"]}),u.jsx(re,{size:"icon",variant:"ghost",onClick:()=>{a(R),i(!0)},title:"Detaylar Gr",className:"w-8 h-8 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400",children:u.jsx(Gc,{className:"w-4 h-4"})})]})})]},R.id))})]}),f.length===0&&u.jsx("div",{className:"text-center py-12",children:u.jsx("p",{className:"text-gray-500 dark:text-slate-400",children:m?"Ykleniyor...":"Kayt bulunamad."})})]})}),u.jsx(KMe,{isOpen:s,onClose:()=>i(!1),customer:o}),u.jsx(YMe,{isOpen:l,onClose:()=>c(!1),customer:d,onConfirm:w})]})}function hR({isOpen:t,onClose:e,onCreate:n,initialData:r,availablePersonnel:s=[]}){const[i,o]=y.useState({title:"",description:"",assignees:[],dueDate:"",status:"beklemede",priority:"orta"}),a=!!r,[l,c]=y.useState(!1),d=lt.useRef(null);if(y.useEffect(()=>{function p(m){d.current&&!d.current.contains(m.target)&&c(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),y.useEffect(()=>{if(t){if(r){const p=Array.isArray(r.assigned_to)?r.assigned_to:[];o({title:r.title||"",description:r.description||"",assignees:p,dueDate:r.due_date||"",status:r.status?r.status.toLowerCase():"beklemede",priority:r.priority?r.priority.toLowerCase():"orta"})}else o({title:"",description:"",assignees:[],dueDate:"",status:"beklemede",priority:"orta"});c(!1)}},[t,r]),!t)return null;const h=p=>{p.preventDefault(),n(i),e()},f=p=>{i.assignees.includes(p)?o({...i,assignees:i.assignees.filter(m=>m!==p)}):o({...i,assignees:[...i.assignees,p]})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh] border border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800 shrink-0",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a?"Grevi Dzenle":"Yeni Grev Ekle"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1",children:a?"Grev bilgilerini gncelleyin":"Yeni bir harici grev oluturun"})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:u.jsxs("form",{id:"create-external-task-form",onSubmit:h,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Grev Bal *"}),u.jsx("input",{required:!0,type:"text",placeholder:"rn: Ofis Temizlii",className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all text-sm bg-white dark:bg-slate-950 text-gray-900 dark:text-white",value:i.title,onChange:p=>o({...i,title:p.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Aklama"}),u.jsx("textarea",{rows:3,placeholder:"",className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all resize-none text-sm bg-white dark:bg-slate-950 text-gray-900 dark:text-white",value:i.description,onChange:p=>o({...i,description:p.target.value})})]}),u.jsxs("div",{className:"space-y-1.5 relative",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Atama *"}),u.jsxs("div",{className:"relative",ref:d,children:[u.jsxs("div",{className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-950 flex items-center justify-between cursor-pointer min-h-[42px] hover:border-purple-400 transition-colors",onClick:()=>c(!l),children:[u.jsx("span",{className:"text-sm text-gray-700 dark:text-slate-300 truncate select-none",children:i.assignees.length>0?i.assignees.map(p=>{var m;return((m=s.find(g=>g.id===p))==null?void 0:m.full_name)||"..."}).join(", "):u.jsx("span",{className:"text-gray-400 dark:text-slate-500",children:"Kii seiniz..."})}),u.jsxs("div",{className:"flex items-center gap-2",children:[i.assignees.length>0&&u.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 text-xs px-2 py-0.5 rounded-full font-medium",children:i.assignees.length}),u.jsx(NL,{className:"w-4 h-4 text-gray-400 dark:text-slate-500"})]})]}),l&&u.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg shadow-xl max-h-56 overflow-y-auto z-50",children:[s.map(p=>u.jsxs("div",{className:"flex items-center px-3 py-2.5 hover:bg-gray-50 dark:hover:bg-slate-800 cursor-pointer border-b border-gray-50 dark:border-slate-800 last:border-0 text-gray-700 dark:text-slate-300",onClick:()=>f(p.id),children:[u.jsx("div",{className:ie("w-4 h-4 border rounded mr-3 flex items-center justify-center transition-all",i.assignees.includes(p.id)?"bg-purple-600 border-purple-600":"border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800"),children:i.assignees.includes(p.id)&&u.jsx(cL,{className:"w-3 h-3 text-white"})}),u.jsx("span",{className:"text-sm font-medium",children:p.full_name})]},p.id)),s.length===0&&u.jsx("div",{className:"px-3 py-4 text-sm text-gray-500 dark:text-slate-400 text-center",children:"Personel bulunamad."})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Durum *"}),u.jsxs("select",{className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all bg-white dark:bg-slate-950 text-gray-900 dark:text-white text-sm",value:i.status,onChange:p=>o({...i,status:p.target.value}),children:[u.jsx("option",{value:"beklemede",children:"beklemede"}),u.jsx("option",{value:"devam ediyor",children:"devam ediyor"}),u.jsx("option",{value:"tamamlandi",children:"tamamland"})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"ncelik *"}),u.jsxs("select",{className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all bg-white dark:bg-slate-950 text-gray-900 dark:text-white text-sm",value:i.priority,onChange:p=>o({...i,priority:p.target.value}),children:[u.jsx("option",{value:"dk",children:"dk"}),u.jsx("option",{value:"orta",children:"orta"}),u.jsx("option",{value:"yksek",children:"yksek"})]})]}),u.jsxs("div",{className:"space-y-1.5 md:col-span-1 col-span-2",children:[u.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Biti Tarihi *"}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"date",className:"w-full px-3 py-2.5 border border-gray-300 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all text-sm bg-white dark:bg-slate-950 text-gray-900 dark:text-white",value:i.dueDate,onChange:p=>o({...i,dueDate:p.target.value})})})]})]}),u.jsx("div",{className:"h-6"})]})}),u.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 shrink-0 flex justify-end gap-3 rounded-b-xl",children:[u.jsx(re,{type:"button",variant:"secondary",onClick:e,className:"bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-600 text-gray-700 dark:text-white px-6",children:"ptal"}),u.jsx(re,{type:"submit",form:"create-external-task-form",className:ie("px-6 font-bold text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 bg-[#8b5cf6] hover:bg-[#7c3aed] shadow-purple-200 dark:shadow-purple-900/40 focus:ring-purple-500"),children:a?"Gncelle":"Ekle"})]})]})})}function QMe(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),{user:s}=hn(),[i,o]=y.useState({}),[a,l]=y.useState([]),[c,d]=y.useState(!1),[h,f]=y.useState(!1),[p,m]=y.useState(null),[g,x]=y.useState(""),[b,v]=y.useState("Tm Durumlar"),[w,S]=y.useState("Tm Zamanlar"),E=async()=>{const{data:B}=await X.from("profiles").select("id, full_name"),$={};return B&&B.forEach(V=>$[V.id]=V.full_name),o($),l(B||[]),$},C=async(B=null)=>{try{r(!0);const{data:$,error:V}=await X.from("external_tasks").select("*").order("created_at",{ascending:!1});if(V)throw V;const A=B||i,z=$.map(j=>({...j,date:j.created_at?Ve(nt(j.created_at),"dd.MM.yyyy"):"-",assignedToNames:(j.assigned_to||[]).map(U=>A[U]||"Bilinmiyor")}));e(z)}catch($){console.error("External tasks fetch error:",$)}finally{r(!1)}};y.useEffect(()=>(s&&E().then(B=>{C(B)}),window.addEventListener("taskCreated",()=>C()),()=>window.removeEventListener("taskCreated",()=>C())),[s]);const T=async B=>{try{const{error:$}=await X.from("external_tasks").insert({title:B.title,description:B.description,status:M(B.status),priority:B.priority,assigned_to:B.assignees||[]});if($)throw $;C(),d(!1)}catch($){alert("Ekleme hatas: "+$.message)}},_=async B=>{try{const{error:$}=await X.from("external_tasks").update({title:B.title,description:B.description,status:M(B.status),priority:B.priority,assigned_to:B.assignees||[]}).eq("id",p.id);if($)throw $;C(),f(!1),m(null)}catch($){alert("Gncelleme hatas: "+$.message)}},[O,N]=y.useState(null),R=B=>{N(B)},M=B=>{if(!B)return"Beklemede";const $=B.toLowerCase();return $.includes("bekle")?"Beklemede":$.includes("devam")?"Devam Ediyor":$.includes("tamam")?"Tamamland":B},W=[{label:"Toplam Grev",value:t.length,icon:wb,color:"text-violet-600 dark:text-violet-400",bg:"bg-violet-50 dark:bg-violet-900/20"},{label:"Beklemede",value:t.filter(B=>B.status==="Beklemede").length,icon:pi,color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20"},{label:"Devam Eden",value:t.filter(B=>B.status==="Devam Ediyor").length,icon:Hn,color:"text-indigo-600 dark:text-indigo-400",bg:"bg-indigo-50 dark:bg-indigo-900/20"},{label:"Tamamlanan",value:t.filter(B=>B.status==="Tamamland").length,icon:tr,color:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/20"},{label:"Gecikmi",value:t.filter(B=>B.status==="Geciken").length,icon:nm,color:"text-red-600 dark:text-red-400",bg:"bg-red-50 dark:bg-red-900/20"}],D=t.filter(B=>{const V=(B.assignedToNames||[]).join(" "),A=B.title.toLowerCase().includes(g.toLowerCase())||(B.description||"").toLowerCase().includes(g.toLowerCase())||V.toLowerCase().includes(g.toLowerCase()),z=b==="Tm Durumlar"||B.status===b;let j=!0;if(w!=="Tm Zamanlar"&&B.created_at){const U=nt(B.created_at),I=Math.abs(new Date-U),q=Math.ceil(I/(1e3*60*60*24));w==="Son 1 Hafta"&&(j=q<=7),w==="Son 1 Ay"&&(j=q<=30)}return A&&z&&j});return u.jsxs("div",{className:"space-y-6 relative",children:[n&&u.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px]",children:u.jsx(Hn,{className:"w-8 h-8 animate-spin text-violet-600"})}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Harici Grevler"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 font-medium",children:"Ofis d veya genel ilerin takibi."})]}),u.jsxs(re,{onClick:()=>d(!0),className:"bg-violet-600 hover:bg-violet-700 text-white shadow-lg shadow-violet-500/20 gap-2 dark:shadow-violet-900/40",children:[u.jsx(Ht,{className:"w-4 h-4"}),"Yeni Grev Ekle"]})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:W.map(B=>{const $=B.icon;return u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-slate-100 dark:border-slate-800 shadow-sm flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:B.label}),u.jsx("p",{className:"text-3xl font-black text-slate-900 dark:text-white mt-1",children:B.value})]}),u.jsx("div",{className:ie("w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg transition-transform hover:scale-105",B.bg,B.color),children:u.jsx($,{className:"w-6 h-6"})})]},B.label)})}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl border border-slate-100 dark:border-slate-800 shadow-sm p-4",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),u.jsx("input",{type:"text",placeholder:"Grev veya sorumlu kii ara...",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 dark:bg-slate-950 border border-slate-100 dark:border-slate-800 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all text-slate-900 dark:text-white",value:g,onChange:B=>x(B.target.value)})]}),u.jsx("div",{className:"flex gap-2",children:u.jsx("div",{className:"relative",children:u.jsxs("select",{className:"px-4 py-2.5 bg-slate-50 dark:bg-slate-950 border border-slate-100 dark:border-slate-800 rounded-xl text-sm text-slate-600 dark:text-slate-300 focus:outline-none appearance-none pr-8 cursor-pointer",value:b,onChange:B=>v(B.target.value),children:[u.jsx("option",{children:"Tm Durumlar"}),u.jsx("option",{children:"Beklemede"}),u.jsx("option",{children:"Devam Ediyor"}),u.jsx("option",{children:"Tamamland"}),u.jsx("option",{children:"Geciken"})]})})})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left border-separate border-spacing-y-2",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:[u.jsx("th",{className:"pb-3 pl-4",children:"Grev / Aklama"}),u.jsx("th",{className:"pb-3",children:"Sorumlu"}),u.jsx("th",{className:"pb-3 text-center",children:"ncelik"}),u.jsx("th",{className:"pb-3 text-center",children:"Durum"}),u.jsx("th",{className:"pb-3 text-right pr-6",children:"lemler"})]})}),u.jsx("tbody",{className:"space-y-2",children:D.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"5",className:"text-center py-12 text-slate-400 font-medium",children:"Henz harici grev bulunmuyor."})}):D.map(B=>{var $;return u.jsxs("tr",{className:"group bg-white dark:bg-slate-900 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-all border border-slate-100 dark:border-slate-800 rounded-2xl block mb-2 shadow-sm hover:shadow-md",children:[u.jsxs("td",{className:"py-4 pl-4 rounded-l-2xl w-1/3",children:[u.jsx("div",{className:"font-bold text-slate-900 dark:text-white group-hover:text-violet-600 transition-colors",children:B.title}),B.description&&u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 line-clamp-1 italic",children:B.description})]}),u.jsx("td",{className:"py-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 rounded-xl bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center text-[10px] font-black text-violet-600 dark:text-violet-400 border border-violet-200 dark:border-violet-800",children:(($=B.assignedToNames[0])==null?void 0:$.charAt(0).toUpperCase())||"?"}),u.jsx("div",{className:"text-xs font-bold text-slate-700 dark:text-slate-200 truncate max-w-[120px]",children:B.assignedToNames.join(", ")})]})}),u.jsx("td",{className:"py-4 text-center",children:u.jsx("span",{className:ie("inline-block px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider border",B.priority==="Yksek"?"bg-red-50 text-red-600 border-red-100 dark:bg-red-900/20":"bg-slate-100 text-slate-600 border-slate-200 dark:bg-slate-800"),children:B.priority||"Normal"})}),u.jsx("td",{className:"py-4 text-center",children:u.jsx("span",{className:ie("inline-block px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider text-white shadow-sm",B.status==="Devam Ediyor"?"bg-indigo-500":B.status==="Beklemede"?"bg-amber-500":B.status==="Tamamland"?"bg-emerald-500":B.status==="Geciken"?"bg-red-600":"bg-slate-500"),children:B.status})}),u.jsx("td",{className:"py-4 pr-4 rounded-r-2xl text-right",children:u.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx(re,{variant:"ghost",size:"icon",onClick:()=>{m(B),f(!0)},className:"h-8 w-8 text-violet-600 hover:bg-violet-50 dark:hover:bg-violet-900/20",children:u.jsx(rm,{className:"w-4 h-4"})}),u.jsx(re,{variant:"ghost",size:"icon",onClick:()=>R(B.id),className:"h-8 w-8 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:u.jsx(hr,{className:"w-4 h-4"})})]})})]},B.id)})})]})})]}),u.jsx(hR,{isOpen:c,onClose:()=>d(!1),onCreate:T,availablePersonnel:a}),u.jsx(hR,{isOpen:h,onClose:()=>f(!1),onCreate:_,initialData:p,availablePersonnel:a})]})}const XMe={Proje:pr,Mteri:ro," Emri":pr,Personel:ro,Gelir:io,Gider:io};function ZMe(){const[t,e]=y.useState(""),[n,r]=y.useState([]),[s,i]=y.useState(!1),o=ra(),[a]=SY(),l=async d=>{let h=typeof d=="string"?d:t;if(h=(h||"").trim(),!h){r([]);return}i(!0);try{console.log("Searching for:",h);const{data:f,error:p}=await X.rpc("global_search",{search_term:h});if(p)throw console.error("RPC Error:",p),p;console.log("Search results:",f),r(f||[])}catch(f){console.error("Global search error:",f)}finally{i(!1)}};y.useEffect(()=>{const d=setTimeout(()=>{t.trim()?l(t):r([])},400);return()=>clearTimeout(d)},[t]),y.useEffect(()=>{const d=a.get("q");d&&d!==t&&e(d)},[a]);const c=d=>{o(d)};return u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm p-6 min-h-[calc(100vh-8rem)] transition-colors",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-8",children:"Gemi Arama"}),u.jsxs("div",{className:"space-y-2 mb-8",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:"Arama Kriterleri"}),u.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-4 rounded-xl border border-gray-200 dark:border-slate-800 transition-colors",children:[u.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-slate-400 mb-1.5 block",children:"Arama Terimi"}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-slate-500"}),u.jsx("input",{type:"text",placeholder:"sim, telefon, tutar, aklama...",className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-700 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all placeholder:text-gray-400 dark:placeholder:text-slate-600",value:t,onChange:d=>e(d.target.value),onKeyDown:d=>d.key==="Enter"&&l()})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"all-time",className:"rounded border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-primary focus:ring-primary",checked:!0,readOnly:!0}),u.jsx("label",{htmlFor:"all-time",className:"text-sm text-gray-700 dark:text-slate-300",children:"Tm Zamanlar"})]}),u.jsxs(re,{onClick:l,disabled:s,className:"px-6 gap-2",children:[u.jsx(gn,{className:"w-4 h-4"}),s?"Aranyor...":"Ara"]})]})]})]}),(n.length>0||s)&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-500 dark:text-slate-400",children:["Sonular (",n.length,")"]}),u.jsxs("div",{className:"grid gap-3",children:[n.map(d=>u.jsxs("div",{onClick:()=>c(d.link),className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-4 flex items-center justify-between hover:border-primary dark:hover:border-primary hover:shadow-md transition-all cursor-pointer group",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 dark:bg-blue-900/30 text-primary dark:text-blue-400 flex items-center justify-center",children:(()=>{const h=XMe[d.type]||pr;return u.jsx(h,{className:"w-5 h-5"})})()}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-primary dark:group-hover:text-blue-400 transition-colors",children:d.title}),u.jsx("span",{className:"px-2 py-0.5 rounded-full bg-gray-100 dark:bg-slate-800 text-gray-600 dark:text-slate-300 text-xs font-medium border border-gray-200 dark:border-slate-700",children:d.type})]}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:d.subtitle})]})]}),u.jsx("div",{className:"flex items-center gap-4 text-gray-400 dark:text-slate-500",children:u.jsx(nT,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform text-primary dark:text-blue-400"})})]},`${d.type}-${d.id}`)),n.length===0&&!s&&u.jsx("div",{className:"text-center py-12 text-gray-400 dark:text-slate-500",children:"Sonu bulunamad."})]})]})]})})}const eRe=async()=>{var e;const t={clients:{success:0,fail:0},projects:{success:0,fail:0},tasks:{success:0,fail:0},transactions:{success:0,fail:0},errors:[]};try{const n=(await X.auth.getUser()).data.user;if(!n)throw new Error("Authentication required for migration.");const r=JSON.parse(localStorage.getItem("clients_data")||"[]"),s={},i={};for(const d of r)try{const{data:h,error:f}=await X.from("clients").insert({name:d.name,phone:d.phone||"",type:d.type==="Skntl"?"Skntl":d.label==="Kurumsal"?"Kurumsal":"Normal",status:d.type==="Pasif"?"Pasif":"Aktif",email:"",address:d.address||"",notes:""}).select().single();if(f)throw f;s[d.id]=h.id,i[d.name]=h.id,t.clients.success++}catch(h){console.error("Client migrate error",h),t.clients.fail++,t.errors.push(`Client ${d.name}: ${h.message}`)}const o=JSON.parse(localStorage.getItem("projects")||"[]"),a={};for(const d of o)try{let h=null;d.customer&&(h=i[d.customer]);const{data:f,error:p}=await X.from("projects").insert({name:d.name,client_id:h,status:d.status==="Tamamland"?"Tamamland":"Devam Ediyor",price:parseFloat(((e=d.price)==null?void 0:e.toString().replace("","").replace(".","").replace(",","."))||0),start_date:d.dates?new Date().toISOString():null,description:d.description,manager_id:n.id}).select().single();if(p)throw p;a[d.name]=f.id,t.projects.success++}catch(h){console.error("Project migrate error",h),t.projects.fail++}const l=JSON.parse(localStorage.getItem("workOrders")||"[]");for(const d of l)try{let h=null;d.project&&(h=a[d.project]);let f=null;if(d.date){const g=d.date.split(".");g.length===3&&(f=`${g[2]}-${g[1]}-${g[0]}`)}let p=d.description||"";d.assignedTo&&d.assignedTo.length>0&&(p+=`

[Legacy Assigned: ${d.assignedTo.join(", ")}]`);const{error:m}=await X.from("work_orders").insert({title:d.title,description:p,status:d.status==="Tamamland"?"Tamamland":"Bekliyor",priority:d.priority||"Normal",due_date:f,project_id:h,assigned_to:null});if(m)throw m;t.tasks.success++}catch(h){console.error("Task migrate error",h),t.tasks.fail++,t.errors.push(`Task ${d.title}: ${h.message}`)}const c=JSON.parse(localStorage.getItem("transactions")||"[]");for(const d of c)try{const h=d.type==="Gelir"?"income":"expense",f=d.date.split(".");let p=new Date().toISOString();f.length===3&&(p=new Date(`${f[2]}-${f[1]}-${f[0]}`).toISOString());const{error:m}=await X.from("transactions").insert({date:p,type:h,category:d.category,amount:parseFloat(d.amount.toString().replace("","").replace(".","").replace(",",".")),description:d.desc,payer:d.payer,project_id:null,is_paid:!0});if(m)throw m;t.transactions.success++}catch(h){t.transactions.fail++,t.errors.push(`Transaction ${d.desc}: ${h.message}`)}return t}catch(n){throw console.error("Migration fatal error",n),n}};function tRe(){const[t,e]=y.useState("company"),[n,r]=y.useState(null),[s,i]=y.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light"),o=E=>{i(E),localStorage.setItem("theme",E),E==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),window.dispatchEvent(new Event("themeChange"))},[a,l]=y.useState(!1),[c,d]=y.useState(!1),[h,f]=y.useState(!1),[p,m]=y.useState(null),{isEngineer:g}=hn()||{},[x,b]=y.useState({name:"Bugless Digital",email:"info@buglessdigital.com",phone:"+90 212 123 45 67",address:"Maslak, Saryer, stanbul"}),v=E=>{const C=E.target.files[0];if(C){const T=new FileReader;T.onloadend=()=>{r(T.result)},T.readAsDataURL(C)}},w=()=>{l(!0),setTimeout(()=>{l(!1),d(!0),setTimeout(()=>d(!1),2e3)},1e3)},S=async()=>{if(window.confirm("YEREL veriler Supabase veritabanna aktarlacak. lem geri alnamaz. Devam edilsin mi?")){f(!0),m(null);try{const E=await eRe();m({success:!0,data:E})}catch(E){m({success:!1,error:E.message})}finally{f(!1)}}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white transition-colors",children:"Ayarlar"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Sistem ayarlarn yaplandr"})]}),u.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-slate-800 transition-colors",children:[u.jsx(re,{variant:"ghost",onClick:()=>e("company"),className:ie("rounded-none border-b-2 hover:bg-transparent px-4 py-2 text-sm font-medium transition-colors h-auto",t==="company"?"border-primary text-primary":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:"irket Bilgileri"}),u.jsx(re,{variant:"ghost",onClick:()=>e("appearance"),className:ie("rounded-none border-b-2 hover:bg-transparent px-4 py-2 text-sm font-medium transition-colors h-auto",t==="appearance"?"border-primary text-primary":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:"Grnm"}),u.jsx(re,{variant:"ghost",onClick:()=>e("system"),className:ie("rounded-none border-b-2 hover:bg-transparent px-4 py-2 text-sm font-medium transition-colors h-auto",t==="system"?"border-primary text-primary":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:"Sistem"})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm p-6 min-h-[500px] transition-colors duration-300",children:[t==="company"&&u.jsxs("div",{className:"max-w-2xl space-y-8 animate-in fade-in duration-300",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:"irket Bilgileri"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"irket bilgilerini gncelleyin"}),u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsx("div",{className:"w-24 h-24 rounded-2xl bg-primary flex items-center justify-center text-white text-2xl font-bold overflow-hidden shadow-lg shadow-primary/20",children:n?u.jsx("img",{src:n,alt:"Logo",className:"w-full h-full object-cover"}):"BD"}),u.jsxs("div",{children:[u.jsx("input",{type:"file",id:"logo-upload",className:"hidden",accept:"image/*",onChange:v}),u.jsx("label",{htmlFor:"logo-upload",className:"px-4 py-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 cursor-pointer transition-colors shadow-sm inline-block",children:"Logo Deitir"}),u.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"PNG, JPG veya SVG formatnda, maksimum 2MB"})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"irket Ad"}),u.jsx("input",{type:"text",className:"w-full px-3 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary text-gray-900 dark:text-white transition-all",value:x.name,onChange:E=>b({...x,name:E.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-posta"}),u.jsx("input",{type:"email",className:"w-full px-3 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary text-gray-900 dark:text-white transition-all",value:x.email,onChange:E=>b({...x,email:E.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefon"}),u.jsx("input",{type:"tel",className:"w-full px-3 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary text-gray-900 dark:text-white transition-all",value:x.phone,onChange:E=>b({...x,phone:E.target.value})})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Adres"}),u.jsx("textarea",{rows:3,className:"w-full px-3 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary text-gray-900 dark:text-white transition-all resize-none",value:x.address,onChange:E=>b({...x,address:E.target.value})})]})]}),u.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-slate-800 flex justify-end",children:u.jsx(re,{onClick:w,disabled:a,isLoading:a,className:ie("min-w-[140px] px-6 gap-2",c?"bg-green-600 hover:bg-green-700 shadow-green-200":"bg-primary hover:bg-primary/90 shadow-primary/20"),children:c?u.jsxs(u.Fragment,{children:[u.jsx(tr,{className:"w-4 h-4"}),"Kaydedildi"]}):u.jsxs(u.Fragment,{children:[!a&&u.jsx(_d,{className:"w-4 h-4"}),a?"Kaydediliyor...":"Kaydet"]})})})]}),t==="appearance"&&u.jsxs("div",{className:"max-w-4xl space-y-8 animate-in fade-in duration-300",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Tema Seimi"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Arayz temasn sein"}),u.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Tema"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{onClick:()=>o("light"),className:ie("relative border-2 rounded-xl p-4 cursor-pointer transition-all hover:bg-gray-50 dark:hover:bg-slate-800",s==="light"?"border-primary bg-blue-50/10 dark:bg-primary/10":"border-gray-200 dark:border-slate-700"),children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(CL,{className:ie("w-5 h-5",s==="light"?"text-primary":"text-gray-500")}),u.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Ak Tema"}),s==="light"&&u.jsx("span",{className:"ml-auto text-xs bg-black text-white px-2 py-0.5 rounded-full",children:"Aktif"})]}),u.jsxs("div",{className:"space-y-2 opacity-50 pointer-events-none select-none",children:[u.jsx("div",{className:"h-4 w-1/3 bg-gray-200 rounded"}),u.jsx("div",{className:"h-4 w-1/2 bg-gray-200 rounded"}),u.jsx("div",{className:"h-12 w-full bg-gray-100 rounded border border-gray-200 mt-4"})]})]}),u.jsxs("div",{onClick:()=>o("dark"),className:ie("relative border-2 rounded-xl p-4 cursor-pointer transition-all hover:bg-gray-50 dark:hover:bg-slate-800",s==="dark"?"border-primary bg-blue-50/10 dark:bg-primary/10":"border-gray-200 dark:border-slate-700"),children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(mL,{className:ie("w-5 h-5",s==="dark"?"text-primary":"text-gray-500")}),u.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Koyu Tema"}),s==="dark"&&u.jsx("span",{className:"ml-auto text-xs bg-white text-black px-2 py-0.5 rounded-full",children:"Aktif"})]}),u.jsxs("div",{className:"space-y-2 opacity-50 pointer-events-none select-none p-2 bg-gray-900 rounded-lg",children:[u.jsx("div",{className:"h-4 w-1/3 bg-gray-700 rounded"}),u.jsx("div",{className:"h-4 w-1/2 bg-gray-700 rounded"}),u.jsx("div",{className:"h-12 w-full bg-gray-800 rounded border border-gray-700 mt-4"})]})]})]})]}),u.jsxs("div",{className:"bg-blue-50 text-blue-700 p-4 rounded-xl text-sm border border-blue-100",children:[u.jsx("strong",{children:"Not:"})," Tema deiiklii tm sistem genelinde uygulanacaktr. u anda ",s==="light"?"Ak":"Koyu"," Tema aktif olarak kullanlmaktadr."]})]}),t==="system"&&u.jsx("div",{className:"max-w-4xl space-y-8 animate-in fade-in duration-300",children:u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Veri Ynetimi"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Sistem veritaban ilemleri"}),u.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-800 rounded-xl p-6",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400",children:u.jsx(rQ,{className:"w-6 h-6"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Bulut Veri Tama (Migration)"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 mb-4",children:"Yerel tarayc belleindeki (localStorage) mteri, proje ve finans verilerinizi Supabase bulut veritabanna aktarr. Bu ilem sadece bir kez yaplmaldr."}),u.jsxs(re,{onClick:S,disabled:h,isLoading:h,className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-indigo-200 dark:shadow-none",children:[u.jsx(vQ,{className:"w-4 h-4 mr-2"}),"Aktarm Balat"]}),p&&u.jsx("div",{className:ie("mt-4 p-4 rounded-lg text-sm border",p.success?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:p.success?u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold flex items-center gap-2",children:[u.jsx(tr,{className:"w-4 h-4"})," Baarl!"]}),u.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1 opacity-80",children:[u.jsxs("li",{children:["Mteriler: ",p.data.clients.success," (Hata: ",p.data.clients.fail,")"]}),u.jsxs("li",{children:["Projeler: ",p.data.projects.success," (Hata: ",p.data.projects.fail,")"]}),u.jsxs("li",{children:["Finans: ",p.data.transactions.success," (Hata: ",p.data.transactions.fail,")"]})]})]}):u.jsxs("p",{children:["Hata: ",p.error]})})]})]})})]})})]})]})}function nRe({projects:t=[],profiles:e=[],sessions:n=[],workOrders:r=[],dateRange:s,dateFilter:i}){const[o,a]=y.useState([]),[l,c]=y.useState(null),[d,h]=y.useState(null),[f,p]=y.useState(!1),[m,g]=y.useState("Tm"),[x,b]=y.useState("Tm"),[v,w]=y.useState([]),[S,E]=y.useState(null);y.useEffect(()=>{e.length>0&&w(e.map(I=>I.full_name));const U=I=>{const q=(I.status||"").trim().toLowerCase();if(q==="tamamland"||q==="completed"||q==="done"||q==="iptal"||q==="cancelled")return!1;if(q==="geciken"||q==="delayed")return!0;if(!I.date)return!1;const G=new Date(I.date),Z=new Date;return Z.setHours(0,0,0,0),G<Z},H=r.filter(U).map(I=>({...I,type:" Emri",assignees:I.assignedTo?[I.assignedTo]:[]}));a(H)},[e,r]);const C=U=>{if(!U)return"0s";const H=Math.floor(U/3600),I=Math.floor(U%3600/60);return`${H}s ${I}d`},T=lt.useMemo(()=>{const{startDate:U,endDate:H}=s||{};return!U||!H?n:n.filter(I=>{if(!I.date)return!1;const q=nt(I.date);return q>=U&&q<=H})},[n,s]),_=lt.useMemo(()=>{const U={},{startDate:H,endDate:I}=s||{};v.forEach(G=>{U[G]={name:G,totalSeconds:0,officeSeconds:0,remoteSeconds:0,sessions:[],completedTasks:0,activeTasks:0,projectsCount:0}}),T.forEach(G=>{const Z=G.user;U[Z]||(U[Z]={name:Z,totalSeconds:0,officeSeconds:0,remoteSeconds:0,sessions:[],completedTasks:0,activeTasks:0,projectsCount:0});const te=U[Z];te.totalSeconds+=G.duration,G.location==="office"?te.officeSeconds+=G.duration:te.remoteSeconds+=G.duration,te.sessions.push(G)});const q={};return e.forEach(G=>q[G.id]=G.full_name),t.forEach(G=>{if(H&&I){const te=G.start_date?nt(G.start_date):null,fe=G.end_date?nt(G.end_date):null;if(te&&(te>I||fe&&fe<H))return}(G.team_ids||[]).forEach(te=>{const fe=q[te];fe&&U[fe]&&(U[fe].projectsCount+=1)})}),r.forEach(G=>{if(H&&I&&G.date){const te=nt(G.date);if(te<H||te>I)return}const Z=G.assignedTo;if(Z&&Z!=="Bilinmiyor"){U[Z]||(U[Z]={name:Z,totalSeconds:0,officeSeconds:0,remoteSeconds:0,sessions:[],completedTasks:0,activeTasks:0,projectsCount:0});const te=(G.status||"").trim().toLowerCase();te==="tamamland"||te==="completed"||te==="done"?U[Z].completedTasks+=1:te!=="iptal"&&te!=="cancelled"&&(U[Z].activeTasks+=1)}}),U},[T,v,t,e,r,s]),O=Object.values(_).sort((U,H)=>H.totalSeconds-U.totalSeconds),N=d?_[d]:null,R=O.length>0?O[0]:null,M=[...O].sort((U,H)=>H.projectsCount-U.projectsCount)[0],W=o.filter(U=>!(m!=="Tm"&&(U.priority||"Normal")!==m||x!=="Tm"&&U.type!==x)),D=W.reduce((U,H)=>((H.assignees||[]).forEach(q=>{U[q]||(U[q]=[]),U[q].push(H)}),U),{}),B=["Kerem Koyuncu","Smeyye encan"],$=(U,H)=>{U.stopPropagation(),alert("Grevi silmek iin  Emirleri sayfasna gidiniz.")},V=U=>{E(U)},A=async()=>{if(S)try{const{error:U}=await X.from("work_sessions").delete().eq("id",S.id);if(U)throw U;window.location.reload()}catch(U){alert("Hata: "+U.message)}finally{E(null)}},j=(()=>{const{startDate:U,endDate:H}=s||{};if(!U||!H)return{name:null,count:0};const I=U,q=H,G={};t.forEach(fe=>{var ke;if(!fe.start_date)return;const K=nt(fe.start_date),pe=(ke=e.find(me=>me.id===fe.manager_id))==null?void 0:ke.full_name;K>=I&&K<=q&&pe&&(G[pe]=(G[pe]||0)+1)});let Z=null,te=0;return Object.entries(G).forEach(([fe,K])=>{K>te&&(te=K,Z=fe)}),{name:Z,count:te}})();return u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Personel Performans Analizi"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"alma sreleri, proje katklar ve verimlilik"})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-lg px-3 py-2 text-sm font-medium text-gray-700 dark:text-slate-200 flex items-center gap-2 transition-colors",children:[u.jsx(to,{className:"w-4 h-4 text-violet-500 dark:text-violet-400"}),u.jsx("span",{className:"text-violet-600 dark:text-violet-400 font-bold",children:i||"Tarih Seiniz"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:u.jsx(yQ,{className:"w-6 h-6 text-yellow-300"})}),u.jsx("span",{className:"font-medium text-white/90",children:i==="Bu Gn"?"Gnn alkan":i.includes("Hafta")?"Haftann alkan":"Dnemin alkan"})]}),u.jsx("h3",{className:"text-2xl font-bold mb-1 truncate",children:(R==null?void 0:R.name)||"-"}),u.jsxs("p",{className:"text-indigo-100 text-sm",children:["Toplam ",C((R==null?void 0:R.totalSeconds)||0)," alma"]})]}),u.jsx("div",{className:"absolute right-0 bottom-0 w-32 h-32 bg-white/10 rounded-full translate-y-1/2 translate-x-1/2 blur-2xl"})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-2xl p-6 shadow-sm relative overflow-hidden group hover:border-orange-200 dark:hover:border-orange-800 transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-gray-500 dark:text-slate-400 text-sm font-medium",children:"Sat ampiyonu"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1 truncate",children:j.name||"-"})]}),u.jsx("div",{className:"p-2 bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-lg group-hover:scale-110 transition-transform",children:u.jsx(KJ,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-slate-400",children:[u.jsx(Ad,{className:"w-4 h-4 text-orange-500"}),u.jsxs("span",{children:["Bu dnem ",j.count," yeni proje"]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-2xl p-6 shadow-sm relative overflow-hidden group hover:border-emerald-200 dark:hover:border-emerald-800 transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-gray-500 dark:text-slate-400 text-sm font-medium",children:"En ok Proje"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1 truncate",children:(M==null?void 0:M.name)||"-"})]}),u.jsx("div",{className:"p-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg group-hover:scale-110 transition-transform",children:u.jsx(pr,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-slate-400",children:[u.jsx(tr,{className:"w-4 h-4 text-emerald-500"}),u.jsxs("span",{children:[(M==null?void 0:M.projectsCount)||0," projeye dahil"]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-2xl p-6 shadow-sm relative overflow-hidden group hover:border-blue-200 dark:hover:border-blue-800 transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-gray-500 dark:text-slate-400 text-sm font-medium",children:"Toplam Efor"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:C(O.reduce((U,H)=>U+H.totalSeconds,0))})]}),u.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg group-hover:scale-110 transition-transform",children:u.jsx(pi,{className:"w-6 h-6"})})]}),u.jsx("div",{className:"w-full bg-gray-100 dark:bg-slate-800 rounded-full h-1.5 mt-2 overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 w-3/4 rounded-full"})}),u.jsx("p",{className:"text-xs text-gray-400 dark:text-slate-500 mt-2",children:"Bu dnem hedeflenen srenin %75'i"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm transition-colors",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"alma Dalm"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Personel bazl ofis ve uzaktan alma saatleri"})]}),u.jsxs("div",{className:"relative h-64 pl-8 pb-8 mt-4",children:[u.jsx("div",{className:"absolute inset-0 flex flex-col justify-between pl-8 pb-8 text-xs text-gray-400 dark:text-slate-500 z-0",children:[100,75,50,25,0].map(U=>u.jsx("div",{className:"w-full relative border-b border-dashed border-gray-100 dark:border-slate-800 last:border-gray-200 dark:last:border-slate-700 h-0",children:u.jsxs("span",{className:"absolute -left-8 -top-2 w-6 text-right",children:[U,"%"]})},U))}),u.jsx("div",{className:"absolute inset-0 pl-16 pb-8 flex items-end justify-around gap-2 z-10",children:O.map((U,H)=>{const I=Math.max(...O.map(te=>te.totalSeconds))||1,q=U.totalSeconds/I*100,G=U.totalSeconds>0?U.officeSeconds/U.totalSeconds:0,Z=U.totalSeconds>0?U.remoteSeconds/U.totalSeconds:0;return u.jsxs("div",{className:"h-full flex flex-col justify-end items-center gap-0.5 group relative w-12 sm:w-16",onMouseEnter:()=>c(U),onMouseLeave:()=>c(null),children:[(l==null?void 0:l.name)===U.name&&u.jsxs("div",{className:"absolute bottom-full mb-2 bg-gray-900/90 dark:bg-black/90 text-white p-3 rounded-lg shadow-xl backdrop-blur-sm z-50 text-xs w-32 text-center animate-in zoom-in-95",children:[u.jsx("div",{className:"font-bold mb-1",children:U.name}),u.jsxs("div",{className:"flex justify-between text-indigo-300",children:[u.jsx("span",{children:"Ofis:"}),u.jsx("span",{children:C(U.officeSeconds)})]}),u.jsxs("div",{className:"flex justify-between text-emerald-300",children:[u.jsx("span",{children:"Uzaktan:"}),u.jsx("span",{children:C(U.remoteSeconds)})]})]}),u.jsxs("div",{className:"w-full bg-gray-100/50 dark:bg-slate-800 rounded-t-sm flex flex-col-reverse overflow-hidden transition-all duration-500 hover:opacity-90 relative",style:{height:`${q}%`},children:[u.jsx("div",{style:{height:`${G*100}%`},className:"w-full bg-indigo-500 transition-all duration-700 ease-out"}),u.jsx("div",{style:{height:`${Z*100}%`},className:"w-full bg-emerald-400 transition-all duration-700 ease-out"})]}),u.jsx("div",{className:"absolute -bottom-10 flex flex-col items-center",children:u.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-100 dark:bg-slate-800 flex items-center justify-center text-[10px] font-bold text-gray-500 dark:text-slate-400 border border-white dark:border-slate-800 shadow-sm",children:U.name.substring(0,2).toUpperCase()})})]},H)})})]}),u.jsxs("div",{className:"h-4 flex items-center justify-center gap-6 mt-8 text-xs text-gray-500 dark:text-slate-400 font-medium",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 rounded-sm bg-emerald-400"})," Uzaktan"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 rounded-sm bg-indigo-500"})," Ofis"]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-2xl shadow-sm overflow-hidden transition-colors",children:[u.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center",children:[u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Personel Detaylar"}),u.jsx(re,{variant:"outline",size:"sm",className:"text-xs dark:bg-slate-800 dark:border-slate-700 dark:text-slate-300",children:"Rapor ndir"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-gray-50/50 dark:bg-slate-800/50 border-b border-gray-100 dark:border-slate-800 text-xs font-medium text-gray-500 dark:text-slate-400 text-left",children:[u.jsx("th",{className:"py-3 px-6",children:"Personel"}),u.jsx("th",{className:"py-3 px-6",children:"Toplam Sre"}),u.jsx("th",{className:"py-3 px-6",children:"Ofis / Uzaktan"}),u.jsx("th",{className:"py-3 px-6",children:"Aktif Projeler"}),u.jsx("th",{className:"py-3 px-6",children:"Performans"}),u.jsx("th",{className:"py-3 px-6"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:O.map((U,H)=>{var G;const I=((G=O[0])==null?void 0:G.totalSeconds)||1,q=Math.min(U.totalSeconds/I*100,100);return u.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-slate-800/50 group transition-colors",children:[u.jsx("td",{className:"py-4 px-6",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-slate-800 flex items-center justify-center text-xs font-bold text-gray-600 dark:text-slate-300",children:U.name.substring(0,2).toUpperCase()}),u.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:U.name})]})}),u.jsx("td",{className:"py-4 px-6",children:u.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-sm",children:C(U.totalSeconds)})}),u.jsx("td",{className:"py-4 px-6",children:u.jsxs("div",{className:"flex gap-2 text-xs",children:[u.jsx("span",{className:"px-2 py-0.5 rounded bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-800",children:C(U.officeSeconds)}),u.jsx("span",{className:"px-2 py-0.5 rounded bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 border border-green-100 dark:border-green-800",children:C(U.remoteSeconds)})]})}),u.jsx("td",{className:"py-4 px-6",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(pr,{className:"w-3 h-3 text-gray-400"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-slate-400",children:[U.projectsCount," Proje"]})]})}),u.jsx("td",{className:"py-4 px-6 w-32",children:u.jsx("div",{className:"w-full bg-gray-100 dark:bg-slate-800 rounded-full h-1.5 overflow-hidden",children:u.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all",style:{width:`${q}%`}})})}),u.jsx("td",{className:"py-4 px-6 text-right",children:u.jsx(re,{variant:"ghost",size:"sm",className:"h-8 text-xs text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400",onClick:()=>{h(U.name),p(!0)},children:"Detay"})})]},H)})})]})})]}),u.jsx("div",{className:"space-y-4 pt-4 border-t border-gray-100 dark:border-slate-800",children:u.jsxs("div",{className:"bg-red-50/50 dark:bg-red-900/10 border border-red-100 dark:border-red-900/30 rounded-xl p-6 transition-colors",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(nm,{className:"w-6 h-6 text-red-600 dark:text-red-500"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-red-900 dark:text-red-400",children:"Geciken Grevler"}),u.jsx("p",{className:"text-sm text-red-600/80 dark:text-red-400/80",children:" emirleri ve harici grevlerden geciken tm grevler"})]})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("select",{className:"text-xs bg-white dark:bg-slate-900 border border-red-200 dark:border-red-900/50 rounded-lg px-2 py-1.5 text-gray-700 dark:text-slate-300 outline-none focus:border-red-400",value:x,onChange:U=>b(U.target.value),children:[u.jsx("option",{value:"Tm",children:"Tm Tipler"}),u.jsx("option",{value:" Emri",children:" Emri"}),u.jsx("option",{value:"Harici Grev",children:"Harici Grev"})]}),u.jsxs("select",{className:"text-xs bg-white dark:bg-slate-900 border border-red-200 dark:border-red-900/50 rounded-lg px-2 py-1.5 text-gray-700 dark:text-slate-300 outline-none focus:border-red-400",value:m,onChange:U=>g(U.target.value),children:[u.jsx("option",{value:"Tm",children:"Tm ncelikler"}),u.jsx("option",{value:"Dk",children:"Dk"}),u.jsx("option",{value:"Normal",children:"Normal"}),u.jsx("option",{value:"Yksek",children:"Yksek"}),u.jsx("option",{value:"Acil",children:"Acil"})]}),u.jsx("div",{className:"bg-white dark:bg-red-950/30 px-3 py-1.5 rounded-lg text-xs font-bold text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900/50 shadow-sm",children:W.length})]})]}),u.jsxs("div",{className:"space-y-4",children:[Object.entries(D).map(([U,H])=>u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-red-100 dark:border-red-900/30 overflow-hidden shadow-sm transition-colors",children:[u.jsxs("div",{className:"px-3 py-2 bg-red-50/30 dark:bg-red-900/20 border-b border-red-100 dark:border-red-900/30 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ro,{className:"w-3.5 h-3.5 text-red-500"}),u.jsx("span",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:U})]}),u.jsx("span",{className:"text-[10px] font-bold bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 px-1.5 py-0.5 rounded",children:H.length})]}),u.jsx("div",{className:"p-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:H.map((I,q)=>u.jsxs("div",{className:"p-2.5 rounded-lg border border-gray-100 dark:border-slate-800 hover:border-red-200 dark:hover:border-red-800 hover:shadow-sm transition-all bg-gray-50/30 dark:bg-slate-800/20 group relative flex flex-col justify-between h-full",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start gap-2 mb-1",children:[u.jsx("h4",{className:"font-semibold text-gray-800 dark:text-slate-200 text-xs line-clamp-1",title:I.title,children:I.title}),B.includes("Kerem Koyuncu")&&u.jsx("button",{onClick:G=>$(G),className:"opacity-0 group-hover:opacity-100 p-0.5 text-gray-400 hover:text-red-600 transition-opacity",title:"Kaldr",children:u.jsx(Jt,{className:"w-3 h-3"})})]}),u.jsx("p",{className:"text-[11px] text-gray-500 dark:text-slate-400 line-clamp-2 mb-2 leading-tight",children:I.description})]}),u.jsxs("div",{className:"flex items-center justify-between text-[10px] pt-2 border-t border-gray-100 dark:border-slate-800 mt-1",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("span",{className:"px-1.5 py-0.5 rounded bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 text-gray-600 dark:text-slate-300",children:I.type}),u.jsx("span",{className:ie("px-1.5 py-0.5 rounded bg-white dark:bg-slate-800 border",I.priority==="Yksek"||I.priority==="Acil"?"border-red-200 dark:border-red-900 text-red-600 dark:text-red-400":"border-gray-200 dark:border-slate-700 text-gray-600 dark:text-slate-300"),children:I.priority||"Normal"})]}),u.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400 flex items-center gap-0.5",children:[u.jsx(to,{className:"w-2.5 h-2.5"}),I.date]})]})]},q))})]},U)),Object.keys(D).length===0&&u.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-slate-400 text-sm",children:W.length===0&&o.length>0?"Filtre kriterlerine uygun geciken grev bulunamad.":"Geciken grev bulunmamaktadr. Harika!"})]})]})}),f&&N&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>p(!1),children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden animate-in fade-in zoom-in-95 transition-colors",onClick:U=>U.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-slate-800",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-lg",children:N.name.substring(0,2).toUpperCase()}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:N.name}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"alma Gemii"})]})]}),u.jsx(re,{variant:"ghost",size:"icon",onClick:()=>p(!1),className:"dark:text-slate-400 dark:hover:bg-slate-800",children:u.jsx(Jt,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[u.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4 px-1",children:"Son Oturumlar"}),N.sessions.length>0?u.jsx("div",{className:"space-y-3",children:N.sessions.slice().reverse().map((U,H)=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-slate-800 border border-gray-100 dark:border-slate-700 hover:border-gray-200 dark:hover:border-slate-600 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:ie("w-8 h-8 rounded-full flex items-center justify-center",U.location==="office"?"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400"),children:U.location==="office"?u.jsx(aT,{className:"w-4 h-4"}):u.jsx(pQ,{className:"w-4 h-4"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Ve(nt(U.date),"dd MMMM yyyy")}),u.jsxs("div",{className:"text-xs text-gray-500 dark:text-slate-400",children:[U.startTime," - ",U.endTime]}),U.description&&u.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 mt-1.5 italic bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded px-2 py-1 max-w-[280px]",children:U.description})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-sm",children:C(U.duration)}),u.jsx(re,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400 h-8 w-8 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:I=>{I.stopPropagation(),V(U)},title:"Oturumu Sil",children:u.jsx(hr,{className:"w-4 h-4"})})]})]},H))}):u.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-slate-500",children:"Kaytl oturum bulunamad."})]})]})}),S&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in",onClick:()=>E(null),children:u.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 transition-colors",onClick:U=>U.stopPropagation(),children:u.jsxs("div",{className:"p-6 text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(hr,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Oturumu Sil?"}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-slate-400 mb-6",children:["Bu ilem geri alnamaz.",u.jsx("strong",{children:S.date?Ve(nt(S.date),"dd.MM.yyyy"):""})," tarihindeki kayd silmek istiyor musunuz?"]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx(re,{variant:"outline",className:"flex-1 text-gray-700 dark:text-slate-300 bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700",onClick:()=>E(null),children:"Vazge"}),u.jsx(re,{className:"flex-1 bg-red-600 hover:bg-red-700 text-white border-red-600 shadow-lg shadow-red-500/20",onClick:A,children:"Evet, Sil"})]})]})})})]})}function rRe({dateRange:t,projects:e=[],clients:n=[]}){const[r,s]=y.useState([]),[i,o]=y.useState({totalRevenue:0,activeProjects:0,totalClients:0,activeClients:0,topProject:null}),[a,l]=y.useState("");y.useEffect(()=>{try{const d=Array.isArray(e)?e.filter(v=>v&&typeof v=="object"):[],h=Array.isArray(n)?n.filter(v=>v&&typeof v=="object"):[],f=d.filter(v=>{if(!t)return!0;const{startDate:w,endDate:S}=t;if(!w||!S)return!0;let E=new Date;try{v.start_date?E=nt(v.start_date):v.created_at&&(E=nt(v.created_at))}catch{return!1}return isNaN(E.getTime())?!1:E>=w&&E<=S}),p=h.map(v=>{const w=f.filter(E=>E.client_id&&E.client_id===v.id||E.customer&&v.name&&E.customer.trim()===v.name.trim()),S=w.reduce((E,C)=>{const T=typeof C.price=="number"?C.price:parseFloat(C.price)||0;return E+T},0);return{...v,projectCount:w.length,totalRevenue:S,projects:w}});s(p);const m=p.reduce((v,w)=>v+(w.totalRevenue||0),0),g=f.filter(v=>v.status==="Devam Ediyor").length,x=p.filter(v=>v.status==="Aktif").length,b=f.length>0?[...f].sort((v,w)=>{const S=typeof v.price=="number"?v.price:parseFloat(v.price)||0;return(typeof w.price=="number"?w.price:parseFloat(w.price)||0)-S})[0]:null;o({totalRevenue:m,activeProjects:g,totalClients:p.length,activeClients:x,topProject:b})}catch(d){console.error("ClientAnalysis Error:",d)}},[t,e,n]);const c=r.filter(d=>(d.name||"").toLowerCase().includes(a.toLowerCase())).sort((d,h)=>h.totalRevenue-d.totalRevenue);return u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm flex items-center justify-between transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-slate-400 mb-1",children:"Toplam Mteri"}),u.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i.totalClients}),u.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1 mt-1",children:[u.jsx(so,{className:"w-3 h-3"}),i.activeClients," Aktif"]})]}),u.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400",children:u.jsx(QJ,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm flex items-center justify-between transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-slate-400 mb-1",children:"Toplam Ciro (Proje)"}),u.jsxs("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["",i.totalRevenue.toLocaleString("tr-TR",{maximumFractionDigits:0})]}),u.jsx("p",{className:"text-xs text-gray-400 dark:text-slate-500 mt-1",children:"Tm zamanlar"})]}),u.jsx("div",{className:"w-12 h-12 bg-green-50 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400",children:u.jsx(io,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm flex items-center justify-between transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-slate-400 mb-1",children:"Aktif Projeler"}),u.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i.activeProjects}),u.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"Devam eden iler"})]}),u.jsx("div",{className:"w-12 h-12 bg-orange-50 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400",children:u.jsx(pr,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm flex items-center justify-between transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-slate-400 mb-1",children:"Ortalama Proje Deeri"}),u.jsxs("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["",r.length>0&&i.totalRevenue>0?(i.totalRevenue/r.length).toLocaleString("tr-TR",{maximumFractionDigits:0}):0]}),u.jsx("p",{className:"text-xs text-gray-400 dark:text-slate-500 mt-1",children:"Mteri bana"})]}),u.jsx("div",{className:"w-12 h-12 bg-purple-50 dark:bg-purple-900/30 rounded-full flex items-center justify-center text-purple-600 dark:text-purple-400",children:u.jsx(Ad,{className:"w-6 h-6"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 p-8 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm transition-colors",children:[u.jsxs("div",{className:"flex items-center justify-between mb-8",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"En ok Ciro Yapan Mteriler"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Mteri bazl proje gelir dalm (Top 5)"})]}),u.jsx(bL,{className:"w-5 h-5 text-gray-400 dark:text-slate-500"})]}),u.jsxs("div",{className:"space-y-6",children:[c.slice(0,5).map((d,h)=>{const f=d.totalRevenue/i.totalRevenue*100||0;return u.jsxs("div",{className:"group",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:ie("w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold",h===0?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":h===1?"bg-gray-100 dark:bg-slate-800 text-gray-700 dark:text-slate-300":h===2?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400":"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"),children:h+1}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:d.name}),u.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-500",children:[d.projectCount," proje"]})]})]}),u.jsxs("span",{className:"font-mono font-bold text-gray-700 dark:text-slate-200",children:["",d.totalRevenue.toLocaleString("tr-TR")]})]}),u.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-slate-800 rounded-full overflow-hidden",children:u.jsx("div",{className:ie("h-full rounded-full transition-all duration-1000",h===0?"bg-yellow-500":h===1?"bg-gray-500":h===2?"bg-orange-500":"bg-blue-500"),style:{width:`${f}%`}})})]},d.id)}),c.length===0&&u.jsx("div",{className:"text-center py-10 text-gray-400",children:"Veri bulunamad"})]})]}),u.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-indigo-800 p-8 rounded-2xl text-white shadow-xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 p-32 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16"}),u.jsx("div",{className:"absolute bottom-0 left-0 p-32 bg-indigo-500/20 rounded-full blur-3xl -ml-16 -mb-16"}),u.jsx("h3",{className:"text-lg font-bold mb-6 relative z-10",children:"Mteri Durumu"}),u.jsxs("div",{className:"space-y-6 relative z-10",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-400 shadow-[0_0_10px_rgba(52,211,153,0.5)]"}),u.jsx("span",{className:"font-medium",children:"Aktif Mteriler"})]}),u.jsx("span",{className:"text-2xl font-bold",children:i.activeClients})]}),u.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/5",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400"}),u.jsx("span",{className:"font-medium text-indigo-100",children:"Pasif / Skntl"})]}),u.jsx("span",{className:"text-xl font-semibold text-indigo-100",children:r.filter(d=>d.status!=="Aktif").length})]}),u.jsxs("div",{className:"pt-6 border-t border-white/10",children:[u.jsx("p",{className:"text-sm text-indigo-200 mb-2",children:"En Byk Proje"}),i.topProject?u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg truncate",children:i.topProject.name}),u.jsxs("div",{className:"flex justify-between items-center mt-1",children:[u.jsx("span",{className:"text-xs text-indigo-300",children:i.topProject.customer}),u.jsxs("span",{className:"text-sm font-semibold bg-white/20 px-2 py-0.5 rounded text-white",children:["",(typeof i.topProject.price=="number"?i.topProject.price:parseFloat(i.topProject.price)||0).toLocaleString()]})]})]}):u.jsx("span",{className:"text-indigo-300",children:"Henz proje yok"})]})]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Mteri Listesi"}),u.jsxs("div",{className:"relative w-64",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-slate-500"}),u.jsx("input",{type:"text",placeholder:"Mteri ara...",className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:border-blue-500 transition-colors",value:a,onChange:d=>l(d.target.value)})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:c.map(d=>u.jsxs("div",{className:"bg-white dark:bg-slate-900 group hover:shadow-md transition-all duration-300 p-5 rounded-xl border border-gray-100 dark:border-slate-800 flex flex-col justify-between h-full",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-slate-800 dark:to-slate-700 flex items-center justify-center text-gray-600 dark:text-slate-300 font-bold text-lg shadow-inner",children:(d.name||"?").substring(0,2).toUpperCase()}),u.jsx("span",{className:ie("px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider",d.status==="Aktif"?"bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400":d.status==="Skntl"?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-gray-50 dark:bg-slate-800 text-gray-500 dark:text-slate-400"),children:d.status})]}),u.jsx("h4",{className:"font-bold text-gray-900 dark:text-white line-clamp-1 mb-1",title:d.name,children:d.name}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-4",children:d.type}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-gray-500 dark:text-slate-400 text-xs",children:"Toplam Ciro"}),u.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["",d.totalRevenue.toLocaleString("tr-TR")]})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-gray-500 dark:text-slate-400 text-xs",children:"Proje Says"}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-slate-300 bg-gray-50 dark:bg-slate-800 px-2 py-0.5 rounded",children:d.projectCount})]})]})]}),u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-50 dark:border-slate-800",children:d.projects.length>0?u.jsxs("div",{className:"flex -space-x-2 overflow-hidden py-1",children:[d.projects.slice(0,4).map((h,f)=>u.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900 border-2 border-white dark:border-slate-900 flex items-center justify-center text-[8px] text-blue-600 dark:text-blue-200 font-bold",title:h.name,children:(h.name||"?")[0]},f)),d.projects.length>4&&u.jsxs("div",{className:"w-6 h-6 rounded-full bg-gray-100 dark:bg-slate-800 border-2 border-white dark:border-slate-900 flex items-center justify-center text-[8px] text-gray-600 dark:text-slate-400 font-bold",children:["+",d.projects.length-4]})]}):u.jsx("div",{className:"text-xs text-gray-400 italic py-1",children:"Henz proje yok"})})]},d.id))})]})]})}function sRe({dateRange:t,projects:e=[],workOrders:n=[]}){const[r,s]=y.useState([]),[i,o]=y.useState({totalProjects:0,activeProjects:0,completedProjects:0,totalValue:0,avgValue:0,highPriority:0});y.useEffect(()=>{const c=e.filter(g=>{if(!t)return!0;const{startDate:x,endDate:b}=t;if(!x||!b)return!0;let v=new Date;return g.start_date?v=nt(g.start_date):g.created_at&&(v=nt(g.created_at)),v>=x&&v<=b});s(c);const d=c.length,h=c.filter(g=>g.status==="Devam Ediyor"||g.status==="Hazrlk"||g.status==="Planlama").length,f=c.filter(g=>g.status==="Tamamland").length,p=c.filter(g=>(g.priority||"Orta")==="Yksek").length,m=c.reduce((g,x)=>{let b=0;return typeof x.price=="number"?b=x.price:typeof x.price=="string"&&(b=parseFloat(x.price.replace(/[^0-9,.]/g,"").replace(",","."))||0),g+b},0);o({totalProjects:d,activeProjects:h,completedProjects:f,totalValue:m,avgValue:d>0?m/d:0,highPriority:p})},[t,e]);const a=c=>{const d=n.filter(h=>String(h.project_id)===String(c.id));if(d.length>0){const h=d.filter(f=>{const p=(f.status||"").trim().toLowerCase();return p==="tamamland"||p==="completed"||p==="done"}).length;return Math.round(h/d.length*100)}return c.status==="Tamamland"?100:c.status==="Hazrlk"||c.status==="Planlama"?0:c.status==="Devam Ediyor"?25:0},l=c=>c.priority||"Orta";return u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden group",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:u.jsx(hL,{className:"w-24 h-24"})}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("p",{className:"text-indigo-100 font-medium mb-1",children:"Toplam Proje Deeri"}),u.jsxs("h3",{className:"text-3xl font-bold",children:["",i.totalValue.toLocaleString("tr-TR",{maximumFractionDigits:0})]}),u.jsxs("div",{className:"mt-4 flex items-center gap-2 text-indigo-200 text-sm",children:[u.jsx(Ad,{className:"w-4 h-4"}),u.jsxs("span",{children:["Ort. ",i.avgValue.toLocaleString("tr-TR",{maximumFractionDigits:0})," / proje"]})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl p-6 shadow-sm flex flex-col justify-between group hover:border-blue-200 dark:hover:border-blue-800 transition-all",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-500 dark:text-slate-400 font-medium text-sm",children:"Devam Eden"}),u.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:i.activeProjects})]}),u.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform",children:u.jsx(pi,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"mt-4 w-full bg-gray-100 dark:bg-slate-800 rounded-full h-1.5 overflow-hidden",children:u.jsx("div",{className:"bg-blue-500 h-full rounded-full",style:{width:`${i.totalProjects>0?i.activeProjects/i.totalProjects*100:0}%`}})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl p-6 shadow-sm flex flex-col justify-between group hover:border-emerald-200 dark:hover:border-emerald-800 transition-all",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-500 dark:text-slate-400 font-medium text-sm",children:"Tamamlanan"}),u.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:i.completedProjects})]}),u.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-50 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:u.jsx(tr,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"mt-4 w-full bg-gray-100 dark:bg-slate-800 rounded-full h-1.5 overflow-hidden",children:u.jsx("div",{className:"bg-emerald-500 h-full rounded-full",style:{width:`${i.totalProjects>0?i.completedProjects/i.totalProjects*100:0}%`}})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl p-6 shadow-sm flex flex-col justify-between group hover:border-red-200 dark:hover:border-red-800 transition-all",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-500 dark:text-slate-400 font-medium text-sm",children:"Yksek ncelikli"}),u.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:i.highPriority})]}),u.jsx("div",{className:"w-10 h-10 rounded-full bg-red-50 dark:bg-red-900/30 flex items-center justify-center text-red-600 dark:text-red-400 group-hover:scale-110 transition-transform",children:u.jsx(nm,{className:"w-5 h-5"})})]}),u.jsx("p",{className:"mt-4 text-xs text-red-600 dark:text-red-400 font-medium bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded w-fit",children:"Dikkat Gerektirenler"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm transition-colors",children:[u.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[u.jsx(bL,{className:"w-5 h-5 text-gray-400 dark:text-slate-500"}),"Proje Durum Dalm"]}),u.jsx("div",{className:"space-y-4",children:[{label:"Devam Ediyor",count:i.activeProjects,color:"bg-blue-500",total:i.totalProjects},{label:"Tamamland",count:i.completedProjects,color:"bg-emerald-500",total:i.totalProjects},{label:"Dier",count:i.totalProjects-(i.activeProjects+i.completedProjects),color:"bg-gray-300 dark:bg-slate-700",total:i.totalProjects}].map((c,d)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{className:"text-gray-600 dark:text-slate-300 font-medium",children:c.label}),u.jsx("span",{className:"text-gray-900 dark:text-white font-bold",children:c.count})]}),u.jsx("div",{className:"w-full bg-gray-100 dark:bg-slate-800 rounded-full h-2.5 overflow-hidden",children:u.jsx("div",{className:ie("h-full rounded-full transition-all duration-1000",c.color),style:{width:`${c.total>0?c.count/c.total*100:0}%`}})})]},d))}),u.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-slate-800",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-slate-400",children:"Tamamlanma Oran"}),u.jsxs("span",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:["%",i.totalProjects>0?Math.round(i.completedProjects/i.totalProjects*100):0]})]})})]}),u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm transition-colors",children:[u.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[u.jsx(aQ,{className:"w-5 h-5 text-gray-400 dark:text-slate-500"}),"Proje lerlemeleri"]}),u.jsxs("div",{className:"space-y-4",children:[r.slice(0,5).map((c,d)=>{const h=a(c),f=l(c);return u.jsxs("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-slate-800 hover:border-gray-200 dark:hover:border-slate-700 hover:shadow-md transition-all bg-gray-50/30 dark:bg-slate-800/20",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-3",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:c.name}),u.jsx("span",{className:ie("text-[10px] px-2 py-0.5 rounded font-bold uppercase",f==="Yksek"?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":f==="Orta"?"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400":"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400"),children:f})]}),u.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(pr,{className:"w-3 h-3"})," ",c.customer]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("span",{className:"block font-bold text-gray-900 dark:text-white",children:["",typeof c.price=="number"?c.price.toLocaleString():c.price||"-"]}),u.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-500",children:c.start_date||(c.dates||"").split("-")[0]||"?"})]})]}),u.jsxs("div",{className:"relative pt-1",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1 text-xs font-semibold text-gray-600 dark:text-slate-400",children:[u.jsx("span",{children:"lerleme"}),u.jsxs("span",{className:h===100?"text-emerald-600 dark:text-emerald-400":"text-blue-600 dark:text-blue-400",children:["%",h]})]}),u.jsx("div",{className:"overflow-hidden h-2 text-xs flex rounded-full bg-gray-200 dark:bg-slate-700",children:u.jsx("div",{style:{width:`${h}%`},className:ie("shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center transition-all duration-1000",h===100?"bg-emerald-500":"bg-blue-500")})})]})]},c.id)}),r.length===0&&u.jsx("div",{className:"text-center text-gray-400 py-4",children:"Proje bulunamad"})]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-start",children:u.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 text-white shadow-lg md:col-span-3",children:u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Proje Portfy zeti"}),u.jsxs("p",{className:"text-gray-400 text-sm max-w-xl",children:["Toplam ",r.length," proje ierisinden %",i.totalProjects>0?Math.round(i.activeProjects/i.totalProjects*100):0,"'i aktif olarak devam etmektedir. Yksek ncelikli projelerin toplam portfyn %",i.totalProjects>0?Math.round(i.highPriority/i.totalProjects*100):0,"'ini oluturmaktadr."]})]}),u.jsx("div",{className:"flex gap-4",children:u.jsxs("div",{className:"text-center bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[u.jsxs("span",{className:"block text-2xl font-bold text-emerald-400",children:["",(i.totalValue/(i.totalProjects||1)).toLocaleString("tr-TR",{maximumFractionDigits:0})]}),u.jsx("span",{className:"text-xs text-gray-400",children:"Ort. Bte"})]})})]})})})]})}const zl=t=>{if(typeof t=="number")return t;if(!t)return 0;if(typeof t=="string"){const e=t.replace(/[^0-9.,-]/g,"").replace(",",".");return parseFloat(e)||0}return 0},$k=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t!="string")return new Date;try{if(t.includes("-"))return nt(t);const e=t.split(".");if(e.length===3)return new Date(e[2],e[1]-1,e[0])}catch(e){console.warn("Date parse error",e)}return new Date};function iRe({transactions:t=[],dateFilter:e="Son 1 Ay"}){const n=Array.isArray(t)?t:[],r=y.useMemo(()=>n,[n]),{startDate:s,endDate:i}=y.useMemo(()=>{const E=new Date;let C=new Date;try{switch(e){case"Son 1 Hafta":C=k8(E,7);break;case"Son 1 Ay":C=es(E,1);break;case"Son 3 Ay":C=es(E,3);break;case"Son 6 Ay":C=es(E,6);break;case"Son 1 Yl":C=es(E,12);break;default:C=es(E,1)}}catch{C=es(E,1)}return{startDate:C,endDate:E}},[e]),o=y.useMemo(()=>r.filter(E=>{if(!E)return!1;try{const C=$k(E.date);return isNaN(C.getTime())?!1:C>=s&&C<=i}catch{return!1}}),[r,s,i]),a=o.filter(E=>E.type==="income"),l=o.filter(E=>E.type==="expense"),c=a.reduce((E,C)=>E+zl(C.amount),0),d=l.reduce((E,C)=>E+zl(C.amount),0),h=c-d,f=c>0?h/c*100:0,p=y.useMemo(()=>{try{const E=i.getTime()-s.getTime(),C=new Date(s.getTime()),T=new Date(C.getTime()-E),_=r.filter(R=>{if(!R)return!1;const M=$k(R.date);return isNaN(M.getTime())?!1:M>=T&&M<C}),O=_.filter(R=>R.type==="income").reduce((R,M)=>R+zl(M.amount),0),N=_.filter(R=>R.type==="expense").reduce((R,M)=>R+zl(M.amount),0);return{income:O,expense:N}}catch{return{income:0,expense:0}}},[r,s,i]),m=(E,C)=>C===0?E>0?100:0:(E-C)/C*100,g=m(c,p.income),x=m(d,p.expense),b=E=>{const C=E.reduce((_,O)=>{const N=O.category||"Dier";return _[N]=(_[N]||0)+zl(O.amount),_},{}),T=Object.values(C).reduce((_,O)=>_+O,0);return Object.entries(C).sort(([,_],[,O])=>O-_).map(([_,O])=>({name:_,value:O,percent:T>0?O/T*100:0}))},v=b(a),w=b(l),S=y.useMemo(()=>{try{const E=i.getTime()-s.getTime(),C=Math.ceil(E/(1e3*60*60*24)),T=C<=32;if(C>400)return[];let _=[],O=new Date(s);const N=new Date(i);if(T)for(;O<=N;)_.push(new Date(O)),O.setDate(O.getDate()+1);else for(O.setDate(1);O<=N;)_.push(new Date(O)),O.setMonth(O.getMonth()+1);return _.map(R=>{const M=R.getDate(),W=R.toLocaleString("default",{month:"short"});let D=T?`${M} ${W}`:W;const B=r.filter(A=>{const z=$k(A.date);return isNaN(z.getTime())?!1:T?mT(z,R):w8(z,R)&&z.getFullYear()===R.getFullYear()}),$=B.filter(A=>A.type==="income").reduce((A,z)=>A+zl(z.amount),0),V=B.filter(A=>A.type==="expense").reduce((A,z)=>A+zl(z.amount),0);return{label:D,income:$,expense:V}})}catch(E){return console.error("Trend Calc Error",E),[]}},[s,i,r]);return u.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm relative overflow-hidden group transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm font-medium",children:"Toplam Gelir"}),u.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["",c.toLocaleString()]})]}),u.jsx("div",{className:"p-2 bg-emerald-50 dark:bg-emerald-900/30 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:u.jsx(lL,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm relative z-10",children:[u.jsxs("span",{className:ie("font-medium",g>=0?"text-emerald-600 dark:text-emerald-400":"text-red-500 dark:text-red-400"),children:[g>0?"+":"",g.toFixed(0),"%"]}),u.jsx("span",{className:"text-gray-400 dark:text-slate-500",children:"geen dneme gre"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm relative overflow-hidden group transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm font-medium",children:"Toplam Gider"}),u.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["",d.toLocaleString()]})]}),u.jsx("div",{className:"p-2 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 group-hover:scale-110 transition-transform",children:u.jsx(GJ,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm relative z-10",children:[u.jsxs("span",{className:ie("font-medium",x>0?"text-red-500 dark:text-red-400":"text-emerald-600 dark:text-emerald-400"),children:[x>0?"+":"",x.toFixed(0),"%"]}),u.jsx("span",{className:"text-gray-400 dark:text-slate-500",children:"geen dneme gre"})]})]}),u.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-2xl shadow-lg relative overflow-hidden text-white group",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Net Kar"}),u.jsxs("h3",{className:"text-2xl font-bold mt-1",children:["",h.toLocaleString()]})]}),u.jsx("div",{className:"p-2 bg-white/10 rounded-lg text-white group-hover:scale-110 transition-transform",children:u.jsx(lj,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm relative z-10",children:[u.jsx(SL,{className:"w-4 h-4 text-emerald-400"}),u.jsxs("span",{className:"text-emerald-400 font-medium",children:["%",f.toFixed(1)," Kar Marj"]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm relative overflow-hidden group transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm font-medium",children:"Finansal Salk"}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mt-1",children:f>20?"Mkemmel":f>0?"yi":"Riskli"})]}),u.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform",children:u.jsx(lj,{className:"w-5 h-5"})})]}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 leading-relaxed",children:f>0?"Gelirleriniz yeterli seviyede.":"Giderleriniz gelirlerinizi ayor."})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm flex flex-col transition-colors",children:[u.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Nakit Ak Trendi"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Dnemsel gelir vs gider"})]}),u.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium dark:text-slate-300",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500"})," Gelir"]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"})," Gider"]})]})]}),u.jsx("div",{className:"flex-1 min-h-[250px] relative flex items-end justify-between px-2 gap-2",children:S.length>0?S.map((E,C)=>{const T=Math.max(...S.map(R=>Math.max(R.income,R.expense))),_=T>0?T:100,O=_>0?Math.min(E.income/_*100,100):0,N=_>0?Math.min(E.expense/_*100,100):0;return u.jsxs("div",{className:"flex flex-col items-center flex-1 h-full justify-end group relative",children:[u.jsxs("div",{className:"absolute bottom-full mb-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-900 dark:bg-black text-white text-xs rounded-lg p-2 z-20 pointer-events-none w-32 text-center shadow-xl",children:[u.jsx("div",{className:"font-bold mb-1",children:E.label}),u.jsxs("div",{className:"text-emerald-400",children:["G: ",E.income.toLocaleString()]}),u.jsxs("div",{className:"text-red-400",children:[": ",E.expense.toLocaleString()]})]}),u.jsxs("div",{className:"w-full flex gap-1 items-end justify-center h-full max-w-[40px]",children:[u.jsx("div",{style:{height:`${isNaN(O)?0:O}%`},className:"w-1/2 bg-emerald-200 dark:bg-emerald-900/50 group-hover:bg-emerald-500 transition-all rounded-t-sm"}),u.jsx("div",{style:{height:`${isNaN(N)?0:N}%`},className:"w-1/2 bg-red-200 dark:bg-red-900/50 group-hover:bg-red-500 transition-all rounded-t-sm"})]}),u.jsx("span",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-2 truncate w-full text-center block",children:S.length<=12||C%5===0||C===S.length-1?E.label:""})]},C)}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"Veri yok"})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm transition-colors",children:[u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-6",children:"Karllk Analizi"}),u.jsxs("div",{className:"relative w-48 h-48 mx-auto mb-8",children:[u.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full rotate-[-90deg]",children:[u.jsx("path",{className:"text-gray-100 dark:text-slate-800",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.8"}),!isNaN(f)&&h!==0&&u.jsx("path",{className:h>=0?"text-emerald-500":"text-red-500",strokeDasharray:`${Math.min(f>0?f:0,100)}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.8",strokeLinecap:"round"})]}),u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[u.jsxs("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[(isNaN(f)?0:f).toFixed(0),"%"]}),u.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400",children:"Net Marj"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-gray-500 dark:text-slate-400",children:"Brt Gelir"}),u.jsxs("span",{className:"font-medium dark:text-slate-200",children:["",c.toLocaleString()]})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-gray-500 dark:text-slate-400",children:"Toplam Gider"}),u.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["-",d.toLocaleString()]})]}),u.jsxs("div",{className:"pt-3 border-t border-gray-100 dark:border-slate-800 flex justify-between text-sm",children:[u.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Kalan Nakit"}),u.jsxs("span",{className:ie("font-bold",h>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:[h>=0?"+":"-","",Math.abs(h).toLocaleString()]})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx(fR,{title:"En ok Gelir Getirenler",items:v,type:"income"}),u.jsx(fR,{title:"En ok Harcama Yaplanlar",items:w,type:"expense"})]})]})}function fR({title:t,items:e,type:n}){const r=n==="income";return u.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm transition-colors",children:[u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-6",children:t}),u.jsxs("div",{className:"space-y-4",children:[e.slice(0,5).map((s,i)=>u.jsxs("div",{className:"group",children:[u.jsxs("div",{className:"flex justify-between text-sm mb-1.5",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:ie("w-5 h-5 rounded flex items-center justify-center text-[10px] font-bold",r?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400":"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400"),children:i+1}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-slate-300",children:s.name})]}),u.jsx("div",{className:"text-right",children:u.jsxs("span",{className:"block font-bold text-gray-900 dark:text-white",children:["",s.value.toLocaleString()]})})]}),u.jsx("div",{className:"w-full bg-gray-100 dark:bg-slate-800 h-1.5 rounded-full overflow-hidden",children:u.jsx("div",{className:ie("h-full rounded-full",r?"bg-emerald-500":"bg-red-500"),style:{width:`${s.percent}%`}})})]},i)),e.length===0&&u.jsx("p",{className:"text-sm text-gray-400 py-4 text-center",children:"Veri yok"})]})]})}class pR extends lt.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary catches:",e)}render(){var e;return this.state.hasError?u.jsxs("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[u.jsx("h2",{className:"text-red-800 font-bold mb-2",children:"Build Hatas (Bileen Yklenemedi)"}),u.jsx("details",{className:"text-xs text-red-600 font-mono whitespace-pre-wrap",children:(e=this.state.error)==null?void 0:e.toString()})]}):this.props.children}}function oRe(){const[t,e]=y.useState("projeler"),[n,r]=y.useState([]),[s,i]=y.useState([]),[o,a]=y.useState([]),[l,c]=y.useState([]),[d,h]=y.useState([]),[f,p]=y.useState([]),[m,g]=y.useState("Son 1 Ay"),{user:x}=hn(),b=async()=>{try{const{data:S}=await X.from("projects").select("*, clients(name)");S&&r(S.map(N=>{var R;return{...N,customer:((R=N.clients)==null?void 0:R.name)||"Bilinmiyor",price:parseFloat(N.price)||0}}));const{data:E}=await X.from("transactions").select("*");E&&i(E.map(N=>({...N,amount:parseFloat(N.amount)})));const{data:C}=await X.from("clients").select("*");C&&a(C);const{data:T}=await X.from("profiles").select("*");T&&c(T);const{data:_}=await X.from("work_sessions").select("*, profiles(full_name)");_&&h(_.map(N=>{var R;return{...N,user:((R=N.profiles)==null?void 0:R.full_name)||"Bilinmiyor",startTime:N.start_time?Ve(nt(N.start_time),"HH:mm"):"",endTime:N.end_time?Ve(nt(N.end_time),"HH:mm"):"",date:N.start_time}}));const{data:O}=await X.from("work_orders").select("*, profiles(full_name)");O&&p(O.map(N=>{var R;return{...N,assignedTo:((R=N.profiles)==null?void 0:R.full_name)||"Bilinmiyor",date:N.due_date}}))}catch(S){console.error("Reports data load error:",S)}};y.useEffect(()=>{x&&b()},[x]);const{startDate:v,endDate:w}=lt.useMemo(()=>{const S=new Date;let E=new Date;switch(m){case"Son 1 Hafta":E=k8(S,7);break;case"Son 1 Ay":E=es(S,1);break;case"Son 3 Ay":E=es(S,3);break;case"Son 6 Ay":E=es(S,6);break;case"Son 1 Yl":E=es(S,12);break;default:E=es(S,1)}return{startDate:E,endDate:S}},[m]);return u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight transition-colors",children:"Raporlama & Analitik"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 font-medium transition-colors",children:" performans ve detayl finansal analizler."})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("div",{className:"relative",children:[u.jsxs("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",value:m,onChange:S=>g(S.target.value),children:[u.jsx("option",{children:"Son 1 Hafta"}),u.jsx("option",{children:"Son 1 Ay"}),u.jsx("option",{children:"Son 3 Ay"}),u.jsx("option",{children:"Son 6 Ay"}),u.jsx("option",{children:"Son 1 Yl"})]}),u.jsxs(re,{variant:"outline",className:"gap-2 text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800 border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 transition-colors",children:[m," ",u.jsx(to,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"})]})]})})]}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-800 transition-colors",children:u.jsx("nav",{className:"flex space-x-6 overflow-x-auto","aria-label":"Tabs",children:["Projeler","Finans","Personel Analizi","Mteri Analizi"].map(S=>{const E=S.toLowerCase().split(" ")[0];return u.jsx("button",{onClick:()=>e(E),className:ie("py-4 px-1 inline-flex items-center gap-2 border-b-2 font-bold text-sm whitespace-nowrap transition-all focus:outline-none",t===E?"border-violet-600 dark:border-violet-500 text-violet-600 dark:text-violet-500":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-700"),children:S},E)})})}),t==="projeler"&&u.jsx(sRe,{dateRange:{startDate:v,endDate:w},projects:n,workOrders:f}),t==="finans"&&u.jsx(pR,{children:u.jsx(iRe,{transactions:s,dateFilter:m})}),t==="personel"&&u.jsx(nRe,{projects:n,profiles:l,sessions:d,workOrders:f,dateRange:{startDate:v,endDate:w},dateFilter:m}),t==="mteri"&&u.jsx(pR,{children:u.jsx(rRe,{dateRange:{startDate:v,endDate:w},projects:n,clients:o})})]})}function aRe(){const{user:t}=hn(),[e,n]=y.useState(null),[r,s]=y.useState([]),[i,o]=y.useState(!0),[a,l]=y.useState(!1),[c,d]=y.useState(!0),[h,f]=y.useState("");y.useEffect(()=>{p()},[]);const p=async()=>{o(!0);const{data:b}=await X.from("meeting_notes").select("*").order("created_at",{ascending:!1});s(b||[]),o(!1),b&&b.length>0},m=async(b=null)=>{const w={title:b?`${b} - ${Ve(new Date,"d MMM")}`:"",type:b||"Genel",date:new Date().toISOString(),content:"",attendees:[],decisions:[],duration:0,efficiency_score:50,created_by:t==null?void 0:t.id},S="temp-"+Date.now(),E={...w,id:S,isTemp:!0};n(E)},g=async b=>{if(b.isTemp){const{isTemp:v,id:w,...S}=b;(!S.title||!S.title.trim())&&(S.title="Yeni Toplant");const{data:E,error:C}=await X.from("meeting_notes").insert(S).select().single();if(C)return console.error("Save Error:",C),alert("Kayt baarsz: "+C.message),null;if(E)return s([E,...r]),n(E),E}else return await X.from("meeting_notes").update({title:b.title,content:b.content,duration:b.duration,decisions:b.decisions,action_items:b.action_items,efficiency_score:b.efficiency_score,updated_at:new Date().toISOString()}).eq("id",b.id),s(r.map(v=>v.id===b.id?{...v,...b}:v)),b},x=r.filter(b=>{var v;return(v=b.title)==null?void 0:v.toLowerCase().includes(h.toLowerCase())});return u.jsxs("div",{className:ie("h-[calc(100vh-4rem)] flex bg-[#F9FAFB] dark:bg-[#020617] group/app",a&&"fixed inset-0 z-50 h-screen bg-white dark:bg-black"),children:[!a&&u.jsxs("div",{className:"w-72 flex flex-col border-r border-gray-200 dark:border-slate-800 bg-white dark:bg-[#0B1120]",children:[u.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-slate-800/50",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h2",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[u.jsx(no,{className:"w-5 h-5 text-indigo-600"}),"Notlar"]}),u.jsx(re,{size:"icon",variant:"ghost",onClick:()=>m(),className:"h-8 w-8 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20",children:u.jsx(Ht,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"relative",children:[u.jsx(gn,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{className:"w-full bg-gray-50 dark:bg-slate-900 border-none rounded-lg py-2 pl-9 pr-3 text-sm focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:h,onChange:b=>f(b.target.value)})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[x.length===0&&!i&&u.jsxs("div",{className:"text-center py-10 opacity-50",children:[u.jsx("p",{className:"text-xs",children:"Henz not yok."}),u.jsx(re,{variant:"link",size:"sm",onClick:()=>m(),className:"text-indigo-500 mt-1",children:"Olutur"})]}),x.map(b=>u.jsxs("div",{onClick:()=>n(b),className:ie("group flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-all border border-transparent",(e==null?void 0:e.id)===b.id?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-100 dark:border-indigo-900/30":"hover:bg-gray-50 dark:hover:bg-slate-800/50"),children:[u.jsx("div",{className:"mt-1 min-w-[4px] h-[4px] rounded-full bg-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:ie("text-sm font-semibold truncate",(e==null?void 0:e.id)===b.id?"text-indigo-900 dark:text-indigo-100":"text-gray-700 dark:text-slate-300"),children:b.title||"Yeni Not"}),u.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-0.5 flex items-center gap-2",children:[u.jsx("span",{children:Ve(new Date(b.date),"d MMM",{locale:Cn})}),b.duration>0&&u.jsxs("span",{children:[" ",Math.floor(b.duration/60),"dk"]})]})]})]},b.id))]})]}),u.jsx("div",{className:"flex-1 flex flex-col min-w-0 bg-white dark:bg-[#020617] relative",children:e?u.jsx(lRe,{note:e,zenMode:a,toggleZen:()=>l(!a),showRightRail:c,toggleRightRail:()=>d(!c),onSave:g},e.id):u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-12 bg-gray-50/50 dark:bg-slate-900/20",children:[u.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-100 to-white dark:from-slate-800 dark:to-slate-900 rounded-2xl shadow-xl flex items-center justify-center mb-6",children:u.jsx(no,{className:"w-10 h-10 text-indigo-600 dark:text-indigo-400"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Hazr msnz?"}),u.jsx("p",{className:"text-gray-500 dark:text-slate-400 max-w-sm mb-8",children:"Yeni bir toplant notu oluturun veya sol menden gemi bir notu sein."}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md",children:[u.jsxs("button",{onClick:()=>m("Haftalk"),className:"p-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-lg transition-all text-left group",children:[u.jsx(pi,{className:"w-6 h-6 text-indigo-500 mb-3 group-hover:scale-110 transition-transform"}),u.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Haftalk Rapor"}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Standart haftalk zet ablonu"})]}),u.jsxs("button",{onClick:()=>m("Mteri"),className:"p-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl hover:border-violet-500 hover:shadow-lg transition-all text-left group",children:[u.jsx(so,{className:"w-6 h-6 text-violet-500 mb-3 group-hover:scale-110 transition-transform"}),u.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Mteri Grmesi"}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Notlar ve aksiyonlar iin"})]})]}),u.jsxs("button",{onClick:()=>m(),className:"mt-8 flex items-center gap-2 text-sm text-gray-500 hover:text-indigo-600 font-medium",children:[u.jsx(Ht,{className:"w-4 h-4"}),"Bo Not Balat"]})]})})]})}function lRe({note:t,zenMode:e,toggleZen:n,showRightRail:r,toggleRightRail:s,onSave:i}){const[o,a]=y.useState(t.title),[l,c]=y.useState(t.content||""),[d,h]=y.useState(t.decisions||[]),[f,p]=y.useState(""),[m,g]=y.useState(""),[x,b]=y.useState((t.action_items||[]).map(q=>({title:q}))||[]),[v,w]=y.useState(!1),[S,E]=y.useState("content"),C=y.useRef("content");y.useEffect(()=>{C.current=S},[S]);const[T,_]=y.useState(!1),[O,N]=y.useState(t.duration||0),R=y.useRef(null),[M,W]=y.useState(!1),D=y.useRef(null);y.useEffect(()=>{},[]),y.useEffect(()=>(T?R.current=setInterval(()=>N(q=>q+1),1e3):clearInterval(R.current),()=>clearInterval(R.current)),[T]),y.useEffect(()=>{const q=setTimeout(()=>{(o!==t.title||l!==t.content||O!==t.duration)&&B()},2e3);return()=>clearTimeout(q)},[o,l,O]);const B=async()=>{w(!0);try{await i({...t,title:o,content:l,duration:O,decisions:d,action_items:x.map(q=>q.title)})}finally{w(!1)}},$=()=>{if(!f.trim())return;const q=[...d,f.trim()];h(q),p(""),i({...t,title:o,content:l,duration:O,decisions:q,action_items:x.map(G=>G.title)})},V=q=>{const G=d.filter((Z,te)=>te!==q);h(G),i({...t,title:o,content:l,duration:O,decisions:G,action_items:x.map(Z=>Z.title)})},A=async()=>{if(!m.trim())return;const q=m.trim(),G={id:Date.now(),title:q,status:"Beklemede"};b([G,...x]),g("");const{error:Z}=await X.from("external_tasks").insert({title:q,status:"Beklemede",due_date:new Date(Date.now()+864e5).toISOString(),priority:"Normal"});if(Z)console.error("Task creation failed:",Z),alert("Grev oluturulamad.");else{const te=[G,...x];i({...t,title:o,content:l,duration:O,decisions:d,action_items:te.map(fe=>fe.title)})}},z=()=>{const q=d.length>0?d.map(te=>` ${te}`).join(`
`):"-",G=x.length>0?x.map(te=>` ${te.title}`).join(`
`):"-",Z=` *${o}* (${Ve(new Date,"d MMM")})

 *NOTLAR:*
${l}

 *ALINAN KARARLAR:*
${q}

 *AKSYONLAR:*
${G}`;navigator.clipboard.writeText(Z),alert("zet kopyaland! (WhatsApp iin hazr)")},j=()=>{var q;if(M)(q=D.current)==null||q.stop(),W(!1);else{const G=window.SpeechRecognition||window.webkitSpeechRecognition;if(!G)return alert("Sesli yazma bu taraycda desteklenmiyor.");const Z=new G;Z.lang="tr-TR",Z.continuous=!0,Z.interimResults=!0,Z.onstart=()=>{l+(l&&!l.endsWith(" ")?" ":"")},Z.onresult=te=>{let fe="",K="";for(let pe=te.resultIndex;pe<te.results.length;++pe)te.results[pe].isFinal?K+=te.results[pe][0].transcript:fe+=te.results[pe][0].transcript;if(te.results[te.results.length-1].isFinal){const pe=te.results[te.results.length-1][0].transcript;S==="title"?a(ke=>(ke+" "+pe).trim()):S==="decision"?p(ke=>(ke+" "+pe).trim()):S==="task"?g(ke=>(ke+" "+pe).trim()):c(ke=>(ke.trim()?ke.trim()+" ":"")+pe.trim())}},Z.onerror=te=>{console.error("Speech error",te.error),W(!1)},Z.start(),D.current=Z,W(!0)}},[U,H]=y.useState(!1),I=async()=>{let q=localStorage.getItem("gemini_api_key");if(!q)if(q=prompt("Google Gemini API Anahtarnz giriniz:"),q)localStorage.setItem("gemini_api_key",q);else return;if(!l||l.length<10){alert("Analiz iin en az 10 karakterlik not girmelisiniz.");return}H(!0);try{const G=await CMe(l,q),te=[...G.map((fe,K)=>({id:Date.now()+K,title:fe,status:"Beklemede"})),...x];b(te);for(const fe of G)await X.from("external_tasks").insert({title:fe,status:"Beklemede",due_date:new Date(Date.now()+864e5).toISOString(),priority:"Normal"});i({...t,title:o,content:l,duration:O,decisions:d,action_items:te.map(fe=>fe.title)}),alert(`${G.length} adet aksiyon bulundu ve eklendi.`)}catch(G){alert("AI Hatas: "+G.message)}finally{H(!1)}};return u.jsxs("div",{className:"flex-1 flex h-full",children:[u.jsxs("div",{className:"flex-1 flex flex-col h-full bg-white dark:bg-[#020617] relative",children:[u.jsxs("div",{className:ie("h-16 border-b border-gray-100 dark:border-slate-800 flex items-center justify-between px-6 transition-all",e&&"opacity-0 hover:opacity-100 absolute top-0 left-0 right-0 z-50 bg-white/90 dark:bg-black/90 backdrop-blur-sm"),children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(re,{size:"sm",onClick:B,disabled:v,className:ie("gap-2 transition-all",v?"bg-yellow-500":"bg-indigo-600 hover:bg-indigo-700 text-white"),children:[u.jsx(_d,{className:"w-4 h-4"}),v?"Kaydediliyor...":"Kaydet"]}),u.jsx("span",{className:"text-xs text-gray-400 font-mono hidden sm:inline-block",children:Ve(new Date,"d MMMM HH:mm",{locale:Cn})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:ie("hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full border transition-colors",T?"bg-red-50 border-red-200 text-red-600":"bg-gray-50 border-gray-200 text-gray-600"),children:[u.jsx("button",{onClick:()=>_(!T),children:T?u.jsx(gL,{className:"w-3.5 h-3.5"}):u.jsx(xL,{className:"w-3.5 h-3.5"})}),u.jsxs("span",{className:"text-xs font-mono font-medium w-12 text-center",children:[Math.floor(O/60),":",String(O%60).padStart(2,"0")]})]}),u.jsx("div",{className:"w-px h-6 bg-gray-200 dark:bg-slate-800 mx-2"}),u.jsx(re,{size:"icon",variant:"ghost",onClick:j,className:ie(M&&"text-red-500 animate-pulse"),children:M?u.jsx(hQ,{className:"w-4 h-4"}):u.jsx(fQ,{className:"w-4 h-4"})}),u.jsx(re,{size:"icon",variant:"ghost",onClick:n,children:u.jsx(cQ,{className:"w-4 h-4"})}),u.jsx(re,{size:"icon",variant:"ghost",onClick:s,className:ie(r&&"text-indigo-600 bg-indigo-50"),children:u.jsx(nQ,{className:"w-4 h-4 flip-x"})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto w-full max-w-4xl mx-auto px-12 py-12 cursor-text",onClick:()=>E("content"),children:[u.jsx("input",{value:o,onChange:q=>a(q.target.value),onFocus:()=>E("title"),onClick:q=>{q.stopPropagation(),E("title")},placeholder:"Not Bal...",className:ie("w-full text-4xl font-extrabold text-gray-900 dark:text-white placeholder:text-gray-300 dark:placeholder:text-slate-700 border-none focus:outline-none bg-transparent mb-8 transition-all rounded-lg px-2 -ml-2",M&&S==="title"&&"ring-2 ring-red-500 bg-red-50/50 dark:bg-red-900/20")}),u.jsx("textarea",{value:l,onChange:q=>c(q.target.value),onFocus:()=>E("content"),onClick:q=>{q.stopPropagation(),E("content")},placeholder:"Buraya yazn...",className:ie("w-full h-[calc(100%-8rem)] resize-none text-lg leading-loose text-gray-700 dark:text-gray-300 placeholder:text-gray-200 dark:placeholder:text-slate-800 border-none focus:outline-none bg-transparent font-serif transition-all rounded-lg p-2 -ml-2",M&&S==="content"&&"ring-2 ring-red-500 bg-red-50/50 dark:bg-red-900/20")})]})]}),r&&!e&&u.jsxs("div",{className:"w-80 bg-gray-50/80 dark:bg-[#0B1120] border-l border-gray-200 dark:border-slate-800 flex flex-col",children:[u.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-slate-800 flex items-center justify-between",children:[u.jsx("h3",{className:"font-bold text-sm text-gray-700 dark:text-slate-200",children:"Asistan"}),u.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Aktif"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("h4",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-gray-500",children:[u.jsx(uj,{className:"w-3.5 h-3.5"}),"Alnan Kararlar"]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-lg p-2 shadow-sm space-y-2",children:[d.map((q,G)=>u.jsxs("div",{className:"flex items-start gap-2 text-sm group",children:[u.jsx(uj,{className:"w-4 h-4 text-green-500 mt-0.5 shrink-0"}),u.jsx("span",{className:"flex-1 text-gray-700 dark:text-gray-300",children:q}),u.jsx("button",{onClick:()=>V(G),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500",children:u.jsx(hr,{className:"w-3.5 h-3.5"})})]},G)),u.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-dashed border-gray-100 dark:border-slate-800",children:[u.jsx(Ht,{className:"w-4 h-4 text-gray-400"}),u.jsx("input",{className:ie("w-full text-sm bg-transparent border-none focus:outline-none placeholder:text-gray-400 p-1 rounded transition-all",M&&S==="decision"&&"ring-2 ring-red-500 bg-red-50"),placeholder:"Yeni karar ekle... (Tkla ve Konu)",value:f,onFocus:()=>E("decision"),onClick:()=>E("decision"),onChange:q=>p(q.target.value),onKeyDown:q=>q.key==="Enter"&&$()})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h4",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-gray-500",children:[u.jsx(SL,{className:"w-3.5 h-3.5"}),"Aksiyon / Grev"]}),u.jsxs(re,{variant:"ghost",size:"xs",onClick:I,disabled:U||!l.trim(),className:"h-6 text-[10px] text-indigo-600 hover:bg-indigo-50",children:[U?u.jsx(Hn,{className:"w-3 h-3 animate-spin mr-1"}):u.jsx(sm,{className:"w-3 h-3 mr-1"}),"AI ile Bul"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{className:ie("flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-md px-2 py-1.5 text-sm focus:outline-none focus:border-indigo-500 transition-all",M&&S==="task"&&"ring-2 ring-red-500"),placeholder:"Grev ekle... (Tkla ve Konu)",value:m,onFocus:()=>E("task"),onClick:()=>E("task"),onChange:q=>g(q.target.value),onKeyDown:q=>q.key==="Enter"&&A()}),u.jsx(re,{size:"sm",className:"bg-indigo-600 text-white",onClick:A,children:u.jsx(Ht,{className:"w-3 h-3"})})]}),u.jsxs("div",{className:"space-y-2 mt-2",children:[x.map((q,G)=>u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-400 bg-white dark:bg-slate-900 p-2 rounded border border-gray-100 dark:border-slate-800 animate-in fade-in slide-in-from-top-1",children:[u.jsx("div",{className:"w-4 h-4 rounded-full border border-orange-200 bg-orange-50 flex items-center justify-center",children:u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-400"})}),u.jsx("span",{className:"truncate",children:q.title})]},G)),x.length===0&&u.jsx("p",{className:"text-[10px] text-gray-400 italic px-1",children:"Bu toplantdan henz grev oluturulmad."})]})]}),u.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-900/40",children:[u.jsxs("div",{className:"text-xs font-bold text-indigo-800 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[u.jsx(to,{className:"w-3 h-3"}),"Takvim Senkronu"]}),u.jsx("p",{className:"text-[10px] text-indigo-600/80 dark:text-indigo-300/70",children:"u an yaklaan bir toplant bulunamad."})]})]}),u.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-slate-800",children:u.jsxs(re,{className:"w-full bg-black dark:bg-white text-white dark:text-black gap-2 hover:bg-gray-800 transition-colors",size:"sm",onClick:z,children:[u.jsx(wL,{className:"w-3 h-3"}),"zeti Payla"]})})]})]})}function cRe(){const{user:t}=hn(),[e,n]=y.useState([]),[r,s]=y.useState(null),[i,o]=y.useState(!0),[a,l]=y.useState(!0);y.useEffect(()=>{c()},[]);const c=async()=>{o(!0);try{const{data:m,error:g}=await X.from("wiki_pages").select("*").order("created_at",{ascending:!1});if(g)throw g;n(m||[]),m&&m.length>0&&!r&&s(m[0])}catch(m){console.error("Fetch pages error:",m)}finally{o(!1)}},d=async(m=!1)=>{try{const{data:g,error:x}=await X.from("wiki_pages").insert({title:"Yeni Sayfa",is_private:m,created_by:t.id,content:"[]"}).select().single();if(x)throw x;n([g,...e]),s(g)}catch(g){console.error("Create page error:",g)}},h=async(m,g)=>{if(g.stopPropagation(),!!confirm("Bu sayfay silmek istediinize emin misiniz?"))try{const{error:x}=await X.from("wiki_pages").delete().eq("id",m);if(x)throw x;n(e.filter(b=>b.id!==m)),(r==null?void 0:r.id)===m&&s(e.find(b=>b.id!==m)||null)}catch(x){console.error("Delete page error:",x)}},f=e.filter(m=>!m.is_private),p=e.filter(m=>m.is_private);return u.jsxs("div",{className:"flex h-[calc(100vh-140px)] gap-6 overflow-hidden",children:[u.jsxs("aside",{className:ie("w-72 bg-white dark:bg-slate-900 rounded-2xl border border-gray-200 dark:border-slate-800 flex flex-col transition-all duration-300 shadow-sm",!a&&"w-0 overflow-hidden border-none"),children:[u.jsxs("div",{className:"p-4 border-b border-gray-50 dark:border-slate-800 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 font-bold text-gray-900 dark:text-white",children:[u.jsx(Sc,{className:"w-5 h-5 text-primary"}),u.jsx("span",{children:"Bugless Wiki"})]}),u.jsx("button",{onClick:()=>l(!1),className:"md:hidden text-gray-400 hover:text-gray-600",children:u.jsx(rT,{className:"w-5 h-5 rotate-180"})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-8 custom-scrollbar",children:[u.jsxs("section",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between group px-2 mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-400 uppercase tracking-widest",children:[u.jsx(so,{className:"w-3 h-3"}),u.jsx("span",{children:"Teamspace"})]}),u.jsx("button",{onClick:()=>d(!1),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 dark:hover:bg-slate-800 rounded transition-all",children:u.jsx(Ht,{className:"w-3 h-3"})})]}),f.map(m=>u.jsxs("button",{onClick:()=>s(m),className:ie("w-full flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition-all group relative",(r==null?void 0:r.id)===m.id?"bg-primary/10 text-primary font-medium":"text-gray-600 dark:text-slate-400 hover:bg-gray-50 dark:hover:bg-slate-800/50"),children:[u.jsx(no,{className:"w-4 h-4 shrink-0"}),u.jsx("span",{className:"truncate",children:m.title}),u.jsx(hr,{onClick:g=>h(m.id,g),className:"w-3.5 h-3.5 ml-auto opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-all"})]},m.id))]}),u.jsxs("section",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between group px-2 mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-400 uppercase tracking-widest",children:[u.jsx(fL,{className:"w-3 h-3"}),u.jsx("span",{children:"Private"})]}),u.jsx("button",{onClick:()=>d(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 dark:hover:bg-slate-800 rounded transition-all",children:u.jsx(Ht,{className:"w-3 h-3"})})]}),p.map(m=>u.jsxs("button",{onClick:()=>s(m),className:ie("w-full flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition-all group relative",(r==null?void 0:r.id)===m.id?"bg-primary/10 text-primary font-medium":"text-gray-600 dark:text-slate-400 hover:bg-gray-50 dark:hover:bg-slate-800/50"),children:[u.jsx(no,{className:"w-4 h-4 shrink-0"}),u.jsx("span",{className:"truncate",children:m.title}),u.jsx(hr,{onClick:g=>h(m.id,g),className:"w-3.5 h-3.5 ml-auto opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-all"})]},m.id))]})]}),u.jsx("div",{className:"p-4 border-t border-gray-50 dark:border-slate-800",children:u.jsxs("div",{className:"relative",children:[u.jsx(gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"Notlarda ara...",className:"w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-slate-800 border-none rounded-lg text-xs outline-none focus:ring-1 focus:ring-primary/30"})]})})]}),u.jsx("main",{className:"flex-1 min-w-0",children:r?u.jsx(Rm,{pageId:r.id,initialContent:r.content,onSave:m=>{}},r.id):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 bg-white dark:bg-slate-900 rounded-2xl border border-gray-200 dark:border-slate-800",children:[u.jsx("div",{className:"w-20 h-20 bg-gray-50 dark:bg-slate-800 rounded-full flex items-center justify-center mb-6 text-primary",children:u.jsx(Sc,{className:"w-10 h-10"})}),u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Wiki'ye Ho Geldiniz"}),u.jsx("p",{className:"text-gray-500 max-w-sm mb-6",children:"Sol taraftan bir sayfa sein veya yeni bir sayfa oluturarak bilgilerinizi organize etmeye balayn."}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-all flex items-center gap-2",children:[u.jsx(Ht,{className:"w-4 h-4"}),"Ekip Sayfas"]}),u.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-gray-100 dark:bg-slate-800 text-gray-900 dark:text-white rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-all flex items-center gap-2",children:[u.jsx(Ht,{className:"w-4 h-4"}),"Kiisel Sayfa"]})]})]})})]})}function uRe(){var b;const{token:t}=YG(),[e,n]=y.useState(null),[r,s]=y.useState(null),[i,o]=y.useState([]),[a,l]=y.useState(!0),[c,d]=y.useState(null),[h,f]=y.useState(!1),[p,m]=y.useState(!1);y.useEffect(()=>{g()},[t]);const g=async()=>{try{l(!0);const{data:v,error:w}=await X.rpc("get_proposal_public",{token_input:t});if(w)throw w;if(!v||!v.proposal)throw new Error("Teklif bulunamad veya sresi dolmu.");n(v.proposal),o(v.items||[]),s(v.client)}catch(v){console.error(v),d(v.message)}finally{l(!1)}},x=async()=>{if(confirm("Bu teklifi onaylyor musunuz? Onayladnzda ilem balatlacaktr."))try{f(!0);const{data:v,error:w}=await X.rpc("approve_proposal_public",{token_input:t});if(w)throw w;v===!0?(m(!0),n({...e,status:"Onayland"})):alert("Onaylanamad. Ltfen iletiime gein.")}catch(v){alert("Hata: "+v.message)}finally{f(!1)}};return a?u.jsx("div",{className:"h-screen flex items-center justify-center",children:u.jsx(Hn,{className:"w-10 h-10 animate-spin text-gray-400"})}):c?u.jsxs("div",{className:"h-screen flex flex-col items-center justify-center bg-gray-50 text-center p-4",children:[u.jsx(EQ,{className:"w-16 h-16 text-red-400 mb-4"}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Eriim Hatas"}),u.jsx("p",{className:"text-gray-500 mt-2",children:c})]}):u.jsxs("div",{className:"min-h-screen bg-gray-100 py-10 px-4 font-sans text-gray-800",children:[u.jsxs("div",{className:"max-w-4xl mx-auto bg-white shadow-2xl rounded-sm overflow-hidden min-h-[1123px] relative flex flex-col",children:[u.jsx("div",{className:"h-4 bg-indigo-600 w-full"}),u.jsx("div",{className:"absolute top-10 right-10",children:e.status==="Onayland"||p?u.jsxs("div",{className:"flex flex-col items-center justify-center border-4 border-green-500 text-green-600 rounded-full w-32 h-32 transform rotate-12 opacity-80 backdrop-blur-sm",children:[u.jsx(tr,{className:"w-10 h-10"}),u.jsx("span",{className:"font-black text-lg uppercase",children:"ONAYLANDI"}),u.jsx("span",{className:"text-[10px] font-mono",children:Ve(new Date,"dd.MM.yyyy")})]}):u.jsx("div",{className:"bg-gray-100 text-gray-500 px-4 py-1 rounded-full text-xs font-bold uppercase tracking-widest",children:e.status})}),u.jsxs("div",{className:"p-16 flex-1 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-start mb-16",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-black text-gray-900 tracking-tight mb-2",children:"Hizmet Teklifi"}),u.jsxs("p",{className:"text-gray-400 font-medium",children:["#",e.proposal_number||"TRH-001"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"font-bold text-xl text-gray-800",children:"Bugless Yazlm A.."}),u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Teknoloji Vadisi, stanbul"}),u.jsx("p",{className:"text-sm text-gray-500",children:"info@bugless.com"}),u.jsx("p",{className:"text-sm text-gray-500",children:"+90 212 555 0000"})]})]}),u.jsxs("div",{className:"flex justify-between mb-16 border-b border-gray-100 pb-8",children:[u.jsxs("div",{className:"w-1/2",children:[u.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Sayn Mteri"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:typeof r=="object"?r==null?void 0:r.name:r}),u.jsx("p",{className:"text-gray-500 text-sm mt-1",children:e.client_address||"Adres bilgisi yok"})]}),u.jsxs("div",{className:"w-1/2 flex justify-end gap-12",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Teklif Tarihi"}),u.jsx("p",{className:"font-bold text-gray-900",children:Ve(new Date(e.created_at),"dd MMM yyyy",{locale:Cn})})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Geerlilik"}),u.jsx("p",{className:"font-bold text-red-500",children:e.valid_until?Ve(new Date(e.valid_until),"dd MMM yyyy",{locale:Cn}):"Belirtilmemi"})]})]})]}),u.jsx("div",{className:"mb-12",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"border-b-2 border-gray-900",children:u.jsxs("tr",{children:[u.jsx("th",{className:"text-left py-3 text-sm font-bold text-gray-900 uppercase tracking-wide w-1/2",children:"Hizmet / Aklama"}),u.jsx("th",{className:"text-center py-3 text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Miktar"}),u.jsx("th",{className:"text-right py-3 text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Birim Fiyat"}),u.jsx("th",{className:"text-right py-3 text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Toplam"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:i.map((v,w)=>u.jsxs("tr",{children:[u.jsx("td",{className:"py-4 pr-4",children:u.jsx("p",{className:"font-bold text-gray-800",children:v.description})}),u.jsx("td",{className:"py-4 text-center text-gray-600",children:v.quantity}),u.jsxs("td",{className:"py-4 text-right text-gray-600",children:[parseFloat(v.unit_price).toLocaleString()," ",e.currency]}),u.jsxs("td",{className:"py-4 text-right font-medium text-gray-900",children:[(v.quantity*v.unit_price).toLocaleString()," ",e.currency]})]},w))})]})}),u.jsx("div",{className:"flex justify-end mb-16",children:u.jsxs("div",{className:"w-72 space-y-3",children:[u.jsxs("div",{className:"flex justify-between text-gray-500",children:[u.jsx("span",{children:"Ara Toplam"}),u.jsxs("span",{children:[(b=e.total_amount)==null?void 0:b.toLocaleString()," ",e.currency]})]}),u.jsxs("div",{className:"flex justify-between text-gray-500",children:[u.jsxs("span",{children:["KDV (%",e.tax_rate,")"]}),u.jsxs("span",{children:[(e.total_amount*(e.tax_rate/100)).toLocaleString()," ",e.currency]})]}),u.jsxs("div",{className:"flex justify-between items-center py-4 border-t-2 border-gray-900",children:[u.jsx("span",{className:"font-black text-xl text-gray-900",children:"GENEL TOPLAM"}),u.jsxs("span",{className:"font-black text-2xl text-indigo-700",children:[(e.total_amount*(1+e.tax_rate/100)).toLocaleString()," ",e.currency]})]})]})}),u.jsxs("div",{className:"mt-auto pt-8 border-t border-gray-100",children:[u.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase mb-2",children:"Hizmet artlar & Notlar"}),u.jsx("p",{className:"text-sm text-gray-500 leading-relaxed max-w-2xl",children:e.notes||"Bu teklif 15 gn sreyle geerlidir. deme %50 pein, %50 i tesliminde tahsil edilecektir. Fiyatlara KDV dahil deildir (yukarda ayrca belirtilmitir)."})]})]}),u.jsxs("div",{className:"bg-gray-900 text-white p-6 print:hidden flex items-center justify-between sticky bottom-0 z-50",children:[u.jsxs("div",{className:"text-sm opacity-80",children:["Bu belge ",u.jsx("strong",{children:"Bugless CRM"})," altyaps ile oluturulmutur."]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-6 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg font-bold transition-all",children:[u.jsx(sQ,{className:"w-4 h-4"})," PDF ndir"]}),e.status!=="Onayland"&&!p&&u.jsxs("button",{onClick:x,disabled:h,className:"flex items-center gap-2 px-8 py-3 bg-green-600 hover:bg-green-500 rounded-lg font-bold shadow-lg shadow-green-900/20 transform hover:-translate-y-1 transition-all",children:[h?u.jsx(Hn,{className:"w-4 h-4 animate-spin"}):u.jsx(tr,{className:"w-4 h-4"}),"TEKLF ONAYLA"]})]})]})]}),u.jsx("style",{children:`
           @media print {
               @page { size: A4; margin: 0; }
               body { background: white; -webkit-print-color-adjust: exact; }
               .print\\:hidden { display: none !important; }
               .shadow-2xl { box-shadow: none !important; }
               .min-h-screen { padding: 0 !important; }
           }
       `})]})}function dRe(){const[t,e]=y.useState(""),[n,r]=y.useState(""),[s,i]=y.useState(!1),[o,a]=y.useState(!1),l=ra(),c=async d=>{d.preventDefault(),a(!0);try{const{data:h,error:f}=await X.auth.signInWithPassword({email:t,password:n});if(f)throw f;l("/")}catch(h){console.error("Auth error:",h),alert(h.message||"Bir hata olutu.")}finally{a(!1)}};return u.jsxs("div",{className:"min-h-screen bg-black flex overflow-hidden relative",children:[u.jsxs("div",{className:"absolute inset-0 z-0",children:[u.jsx("div",{className:"absolute -top-40 -left-40 w-96 h-96 bg-blue-900/20 rounded-full blur-[128px]"}),u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-white/5 rounded-full blur-[128px]"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-[500px] h-[500px] bg-purple-900/10 rounded-full blur-[96px]"}),u.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 contrast-150 mix-blend-overlay"})]}),u.jsx("div",{className:"hidden lg:flex w-1/2 relative z-10 items-center justify-center p-12",children:u.jsxs("div",{className:"w-full max-w-lg space-y-8",children:[u.jsxs("div",{className:"flex flex-col gap-6",children:[u.jsx("div",{className:"w-24 h-24 bg-white rounded-2xl flex items-center justify-center shadow-[0_0_40px_-10px_rgba(255,255,255,0.3)]",children:u.jsxs("svg",{viewBox:"0 0 100 100",className:"w-16 h-16 fill-black",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("circle",{cx:"25",cy:"75",r:"10"}),u.jsx("circle",{cx:"45",cy:"55",r:"10"}),u.jsx("rect",{x:"25",y:"25",width:"12",height:"60",rx:"6",transform:"rotate(-45 55 55)"}),u.jsx("rect",{x:"50",y:"25",width:"12",height:"60",rx:"6",transform:"rotate(-45 80 55)"})]})}),u.jsxs("h1",{className:"text-7xl font-sans font-black text-white tracking-tighter leading-none",children:["BUGLESS",u.jsx("br",{}),u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-500",children:"DIGITAL"})]}),u.jsx("p",{className:"text-gray-400 text-lg max-w-sm leading-relaxed",children:"Gl CRM altyaps ile i srelerinizi kusursuz ynetin."})]}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full border border-white/10 bg-white/5 text-white/50 text-sm backdrop-blur-md",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Sistem Durumu: Aktif ve Gvenli"]})]})}),u.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 z-10 bg-black/40 backdrop-blur-sm lg:bg-transparent lg:backdrop-blur-none transition-all",children:u.jsxs("div",{className:"w-full max-w-md space-y-8",children:[u.jsxs("div",{className:"lg:hidden flex flex-col items-center mb-8",children:[u.jsx("div",{className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center shadow-lg mb-4",children:u.jsxs("svg",{viewBox:"0 0 100 100",className:"w-10 h-10 fill-black",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("circle",{cx:"25",cy:"75",r:"10"}),u.jsx("circle",{cx:"45",cy:"55",r:"10"}),u.jsx("rect",{x:"25",y:"25",width:"12",height:"60",rx:"6",transform:"rotate(-45 55 55)"}),u.jsx("rect",{x:"50",y:"25",width:"12",height:"60",rx:"6",transform:"rotate(-45 80 55)"})]})}),u.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter",children:"BUGLESS DIGITAL"})]}),u.jsxs("div",{className:"space-y-2 text-center lg:text-left",children:[u.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:"Giri Yap"}),u.jsx("p",{className:"text-gray-500",children:"Hesabnza erimek iin bilgilerinizi giriniz."})]}),u.jsxs("form",{onSubmit:c,className:"space-y-5",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-sm font-medium text-gray-400 pl-1",children:"E-posta"}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-500 group-focus-within:text-white transition-colors",children:u.jsx(pL,{className:"w-5 h-5"})}),u.jsx("input",{type:"email",className:"block w-full pl-10 pr-3 py-3 border border-white/10 rounded-xl bg-white/5 text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-white/20 focus:border-white/20 transition-all",placeholder:"ornek@bugless.com",value:t,onChange:d=>e(d.target.value),required:!0})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("div",{className:"flex items-center justify-between pl-1",children:u.jsx("label",{className:"text-sm font-medium text-gray-400",children:"ifre"})}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-500 group-focus-within:text-white transition-colors",children:u.jsx(fL,{className:"w-5 h-5"})}),u.jsx("input",{type:s?"text":"password",className:"block w-full pl-10 pr-10 py-3 border border-white/10 rounded-xl bg-white/5 text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-white/20 focus:border-white/20 transition-all",placeholder:"",value:n,onChange:d=>r(d.target.value),required:!0}),u.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-white transition-colors",children:s?u.jsx(iQ,{className:"w-5 h-5"}):u.jsx(Gc,{className:"w-5 h-5"})})]})]}),u.jsx(re,{type:"submit",disabled:o,className:"w-full h-12 bg-white text-black hover:bg-gray-200 hover:scale-[1.02] active:scale-[0.98] transition-all font-bold text-base shadow-[0_0_20px_-5px_rgba(255,255,255,0.3)] rounded-xl",children:o?u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Giri Yaplyor..."]}):u.jsxs("span",{className:"flex items-center gap-2",children:["Giri Yap ",u.jsx(nT,{className:"w-5 h-5"})]})})]}),u.jsx("div",{className:"pt-6 text-center text-sm text-gray-600",children:u.jsx("p",{className:"mt-4",children:" 2025 Bugless Digital. Tm haklar sakldr."})})]})})]})}const hRe=({children:t})=>{const{session:e,loading:n}=hn();return n?u.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-gray-50 dark:bg-slate-950",children:u.jsx(Hn,{className:"w-8 h-8 animate-spin text-primary"})}):e?t:u.jsx(cY,{to:"/login",replace:!0})};function fRe(){return u.jsxs(hY,{children:[u.jsx(qt,{path:"/login",element:u.jsx(dRe,{})}),u.jsx(qt,{path:"/proposal/:token",element:u.jsx(uRe,{})}),u.jsxs(qt,{path:"/",element:u.jsx(hRe,{children:u.jsx(kee,{})}),children:[u.jsx(qt,{index:!0,element:u.jsx(Fj,{})}),u.jsx(qt,{path:"dashboard",element:u.jsx(Fj,{})}),u.jsx(qt,{path:"users",element:u.jsx(AMe,{})}),u.jsx(qt,{path:"clients",element:u.jsx(IMe,{})}),u.jsx(qt,{path:"projects",element:u.jsx(PMe,{})}),u.jsx(qt,{path:"proposals",element:u.jsx($Me,{})}),u.jsx(qt,{path:"staff",element:u.jsx(LMe,{})}),u.jsx(qt,{path:"work-orders",element:u.jsx(FMe,{})}),u.jsx(qt,{path:"calendar",element:u.jsx(VMe,{})}),u.jsx(qt,{path:"finance",element:u.jsx(WMe,{})}),u.jsx(qt,{path:"income-expense",element:u.jsx(GMe,{})}),u.jsx(qt,{path:"collections",element:u.jsx(JMe,{})}),u.jsx(qt,{path:"external-tasks",element:u.jsx(QMe,{})}),u.jsx(qt,{path:"reports",element:u.jsx(oRe,{})}),u.jsx(qt,{path:"meeting-notes",element:u.jsx(aRe,{})}),u.jsx(qt,{path:"wiki",element:u.jsx(cRe,{})}),u.jsx(qt,{path:"search",element:u.jsx(ZMe,{})}),u.jsx(qt,{path:"settings",element:u.jsx(tRe,{})})]})]})}Hk.createRoot(document.getElementById("root")).render(u.jsx(lt.StrictMode,{children:u.jsx(vY,{children:u.jsx(VJ,{children:u.jsx(iX,{children:u.jsx(V_,{defaultColorScheme:"auto",children:u.jsx(fRe,{})})})})})}));
