{"version":3,"file":"ShowSelection-Dz-NEase.js","sources":["../src/extensions/ShowSelection/ShowSelection.ts"],"sourcesContent":["import { Plugin, PluginKey } from \"prosemirror-state\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\nimport {\n  createExtension,\n  createStore,\n} from \"../../editor/BlockNoteExtension.js\";\n\nconst PLUGIN_KEY = new PluginKey(`blocknote-show-selection`);\n\n/**\n * Plugin that shows adds a decoration around the current selection\n * This can be used to highlight the current selection in the UI even when the\n * text editor is not focused.\n */\nexport const ShowSelectionExtension = createExtension(({ editor }) => {\n  const store = createStore(\n    { enabled: false },\n    {\n      onUpdate() {\n        editor.transact((tr) => tr.setMeta(PLUGIN_KEY, {}));\n      },\n    },\n  );\n  return {\n    key: \"showSelection\",\n    store,\n    prosemirrorPlugins: [\n      new Plugin({\n        key: PLUGIN_KEY,\n        props: {\n          decorations: (state) => {\n            const { doc, selection } = state;\n            if (!store.state.enabled) {\n              return DecorationSet.empty;\n            }\n            const dec = Decoration.inline(selection.from, selection.to, {\n              \"data-show-selection\": \"true\",\n            });\n            return DecorationSet.create(doc, [dec]);\n          },\n        },\n      }),\n    ],\n    /**\n     * Show or hide the selection decoration\n     */\n    showSelection(shouldShow: boolean) {\n      store.setState({ enabled: shouldShow });\n    },\n  } as const;\n});\n"],"names":["PLUGIN_KEY","PluginKey","ShowSelectionExtension","createExtension","editor","store","createStore","tr","Plugin","state","doc","selection","DecorationSet","dec","Decoration","shouldShow"],"mappings":";;;AAOA,MAAMA,IAAa,IAAIC,EAAU,0BAA0B,GAO9CC,IAAyBC,EAAgB,CAAC,EAAE,QAAAC,QAAa;AACpE,QAAMC,IAAQC;AAAA,IACZ,EAAE,SAAS,GAAA;AAAA,IACX;AAAA,MACE,WAAW;AACT,QAAAF,EAAO,SAAS,CAACG,MAAOA,EAAG,QAAQP,GAAY,CAAA,CAAE,CAAC;AAAA,MACpD;AAAA,IAAA;AAAA,EACF;AAEF,SAAO;AAAA,IACL,KAAK;AAAA,IACL,OAAAK;AAAA,IACA,oBAAoB;AAAA,MAClB,IAAIG,EAAO;AAAA,QACT,KAAKR;AAAA,QACL,OAAO;AAAA,UACL,aAAa,CAACS,MAAU;AACtB,kBAAM,EAAE,KAAAC,GAAK,WAAAC,EAAA,IAAcF;AAC3B,gBAAI,CAACJ,EAAM,MAAM;AACf,qBAAOO,EAAc;AAEvB,kBAAMC,IAAMC,EAAW,OAAOH,EAAU,MAAMA,EAAU,IAAI;AAAA,cAC1D,uBAAuB;AAAA,YAAA,CACxB;AACD,mBAAOC,EAAc,OAAOF,GAAK,CAACG,CAAG,CAAC;AAAA,UACxC;AAAA,QAAA;AAAA,MACF,CACD;AAAA,IAAA;AAAA;AAAA;AAAA;AAAA,IAKH,cAAcE,GAAqB;AACjC,MAAAV,EAAM,SAAS,EAAE,SAASU,EAAA,CAAY;AAAA,IACxC;AAAA,EAAA;AAEJ,CAAC;"}