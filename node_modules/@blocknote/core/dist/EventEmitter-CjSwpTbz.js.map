{"version":3,"file":"EventEmitter-CjSwpTbz.js","sources":["../src/util/EventEmitter.ts"],"sourcesContent":["// from https://raw.githubusercontent.com/ueberdosis/tiptap/develop/packages/core/src/EventEmitter.ts (MIT)\n\ntype StringKeyOf<T> = Extract<keyof T, string>;\ntype CallbackType<\n  T extends Record<string, any>,\n  EventName extends StringKeyOf<T>,\n> = T[EventName] extends any[] ? T[EventName] : [T[EventName]];\ntype CallbackFunction<\n  T extends Record<string, any>,\n  EventName extends StringKeyOf<T>,\n> = (...props: CallbackType<T, EventName>) => any;\n\nexport class EventEmitter<T extends Record<string, any>> {\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  private callbacks: { [key: string]: Function[] } = {};\n\n  public on<EventName extends StringKeyOf<T>>(\n    event: EventName,\n    fn: CallbackFunction<T, EventName>,\n  ) {\n    if (!this.callbacks[event]) {\n      this.callbacks[event] = [];\n    }\n\n    this.callbacks[event].push(fn);\n\n    return () => this.off(event, fn);\n  }\n\n  protected emit<EventName extends StringKeyOf<T>>(\n    event: EventName,\n    ...args: CallbackType<T, EventName>\n  ) {\n    const callbacks = this.callbacks[event];\n\n    if (callbacks) {\n      callbacks.forEach((callback) => callback.apply(this, args));\n    }\n  }\n\n  public off<EventName extends StringKeyOf<T>>(\n    event: EventName,\n    fn?: CallbackFunction<T, EventName>,\n  ) {\n    const callbacks = this.callbacks[event];\n\n    if (callbacks) {\n      if (fn) {\n        this.callbacks[event] = callbacks.filter((callback) => callback !== fn);\n      } else {\n        delete this.callbacks[event];\n      }\n    }\n  }\n\n  protected removeAllListeners(): void {\n    this.callbacks = {};\n  }\n}\n"],"names":["EventEmitter","__publicField","event","fn","args","callbacks","callback"],"mappings":";;;AAYO,MAAMA,EAA4C;AAAA,EAAlD;AAEG;AAAA,IAAAC,EAAA,mBAA2C,CAAA;AAAA;AAAA,EAE5C,GACLC,GACAC,GACA;AACA,WAAK,KAAK,UAAUD,CAAK,MACvB,KAAK,UAAUA,CAAK,IAAI,CAAA,IAG1B,KAAK,UAAUA,CAAK,EAAE,KAAKC,CAAE,GAEtB,MAAM,KAAK,IAAID,GAAOC,CAAE;AAAA,EACjC;AAAA,EAEU,KACRD,MACGE,GACH;AACA,UAAMC,IAAY,KAAK,UAAUH,CAAK;AAEtC,IAAIG,KACFA,EAAU,QAAQ,CAACC,MAAaA,EAAS,MAAM,MAAMF,CAAI,CAAC;AAAA,EAE9D;AAAA,EAEO,IACLF,GACAC,GACA;AACA,UAAME,IAAY,KAAK,UAAUH,CAAK;AAEtC,IAAIG,MACEF,IACF,KAAK,UAAUD,CAAK,IAAIG,EAAU,OAAO,CAACC,MAAaA,MAAaH,CAAE,IAEtE,OAAO,KAAK,UAAUD,CAAK;AAAA,EAGjC;AAAA,EAEU,qBAA2B;AACnC,SAAK,YAAY,CAAA;AAAA,EACnB;AACF;"}